import{a as h}from"./chunk-HEPDQGCN.js";import{d as m}from"./chunk-AY5577XS.js";import"./chunk-UMKOLOIY.js";import"./chunk-RSMB47NK.js";import{a as u}from"./chunk-MLLFZOUT.js";import{a as r,e as d,f as p}from"./chunk-WH4S5YLH.js";import"./chunk-OQBMJDJ3.js";import{g as c,i as l}from"./chunk-3ZCZGH34.js";l();var A=u(d),y=[A.styles,m],o=class extends A{constructor(){super();this.unselectAnnotation=()=>{this.selectedAnnotation=null};this.unselectAnnotationEsc=t=>{t&&(t==null?void 0:t.key)!=="Escape"||(this.selectedAnnotation=null)};this.selectAnnotation=({detail:t})=>{let{uuid:n}=t;if(this.selectedAnnotation===n){this.selectedAnnotation=null;return}this.selectedAnnotation=n};this.checkLastAnnotation=t=>{var s,e;let n=this.annotations.filter(a=>a.resolved),i=this.annotations.filter(a=>!a.resolved);return this.annotationFilter==="All comments"?t===((s=n[n.length-1])==null?void 0:s.uuid):t===((e=i[i.length-1])==null?void 0:e.uuid)};this.annotations=[],this.participantsList=[]}updated(t){super.updated(t),this.updateComplete.then(()=>{let n=this.shadowRoot.querySelector(`[uuid='${this.selectedAnnotation}']`);if(!n)return;let i=this.lastCommentId===this.selectedAnnotation,s=i?0:-150,e=n.getClientRects()[0];e&&(this.scrollBy(0,e.y+s),i&&setTimeout(()=>{this.scrollBy(0,e.y+s)},200))})}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("select-annotation",this.selectAnnotation),window.document.body.addEventListener("keyup",this.unselectAnnotationEsc),window.document.body.addEventListener("unselect-annotation",this.unselectAnnotation)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("select-annotation",this.selectAnnotation),window.document.body.removeEventListener("keyup",this.unselectAnnotationEsc),window.document.body.removeEventListener("unselect-annotation",this.unselectAnnotation)}render(){return r` ${h(this.annotations.filter(t=>{var n;return(n=t.comments)==null?void 0:n.length}),t=>t.uuid,t=>r`
        <superviz-comments-annotation-item
          annotation=${JSON.stringify(t)}
          selected="${this.selectedAnnotation}"
          annotationFilter=${this.annotationFilter}
          uuid=${t.uuid}
          ?resolved=${t.resolved}
          isLastComment=${this.checkLastAnnotation(t.uuid)}
          participantsList=${JSON.stringify(this.participantsList)}
        >
        </superviz-comments-annotation-item>
      `)}`}};o.styles=y,o.properties={annotations:{type:Object},selectedAnnotation:{type:String},annotationFilter:{type:String},participantsList:{type:Object}},o=c([p("superviz-comments-content")],o);export{o as CommentsContent};
//# sourceMappingURL=content-OJV6GJVT.js.map
