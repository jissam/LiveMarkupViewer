{
  "version": 3,
  "sources": ["../../src/web-components/comments/components/float-button.ts"],
  "sourcesContent": ["import { CSSResultGroup, LitElement, PropertyValueMap, html } from 'lit';\n\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport { WebComponentsBase } from '../../base';\nimport importStyle from '../../base/utils/importStyle';\nimport { floatButtonStyle } from '../css';\nimport { CreateElement } from '../../global/decorators/create-element.decorator';\n\nconst WebComponentsBaseElement = WebComponentsBase(LitElement);\nconst styles: CSSResultGroup[] = [WebComponentsBaseElement.styles, floatButtonStyle];\n\n@CreateElement('superviz-comments-button')\nexport class CommentsFloatButton extends WebComponentsBaseElement {\n  static styles = styles;\n  declare isHidden: boolean;\n  declare positionStyles: string;\n  declare commentsPosition: string;\n  private shouldHide: boolean;\n  declare isActive: boolean;\n  declare mouseHovering: boolean;\n\n  static properties = {\n    positionStyles: { type: String },\n    isHidden: { type: Boolean },\n    commentsPosition: { type: String },\n    isActive: { type: Boolean },\n    mouseHovering: { type: Boolean },\n  };\n\n  constructor() {\n    super();\n    this.isHidden = true;\n    this.positionStyles = 'top: 20px; left: 20px;';\n    this.shouldHide = false;\n    this.commentsPosition = 'left';\n  }\n\n  protected firstUpdated(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>,\n  ): void {\n    super.firstUpdated(_changedProperties);\n    this.updateComplete.then(() => {\n      importStyle.call(this, ['comments']);\n    });\n\n    this.mouseHovering = false;\n\n    const button = this.shadowRoot.querySelector('.comments__floating-button');\n    button.addEventListener('mouseenter', () => {\n      setTimeout(() => button.classList.add('comments-floating-button-hovered'), 300);\n      this.mouseHovering = true;\n    });\n\n    button.addEventListener('mouseleave', () => {\n      button.classList.remove('comments-floating-button-hovered');\n      this.mouseHovering = false;\n    });\n  }\n\n  private toggle() {\n    this.emitEvent('toggle', {});\n  }\n\n  private onTogglePinActive = ({ detail: { isActive } }: CustomEvent) => {\n    this.isActive = isActive;\n  };\n\n  connectedCallback(): void {\n    super.connectedCallback();\n\n    window.document.body.addEventListener('toggle-annotation-sidebar', () => {\n      this.isHidden = !this.isHidden;\n    });\n    window.document.body.addEventListener('toggle-pin-active', this.onTogglePinActive);\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n\n    window.document.body.removeEventListener('toggle-annotation-sidebar', () => {\n      this.isHidden = !this.isHidden;\n    });\n    window.document.body.removeEventListener('toggle-pin-active', this.onTogglePinActive);\n  }\n\n  updated(changedProperties) {\n    super.updated(changedProperties);\n    this.updateComplete.then(() => {\n      const floatButton = this.shadowRoot.querySelector('.comments__floating-button');\n      if (!floatButton) return;\n\n      floatButton.setAttribute('style', this.positionStyles);\n    });\n  }\n\n  private calculateIfShouldHide() {\n    const sidebar = document\n      .getElementsByTagName('superviz-comments')[0]\n      ?.shadowRoot.querySelector('.superviz-comments');\n\n    const floatButton = this.shadowRoot.querySelector('.comments__floating-button');\n\n    if (!sidebar || !floatButton) return;\n\n    const {\n      left: sbLeft,\n      right: sbRight,\n      top: sbTop,\n      bottom: sbBottom,\n    } = sidebar.getBoundingClientRect();\n    const {\n      left: fbLeft,\n      right: fbRight,\n      top: fbTop,\n      bottom: fbBottom,\n    } = floatButton.getBoundingClientRect();\n\n    const sidebarHidesTop = sbBottom > fbTop && fbBottom > sbTop;\n    const sidebarHidesBottom = sbTop < fbBottom && fbTop < sbBottom;\n    const sidebarHidesLeft = sbRight > fbLeft && fbRight > sbLeft;\n    const sidebarHidesRight = sbLeft < fbRight && fbLeft < sbRight;\n\n    this.shouldHide =\n      (sidebarHidesBottom || sidebarHidesTop) && (sidebarHidesLeft || sidebarHidesRight);\n  }\n\n  protected render() {\n    this.calculateIfShouldHide();\n\n    const floatButtonClasses = {\n      'comments__floating-button': true,\n      'hide-button': !this.isHidden && this.shouldHide,\n      'is-active': this.isActive,\n      'is-inactive': !this.isActive,\n    };\n\n    const textBoxClasses = {\n      'comments__floating-button-text-box': true,\n      'comments__floating-button-text-box--hovered': this.mouseHovering,\n    };\n\n    const textClasses = {\n      text: true,\n      'text-big': true,\n      'text-bold': true,\n      'not-hovered': !this.mouseHovering,\n      'comments__floating-button__text': true,\n      textActive: this.isActive,\n      textInactive: !this.isActive,\n    };\n\n    return html` <button @click=${this.toggle} class=\"${classMap(floatButtonClasses)}\">\n      <div class=\"comments__floating-button__icon\">\n        <superviz-icon\n          size=\"sm\"\n          name=\"comment\"\n          color=${this.mouseHovering || this.isActive ? 'white' : 'black'}\n        ></superviz-icon>\n        <svg class=\"cross\" width=\"8px\" height=\"8px\" viewBox=\"0 0 8 8\">\n          <rect class=\"cross-bar-1\" x=\"0\" y=\"3\" width=\"8px\" height=\"2px\" />\n          <rect class=\"cross-bar-2\" x=\"0\" y=\"3\" width=\"8px\" height=\"2px\" />\n        </svg>\n      </div>\n      <div class=${classMap(textBoxClasses)}>\n        <p class=\"${classMap(textClasses)} comment\">Comment</p>\n        <p class=\"${classMap(textClasses)} cancel\">Cancel</p>\n      </div>\n    </button>`;\n  }\n}\n"],
  "mappings": "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",
  "names": ["init_define_process_env", "WebComponentsBaseElement", "WebComponentsBase", "s", "styles", "floatButtonStyle", "CommentsFloatButton", "isActive", "_changedProperties", "importStyle", "button", "changedProperties", "floatButton", "_a", "sidebar", "sbLeft", "sbRight", "sbTop", "sbBottom", "fbLeft", "fbRight", "fbTop", "fbBottom", "sidebarHidesTop", "sidebarHidesBottom", "sidebarHidesLeft", "sidebarHidesRight", "floatButtonClasses", "textBoxClasses", "textClasses", "x", "e", "__decorateClass", "CreateElement"]
}
