var rB=Object.create;var Qu=Object.defineProperty;var zS=Object.getOwnPropertyDescriptor;var iB=Object.getOwnPropertyNames;var nB=Object.getPrototypeOf,oB=Object.prototype.hasOwnProperty;var GS=(r,t)=>()=>(r&&(t=r(r=0)),t);var O=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),py=(r,t)=>{for(var e in t)Qu(r,e,{get:t[e],enumerable:!0})},ZS=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of iB(t))!oB.call(r,n)&&n!==e&&Qu(r,n,{get:()=>t[n],enumerable:!(i=zS(t,n))||i.enumerable});return r};var we=(r,t,e)=>(e=r!=null?rB(nB(r)):{},ZS(t||!r||!r.__esModule?Qu(e,"default",{value:r,enumerable:!0}):e,r)),sB=r=>ZS(Qu({},"__esModule",{value:!0}),r),he=(r,t,e,i)=>{for(var n=i>1?void 0:i?zS(t,e):t,o=r.length-1,u;o>=0;o--)(u=r[o])&&(n=(i?u(t,e,n):u(n))||n);return i&&n&&Qu(t,e,n),n};var g,d=GS(()=>{g={}});var nc=O((Nne,JS)=>{d();var Gs=1e3,Zs=Gs*60,Js=Zs*60,lo=Js*24,uB=lo*7,cB=lo*365.25;JS.exports=function(r,t){t=t||{};var e=typeof r;if(e==="string"&&r.length>0)return lB(r);if(e==="number"&&isFinite(r))return t.long?pB(r):dB(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function lB(r){if(r=String(r),!(r.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(t){var e=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return e*cB;case"weeks":case"week":case"w":return e*uB;case"days":case"day":case"d":return e*lo;case"hours":case"hour":case"hrs":case"hr":case"h":return e*Js;case"minutes":case"minute":case"mins":case"min":case"m":return e*Zs;case"seconds":case"second":case"secs":case"sec":case"s":return e*Gs;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e;default:return}}}}function dB(r){var t=Math.abs(r);return t>=lo?Math.round(r/lo)+"d":t>=Js?Math.round(r/Js)+"h":t>=Zs?Math.round(r/Zs)+"m":t>=Gs?Math.round(r/Gs)+"s":r+"ms"}function pB(r){var t=Math.abs(r);return t>=lo?zd(r,t,lo,"day"):t>=Js?zd(r,t,Js,"hour"):t>=Zs?zd(r,t,Zs,"minute"):t>=Gs?zd(r,t,Gs,"second"):r+" ms"}function zd(r,t,e,i){var n=t>=e*1.5;return Math.round(r/e)+" "+i+(n?"s":"")}});var hy=O((Dne,YS)=>{d();function hB(r){e.debug=e,e.default=e,e.coerce=l,e.disable=o,e.enable=n,e.enabled=u,e.humanize=nc(),e.destroy=h,Object.keys(r).forEach(f=>{e[f]=r[f]}),e.names=[],e.skips=[],e.formatters={};function t(f){let v=0;for(let b=0;b<f.length;b++)v=(v<<5)-v+f.charCodeAt(b),v|=0;return e.colors[Math.abs(v)%e.colors.length]}e.selectColor=t;function e(f){let v,b=null,w,x;function C(...I){if(!C.enabled)return;let A=C,j=Number(new Date),N=j-(v||j);A.diff=N,A.prev=v,A.curr=j,v=j,I[0]=e.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let U=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,($,te)=>{if($==="%%")return"%";U++;let Te=e.formatters[te];if(typeof Te=="function"){let Oe=I[U];$=Te.call(A,Oe),I.splice(U,1),U--}return $}),e.formatArgs.call(A,I),(A.log||e.log).apply(A,I)}return C.namespace=f,C.useColors=e.useColors(),C.color=e.selectColor(f),C.extend=i,C.destroy=e.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(w!==e.namespaces&&(w=e.namespaces,x=e.enabled(f)),x),set:I=>{b=I}}),typeof e.init=="function"&&e.init(C),C}function i(f,v){let b=e(this.namespace+(typeof v>"u"?":":v)+f);return b.log=this.log,b}function n(f){e.save(f),e.namespaces=f,e.names=[],e.skips=[];let v,b=(typeof f=="string"?f:"").split(/[\s,]+/),w=b.length;for(v=0;v<w;v++)b[v]&&(f=b[v].replace(/\*/g,".*?"),f[0]==="-"?e.skips.push(new RegExp("^"+f.slice(1)+"$")):e.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...e.names.map(c),...e.skips.map(c).map(v=>"-"+v)].join(",");return e.enable(""),f}function u(f){if(f[f.length-1]==="*")return!0;let v,b;for(v=0,b=e.skips.length;v<b;v++)if(e.skips[v].test(f))return!1;for(v=0,b=e.names.length;v<b;v++)if(e.names[v].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}YS.exports=hB});var KS=O((ar,Gd)=>{d();ar.formatArgs=mB;ar.save=vB;ar.load=gB;ar.useColors=fB;ar.storage=yB();ar.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ar.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function fB(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function mB(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Gd.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;r.splice(1,0,t,"color: inherit");let e=0,i=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(e++,n==="%c"&&(i=e))}),r.splice(i,0,t)}ar.log=console.debug||console.log||(()=>{});function vB(r){try{r?ar.storage.setItem("debug",r):ar.storage.removeItem("debug")}catch{}}function gB(){let r;try{r=ar.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=g.DEBUG),r}function yB(){try{return localStorage}catch{}}Gd.exports=hy()(ar);var{formatters:bB}=Gd.exports;bB.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var QS=O((Bne,XS)=>{"use strict";d();XS.exports=(r,t=process.argv)=>{let e=r.startsWith("-")?"":r.length===1?"-":"--",i=t.indexOf(e+r),n=t.indexOf("--");return i!==-1&&(n===-1||i<n)}});var oc=O((Wne,tO)=>{"use strict";d();var _B=require("os"),eO=require("tty"),Pr=QS(),{env:ft}=process,an;Pr("no-color")||Pr("no-colors")||Pr("color=false")||Pr("color=never")?an=0:(Pr("color")||Pr("colors")||Pr("color=true")||Pr("color=always"))&&(an=1);"FORCE_COLOR"in ft&&(ft.FORCE_COLOR==="true"?an=1:ft.FORCE_COLOR==="false"?an=0:an=ft.FORCE_COLOR.length===0?1:Math.min(parseInt(ft.FORCE_COLOR,10),3));function fy(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function my(r,t){if(an===0)return 0;if(Pr("color=16m")||Pr("color=full")||Pr("color=truecolor"))return 3;if(Pr("color=256"))return 2;if(r&&!t&&an===void 0)return 0;let e=an||0;if(ft.TERM==="dumb")return e;if(process.platform==="win32"){let i=_B.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in ft)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(i=>i in ft)||ft.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in ft)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ft.TEAMCITY_VERSION)?1:0;if(ft.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ft){let i=parseInt((ft.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ft.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ft.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ft.TERM)||"COLORTERM"in ft?1:e}function EB(r){let t=my(r,r&&r.isTTY);return fy(t)}tO.exports={supportsColor:EB,stdout:fy(my(!0,eO.isatty(1))),stderr:fy(my(!0,eO.isatty(2)))}});var iO=O((St,Jd)=>{d();var wB=require("tty"),Zd=require("util");St.init=AB;St.log=TB;St.formatArgs=OB;St.save=CB;St.load=PB;St.useColors=SB;St.destroy=Zd.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");St.colors=[6,2,3,4,5,1];try{let r=oc();r&&(r.stderr||r).level>=2&&(St.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}St.inspectOpts=Object.keys(g).filter(r=>/^debug_/i.test(r)).reduce((r,t)=>{let e=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,o)=>o.toUpperCase()),i=g[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),r[e]=i,r},{});function SB(){return"colors"in St.inspectOpts?!!St.inspectOpts.colors:wB.isatty(process.stderr.fd)}function OB(r){let{namespace:t,useColors:e}=this;if(e){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),o=`  ${n};1m${t} \x1B[0m`;r[0]=o+r[0].split(`
`).join(`
`+o),r.push(n+"m+"+Jd.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=xB()+t+" "+r[0]}function xB(){return St.inspectOpts.hideDate?"":new Date().toISOString()+" "}function TB(...r){return process.stderr.write(Zd.format(...r)+`
`)}function CB(r){r?g.DEBUG=r:delete g.DEBUG}function PB(){return g.DEBUG}function AB(r){r.inspectOpts={};let t=Object.keys(St.inspectOpts);for(let e=0;e<t.length;e++)r.inspectOpts[t[e]]=St.inspectOpts[t[e]]}Jd.exports=hy()(St);var{formatters:rO}=Jd.exports;rO.o=function(r){return this.inspectOpts.colors=this.useColors,Zd.inspect(r,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};rO.O=function(r){return this.inspectOpts.colors=this.useColors,Zd.inspect(r,this.inspectOpts)}});var gy=O((Vne,vy)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vy.exports=KS():vy.exports=iO()});var Yd=O((Jne,oO)=>{d();function IB(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}oO.exports=IB});var aO=O((Kne,sO)=>{d();var MB=typeof global=="object"&&global&&global.Object===Object&&global;sO.exports=MB});var yy=O((Qne,uO)=>{d();var LB=aO(),kB=typeof self=="object"&&self&&self.Object===Object&&self,RB=LB||kB||Function("return this")();uO.exports=RB});var lO=O((toe,cO)=>{d();var NB=yy(),FB=function(){return NB.Date.now()};cO.exports=FB});var pO=O((ioe,dO)=>{d();var DB=/\s/;function qB(r){for(var t=r.length;t--&&DB.test(r.charAt(t)););return t}dO.exports=qB});var fO=O((ooe,hO)=>{d();var $B=pO(),BB=/^\s+/;function jB(r){return r&&r.slice(0,$B(r)+1).replace(BB,"")}hO.exports=jB});var by=O((aoe,mO)=>{d();var WB=yy(),UB=WB.Symbol;mO.exports=UB});var bO=O((coe,yO)=>{d();var vO=by(),gO=Object.prototype,HB=gO.hasOwnProperty,VB=gO.toString,sc=vO?vO.toStringTag:void 0;function zB(r){var t=HB.call(r,sc),e=r[sc];try{r[sc]=void 0;var i=!0}catch{}var n=VB.call(r);return i&&(t?r[sc]=e:delete r[sc]),n}yO.exports=zB});var EO=O((doe,_O)=>{d();var GB=Object.prototype,ZB=GB.toString;function JB(r){return ZB.call(r)}_O.exports=JB});var xO=O((hoe,OO)=>{d();var wO=by(),YB=bO(),KB=EO(),XB="[object Null]",QB="[object Undefined]",SO=wO?wO.toStringTag:void 0;function e3(r){return r==null?r===void 0?QB:XB:SO&&SO in Object(r)?YB(r):KB(r)}OO.exports=e3});var CO=O((moe,TO)=>{d();function t3(r){return r!=null&&typeof r=="object"}TO.exports=t3});var AO=O((goe,PO)=>{d();var r3=xO(),i3=CO(),n3="[object Symbol]";function o3(r){return typeof r=="symbol"||i3(r)&&r3(r)==n3}PO.exports=o3});var kO=O((boe,LO)=>{d();var s3=fO(),IO=Yd(),a3=AO(),MO=NaN,u3=/^[-+]0x[0-9a-f]+$/i,c3=/^0b[01]+$/i,l3=/^0o[0-7]+$/i,d3=parseInt;function p3(r){if(typeof r=="number")return r;if(a3(r))return MO;if(IO(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=IO(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=s3(r);var e=c3.test(r);return e||l3.test(r)?d3(r.slice(2),e?2:8):u3.test(r)?MO:+r}LO.exports=p3});var FO=O((Eoe,NO)=>{d();var h3=Yd(),_y=lO(),RO=kO(),f3="Expected a function",m3=Math.max,v3=Math.min;function g3(r,t,e){var i,n,o,u,c,l,h=0,f=!1,v=!1,b=!0;if(typeof r!="function")throw new TypeError(f3);t=RO(t)||0,h3(e)&&(f=!!e.leading,v="maxWait"in e,o=v?m3(RO(e.maxWait)||0,t):o,b="trailing"in e?!!e.trailing:b);function w($){var te=i,Te=n;return i=n=void 0,h=$,u=r.apply(Te,te),u}function x($){return h=$,c=setTimeout(A,t),f?w($):u}function C($){var te=$-l,Te=$-h,Oe=t-te;return v?v3(Oe,o-Te):Oe}function I($){var te=$-l,Te=$-h;return l===void 0||te>=t||te<0||v&&Te>=o}function A(){var $=_y();if(I($))return j($);c=setTimeout(A,C($))}function j($){return c=void 0,b&&i?w($):(i=n=void 0,u)}function N(){c!==void 0&&clearTimeout(c),h=0,i=l=n=c=void 0}function U(){return c===void 0?u:j(_y())}function ee(){var $=_y(),te=I($);if(i=arguments,n=this,l=$,te){if(c===void 0)return x(l);if(v)return clearTimeout(c),c=setTimeout(A,t),w(l)}return c===void 0&&(c=setTimeout(A,t)),u}return ee.cancel=N,ee.flush=U,ee}NO.exports=g3});var Ey=O((Soe,DO)=>{d();var y3=FO(),b3=Yd(),_3="Expected a function";function E3(r,t,e){var i=!0,n=!0;if(typeof r!="function")throw new TypeError(_3);return b3(e)&&(i="leading"in e?!!e.leading:i,n="trailing"in e?!!e.trailing:n),y3(r,t,{leading:i,maxWait:t,trailing:n})}DO.exports=E3});var po=O((Ys,ac)=>{d();(function(){var r,t="4.17.21",e=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",n="Expected a function",o="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,l="__lodash_placeholder__",h=1,f=2,v=4,b=1,w=2,x=1,C=2,I=4,A=8,j=16,N=32,U=64,ee=128,$=256,te=512,Te=30,Oe="...",tt=800,yr=16,ot=1,Kn=2,Xn=3,Xt=1/0,$t=9007199254740991,Qn=17976931348623157e292,Ts=NaN,br=4294967295,fE=br-1,Hv=br>>>1,Bt=[["ary",ee],["bind",x],["bindKey",C],["curry",A],["curryRight",j],["flip",te],["partial",N],["partialRight",U],["rearg",$]],Qt="[object Arguments]",er="[object Array]",Cs="[object AsyncFunction]",Mu="[object Boolean]",Lu="[object Date]",yk="[object DOMException]",ed="[object Error]",td="[object Function]",mE="[object GeneratorFunction]",Fr="[object Map]",ku="[object Number]",bk="[object Null]",yi="[object Object]",vE="[object Promise]",_k="[object Proxy]",Ru="[object RegExp]",Dr="[object Set]",Nu="[object String]",rd="[object Symbol]",Ek="[object Undefined]",Fu="[object WeakMap]",wk="[object WeakSet]",Du="[object ArrayBuffer]",Ps="[object DataView]",Vv="[object Float32Array]",zv="[object Float64Array]",Gv="[object Int8Array]",Zv="[object Int16Array]",Jv="[object Int32Array]",Yv="[object Uint8Array]",Kv="[object Uint8ClampedArray]",Xv="[object Uint16Array]",Qv="[object Uint32Array]",Sk=/\b__p \+= '';/g,Ok=/\b(__p \+=) '' \+/g,xk=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gE=/&(?:amp|lt|gt|quot|#39);/g,yE=/[&<>"']/g,Tk=RegExp(gE.source),Ck=RegExp(yE.source),Pk=/<%-([\s\S]+?)%>/g,Ak=/<%([\s\S]+?)%>/g,bE=/<%=([\s\S]+?)%>/g,Ik=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mk=/^\w*$/,Lk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eg=/[\\^$.*+?()[\]{}|]/g,kk=RegExp(eg.source),tg=/^\s+/,Rk=/\s/,Nk=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fk=/\{\n\/\* \[wrapped with (.+)\] \*/,Dk=/,? & /,qk=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$k=/[()=,{}\[\]\/\s]/,Bk=/\\(\\)?/g,jk=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_E=/\w*$/,Wk=/^[-+]0x[0-9a-f]+$/i,Uk=/^0b[01]+$/i,Hk=/^\[object .+?Constructor\]$/,Vk=/^0o[0-7]+$/i,zk=/^(?:0|[1-9]\d*)$/,Gk=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,id=/($^)/,Zk=/['\n\r\u2028\u2029\\]/g,nd="\\ud800-\\udfff",Jk="\\u0300-\\u036f",Yk="\\ufe20-\\ufe2f",Kk="\\u20d0-\\u20ff",EE=Jk+Yk+Kk,wE="\\u2700-\\u27bf",SE="a-z\\xdf-\\xf6\\xf8-\\xff",Xk="\\xac\\xb1\\xd7\\xf7",Qk="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",eR="\\u2000-\\u206f",tR=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",OE="A-Z\\xc0-\\xd6\\xd8-\\xde",xE="\\ufe0e\\ufe0f",TE=Xk+Qk+eR+tR,rg="['\u2019]",rR="["+nd+"]",CE="["+TE+"]",od="["+EE+"]",PE="\\d+",iR="["+wE+"]",AE="["+SE+"]",IE="[^"+nd+TE+PE+wE+SE+OE+"]",ig="\\ud83c[\\udffb-\\udfff]",nR="(?:"+od+"|"+ig+")",ME="[^"+nd+"]",ng="(?:\\ud83c[\\udde6-\\uddff]){2}",og="[\\ud800-\\udbff][\\udc00-\\udfff]",As="["+OE+"]",LE="\\u200d",kE="(?:"+AE+"|"+IE+")",oR="(?:"+As+"|"+IE+")",RE="(?:"+rg+"(?:d|ll|m|re|s|t|ve))?",NE="(?:"+rg+"(?:D|LL|M|RE|S|T|VE))?",FE=nR+"?",DE="["+xE+"]?",sR="(?:"+LE+"(?:"+[ME,ng,og].join("|")+")"+DE+FE+")*",aR="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",uR="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",qE=DE+FE+sR,cR="(?:"+[iR,ng,og].join("|")+")"+qE,lR="(?:"+[ME+od+"?",od,ng,og,rR].join("|")+")",dR=RegExp(rg,"g"),pR=RegExp(od,"g"),sg=RegExp(ig+"(?="+ig+")|"+lR+qE,"g"),hR=RegExp([As+"?"+AE+"+"+RE+"(?="+[CE,As,"$"].join("|")+")",oR+"+"+NE+"(?="+[CE,As+kE,"$"].join("|")+")",As+"?"+kE+"+"+RE,As+"+"+NE,uR,aR,PE,cR].join("|"),"g"),fR=RegExp("["+LE+nd+EE+xE+"]"),mR=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vR=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gR=-1,Ve={};Ve[Vv]=Ve[zv]=Ve[Gv]=Ve[Zv]=Ve[Jv]=Ve[Yv]=Ve[Kv]=Ve[Xv]=Ve[Qv]=!0,Ve[Qt]=Ve[er]=Ve[Du]=Ve[Mu]=Ve[Ps]=Ve[Lu]=Ve[ed]=Ve[td]=Ve[Fr]=Ve[ku]=Ve[yi]=Ve[Ru]=Ve[Dr]=Ve[Nu]=Ve[Fu]=!1;var He={};He[Qt]=He[er]=He[Du]=He[Ps]=He[Mu]=He[Lu]=He[Vv]=He[zv]=He[Gv]=He[Zv]=He[Jv]=He[Fr]=He[ku]=He[yi]=He[Ru]=He[Dr]=He[Nu]=He[rd]=He[Yv]=He[Kv]=He[Xv]=He[Qv]=!0,He[ed]=He[td]=He[Fu]=!1;var yR={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},bR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_R={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ER={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wR=parseFloat,SR=parseInt,$E=typeof global=="object"&&global&&global.Object===Object&&global,OR=typeof self=="object"&&self&&self.Object===Object&&self,pt=$E||OR||Function("return this")(),ag=typeof Ys=="object"&&Ys&&!Ys.nodeType&&Ys,eo=ag&&typeof ac=="object"&&ac&&!ac.nodeType&&ac,BE=eo&&eo.exports===ag,ug=BE&&$E.process,_r=function(){try{var M=eo&&eo.require&&eo.require("util").types;return M||ug&&ug.binding&&ug.binding("util")}catch{}}(),jE=_r&&_r.isArrayBuffer,WE=_r&&_r.isDate,UE=_r&&_r.isMap,HE=_r&&_r.isRegExp,VE=_r&&_r.isSet,zE=_r&&_r.isTypedArray;function tr(M,R,k){switch(k.length){case 0:return M.call(R);case 1:return M.call(R,k[0]);case 2:return M.call(R,k[0],k[1]);case 3:return M.call(R,k[0],k[1],k[2])}return M.apply(R,k)}function xR(M,R,k,J){for(var de=-1,Le=M==null?0:M.length;++de<Le;){var ct=M[de];R(J,ct,k(ct),M)}return J}function Er(M,R){for(var k=-1,J=M==null?0:M.length;++k<J&&R(M[k],k,M)!==!1;);return M}function TR(M,R){for(var k=M==null?0:M.length;k--&&R(M[k],k,M)!==!1;);return M}function GE(M,R){for(var k=-1,J=M==null?0:M.length;++k<J;)if(!R(M[k],k,M))return!1;return!0}function Yi(M,R){for(var k=-1,J=M==null?0:M.length,de=0,Le=[];++k<J;){var ct=M[k];R(ct,k,M)&&(Le[de++]=ct)}return Le}function sd(M,R){var k=M==null?0:M.length;return!!k&&Is(M,R,0)>-1}function cg(M,R,k){for(var J=-1,de=M==null?0:M.length;++J<de;)if(k(R,M[J]))return!0;return!1}function ze(M,R){for(var k=-1,J=M==null?0:M.length,de=Array(J);++k<J;)de[k]=R(M[k],k,M);return de}function Ki(M,R){for(var k=-1,J=R.length,de=M.length;++k<J;)M[de+k]=R[k];return M}function lg(M,R,k,J){var de=-1,Le=M==null?0:M.length;for(J&&Le&&(k=M[++de]);++de<Le;)k=R(k,M[de],de,M);return k}function CR(M,R,k,J){var de=M==null?0:M.length;for(J&&de&&(k=M[--de]);de--;)k=R(k,M[de],de,M);return k}function dg(M,R){for(var k=-1,J=M==null?0:M.length;++k<J;)if(R(M[k],k,M))return!0;return!1}var PR=pg("length");function AR(M){return M.split("")}function IR(M){return M.match(qk)||[]}function ZE(M,R,k){var J;return k(M,function(de,Le,ct){if(R(de,Le,ct))return J=Le,!1}),J}function ad(M,R,k,J){for(var de=M.length,Le=k+(J?1:-1);J?Le--:++Le<de;)if(R(M[Le],Le,M))return Le;return-1}function Is(M,R,k){return R===R?WR(M,R,k):ad(M,JE,k)}function MR(M,R,k,J){for(var de=k-1,Le=M.length;++de<Le;)if(J(M[de],R))return de;return-1}function JE(M){return M!==M}function YE(M,R){var k=M==null?0:M.length;return k?fg(M,R)/k:Ts}function pg(M){return function(R){return R==null?r:R[M]}}function hg(M){return function(R){return M==null?r:M[R]}}function KE(M,R,k,J,de){return de(M,function(Le,ct,Ue){k=J?(J=!1,Le):R(k,Le,ct,Ue)}),k}function LR(M,R){var k=M.length;for(M.sort(R);k--;)M[k]=M[k].value;return M}function fg(M,R){for(var k,J=-1,de=M.length;++J<de;){var Le=R(M[J]);Le!==r&&(k=k===r?Le:k+Le)}return k}function mg(M,R){for(var k=-1,J=Array(M);++k<M;)J[k]=R(k);return J}function kR(M,R){return ze(R,function(k){return[k,M[k]]})}function XE(M){return M&&M.slice(0,rw(M)+1).replace(tg,"")}function rr(M){return function(R){return M(R)}}function vg(M,R){return ze(R,function(k){return M[k]})}function qu(M,R){return M.has(R)}function QE(M,R){for(var k=-1,J=M.length;++k<J&&Is(R,M[k],0)>-1;);return k}function ew(M,R){for(var k=M.length;k--&&Is(R,M[k],0)>-1;);return k}function RR(M,R){for(var k=M.length,J=0;k--;)M[k]===R&&++J;return J}var NR=hg(yR),FR=hg(bR);function DR(M){return"\\"+ER[M]}function qR(M,R){return M==null?r:M[R]}function Ms(M){return fR.test(M)}function $R(M){return mR.test(M)}function BR(M){for(var R,k=[];!(R=M.next()).done;)k.push(R.value);return k}function gg(M){var R=-1,k=Array(M.size);return M.forEach(function(J,de){k[++R]=[de,J]}),k}function tw(M,R){return function(k){return M(R(k))}}function Xi(M,R){for(var k=-1,J=M.length,de=0,Le=[];++k<J;){var ct=M[k];(ct===R||ct===l)&&(M[k]=l,Le[de++]=k)}return Le}function ud(M){var R=-1,k=Array(M.size);return M.forEach(function(J){k[++R]=J}),k}function jR(M){var R=-1,k=Array(M.size);return M.forEach(function(J){k[++R]=[J,J]}),k}function WR(M,R,k){for(var J=k-1,de=M.length;++J<de;)if(M[J]===R)return J;return-1}function UR(M,R,k){for(var J=k+1;J--;)if(M[J]===R)return J;return J}function Ls(M){return Ms(M)?VR(M):PR(M)}function qr(M){return Ms(M)?zR(M):AR(M)}function rw(M){for(var R=M.length;R--&&Rk.test(M.charAt(R)););return R}var HR=hg(_R);function VR(M){for(var R=sg.lastIndex=0;sg.test(M);)++R;return R}function zR(M){return M.match(sg)||[]}function GR(M){return M.match(hR)||[]}var ZR=function M(R){R=R==null?pt:Qi.defaults(pt.Object(),R,Qi.pick(pt,vR));var k=R.Array,J=R.Date,de=R.Error,Le=R.Function,ct=R.Math,Ue=R.Object,yg=R.RegExp,JR=R.String,wr=R.TypeError,cd=k.prototype,YR=Le.prototype,ks=Ue.prototype,ld=R["__core-js_shared__"],dd=YR.toString,$e=ks.hasOwnProperty,KR=0,iw=function(){var s=/[^.]+$/.exec(ld&&ld.keys&&ld.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),pd=ks.toString,XR=dd.call(Ue),QR=pt._,eN=yg("^"+dd.call($e).replace(eg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hd=BE?R.Buffer:r,en=R.Symbol,fd=R.Uint8Array,nw=hd?hd.allocUnsafe:r,md=tw(Ue.getPrototypeOf,Ue),ow=Ue.create,sw=ks.propertyIsEnumerable,vd=cd.splice,aw=en?en.isConcatSpreadable:r,$u=en?en.iterator:r,to=en?en.toStringTag:r,gd=function(){try{var s=so(Ue,"defineProperty");return s({},"",{}),s}catch{}}(),tN=R.clearTimeout!==pt.clearTimeout&&R.clearTimeout,rN=J&&J.now!==pt.Date.now&&J.now,iN=R.setTimeout!==pt.setTimeout&&R.setTimeout,yd=ct.ceil,bd=ct.floor,bg=Ue.getOwnPropertySymbols,nN=hd?hd.isBuffer:r,uw=R.isFinite,oN=cd.join,sN=tw(Ue.keys,Ue),lt=ct.max,Pt=ct.min,aN=J.now,uN=R.parseInt,cw=ct.random,cN=cd.reverse,_g=so(R,"DataView"),Bu=so(R,"Map"),Eg=so(R,"Promise"),Rs=so(R,"Set"),ju=so(R,"WeakMap"),Wu=so(Ue,"create"),_d=ju&&new ju,Ns={},lN=ao(_g),dN=ao(Bu),pN=ao(Eg),hN=ao(Rs),fN=ao(ju),Ed=en?en.prototype:r,Uu=Ed?Ed.valueOf:r,lw=Ed?Ed.toString:r;function E(s){if(Qe(s)&&!pe(s)&&!(s instanceof Ce)){if(s instanceof Sr)return s;if($e.call(s,"__wrapped__"))return dS(s)}return new Sr(s)}var Fs=function(){function s(){}return function(a){if(!Je(a))return{};if(ow)return ow(a);s.prototype=a;var p=new s;return s.prototype=r,p}}();function wd(){}function Sr(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=r}E.templateSettings={escape:Pk,evaluate:Ak,interpolate:bE,variable:"",imports:{_:E}},E.prototype=wd.prototype,E.prototype.constructor=E,Sr.prototype=Fs(wd.prototype),Sr.prototype.constructor=Sr;function Ce(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=br,this.__views__=[]}function mN(){var s=new Ce(this.__wrapped__);return s.__actions__=jt(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=jt(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=jt(this.__views__),s}function vN(){if(this.__filtered__){var s=new Ce(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function gN(){var s=this.__wrapped__.value(),a=this.__dir__,p=pe(s),m=a<0,y=p?s.length:0,S=AF(0,y,this.__views__),T=S.start,P=S.end,L=P-T,F=m?P:T-1,D=this.__iteratees__,q=D.length,H=0,Y=Pt(L,this.__takeCount__);if(!p||!m&&y==L&&Y==L)return Rw(s,this.__actions__);var ne=[];e:for(;L--&&H<Y;){F+=a;for(var Ee=-1,oe=s[F];++Ee<q;){var xe=D[Ee],Ae=xe.iteratee,or=xe.type,Ft=Ae(oe);if(or==Kn)oe=Ft;else if(!Ft){if(or==ot)continue e;break e}}ne[H++]=oe}return ne}Ce.prototype=Fs(wd.prototype),Ce.prototype.constructor=Ce;function ro(s){var a=-1,p=s==null?0:s.length;for(this.clear();++a<p;){var m=s[a];this.set(m[0],m[1])}}function yN(){this.__data__=Wu?Wu(null):{},this.size=0}function bN(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function _N(s){var a=this.__data__;if(Wu){var p=a[s];return p===u?r:p}return $e.call(a,s)?a[s]:r}function EN(s){var a=this.__data__;return Wu?a[s]!==r:$e.call(a,s)}function wN(s,a){var p=this.__data__;return this.size+=this.has(s)?0:1,p[s]=Wu&&a===r?u:a,this}ro.prototype.clear=yN,ro.prototype.delete=bN,ro.prototype.get=_N,ro.prototype.has=EN,ro.prototype.set=wN;function bi(s){var a=-1,p=s==null?0:s.length;for(this.clear();++a<p;){var m=s[a];this.set(m[0],m[1])}}function SN(){this.__data__=[],this.size=0}function ON(s){var a=this.__data__,p=Sd(a,s);if(p<0)return!1;var m=a.length-1;return p==m?a.pop():vd.call(a,p,1),--this.size,!0}function xN(s){var a=this.__data__,p=Sd(a,s);return p<0?r:a[p][1]}function TN(s){return Sd(this.__data__,s)>-1}function CN(s,a){var p=this.__data__,m=Sd(p,s);return m<0?(++this.size,p.push([s,a])):p[m][1]=a,this}bi.prototype.clear=SN,bi.prototype.delete=ON,bi.prototype.get=xN,bi.prototype.has=TN,bi.prototype.set=CN;function _i(s){var a=-1,p=s==null?0:s.length;for(this.clear();++a<p;){var m=s[a];this.set(m[0],m[1])}}function PN(){this.size=0,this.__data__={hash:new ro,map:new(Bu||bi),string:new ro}}function AN(s){var a=Nd(this,s).delete(s);return this.size-=a?1:0,a}function IN(s){return Nd(this,s).get(s)}function MN(s){return Nd(this,s).has(s)}function LN(s,a){var p=Nd(this,s),m=p.size;return p.set(s,a),this.size+=p.size==m?0:1,this}_i.prototype.clear=PN,_i.prototype.delete=AN,_i.prototype.get=IN,_i.prototype.has=MN,_i.prototype.set=LN;function io(s){var a=-1,p=s==null?0:s.length;for(this.__data__=new _i;++a<p;)this.add(s[a])}function kN(s){return this.__data__.set(s,u),this}function RN(s){return this.__data__.has(s)}io.prototype.add=io.prototype.push=kN,io.prototype.has=RN;function $r(s){var a=this.__data__=new bi(s);this.size=a.size}function NN(){this.__data__=new bi,this.size=0}function FN(s){var a=this.__data__,p=a.delete(s);return this.size=a.size,p}function DN(s){return this.__data__.get(s)}function qN(s){return this.__data__.has(s)}function $N(s,a){var p=this.__data__;if(p instanceof bi){var m=p.__data__;if(!Bu||m.length<e-1)return m.push([s,a]),this.size=++p.size,this;p=this.__data__=new _i(m)}return p.set(s,a),this.size=p.size,this}$r.prototype.clear=NN,$r.prototype.delete=FN,$r.prototype.get=DN,$r.prototype.has=qN,$r.prototype.set=$N;function dw(s,a){var p=pe(s),m=!p&&uo(s),y=!p&&!m&&sn(s),S=!p&&!m&&!y&&Bs(s),T=p||m||y||S,P=T?mg(s.length,JR):[],L=P.length;for(var F in s)(a||$e.call(s,F))&&!(T&&(F=="length"||y&&(F=="offset"||F=="parent")||S&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||Oi(F,L)))&&P.push(F);return P}function pw(s){var a=s.length;return a?s[Lg(0,a-1)]:r}function BN(s,a){return Fd(jt(s),no(a,0,s.length))}function jN(s){return Fd(jt(s))}function wg(s,a,p){(p!==r&&!Br(s[a],p)||p===r&&!(a in s))&&Ei(s,a,p)}function Hu(s,a,p){var m=s[a];(!($e.call(s,a)&&Br(m,p))||p===r&&!(a in s))&&Ei(s,a,p)}function Sd(s,a){for(var p=s.length;p--;)if(Br(s[p][0],a))return p;return-1}function WN(s,a,p,m){return tn(s,function(y,S,T){a(m,y,p(y),T)}),m}function hw(s,a){return s&&ri(a,ht(a),s)}function UN(s,a){return s&&ri(a,Ut(a),s)}function Ei(s,a,p){a=="__proto__"&&gd?gd(s,a,{configurable:!0,enumerable:!0,value:p,writable:!0}):s[a]=p}function Sg(s,a){for(var p=-1,m=a.length,y=k(m),S=s==null;++p<m;)y[p]=S?r:iy(s,a[p]);return y}function no(s,a,p){return s===s&&(p!==r&&(s=s<=p?s:p),a!==r&&(s=s>=a?s:a)),s}function Or(s,a,p,m,y,S){var T,P=a&h,L=a&f,F=a&v;if(p&&(T=y?p(s,m,y,S):p(s)),T!==r)return T;if(!Je(s))return s;var D=pe(s);if(D){if(T=MF(s),!P)return jt(s,T)}else{var q=At(s),H=q==td||q==mE;if(sn(s))return Dw(s,P);if(q==yi||q==Qt||H&&!y){if(T=L||H?{}:rS(s),!P)return L?_F(s,UN(T,s)):bF(s,hw(T,s))}else{if(!He[q])return y?s:{};T=LF(s,q,P)}}S||(S=new $r);var Y=S.get(s);if(Y)return Y;S.set(s,T),MS(s)?s.forEach(function(oe){T.add(Or(oe,a,p,oe,s,S))}):AS(s)&&s.forEach(function(oe,xe){T.set(xe,Or(oe,a,p,xe,s,S))});var ne=F?L?Ug:Wg:L?Ut:ht,Ee=D?r:ne(s);return Er(Ee||s,function(oe,xe){Ee&&(xe=oe,oe=s[xe]),Hu(T,xe,Or(oe,a,p,xe,s,S))}),T}function HN(s){var a=ht(s);return function(p){return fw(p,s,a)}}function fw(s,a,p){var m=p.length;if(s==null)return!m;for(s=Ue(s);m--;){var y=p[m],S=a[y],T=s[y];if(T===r&&!(y in s)||!S(T))return!1}return!0}function mw(s,a,p){if(typeof s!="function")throw new wr(n);return Ku(function(){s.apply(r,p)},a)}function Vu(s,a,p,m){var y=-1,S=sd,T=!0,P=s.length,L=[],F=a.length;if(!P)return L;p&&(a=ze(a,rr(p))),m?(S=cg,T=!1):a.length>=e&&(S=qu,T=!1,a=new io(a));e:for(;++y<P;){var D=s[y],q=p==null?D:p(D);if(D=m||D!==0?D:0,T&&q===q){for(var H=F;H--;)if(a[H]===q)continue e;L.push(D)}else S(a,q,m)||L.push(D)}return L}var tn=Ww(ti),vw=Ww(xg,!0);function VN(s,a){var p=!0;return tn(s,function(m,y,S){return p=!!a(m,y,S),p}),p}function Od(s,a,p){for(var m=-1,y=s.length;++m<y;){var S=s[m],T=a(S);if(T!=null&&(P===r?T===T&&!nr(T):p(T,P)))var P=T,L=S}return L}function zN(s,a,p,m){var y=s.length;for(p=ye(p),p<0&&(p=-p>y?0:y+p),m=m===r||m>y?y:ye(m),m<0&&(m+=y),m=p>m?0:kS(m);p<m;)s[p++]=a;return s}function gw(s,a){var p=[];return tn(s,function(m,y,S){a(m,y,S)&&p.push(m)}),p}function wt(s,a,p,m,y){var S=-1,T=s.length;for(p||(p=RF),y||(y=[]);++S<T;){var P=s[S];a>0&&p(P)?a>1?wt(P,a-1,p,m,y):Ki(y,P):m||(y[y.length]=P)}return y}var Og=Uw(),yw=Uw(!0);function ti(s,a){return s&&Og(s,a,ht)}function xg(s,a){return s&&yw(s,a,ht)}function xd(s,a){return Yi(a,function(p){return xi(s[p])})}function oo(s,a){a=nn(a,s);for(var p=0,m=a.length;s!=null&&p<m;)s=s[ii(a[p++])];return p&&p==m?s:r}function bw(s,a,p){var m=a(s);return pe(s)?m:Ki(m,p(s))}function Rt(s){return s==null?s===r?Ek:bk:to&&to in Ue(s)?PF(s):jF(s)}function Tg(s,a){return s>a}function GN(s,a){return s!=null&&$e.call(s,a)}function ZN(s,a){return s!=null&&a in Ue(s)}function JN(s,a,p){return s>=Pt(a,p)&&s<lt(a,p)}function Cg(s,a,p){for(var m=p?cg:sd,y=s[0].length,S=s.length,T=S,P=k(S),L=1/0,F=[];T--;){var D=s[T];T&&a&&(D=ze(D,rr(a))),L=Pt(D.length,L),P[T]=!p&&(a||y>=120&&D.length>=120)?new io(T&&D):r}D=s[0];var q=-1,H=P[0];e:for(;++q<y&&F.length<L;){var Y=D[q],ne=a?a(Y):Y;if(Y=p||Y!==0?Y:0,!(H?qu(H,ne):m(F,ne,p))){for(T=S;--T;){var Ee=P[T];if(!(Ee?qu(Ee,ne):m(s[T],ne,p)))continue e}H&&H.push(ne),F.push(Y)}}return F}function YN(s,a,p,m){return ti(s,function(y,S,T){a(m,p(y),S,T)}),m}function zu(s,a,p){a=nn(a,s),s=sS(s,a);var m=s==null?s:s[ii(Tr(a))];return m==null?r:tr(m,s,p)}function _w(s){return Qe(s)&&Rt(s)==Qt}function KN(s){return Qe(s)&&Rt(s)==Du}function XN(s){return Qe(s)&&Rt(s)==Lu}function Gu(s,a,p,m,y){return s===a?!0:s==null||a==null||!Qe(s)&&!Qe(a)?s!==s&&a!==a:QN(s,a,p,m,Gu,y)}function QN(s,a,p,m,y,S){var T=pe(s),P=pe(a),L=T?er:At(s),F=P?er:At(a);L=L==Qt?yi:L,F=F==Qt?yi:F;var D=L==yi,q=F==yi,H=L==F;if(H&&sn(s)){if(!sn(a))return!1;T=!0,D=!1}if(H&&!D)return S||(S=new $r),T||Bs(s)?Qw(s,a,p,m,y,S):TF(s,a,L,p,m,y,S);if(!(p&b)){var Y=D&&$e.call(s,"__wrapped__"),ne=q&&$e.call(a,"__wrapped__");if(Y||ne){var Ee=Y?s.value():s,oe=ne?a.value():a;return S||(S=new $r),y(Ee,oe,p,m,S)}}return H?(S||(S=new $r),CF(s,a,p,m,y,S)):!1}function eF(s){return Qe(s)&&At(s)==Fr}function Pg(s,a,p,m){var y=p.length,S=y,T=!m;if(s==null)return!S;for(s=Ue(s);y--;){var P=p[y];if(T&&P[2]?P[1]!==s[P[0]]:!(P[0]in s))return!1}for(;++y<S;){P=p[y];var L=P[0],F=s[L],D=P[1];if(T&&P[2]){if(F===r&&!(L in s))return!1}else{var q=new $r;if(m)var H=m(F,D,L,s,a,q);if(!(H===r?Gu(D,F,b|w,m,q):H))return!1}}return!0}function Ew(s){if(!Je(s)||FF(s))return!1;var a=xi(s)?eN:Hk;return a.test(ao(s))}function tF(s){return Qe(s)&&Rt(s)==Ru}function rF(s){return Qe(s)&&At(s)==Dr}function iF(s){return Qe(s)&&Wd(s.length)&&!!Ve[Rt(s)]}function ww(s){return typeof s=="function"?s:s==null?Ht:typeof s=="object"?pe(s)?xw(s[0],s[1]):Ow(s):HS(s)}function Ag(s){if(!Yu(s))return sN(s);var a=[];for(var p in Ue(s))$e.call(s,p)&&p!="constructor"&&a.push(p);return a}function nF(s){if(!Je(s))return BF(s);var a=Yu(s),p=[];for(var m in s)m=="constructor"&&(a||!$e.call(s,m))||p.push(m);return p}function Ig(s,a){return s<a}function Sw(s,a){var p=-1,m=Wt(s)?k(s.length):[];return tn(s,function(y,S,T){m[++p]=a(y,S,T)}),m}function Ow(s){var a=Vg(s);return a.length==1&&a[0][2]?nS(a[0][0],a[0][1]):function(p){return p===s||Pg(p,s,a)}}function xw(s,a){return Gg(s)&&iS(a)?nS(ii(s),a):function(p){var m=iy(p,s);return m===r&&m===a?ny(p,s):Gu(a,m,b|w)}}function Td(s,a,p,m,y){s!==a&&Og(a,function(S,T){if(y||(y=new $r),Je(S))oF(s,a,T,p,Td,m,y);else{var P=m?m(Jg(s,T),S,T+"",s,a,y):r;P===r&&(P=S),wg(s,T,P)}},Ut)}function oF(s,a,p,m,y,S,T){var P=Jg(s,p),L=Jg(a,p),F=T.get(L);if(F){wg(s,p,F);return}var D=S?S(P,L,p+"",s,a,T):r,q=D===r;if(q){var H=pe(L),Y=!H&&sn(L),ne=!H&&!Y&&Bs(L);D=L,H||Y||ne?pe(P)?D=P:rt(P)?D=jt(P):Y?(q=!1,D=Dw(L,!0)):ne?(q=!1,D=qw(L,!0)):D=[]:Xu(L)||uo(L)?(D=P,uo(P)?D=RS(P):(!Je(P)||xi(P))&&(D=rS(L))):q=!1}q&&(T.set(L,D),y(D,L,m,S,T),T.delete(L)),wg(s,p,D)}function Tw(s,a){var p=s.length;if(p)return a+=a<0?p:0,Oi(a,p)?s[a]:r}function Cw(s,a,p){a.length?a=ze(a,function(S){return pe(S)?function(T){return oo(T,S.length===1?S[0]:S)}:S}):a=[Ht];var m=-1;a=ze(a,rr(re()));var y=Sw(s,function(S,T,P){var L=ze(a,function(F){return F(S)});return{criteria:L,index:++m,value:S}});return LR(y,function(S,T){return yF(S,T,p)})}function sF(s,a){return Pw(s,a,function(p,m){return ny(s,m)})}function Pw(s,a,p){for(var m=-1,y=a.length,S={};++m<y;){var T=a[m],P=oo(s,T);p(P,T)&&Zu(S,nn(T,s),P)}return S}function aF(s){return function(a){return oo(a,s)}}function Mg(s,a,p,m){var y=m?MR:Is,S=-1,T=a.length,P=s;for(s===a&&(a=jt(a)),p&&(P=ze(s,rr(p)));++S<T;)for(var L=0,F=a[S],D=p?p(F):F;(L=y(P,D,L,m))>-1;)P!==s&&vd.call(P,L,1),vd.call(s,L,1);return s}function Aw(s,a){for(var p=s?a.length:0,m=p-1;p--;){var y=a[p];if(p==m||y!==S){var S=y;Oi(y)?vd.call(s,y,1):Ng(s,y)}}return s}function Lg(s,a){return s+bd(cw()*(a-s+1))}function uF(s,a,p,m){for(var y=-1,S=lt(yd((a-s)/(p||1)),0),T=k(S);S--;)T[m?S:++y]=s,s+=p;return T}function kg(s,a){var p="";if(!s||a<1||a>$t)return p;do a%2&&(p+=s),a=bd(a/2),a&&(s+=s);while(a);return p}function Se(s,a){return Yg(oS(s,a,Ht),s+"")}function cF(s){return pw(js(s))}function lF(s,a){var p=js(s);return Fd(p,no(a,0,p.length))}function Zu(s,a,p,m){if(!Je(s))return s;a=nn(a,s);for(var y=-1,S=a.length,T=S-1,P=s;P!=null&&++y<S;){var L=ii(a[y]),F=p;if(L==="__proto__"||L==="constructor"||L==="prototype")return s;if(y!=T){var D=P[L];F=m?m(D,L,P):r,F===r&&(F=Je(D)?D:Oi(a[y+1])?[]:{})}Hu(P,L,F),P=P[L]}return s}var Iw=_d?function(s,a){return _d.set(s,a),s}:Ht,dF=gd?function(s,a){return gd(s,"toString",{configurable:!0,enumerable:!1,value:sy(a),writable:!0})}:Ht;function pF(s){return Fd(js(s))}function xr(s,a,p){var m=-1,y=s.length;a<0&&(a=-a>y?0:y+a),p=p>y?y:p,p<0&&(p+=y),y=a>p?0:p-a>>>0,a>>>=0;for(var S=k(y);++m<y;)S[m]=s[m+a];return S}function hF(s,a){var p;return tn(s,function(m,y,S){return p=a(m,y,S),!p}),!!p}function Cd(s,a,p){var m=0,y=s==null?m:s.length;if(typeof a=="number"&&a===a&&y<=Hv){for(;m<y;){var S=m+y>>>1,T=s[S];T!==null&&!nr(T)&&(p?T<=a:T<a)?m=S+1:y=S}return y}return Rg(s,a,Ht,p)}function Rg(s,a,p,m){var y=0,S=s==null?0:s.length;if(S===0)return 0;a=p(a);for(var T=a!==a,P=a===null,L=nr(a),F=a===r;y<S;){var D=bd((y+S)/2),q=p(s[D]),H=q!==r,Y=q===null,ne=q===q,Ee=nr(q);if(T)var oe=m||ne;else F?oe=ne&&(m||H):P?oe=ne&&H&&(m||!Y):L?oe=ne&&H&&!Y&&(m||!Ee):Y||Ee?oe=!1:oe=m?q<=a:q<a;oe?y=D+1:S=D}return Pt(S,fE)}function Mw(s,a){for(var p=-1,m=s.length,y=0,S=[];++p<m;){var T=s[p],P=a?a(T):T;if(!p||!Br(P,L)){var L=P;S[y++]=T===0?0:T}}return S}function Lw(s){return typeof s=="number"?s:nr(s)?Ts:+s}function ir(s){if(typeof s=="string")return s;if(pe(s))return ze(s,ir)+"";if(nr(s))return lw?lw.call(s):"";var a=s+"";return a=="0"&&1/s==-Xt?"-0":a}function rn(s,a,p){var m=-1,y=sd,S=s.length,T=!0,P=[],L=P;if(p)T=!1,y=cg;else if(S>=e){var F=a?null:OF(s);if(F)return ud(F);T=!1,y=qu,L=new io}else L=a?[]:P;e:for(;++m<S;){var D=s[m],q=a?a(D):D;if(D=p||D!==0?D:0,T&&q===q){for(var H=L.length;H--;)if(L[H]===q)continue e;a&&L.push(q),P.push(D)}else y(L,q,p)||(L!==P&&L.push(q),P.push(D))}return P}function Ng(s,a){return a=nn(a,s),s=sS(s,a),s==null||delete s[ii(Tr(a))]}function kw(s,a,p,m){return Zu(s,a,p(oo(s,a)),m)}function Pd(s,a,p,m){for(var y=s.length,S=m?y:-1;(m?S--:++S<y)&&a(s[S],S,s););return p?xr(s,m?0:S,m?S+1:y):xr(s,m?S+1:0,m?y:S)}function Rw(s,a){var p=s;return p instanceof Ce&&(p=p.value()),lg(a,function(m,y){return y.func.apply(y.thisArg,Ki([m],y.args))},p)}function Fg(s,a,p){var m=s.length;if(m<2)return m?rn(s[0]):[];for(var y=-1,S=k(m);++y<m;)for(var T=s[y],P=-1;++P<m;)P!=y&&(S[y]=Vu(S[y]||T,s[P],a,p));return rn(wt(S,1),a,p)}function Nw(s,a,p){for(var m=-1,y=s.length,S=a.length,T={};++m<y;){var P=m<S?a[m]:r;p(T,s[m],P)}return T}function Dg(s){return rt(s)?s:[]}function qg(s){return typeof s=="function"?s:Ht}function nn(s,a){return pe(s)?s:Gg(s,a)?[s]:lS(Fe(s))}var fF=Se;function on(s,a,p){var m=s.length;return p=p===r?m:p,!a&&p>=m?s:xr(s,a,p)}var Fw=tN||function(s){return pt.clearTimeout(s)};function Dw(s,a){if(a)return s.slice();var p=s.length,m=nw?nw(p):new s.constructor(p);return s.copy(m),m}function $g(s){var a=new s.constructor(s.byteLength);return new fd(a).set(new fd(s)),a}function mF(s,a){var p=a?$g(s.buffer):s.buffer;return new s.constructor(p,s.byteOffset,s.byteLength)}function vF(s){var a=new s.constructor(s.source,_E.exec(s));return a.lastIndex=s.lastIndex,a}function gF(s){return Uu?Ue(Uu.call(s)):{}}function qw(s,a){var p=a?$g(s.buffer):s.buffer;return new s.constructor(p,s.byteOffset,s.length)}function $w(s,a){if(s!==a){var p=s!==r,m=s===null,y=s===s,S=nr(s),T=a!==r,P=a===null,L=a===a,F=nr(a);if(!P&&!F&&!S&&s>a||S&&T&&L&&!P&&!F||m&&T&&L||!p&&L||!y)return 1;if(!m&&!S&&!F&&s<a||F&&p&&y&&!m&&!S||P&&p&&y||!T&&y||!L)return-1}return 0}function yF(s,a,p){for(var m=-1,y=s.criteria,S=a.criteria,T=y.length,P=p.length;++m<T;){var L=$w(y[m],S[m]);if(L){if(m>=P)return L;var F=p[m];return L*(F=="desc"?-1:1)}}return s.index-a.index}function Bw(s,a,p,m){for(var y=-1,S=s.length,T=p.length,P=-1,L=a.length,F=lt(S-T,0),D=k(L+F),q=!m;++P<L;)D[P]=a[P];for(;++y<T;)(q||y<S)&&(D[p[y]]=s[y]);for(;F--;)D[P++]=s[y++];return D}function jw(s,a,p,m){for(var y=-1,S=s.length,T=-1,P=p.length,L=-1,F=a.length,D=lt(S-P,0),q=k(D+F),H=!m;++y<D;)q[y]=s[y];for(var Y=y;++L<F;)q[Y+L]=a[L];for(;++T<P;)(H||y<S)&&(q[Y+p[T]]=s[y++]);return q}function jt(s,a){var p=-1,m=s.length;for(a||(a=k(m));++p<m;)a[p]=s[p];return a}function ri(s,a,p,m){var y=!p;p||(p={});for(var S=-1,T=a.length;++S<T;){var P=a[S],L=m?m(p[P],s[P],P,p,s):r;L===r&&(L=s[P]),y?Ei(p,P,L):Hu(p,P,L)}return p}function bF(s,a){return ri(s,zg(s),a)}function _F(s,a){return ri(s,eS(s),a)}function Ad(s,a){return function(p,m){var y=pe(p)?xR:WN,S=a?a():{};return y(p,s,re(m,2),S)}}function Ds(s){return Se(function(a,p){var m=-1,y=p.length,S=y>1?p[y-1]:r,T=y>2?p[2]:r;for(S=s.length>3&&typeof S=="function"?(y--,S):r,T&&Nt(p[0],p[1],T)&&(S=y<3?r:S,y=1),a=Ue(a);++m<y;){var P=p[m];P&&s(a,P,m,S)}return a})}function Ww(s,a){return function(p,m){if(p==null)return p;if(!Wt(p))return s(p,m);for(var y=p.length,S=a?y:-1,T=Ue(p);(a?S--:++S<y)&&m(T[S],S,T)!==!1;);return p}}function Uw(s){return function(a,p,m){for(var y=-1,S=Ue(a),T=m(a),P=T.length;P--;){var L=T[s?P:++y];if(p(S[L],L,S)===!1)break}return a}}function EF(s,a,p){var m=a&x,y=Ju(s);function S(){var T=this&&this!==pt&&this instanceof S?y:s;return T.apply(m?p:this,arguments)}return S}function Hw(s){return function(a){a=Fe(a);var p=Ms(a)?qr(a):r,m=p?p[0]:a.charAt(0),y=p?on(p,1).join(""):a.slice(1);return m[s]()+y}}function qs(s){return function(a){return lg(WS(jS(a).replace(dR,"")),s,"")}}function Ju(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var p=Fs(s.prototype),m=s.apply(p,a);return Je(m)?m:p}}function wF(s,a,p){var m=Ju(s);function y(){for(var S=arguments.length,T=k(S),P=S,L=$s(y);P--;)T[P]=arguments[P];var F=S<3&&T[0]!==L&&T[S-1]!==L?[]:Xi(T,L);if(S-=F.length,S<p)return Jw(s,a,Id,y.placeholder,r,T,F,r,r,p-S);var D=this&&this!==pt&&this instanceof y?m:s;return tr(D,this,T)}return y}function Vw(s){return function(a,p,m){var y=Ue(a);if(!Wt(a)){var S=re(p,3);a=ht(a),p=function(P){return S(y[P],P,y)}}var T=s(a,p,m);return T>-1?y[S?a[T]:T]:r}}function zw(s){return Si(function(a){var p=a.length,m=p,y=Sr.prototype.thru;for(s&&a.reverse();m--;){var S=a[m];if(typeof S!="function")throw new wr(n);if(y&&!T&&Rd(S)=="wrapper")var T=new Sr([],!0)}for(m=T?m:p;++m<p;){S=a[m];var P=Rd(S),L=P=="wrapper"?Hg(S):r;L&&Zg(L[0])&&L[1]==(ee|A|N|$)&&!L[4].length&&L[9]==1?T=T[Rd(L[0])].apply(T,L[3]):T=S.length==1&&Zg(S)?T[P]():T.thru(S)}return function(){var F=arguments,D=F[0];if(T&&F.length==1&&pe(D))return T.plant(D).value();for(var q=0,H=p?a[q].apply(this,F):D;++q<p;)H=a[q].call(this,H);return H}})}function Id(s,a,p,m,y,S,T,P,L,F){var D=a&ee,q=a&x,H=a&C,Y=a&(A|j),ne=a&te,Ee=H?r:Ju(s);function oe(){for(var xe=arguments.length,Ae=k(xe),or=xe;or--;)Ae[or]=arguments[or];if(Y)var Ft=$s(oe),sr=RR(Ae,Ft);if(m&&(Ae=Bw(Ae,m,y,Y)),S&&(Ae=jw(Ae,S,T,Y)),xe-=sr,Y&&xe<F){var it=Xi(Ae,Ft);return Jw(s,a,Id,oe.placeholder,p,Ae,it,P,L,F-xe)}var jr=q?p:this,Ci=H?jr[s]:s;return xe=Ae.length,P?Ae=WF(Ae,P):ne&&xe>1&&Ae.reverse(),D&&L<xe&&(Ae.length=L),this&&this!==pt&&this instanceof oe&&(Ci=Ee||Ju(Ci)),Ci.apply(jr,Ae)}return oe}function Gw(s,a){return function(p,m){return YN(p,s,a(m),{})}}function Md(s,a){return function(p,m){var y;if(p===r&&m===r)return a;if(p!==r&&(y=p),m!==r){if(y===r)return m;typeof p=="string"||typeof m=="string"?(p=ir(p),m=ir(m)):(p=Lw(p),m=Lw(m)),y=s(p,m)}return y}}function Bg(s){return Si(function(a){return a=ze(a,rr(re())),Se(function(p){var m=this;return s(a,function(y){return tr(y,m,p)})})})}function Ld(s,a){a=a===r?" ":ir(a);var p=a.length;if(p<2)return p?kg(a,s):a;var m=kg(a,yd(s/Ls(a)));return Ms(a)?on(qr(m),0,s).join(""):m.slice(0,s)}function SF(s,a,p,m){var y=a&x,S=Ju(s);function T(){for(var P=-1,L=arguments.length,F=-1,D=m.length,q=k(D+L),H=this&&this!==pt&&this instanceof T?S:s;++F<D;)q[F]=m[F];for(;L--;)q[F++]=arguments[++P];return tr(H,y?p:this,q)}return T}function Zw(s){return function(a,p,m){return m&&typeof m!="number"&&Nt(a,p,m)&&(p=m=r),a=Ti(a),p===r?(p=a,a=0):p=Ti(p),m=m===r?a<p?1:-1:Ti(m),uF(a,p,m,s)}}function kd(s){return function(a,p){return typeof a=="string"&&typeof p=="string"||(a=Cr(a),p=Cr(p)),s(a,p)}}function Jw(s,a,p,m,y,S,T,P,L,F){var D=a&A,q=D?T:r,H=D?r:T,Y=D?S:r,ne=D?r:S;a|=D?N:U,a&=~(D?U:N),a&I||(a&=~(x|C));var Ee=[s,a,y,Y,q,ne,H,P,L,F],oe=p.apply(r,Ee);return Zg(s)&&aS(oe,Ee),oe.placeholder=m,uS(oe,s,a)}function jg(s){var a=ct[s];return function(p,m){if(p=Cr(p),m=m==null?0:Pt(ye(m),292),m&&uw(p)){var y=(Fe(p)+"e").split("e"),S=a(y[0]+"e"+(+y[1]+m));return y=(Fe(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-m))}return a(p)}}var OF=Rs&&1/ud(new Rs([,-0]))[1]==Xt?function(s){return new Rs(s)}:cy;function Yw(s){return function(a){var p=At(a);return p==Fr?gg(a):p==Dr?jR(a):kR(a,s(a))}}function wi(s,a,p,m,y,S,T,P){var L=a&C;if(!L&&typeof s!="function")throw new wr(n);var F=m?m.length:0;if(F||(a&=~(N|U),m=y=r),T=T===r?T:lt(ye(T),0),P=P===r?P:ye(P),F-=y?y.length:0,a&U){var D=m,q=y;m=y=r}var H=L?r:Hg(s),Y=[s,a,p,m,y,D,q,S,T,P];if(H&&$F(Y,H),s=Y[0],a=Y[1],p=Y[2],m=Y[3],y=Y[4],P=Y[9]=Y[9]===r?L?0:s.length:lt(Y[9]-F,0),!P&&a&(A|j)&&(a&=~(A|j)),!a||a==x)var ne=EF(s,a,p);else a==A||a==j?ne=wF(s,a,P):(a==N||a==(x|N))&&!y.length?ne=SF(s,a,p,m):ne=Id.apply(r,Y);var Ee=H?Iw:aS;return uS(Ee(ne,Y),s,a)}function Kw(s,a,p,m){return s===r||Br(s,ks[p])&&!$e.call(m,p)?a:s}function Xw(s,a,p,m,y,S){return Je(s)&&Je(a)&&(S.set(a,s),Td(s,a,r,Xw,S),S.delete(a)),s}function xF(s){return Xu(s)?r:s}function Qw(s,a,p,m,y,S){var T=p&b,P=s.length,L=a.length;if(P!=L&&!(T&&L>P))return!1;var F=S.get(s),D=S.get(a);if(F&&D)return F==a&&D==s;var q=-1,H=!0,Y=p&w?new io:r;for(S.set(s,a),S.set(a,s);++q<P;){var ne=s[q],Ee=a[q];if(m)var oe=T?m(Ee,ne,q,a,s,S):m(ne,Ee,q,s,a,S);if(oe!==r){if(oe)continue;H=!1;break}if(Y){if(!dg(a,function(xe,Ae){if(!qu(Y,Ae)&&(ne===xe||y(ne,xe,p,m,S)))return Y.push(Ae)})){H=!1;break}}else if(!(ne===Ee||y(ne,Ee,p,m,S))){H=!1;break}}return S.delete(s),S.delete(a),H}function TF(s,a,p,m,y,S,T){switch(p){case Ps:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case Du:return!(s.byteLength!=a.byteLength||!S(new fd(s),new fd(a)));case Mu:case Lu:case ku:return Br(+s,+a);case ed:return s.name==a.name&&s.message==a.message;case Ru:case Nu:return s==a+"";case Fr:var P=gg;case Dr:var L=m&b;if(P||(P=ud),s.size!=a.size&&!L)return!1;var F=T.get(s);if(F)return F==a;m|=w,T.set(s,a);var D=Qw(P(s),P(a),m,y,S,T);return T.delete(s),D;case rd:if(Uu)return Uu.call(s)==Uu.call(a)}return!1}function CF(s,a,p,m,y,S){var T=p&b,P=Wg(s),L=P.length,F=Wg(a),D=F.length;if(L!=D&&!T)return!1;for(var q=L;q--;){var H=P[q];if(!(T?H in a:$e.call(a,H)))return!1}var Y=S.get(s),ne=S.get(a);if(Y&&ne)return Y==a&&ne==s;var Ee=!0;S.set(s,a),S.set(a,s);for(var oe=T;++q<L;){H=P[q];var xe=s[H],Ae=a[H];if(m)var or=T?m(Ae,xe,H,a,s,S):m(xe,Ae,H,s,a,S);if(!(or===r?xe===Ae||y(xe,Ae,p,m,S):or)){Ee=!1;break}oe||(oe=H=="constructor")}if(Ee&&!oe){var Ft=s.constructor,sr=a.constructor;Ft!=sr&&"constructor"in s&&"constructor"in a&&!(typeof Ft=="function"&&Ft instanceof Ft&&typeof sr=="function"&&sr instanceof sr)&&(Ee=!1)}return S.delete(s),S.delete(a),Ee}function Si(s){return Yg(oS(s,r,fS),s+"")}function Wg(s){return bw(s,ht,zg)}function Ug(s){return bw(s,Ut,eS)}var Hg=_d?function(s){return _d.get(s)}:cy;function Rd(s){for(var a=s.name+"",p=Ns[a],m=$e.call(Ns,a)?p.length:0;m--;){var y=p[m],S=y.func;if(S==null||S==s)return y.name}return a}function $s(s){var a=$e.call(E,"placeholder")?E:s;return a.placeholder}function re(){var s=E.iteratee||ay;return s=s===ay?ww:s,arguments.length?s(arguments[0],arguments[1]):s}function Nd(s,a){var p=s.__data__;return NF(a)?p[typeof a=="string"?"string":"hash"]:p.map}function Vg(s){for(var a=ht(s),p=a.length;p--;){var m=a[p],y=s[m];a[p]=[m,y,iS(y)]}return a}function so(s,a){var p=qR(s,a);return Ew(p)?p:r}function PF(s){var a=$e.call(s,to),p=s[to];try{s[to]=r;var m=!0}catch{}var y=pd.call(s);return m&&(a?s[to]=p:delete s[to]),y}var zg=bg?function(s){return s==null?[]:(s=Ue(s),Yi(bg(s),function(a){return sw.call(s,a)}))}:ly,eS=bg?function(s){for(var a=[];s;)Ki(a,zg(s)),s=md(s);return a}:ly,At=Rt;(_g&&At(new _g(new ArrayBuffer(1)))!=Ps||Bu&&At(new Bu)!=Fr||Eg&&At(Eg.resolve())!=vE||Rs&&At(new Rs)!=Dr||ju&&At(new ju)!=Fu)&&(At=function(s){var a=Rt(s),p=a==yi?s.constructor:r,m=p?ao(p):"";if(m)switch(m){case lN:return Ps;case dN:return Fr;case pN:return vE;case hN:return Dr;case fN:return Fu}return a});function AF(s,a,p){for(var m=-1,y=p.length;++m<y;){var S=p[m],T=S.size;switch(S.type){case"drop":s+=T;break;case"dropRight":a-=T;break;case"take":a=Pt(a,s+T);break;case"takeRight":s=lt(s,a-T);break}}return{start:s,end:a}}function IF(s){var a=s.match(Fk);return a?a[1].split(Dk):[]}function tS(s,a,p){a=nn(a,s);for(var m=-1,y=a.length,S=!1;++m<y;){var T=ii(a[m]);if(!(S=s!=null&&p(s,T)))break;s=s[T]}return S||++m!=y?S:(y=s==null?0:s.length,!!y&&Wd(y)&&Oi(T,y)&&(pe(s)||uo(s)))}function MF(s){var a=s.length,p=new s.constructor(a);return a&&typeof s[0]=="string"&&$e.call(s,"index")&&(p.index=s.index,p.input=s.input),p}function rS(s){return typeof s.constructor=="function"&&!Yu(s)?Fs(md(s)):{}}function LF(s,a,p){var m=s.constructor;switch(a){case Du:return $g(s);case Mu:case Lu:return new m(+s);case Ps:return mF(s,p);case Vv:case zv:case Gv:case Zv:case Jv:case Yv:case Kv:case Xv:case Qv:return qw(s,p);case Fr:return new m;case ku:case Nu:return new m(s);case Ru:return vF(s);case Dr:return new m;case rd:return gF(s)}}function kF(s,a){var p=a.length;if(!p)return s;var m=p-1;return a[m]=(p>1?"& ":"")+a[m],a=a.join(p>2?", ":" "),s.replace(Nk,`{
/* [wrapped with `+a+`] */
`)}function RF(s){return pe(s)||uo(s)||!!(aw&&s&&s[aw])}function Oi(s,a){var p=typeof s;return a=a??$t,!!a&&(p=="number"||p!="symbol"&&zk.test(s))&&s>-1&&s%1==0&&s<a}function Nt(s,a,p){if(!Je(p))return!1;var m=typeof a;return(m=="number"?Wt(p)&&Oi(a,p.length):m=="string"&&a in p)?Br(p[a],s):!1}function Gg(s,a){if(pe(s))return!1;var p=typeof s;return p=="number"||p=="symbol"||p=="boolean"||s==null||nr(s)?!0:Mk.test(s)||!Ik.test(s)||a!=null&&s in Ue(a)}function NF(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function Zg(s){var a=Rd(s),p=E[a];if(typeof p!="function"||!(a in Ce.prototype))return!1;if(s===p)return!0;var m=Hg(p);return!!m&&s===m[0]}function FF(s){return!!iw&&iw in s}var DF=ld?xi:dy;function Yu(s){var a=s&&s.constructor,p=typeof a=="function"&&a.prototype||ks;return s===p}function iS(s){return s===s&&!Je(s)}function nS(s,a){return function(p){return p==null?!1:p[s]===a&&(a!==r||s in Ue(p))}}function qF(s){var a=Bd(s,function(m){return p.size===c&&p.clear(),m}),p=a.cache;return a}function $F(s,a){var p=s[1],m=a[1],y=p|m,S=y<(x|C|ee),T=m==ee&&p==A||m==ee&&p==$&&s[7].length<=a[8]||m==(ee|$)&&a[7].length<=a[8]&&p==A;if(!(S||T))return s;m&x&&(s[2]=a[2],y|=p&x?0:I);var P=a[3];if(P){var L=s[3];s[3]=L?Bw(L,P,a[4]):P,s[4]=L?Xi(s[3],l):a[4]}return P=a[5],P&&(L=s[5],s[5]=L?jw(L,P,a[6]):P,s[6]=L?Xi(s[5],l):a[6]),P=a[7],P&&(s[7]=P),m&ee&&(s[8]=s[8]==null?a[8]:Pt(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=y,s}function BF(s){var a=[];if(s!=null)for(var p in Ue(s))a.push(p);return a}function jF(s){return pd.call(s)}function oS(s,a,p){return a=lt(a===r?s.length-1:a,0),function(){for(var m=arguments,y=-1,S=lt(m.length-a,0),T=k(S);++y<S;)T[y]=m[a+y];y=-1;for(var P=k(a+1);++y<a;)P[y]=m[y];return P[a]=p(T),tr(s,this,P)}}function sS(s,a){return a.length<2?s:oo(s,xr(a,0,-1))}function WF(s,a){for(var p=s.length,m=Pt(a.length,p),y=jt(s);m--;){var S=a[m];s[m]=Oi(S,p)?y[S]:r}return s}function Jg(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var aS=cS(Iw),Ku=iN||function(s,a){return pt.setTimeout(s,a)},Yg=cS(dF);function uS(s,a,p){var m=a+"";return Yg(s,kF(m,UF(IF(m),p)))}function cS(s){var a=0,p=0;return function(){var m=aN(),y=yr-(m-p);if(p=m,y>0){if(++a>=tt)return arguments[0]}else a=0;return s.apply(r,arguments)}}function Fd(s,a){var p=-1,m=s.length,y=m-1;for(a=a===r?m:a;++p<a;){var S=Lg(p,y),T=s[S];s[S]=s[p],s[p]=T}return s.length=a,s}var lS=qF(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Lk,function(p,m,y,S){a.push(y?S.replace(Bk,"$1"):m||p)}),a});function ii(s){if(typeof s=="string"||nr(s))return s;var a=s+"";return a=="0"&&1/s==-Xt?"-0":a}function ao(s){if(s!=null){try{return dd.call(s)}catch{}try{return s+""}catch{}}return""}function UF(s,a){return Er(Bt,function(p){var m="_."+p[0];a&p[1]&&!sd(s,m)&&s.push(m)}),s.sort()}function dS(s){if(s instanceof Ce)return s.clone();var a=new Sr(s.__wrapped__,s.__chain__);return a.__actions__=jt(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function HF(s,a,p){(p?Nt(s,a,p):a===r)?a=1:a=lt(ye(a),0);var m=s==null?0:s.length;if(!m||a<1)return[];for(var y=0,S=0,T=k(yd(m/a));y<m;)T[S++]=xr(s,y,y+=a);return T}function VF(s){for(var a=-1,p=s==null?0:s.length,m=0,y=[];++a<p;){var S=s[a];S&&(y[m++]=S)}return y}function zF(){var s=arguments.length;if(!s)return[];for(var a=k(s-1),p=arguments[0],m=s;m--;)a[m-1]=arguments[m];return Ki(pe(p)?jt(p):[p],wt(a,1))}var GF=Se(function(s,a){return rt(s)?Vu(s,wt(a,1,rt,!0)):[]}),ZF=Se(function(s,a){var p=Tr(a);return rt(p)&&(p=r),rt(s)?Vu(s,wt(a,1,rt,!0),re(p,2)):[]}),JF=Se(function(s,a){var p=Tr(a);return rt(p)&&(p=r),rt(s)?Vu(s,wt(a,1,rt,!0),r,p):[]});function YF(s,a,p){var m=s==null?0:s.length;return m?(a=p||a===r?1:ye(a),xr(s,a<0?0:a,m)):[]}function KF(s,a,p){var m=s==null?0:s.length;return m?(a=p||a===r?1:ye(a),a=m-a,xr(s,0,a<0?0:a)):[]}function XF(s,a){return s&&s.length?Pd(s,re(a,3),!0,!0):[]}function QF(s,a){return s&&s.length?Pd(s,re(a,3),!0):[]}function eD(s,a,p,m){var y=s==null?0:s.length;return y?(p&&typeof p!="number"&&Nt(s,a,p)&&(p=0,m=y),zN(s,a,p,m)):[]}function pS(s,a,p){var m=s==null?0:s.length;if(!m)return-1;var y=p==null?0:ye(p);return y<0&&(y=lt(m+y,0)),ad(s,re(a,3),y)}function hS(s,a,p){var m=s==null?0:s.length;if(!m)return-1;var y=m-1;return p!==r&&(y=ye(p),y=p<0?lt(m+y,0):Pt(y,m-1)),ad(s,re(a,3),y,!0)}function fS(s){var a=s==null?0:s.length;return a?wt(s,1):[]}function tD(s){var a=s==null?0:s.length;return a?wt(s,Xt):[]}function rD(s,a){var p=s==null?0:s.length;return p?(a=a===r?1:ye(a),wt(s,a)):[]}function iD(s){for(var a=-1,p=s==null?0:s.length,m={};++a<p;){var y=s[a];m[y[0]]=y[1]}return m}function mS(s){return s&&s.length?s[0]:r}function nD(s,a,p){var m=s==null?0:s.length;if(!m)return-1;var y=p==null?0:ye(p);return y<0&&(y=lt(m+y,0)),Is(s,a,y)}function oD(s){var a=s==null?0:s.length;return a?xr(s,0,-1):[]}var sD=Se(function(s){var a=ze(s,Dg);return a.length&&a[0]===s[0]?Cg(a):[]}),aD=Se(function(s){var a=Tr(s),p=ze(s,Dg);return a===Tr(p)?a=r:p.pop(),p.length&&p[0]===s[0]?Cg(p,re(a,2)):[]}),uD=Se(function(s){var a=Tr(s),p=ze(s,Dg);return a=typeof a=="function"?a:r,a&&p.pop(),p.length&&p[0]===s[0]?Cg(p,r,a):[]});function cD(s,a){return s==null?"":oN.call(s,a)}function Tr(s){var a=s==null?0:s.length;return a?s[a-1]:r}function lD(s,a,p){var m=s==null?0:s.length;if(!m)return-1;var y=m;return p!==r&&(y=ye(p),y=y<0?lt(m+y,0):Pt(y,m-1)),a===a?UR(s,a,y):ad(s,JE,y,!0)}function dD(s,a){return s&&s.length?Tw(s,ye(a)):r}var pD=Se(vS);function vS(s,a){return s&&s.length&&a&&a.length?Mg(s,a):s}function hD(s,a,p){return s&&s.length&&a&&a.length?Mg(s,a,re(p,2)):s}function fD(s,a,p){return s&&s.length&&a&&a.length?Mg(s,a,r,p):s}var mD=Si(function(s,a){var p=s==null?0:s.length,m=Sg(s,a);return Aw(s,ze(a,function(y){return Oi(y,p)?+y:y}).sort($w)),m});function vD(s,a){var p=[];if(!(s&&s.length))return p;var m=-1,y=[],S=s.length;for(a=re(a,3);++m<S;){var T=s[m];a(T,m,s)&&(p.push(T),y.push(m))}return Aw(s,y),p}function Kg(s){return s==null?s:cN.call(s)}function gD(s,a,p){var m=s==null?0:s.length;return m?(p&&typeof p!="number"&&Nt(s,a,p)?(a=0,p=m):(a=a==null?0:ye(a),p=p===r?m:ye(p)),xr(s,a,p)):[]}function yD(s,a){return Cd(s,a)}function bD(s,a,p){return Rg(s,a,re(p,2))}function _D(s,a){var p=s==null?0:s.length;if(p){var m=Cd(s,a);if(m<p&&Br(s[m],a))return m}return-1}function ED(s,a){return Cd(s,a,!0)}function wD(s,a,p){return Rg(s,a,re(p,2),!0)}function SD(s,a){var p=s==null?0:s.length;if(p){var m=Cd(s,a,!0)-1;if(Br(s[m],a))return m}return-1}function OD(s){return s&&s.length?Mw(s):[]}function xD(s,a){return s&&s.length?Mw(s,re(a,2)):[]}function TD(s){var a=s==null?0:s.length;return a?xr(s,1,a):[]}function CD(s,a,p){return s&&s.length?(a=p||a===r?1:ye(a),xr(s,0,a<0?0:a)):[]}function PD(s,a,p){var m=s==null?0:s.length;return m?(a=p||a===r?1:ye(a),a=m-a,xr(s,a<0?0:a,m)):[]}function AD(s,a){return s&&s.length?Pd(s,re(a,3),!1,!0):[]}function ID(s,a){return s&&s.length?Pd(s,re(a,3)):[]}var MD=Se(function(s){return rn(wt(s,1,rt,!0))}),LD=Se(function(s){var a=Tr(s);return rt(a)&&(a=r),rn(wt(s,1,rt,!0),re(a,2))}),kD=Se(function(s){var a=Tr(s);return a=typeof a=="function"?a:r,rn(wt(s,1,rt,!0),r,a)});function RD(s){return s&&s.length?rn(s):[]}function ND(s,a){return s&&s.length?rn(s,re(a,2)):[]}function FD(s,a){return a=typeof a=="function"?a:r,s&&s.length?rn(s,r,a):[]}function Xg(s){if(!(s&&s.length))return[];var a=0;return s=Yi(s,function(p){if(rt(p))return a=lt(p.length,a),!0}),mg(a,function(p){return ze(s,pg(p))})}function gS(s,a){if(!(s&&s.length))return[];var p=Xg(s);return a==null?p:ze(p,function(m){return tr(a,r,m)})}var DD=Se(function(s,a){return rt(s)?Vu(s,a):[]}),qD=Se(function(s){return Fg(Yi(s,rt))}),$D=Se(function(s){var a=Tr(s);return rt(a)&&(a=r),Fg(Yi(s,rt),re(a,2))}),BD=Se(function(s){var a=Tr(s);return a=typeof a=="function"?a:r,Fg(Yi(s,rt),r,a)}),jD=Se(Xg);function WD(s,a){return Nw(s||[],a||[],Hu)}function UD(s,a){return Nw(s||[],a||[],Zu)}var HD=Se(function(s){var a=s.length,p=a>1?s[a-1]:r;return p=typeof p=="function"?(s.pop(),p):r,gS(s,p)});function yS(s){var a=E(s);return a.__chain__=!0,a}function VD(s,a){return a(s),s}function Dd(s,a){return a(s)}var zD=Si(function(s){var a=s.length,p=a?s[0]:0,m=this.__wrapped__,y=function(S){return Sg(S,s)};return a>1||this.__actions__.length||!(m instanceof Ce)||!Oi(p)?this.thru(y):(m=m.slice(p,+p+(a?1:0)),m.__actions__.push({func:Dd,args:[y],thisArg:r}),new Sr(m,this.__chain__).thru(function(S){return a&&!S.length&&S.push(r),S}))});function GD(){return yS(this)}function ZD(){return new Sr(this.value(),this.__chain__)}function JD(){this.__values__===r&&(this.__values__=LS(this.value()));var s=this.__index__>=this.__values__.length,a=s?r:this.__values__[this.__index__++];return{done:s,value:a}}function YD(){return this}function KD(s){for(var a,p=this;p instanceof wd;){var m=dS(p);m.__index__=0,m.__values__=r,a?y.__wrapped__=m:a=m;var y=m;p=p.__wrapped__}return y.__wrapped__=s,a}function XD(){var s=this.__wrapped__;if(s instanceof Ce){var a=s;return this.__actions__.length&&(a=new Ce(this)),a=a.reverse(),a.__actions__.push({func:Dd,args:[Kg],thisArg:r}),new Sr(a,this.__chain__)}return this.thru(Kg)}function QD(){return Rw(this.__wrapped__,this.__actions__)}var eq=Ad(function(s,a,p){$e.call(s,p)?++s[p]:Ei(s,p,1)});function tq(s,a,p){var m=pe(s)?GE:VN;return p&&Nt(s,a,p)&&(a=r),m(s,re(a,3))}function rq(s,a){var p=pe(s)?Yi:gw;return p(s,re(a,3))}var iq=Vw(pS),nq=Vw(hS);function oq(s,a){return wt(qd(s,a),1)}function sq(s,a){return wt(qd(s,a),Xt)}function aq(s,a,p){return p=p===r?1:ye(p),wt(qd(s,a),p)}function bS(s,a){var p=pe(s)?Er:tn;return p(s,re(a,3))}function _S(s,a){var p=pe(s)?TR:vw;return p(s,re(a,3))}var uq=Ad(function(s,a,p){$e.call(s,p)?s[p].push(a):Ei(s,p,[a])});function cq(s,a,p,m){s=Wt(s)?s:js(s),p=p&&!m?ye(p):0;var y=s.length;return p<0&&(p=lt(y+p,0)),Ud(s)?p<=y&&s.indexOf(a,p)>-1:!!y&&Is(s,a,p)>-1}var lq=Se(function(s,a,p){var m=-1,y=typeof a=="function",S=Wt(s)?k(s.length):[];return tn(s,function(T){S[++m]=y?tr(a,T,p):zu(T,a,p)}),S}),dq=Ad(function(s,a,p){Ei(s,p,a)});function qd(s,a){var p=pe(s)?ze:Sw;return p(s,re(a,3))}function pq(s,a,p,m){return s==null?[]:(pe(a)||(a=a==null?[]:[a]),p=m?r:p,pe(p)||(p=p==null?[]:[p]),Cw(s,a,p))}var hq=Ad(function(s,a,p){s[p?0:1].push(a)},function(){return[[],[]]});function fq(s,a,p){var m=pe(s)?lg:KE,y=arguments.length<3;return m(s,re(a,4),p,y,tn)}function mq(s,a,p){var m=pe(s)?CR:KE,y=arguments.length<3;return m(s,re(a,4),p,y,vw)}function vq(s,a){var p=pe(s)?Yi:gw;return p(s,jd(re(a,3)))}function gq(s){var a=pe(s)?pw:cF;return a(s)}function yq(s,a,p){(p?Nt(s,a,p):a===r)?a=1:a=ye(a);var m=pe(s)?BN:lF;return m(s,a)}function bq(s){var a=pe(s)?jN:pF;return a(s)}function _q(s){if(s==null)return 0;if(Wt(s))return Ud(s)?Ls(s):s.length;var a=At(s);return a==Fr||a==Dr?s.size:Ag(s).length}function Eq(s,a,p){var m=pe(s)?dg:hF;return p&&Nt(s,a,p)&&(a=r),m(s,re(a,3))}var wq=Se(function(s,a){if(s==null)return[];var p=a.length;return p>1&&Nt(s,a[0],a[1])?a=[]:p>2&&Nt(a[0],a[1],a[2])&&(a=[a[0]]),Cw(s,wt(a,1),[])}),$d=rN||function(){return pt.Date.now()};function Sq(s,a){if(typeof a!="function")throw new wr(n);return s=ye(s),function(){if(--s<1)return a.apply(this,arguments)}}function ES(s,a,p){return a=p?r:a,a=s&&a==null?s.length:a,wi(s,ee,r,r,r,r,a)}function wS(s,a){var p;if(typeof a!="function")throw new wr(n);return s=ye(s),function(){return--s>0&&(p=a.apply(this,arguments)),s<=1&&(a=r),p}}var Qg=Se(function(s,a,p){var m=x;if(p.length){var y=Xi(p,$s(Qg));m|=N}return wi(s,m,a,p,y)}),SS=Se(function(s,a,p){var m=x|C;if(p.length){var y=Xi(p,$s(SS));m|=N}return wi(a,m,s,p,y)});function OS(s,a,p){a=p?r:a;var m=wi(s,A,r,r,r,r,r,a);return m.placeholder=OS.placeholder,m}function xS(s,a,p){a=p?r:a;var m=wi(s,j,r,r,r,r,r,a);return m.placeholder=xS.placeholder,m}function TS(s,a,p){var m,y,S,T,P,L,F=0,D=!1,q=!1,H=!0;if(typeof s!="function")throw new wr(n);a=Cr(a)||0,Je(p)&&(D=!!p.leading,q="maxWait"in p,S=q?lt(Cr(p.maxWait)||0,a):S,H="trailing"in p?!!p.trailing:H);function Y(it){var jr=m,Ci=y;return m=y=r,F=it,T=s.apply(Ci,jr),T}function ne(it){return F=it,P=Ku(xe,a),D?Y(it):T}function Ee(it){var jr=it-L,Ci=it-F,VS=a-jr;return q?Pt(VS,S-Ci):VS}function oe(it){var jr=it-L,Ci=it-F;return L===r||jr>=a||jr<0||q&&Ci>=S}function xe(){var it=$d();if(oe(it))return Ae(it);P=Ku(xe,Ee(it))}function Ae(it){return P=r,H&&m?Y(it):(m=y=r,T)}function or(){P!==r&&Fw(P),F=0,m=L=y=P=r}function Ft(){return P===r?T:Ae($d())}function sr(){var it=$d(),jr=oe(it);if(m=arguments,y=this,L=it,jr){if(P===r)return ne(L);if(q)return Fw(P),P=Ku(xe,a),Y(L)}return P===r&&(P=Ku(xe,a)),T}return sr.cancel=or,sr.flush=Ft,sr}var Oq=Se(function(s,a){return mw(s,1,a)}),xq=Se(function(s,a,p){return mw(s,Cr(a)||0,p)});function Tq(s){return wi(s,te)}function Bd(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new wr(n);var p=function(){var m=arguments,y=a?a.apply(this,m):m[0],S=p.cache;if(S.has(y))return S.get(y);var T=s.apply(this,m);return p.cache=S.set(y,T)||S,T};return p.cache=new(Bd.Cache||_i),p}Bd.Cache=_i;function jd(s){if(typeof s!="function")throw new wr(n);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function Cq(s){return wS(2,s)}var Pq=fF(function(s,a){a=a.length==1&&pe(a[0])?ze(a[0],rr(re())):ze(wt(a,1),rr(re()));var p=a.length;return Se(function(m){for(var y=-1,S=Pt(m.length,p);++y<S;)m[y]=a[y].call(this,m[y]);return tr(s,this,m)})}),ey=Se(function(s,a){var p=Xi(a,$s(ey));return wi(s,N,r,a,p)}),CS=Se(function(s,a){var p=Xi(a,$s(CS));return wi(s,U,r,a,p)}),Aq=Si(function(s,a){return wi(s,$,r,r,r,a)});function Iq(s,a){if(typeof s!="function")throw new wr(n);return a=a===r?a:ye(a),Se(s,a)}function Mq(s,a){if(typeof s!="function")throw new wr(n);return a=a==null?0:lt(ye(a),0),Se(function(p){var m=p[a],y=on(p,0,a);return m&&Ki(y,m),tr(s,this,y)})}function Lq(s,a,p){var m=!0,y=!0;if(typeof s!="function")throw new wr(n);return Je(p)&&(m="leading"in p?!!p.leading:m,y="trailing"in p?!!p.trailing:y),TS(s,a,{leading:m,maxWait:a,trailing:y})}function kq(s){return ES(s,1)}function Rq(s,a){return ey(qg(a),s)}function Nq(){if(!arguments.length)return[];var s=arguments[0];return pe(s)?s:[s]}function Fq(s){return Or(s,v)}function Dq(s,a){return a=typeof a=="function"?a:r,Or(s,v,a)}function qq(s){return Or(s,h|v)}function $q(s,a){return a=typeof a=="function"?a:r,Or(s,h|v,a)}function Bq(s,a){return a==null||fw(s,a,ht(a))}function Br(s,a){return s===a||s!==s&&a!==a}var jq=kd(Tg),Wq=kd(function(s,a){return s>=a}),uo=_w(function(){return arguments}())?_w:function(s){return Qe(s)&&$e.call(s,"callee")&&!sw.call(s,"callee")},pe=k.isArray,Uq=jE?rr(jE):KN;function Wt(s){return s!=null&&Wd(s.length)&&!xi(s)}function rt(s){return Qe(s)&&Wt(s)}function Hq(s){return s===!0||s===!1||Qe(s)&&Rt(s)==Mu}var sn=nN||dy,Vq=WE?rr(WE):XN;function zq(s){return Qe(s)&&s.nodeType===1&&!Xu(s)}function Gq(s){if(s==null)return!0;if(Wt(s)&&(pe(s)||typeof s=="string"||typeof s.splice=="function"||sn(s)||Bs(s)||uo(s)))return!s.length;var a=At(s);if(a==Fr||a==Dr)return!s.size;if(Yu(s))return!Ag(s).length;for(var p in s)if($e.call(s,p))return!1;return!0}function Zq(s,a){return Gu(s,a)}function Jq(s,a,p){p=typeof p=="function"?p:r;var m=p?p(s,a):r;return m===r?Gu(s,a,r,p):!!m}function ty(s){if(!Qe(s))return!1;var a=Rt(s);return a==ed||a==yk||typeof s.message=="string"&&typeof s.name=="string"&&!Xu(s)}function Yq(s){return typeof s=="number"&&uw(s)}function xi(s){if(!Je(s))return!1;var a=Rt(s);return a==td||a==mE||a==Cs||a==_k}function PS(s){return typeof s=="number"&&s==ye(s)}function Wd(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=$t}function Je(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function Qe(s){return s!=null&&typeof s=="object"}var AS=UE?rr(UE):eF;function Kq(s,a){return s===a||Pg(s,a,Vg(a))}function Xq(s,a,p){return p=typeof p=="function"?p:r,Pg(s,a,Vg(a),p)}function Qq(s){return IS(s)&&s!=+s}function e$(s){if(DF(s))throw new de(i);return Ew(s)}function t$(s){return s===null}function r$(s){return s==null}function IS(s){return typeof s=="number"||Qe(s)&&Rt(s)==ku}function Xu(s){if(!Qe(s)||Rt(s)!=yi)return!1;var a=md(s);if(a===null)return!0;var p=$e.call(a,"constructor")&&a.constructor;return typeof p=="function"&&p instanceof p&&dd.call(p)==XR}var ry=HE?rr(HE):tF;function i$(s){return PS(s)&&s>=-$t&&s<=$t}var MS=VE?rr(VE):rF;function Ud(s){return typeof s=="string"||!pe(s)&&Qe(s)&&Rt(s)==Nu}function nr(s){return typeof s=="symbol"||Qe(s)&&Rt(s)==rd}var Bs=zE?rr(zE):iF;function n$(s){return s===r}function o$(s){return Qe(s)&&At(s)==Fu}function s$(s){return Qe(s)&&Rt(s)==wk}var a$=kd(Ig),u$=kd(function(s,a){return s<=a});function LS(s){if(!s)return[];if(Wt(s))return Ud(s)?qr(s):jt(s);if($u&&s[$u])return BR(s[$u]());var a=At(s),p=a==Fr?gg:a==Dr?ud:js;return p(s)}function Ti(s){if(!s)return s===0?s:0;if(s=Cr(s),s===Xt||s===-Xt){var a=s<0?-1:1;return a*Qn}return s===s?s:0}function ye(s){var a=Ti(s),p=a%1;return a===a?p?a-p:a:0}function kS(s){return s?no(ye(s),0,br):0}function Cr(s){if(typeof s=="number")return s;if(nr(s))return Ts;if(Je(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=Je(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=XE(s);var p=Uk.test(s);return p||Vk.test(s)?SR(s.slice(2),p?2:8):Wk.test(s)?Ts:+s}function RS(s){return ri(s,Ut(s))}function c$(s){return s?no(ye(s),-$t,$t):s===0?s:0}function Fe(s){return s==null?"":ir(s)}var l$=Ds(function(s,a){if(Yu(a)||Wt(a)){ri(a,ht(a),s);return}for(var p in a)$e.call(a,p)&&Hu(s,p,a[p])}),NS=Ds(function(s,a){ri(a,Ut(a),s)}),Hd=Ds(function(s,a,p,m){ri(a,Ut(a),s,m)}),d$=Ds(function(s,a,p,m){ri(a,ht(a),s,m)}),p$=Si(Sg);function h$(s,a){var p=Fs(s);return a==null?p:hw(p,a)}var f$=Se(function(s,a){s=Ue(s);var p=-1,m=a.length,y=m>2?a[2]:r;for(y&&Nt(a[0],a[1],y)&&(m=1);++p<m;)for(var S=a[p],T=Ut(S),P=-1,L=T.length;++P<L;){var F=T[P],D=s[F];(D===r||Br(D,ks[F])&&!$e.call(s,F))&&(s[F]=S[F])}return s}),m$=Se(function(s){return s.push(r,Xw),tr(FS,r,s)});function v$(s,a){return ZE(s,re(a,3),ti)}function g$(s,a){return ZE(s,re(a,3),xg)}function y$(s,a){return s==null?s:Og(s,re(a,3),Ut)}function b$(s,a){return s==null?s:yw(s,re(a,3),Ut)}function _$(s,a){return s&&ti(s,re(a,3))}function E$(s,a){return s&&xg(s,re(a,3))}function w$(s){return s==null?[]:xd(s,ht(s))}function S$(s){return s==null?[]:xd(s,Ut(s))}function iy(s,a,p){var m=s==null?r:oo(s,a);return m===r?p:m}function O$(s,a){return s!=null&&tS(s,a,GN)}function ny(s,a){return s!=null&&tS(s,a,ZN)}var x$=Gw(function(s,a,p){a!=null&&typeof a.toString!="function"&&(a=pd.call(a)),s[a]=p},sy(Ht)),T$=Gw(function(s,a,p){a!=null&&typeof a.toString!="function"&&(a=pd.call(a)),$e.call(s,a)?s[a].push(p):s[a]=[p]},re),C$=Se(zu);function ht(s){return Wt(s)?dw(s):Ag(s)}function Ut(s){return Wt(s)?dw(s,!0):nF(s)}function P$(s,a){var p={};return a=re(a,3),ti(s,function(m,y,S){Ei(p,a(m,y,S),m)}),p}function A$(s,a){var p={};return a=re(a,3),ti(s,function(m,y,S){Ei(p,y,a(m,y,S))}),p}var I$=Ds(function(s,a,p){Td(s,a,p)}),FS=Ds(function(s,a,p,m){Td(s,a,p,m)}),M$=Si(function(s,a){var p={};if(s==null)return p;var m=!1;a=ze(a,function(S){return S=nn(S,s),m||(m=S.length>1),S}),ri(s,Ug(s),p),m&&(p=Or(p,h|f|v,xF));for(var y=a.length;y--;)Ng(p,a[y]);return p});function L$(s,a){return DS(s,jd(re(a)))}var k$=Si(function(s,a){return s==null?{}:sF(s,a)});function DS(s,a){if(s==null)return{};var p=ze(Ug(s),function(m){return[m]});return a=re(a),Pw(s,p,function(m,y){return a(m,y[0])})}function R$(s,a,p){a=nn(a,s);var m=-1,y=a.length;for(y||(y=1,s=r);++m<y;){var S=s==null?r:s[ii(a[m])];S===r&&(m=y,S=p),s=xi(S)?S.call(s):S}return s}function N$(s,a,p){return s==null?s:Zu(s,a,p)}function F$(s,a,p,m){return m=typeof m=="function"?m:r,s==null?s:Zu(s,a,p,m)}var qS=Yw(ht),$S=Yw(Ut);function D$(s,a,p){var m=pe(s),y=m||sn(s)||Bs(s);if(a=re(a,4),p==null){var S=s&&s.constructor;y?p=m?new S:[]:Je(s)?p=xi(S)?Fs(md(s)):{}:p={}}return(y?Er:ti)(s,function(T,P,L){return a(p,T,P,L)}),p}function q$(s,a){return s==null?!0:Ng(s,a)}function $$(s,a,p){return s==null?s:kw(s,a,qg(p))}function B$(s,a,p,m){return m=typeof m=="function"?m:r,s==null?s:kw(s,a,qg(p),m)}function js(s){return s==null?[]:vg(s,ht(s))}function j$(s){return s==null?[]:vg(s,Ut(s))}function W$(s,a,p){return p===r&&(p=a,a=r),p!==r&&(p=Cr(p),p=p===p?p:0),a!==r&&(a=Cr(a),a=a===a?a:0),no(Cr(s),a,p)}function U$(s,a,p){return a=Ti(a),p===r?(p=a,a=0):p=Ti(p),s=Cr(s),JN(s,a,p)}function H$(s,a,p){if(p&&typeof p!="boolean"&&Nt(s,a,p)&&(a=p=r),p===r&&(typeof a=="boolean"?(p=a,a=r):typeof s=="boolean"&&(p=s,s=r)),s===r&&a===r?(s=0,a=1):(s=Ti(s),a===r?(a=s,s=0):a=Ti(a)),s>a){var m=s;s=a,a=m}if(p||s%1||a%1){var y=cw();return Pt(s+y*(a-s+wR("1e-"+((y+"").length-1))),a)}return Lg(s,a)}var V$=qs(function(s,a,p){return a=a.toLowerCase(),s+(p?BS(a):a)});function BS(s){return oy(Fe(s).toLowerCase())}function jS(s){return s=Fe(s),s&&s.replace(Gk,NR).replace(pR,"")}function z$(s,a,p){s=Fe(s),a=ir(a);var m=s.length;p=p===r?m:no(ye(p),0,m);var y=p;return p-=a.length,p>=0&&s.slice(p,y)==a}function G$(s){return s=Fe(s),s&&Ck.test(s)?s.replace(yE,FR):s}function Z$(s){return s=Fe(s),s&&kk.test(s)?s.replace(eg,"\\$&"):s}var J$=qs(function(s,a,p){return s+(p?"-":"")+a.toLowerCase()}),Y$=qs(function(s,a,p){return s+(p?" ":"")+a.toLowerCase()}),K$=Hw("toLowerCase");function X$(s,a,p){s=Fe(s),a=ye(a);var m=a?Ls(s):0;if(!a||m>=a)return s;var y=(a-m)/2;return Ld(bd(y),p)+s+Ld(yd(y),p)}function Q$(s,a,p){s=Fe(s),a=ye(a);var m=a?Ls(s):0;return a&&m<a?s+Ld(a-m,p):s}function e2(s,a,p){s=Fe(s),a=ye(a);var m=a?Ls(s):0;return a&&m<a?Ld(a-m,p)+s:s}function t2(s,a,p){return p||a==null?a=0:a&&(a=+a),uN(Fe(s).replace(tg,""),a||0)}function r2(s,a,p){return(p?Nt(s,a,p):a===r)?a=1:a=ye(a),kg(Fe(s),a)}function i2(){var s=arguments,a=Fe(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var n2=qs(function(s,a,p){return s+(p?"_":"")+a.toLowerCase()});function o2(s,a,p){return p&&typeof p!="number"&&Nt(s,a,p)&&(a=p=r),p=p===r?br:p>>>0,p?(s=Fe(s),s&&(typeof a=="string"||a!=null&&!ry(a))&&(a=ir(a),!a&&Ms(s))?on(qr(s),0,p):s.split(a,p)):[]}var s2=qs(function(s,a,p){return s+(p?" ":"")+oy(a)});function a2(s,a,p){return s=Fe(s),p=p==null?0:no(ye(p),0,s.length),a=ir(a),s.slice(p,p+a.length)==a}function u2(s,a,p){var m=E.templateSettings;p&&Nt(s,a,p)&&(a=r),s=Fe(s),a=Hd({},a,m,Kw);var y=Hd({},a.imports,m.imports,Kw),S=ht(y),T=vg(y,S),P,L,F=0,D=a.interpolate||id,q="__p += '",H=yg((a.escape||id).source+"|"+D.source+"|"+(D===bE?jk:id).source+"|"+(a.evaluate||id).source+"|$","g"),Y="//# sourceURL="+($e.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gR+"]")+`
`;s.replace(H,function(oe,xe,Ae,or,Ft,sr){return Ae||(Ae=or),q+=s.slice(F,sr).replace(Zk,DR),xe&&(P=!0,q+=`' +
__e(`+xe+`) +
'`),Ft&&(L=!0,q+=`';
`+Ft+`;
__p += '`),Ae&&(q+=`' +
((__t = (`+Ae+`)) == null ? '' : __t) +
'`),F=sr+oe.length,oe}),q+=`';
`;var ne=$e.call(a,"variable")&&a.variable;if(!ne)q=`with (obj) {
`+q+`
}
`;else if($k.test(ne))throw new de(o);q=(L?q.replace(Sk,""):q).replace(Ok,"$1").replace(xk,"$1;"),q="function("+(ne||"obj")+`) {
`+(ne?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+q+`return __p
}`;var Ee=US(function(){return Le(S,Y+"return "+q).apply(r,T)});if(Ee.source=q,ty(Ee))throw Ee;return Ee}function c2(s){return Fe(s).toLowerCase()}function l2(s){return Fe(s).toUpperCase()}function d2(s,a,p){if(s=Fe(s),s&&(p||a===r))return XE(s);if(!s||!(a=ir(a)))return s;var m=qr(s),y=qr(a),S=QE(m,y),T=ew(m,y)+1;return on(m,S,T).join("")}function p2(s,a,p){if(s=Fe(s),s&&(p||a===r))return s.slice(0,rw(s)+1);if(!s||!(a=ir(a)))return s;var m=qr(s),y=ew(m,qr(a))+1;return on(m,0,y).join("")}function h2(s,a,p){if(s=Fe(s),s&&(p||a===r))return s.replace(tg,"");if(!s||!(a=ir(a)))return s;var m=qr(s),y=QE(m,qr(a));return on(m,y).join("")}function f2(s,a){var p=Te,m=Oe;if(Je(a)){var y="separator"in a?a.separator:y;p="length"in a?ye(a.length):p,m="omission"in a?ir(a.omission):m}s=Fe(s);var S=s.length;if(Ms(s)){var T=qr(s);S=T.length}if(p>=S)return s;var P=p-Ls(m);if(P<1)return m;var L=T?on(T,0,P).join(""):s.slice(0,P);if(y===r)return L+m;if(T&&(P+=L.length-P),ry(y)){if(s.slice(P).search(y)){var F,D=L;for(y.global||(y=yg(y.source,Fe(_E.exec(y))+"g")),y.lastIndex=0;F=y.exec(D);)var q=F.index;L=L.slice(0,q===r?P:q)}}else if(s.indexOf(ir(y),P)!=P){var H=L.lastIndexOf(y);H>-1&&(L=L.slice(0,H))}return L+m}function m2(s){return s=Fe(s),s&&Tk.test(s)?s.replace(gE,HR):s}var v2=qs(function(s,a,p){return s+(p?" ":"")+a.toUpperCase()}),oy=Hw("toUpperCase");function WS(s,a,p){return s=Fe(s),a=p?r:a,a===r?$R(s)?GR(s):IR(s):s.match(a)||[]}var US=Se(function(s,a){try{return tr(s,r,a)}catch(p){return ty(p)?p:new de(p)}}),g2=Si(function(s,a){return Er(a,function(p){p=ii(p),Ei(s,p,Qg(s[p],s))}),s});function y2(s){var a=s==null?0:s.length,p=re();return s=a?ze(s,function(m){if(typeof m[1]!="function")throw new wr(n);return[p(m[0]),m[1]]}):[],Se(function(m){for(var y=-1;++y<a;){var S=s[y];if(tr(S[0],this,m))return tr(S[1],this,m)}})}function b2(s){return HN(Or(s,h))}function sy(s){return function(){return s}}function _2(s,a){return s==null||s!==s?a:s}var E2=zw(),w2=zw(!0);function Ht(s){return s}function ay(s){return ww(typeof s=="function"?s:Or(s,h))}function S2(s){return Ow(Or(s,h))}function O2(s,a){return xw(s,Or(a,h))}var x2=Se(function(s,a){return function(p){return zu(p,s,a)}}),T2=Se(function(s,a){return function(p){return zu(s,p,a)}});function uy(s,a,p){var m=ht(a),y=xd(a,m);p==null&&!(Je(a)&&(y.length||!m.length))&&(p=a,a=s,s=this,y=xd(a,ht(a)));var S=!(Je(p)&&"chain"in p)||!!p.chain,T=xi(s);return Er(y,function(P){var L=a[P];s[P]=L,T&&(s.prototype[P]=function(){var F=this.__chain__;if(S||F){var D=s(this.__wrapped__),q=D.__actions__=jt(this.__actions__);return q.push({func:L,args:arguments,thisArg:s}),D.__chain__=F,D}return L.apply(s,Ki([this.value()],arguments))})}),s}function C2(){return pt._===this&&(pt._=QR),this}function cy(){}function P2(s){return s=ye(s),Se(function(a){return Tw(a,s)})}var A2=Bg(ze),I2=Bg(GE),M2=Bg(dg);function HS(s){return Gg(s)?pg(ii(s)):aF(s)}function L2(s){return function(a){return s==null?r:oo(s,a)}}var k2=Zw(),R2=Zw(!0);function ly(){return[]}function dy(){return!1}function N2(){return{}}function F2(){return""}function D2(){return!0}function q2(s,a){if(s=ye(s),s<1||s>$t)return[];var p=br,m=Pt(s,br);a=re(a),s-=br;for(var y=mg(m,a);++p<s;)a(p);return y}function $2(s){return pe(s)?ze(s,ii):nr(s)?[s]:jt(lS(Fe(s)))}function B2(s){var a=++KR;return Fe(s)+a}var j2=Md(function(s,a){return s+a},0),W2=jg("ceil"),U2=Md(function(s,a){return s/a},1),H2=jg("floor");function V2(s){return s&&s.length?Od(s,Ht,Tg):r}function z2(s,a){return s&&s.length?Od(s,re(a,2),Tg):r}function G2(s){return YE(s,Ht)}function Z2(s,a){return YE(s,re(a,2))}function J2(s){return s&&s.length?Od(s,Ht,Ig):r}function Y2(s,a){return s&&s.length?Od(s,re(a,2),Ig):r}var K2=Md(function(s,a){return s*a},1),X2=jg("round"),Q2=Md(function(s,a){return s-a},0);function eB(s){return s&&s.length?fg(s,Ht):0}function tB(s,a){return s&&s.length?fg(s,re(a,2)):0}return E.after=Sq,E.ary=ES,E.assign=l$,E.assignIn=NS,E.assignInWith=Hd,E.assignWith=d$,E.at=p$,E.before=wS,E.bind=Qg,E.bindAll=g2,E.bindKey=SS,E.castArray=Nq,E.chain=yS,E.chunk=HF,E.compact=VF,E.concat=zF,E.cond=y2,E.conforms=b2,E.constant=sy,E.countBy=eq,E.create=h$,E.curry=OS,E.curryRight=xS,E.debounce=TS,E.defaults=f$,E.defaultsDeep=m$,E.defer=Oq,E.delay=xq,E.difference=GF,E.differenceBy=ZF,E.differenceWith=JF,E.drop=YF,E.dropRight=KF,E.dropRightWhile=XF,E.dropWhile=QF,E.fill=eD,E.filter=rq,E.flatMap=oq,E.flatMapDeep=sq,E.flatMapDepth=aq,E.flatten=fS,E.flattenDeep=tD,E.flattenDepth=rD,E.flip=Tq,E.flow=E2,E.flowRight=w2,E.fromPairs=iD,E.functions=w$,E.functionsIn=S$,E.groupBy=uq,E.initial=oD,E.intersection=sD,E.intersectionBy=aD,E.intersectionWith=uD,E.invert=x$,E.invertBy=T$,E.invokeMap=lq,E.iteratee=ay,E.keyBy=dq,E.keys=ht,E.keysIn=Ut,E.map=qd,E.mapKeys=P$,E.mapValues=A$,E.matches=S2,E.matchesProperty=O2,E.memoize=Bd,E.merge=I$,E.mergeWith=FS,E.method=x2,E.methodOf=T2,E.mixin=uy,E.negate=jd,E.nthArg=P2,E.omit=M$,E.omitBy=L$,E.once=Cq,E.orderBy=pq,E.over=A2,E.overArgs=Pq,E.overEvery=I2,E.overSome=M2,E.partial=ey,E.partialRight=CS,E.partition=hq,E.pick=k$,E.pickBy=DS,E.property=HS,E.propertyOf=L2,E.pull=pD,E.pullAll=vS,E.pullAllBy=hD,E.pullAllWith=fD,E.pullAt=mD,E.range=k2,E.rangeRight=R2,E.rearg=Aq,E.reject=vq,E.remove=vD,E.rest=Iq,E.reverse=Kg,E.sampleSize=yq,E.set=N$,E.setWith=F$,E.shuffle=bq,E.slice=gD,E.sortBy=wq,E.sortedUniq=OD,E.sortedUniqBy=xD,E.split=o2,E.spread=Mq,E.tail=TD,E.take=CD,E.takeRight=PD,E.takeRightWhile=AD,E.takeWhile=ID,E.tap=VD,E.throttle=Lq,E.thru=Dd,E.toArray=LS,E.toPairs=qS,E.toPairsIn=$S,E.toPath=$2,E.toPlainObject=RS,E.transform=D$,E.unary=kq,E.union=MD,E.unionBy=LD,E.unionWith=kD,E.uniq=RD,E.uniqBy=ND,E.uniqWith=FD,E.unset=q$,E.unzip=Xg,E.unzipWith=gS,E.update=$$,E.updateWith=B$,E.values=js,E.valuesIn=j$,E.without=DD,E.words=WS,E.wrap=Rq,E.xor=qD,E.xorBy=$D,E.xorWith=BD,E.zip=jD,E.zipObject=WD,E.zipObjectDeep=UD,E.zipWith=HD,E.entries=qS,E.entriesIn=$S,E.extend=NS,E.extendWith=Hd,uy(E,E),E.add=j2,E.attempt=US,E.camelCase=V$,E.capitalize=BS,E.ceil=W2,E.clamp=W$,E.clone=Fq,E.cloneDeep=qq,E.cloneDeepWith=$q,E.cloneWith=Dq,E.conformsTo=Bq,E.deburr=jS,E.defaultTo=_2,E.divide=U2,E.endsWith=z$,E.eq=Br,E.escape=G$,E.escapeRegExp=Z$,E.every=tq,E.find=iq,E.findIndex=pS,E.findKey=v$,E.findLast=nq,E.findLastIndex=hS,E.findLastKey=g$,E.floor=H2,E.forEach=bS,E.forEachRight=_S,E.forIn=y$,E.forInRight=b$,E.forOwn=_$,E.forOwnRight=E$,E.get=iy,E.gt=jq,E.gte=Wq,E.has=O$,E.hasIn=ny,E.head=mS,E.identity=Ht,E.includes=cq,E.indexOf=nD,E.inRange=U$,E.invoke=C$,E.isArguments=uo,E.isArray=pe,E.isArrayBuffer=Uq,E.isArrayLike=Wt,E.isArrayLikeObject=rt,E.isBoolean=Hq,E.isBuffer=sn,E.isDate=Vq,E.isElement=zq,E.isEmpty=Gq,E.isEqual=Zq,E.isEqualWith=Jq,E.isError=ty,E.isFinite=Yq,E.isFunction=xi,E.isInteger=PS,E.isLength=Wd,E.isMap=AS,E.isMatch=Kq,E.isMatchWith=Xq,E.isNaN=Qq,E.isNative=e$,E.isNil=r$,E.isNull=t$,E.isNumber=IS,E.isObject=Je,E.isObjectLike=Qe,E.isPlainObject=Xu,E.isRegExp=ry,E.isSafeInteger=i$,E.isSet=MS,E.isString=Ud,E.isSymbol=nr,E.isTypedArray=Bs,E.isUndefined=n$,E.isWeakMap=o$,E.isWeakSet=s$,E.join=cD,E.kebabCase=J$,E.last=Tr,E.lastIndexOf=lD,E.lowerCase=Y$,E.lowerFirst=K$,E.lt=a$,E.lte=u$,E.max=V2,E.maxBy=z2,E.mean=G2,E.meanBy=Z2,E.min=J2,E.minBy=Y2,E.stubArray=ly,E.stubFalse=dy,E.stubObject=N2,E.stubString=F2,E.stubTrue=D2,E.multiply=K2,E.nth=dD,E.noConflict=C2,E.noop=cy,E.now=$d,E.pad=X$,E.padEnd=Q$,E.padStart=e2,E.parseInt=t2,E.random=H$,E.reduce=fq,E.reduceRight=mq,E.repeat=r2,E.replace=i2,E.result=R$,E.round=X2,E.runInContext=M,E.sample=gq,E.size=_q,E.snakeCase=n2,E.some=Eq,E.sortedIndex=yD,E.sortedIndexBy=bD,E.sortedIndexOf=_D,E.sortedLastIndex=ED,E.sortedLastIndexBy=wD,E.sortedLastIndexOf=SD,E.startCase=s2,E.startsWith=a2,E.subtract=Q2,E.sum=eB,E.sumBy=tB,E.template=u2,E.times=q2,E.toFinite=Ti,E.toInteger=ye,E.toLength=kS,E.toLower=c2,E.toNumber=Cr,E.toSafeInteger=c$,E.toString=Fe,E.toUpper=l2,E.trim=d2,E.trimEnd=p2,E.trimStart=h2,E.truncate=f2,E.unescape=m2,E.uniqueId=B2,E.upperCase=v2,E.upperFirst=oy,E.each=bS,E.eachRight=_S,E.first=mS,uy(E,function(){var s={};return ti(E,function(a,p){$e.call(E.prototype,p)||(s[p]=a)}),s}(),{chain:!1}),E.VERSION=t,Er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){E[s].placeholder=E}),Er(["drop","take"],function(s,a){Ce.prototype[s]=function(p){p=p===r?1:lt(ye(p),0);var m=this.__filtered__&&!a?new Ce(this):this.clone();return m.__filtered__?m.__takeCount__=Pt(p,m.__takeCount__):m.__views__.push({size:Pt(p,br),type:s+(m.__dir__<0?"Right":"")}),m},Ce.prototype[s+"Right"]=function(p){return this.reverse()[s](p).reverse()}}),Er(["filter","map","takeWhile"],function(s,a){var p=a+1,m=p==ot||p==Xn;Ce.prototype[s]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:re(y,3),type:p}),S.__filtered__=S.__filtered__||m,S}}),Er(["head","last"],function(s,a){var p="take"+(a?"Right":"");Ce.prototype[s]=function(){return this[p](1).value()[0]}}),Er(["initial","tail"],function(s,a){var p="drop"+(a?"":"Right");Ce.prototype[s]=function(){return this.__filtered__?new Ce(this):this[p](1)}}),Ce.prototype.compact=function(){return this.filter(Ht)},Ce.prototype.find=function(s){return this.filter(s).head()},Ce.prototype.findLast=function(s){return this.reverse().find(s)},Ce.prototype.invokeMap=Se(function(s,a){return typeof s=="function"?new Ce(this):this.map(function(p){return zu(p,s,a)})}),Ce.prototype.reject=function(s){return this.filter(jd(re(s)))},Ce.prototype.slice=function(s,a){s=ye(s);var p=this;return p.__filtered__&&(s>0||a<0)?new Ce(p):(s<0?p=p.takeRight(-s):s&&(p=p.drop(s)),a!==r&&(a=ye(a),p=a<0?p.dropRight(-a):p.take(a-s)),p)},Ce.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ce.prototype.toArray=function(){return this.take(br)},ti(Ce.prototype,function(s,a){var p=/^(?:filter|find|map|reject)|While$/.test(a),m=/^(?:head|last)$/.test(a),y=E[m?"take"+(a=="last"?"Right":""):a],S=m||/^find/.test(a);y&&(E.prototype[a]=function(){var T=this.__wrapped__,P=m?[1]:arguments,L=T instanceof Ce,F=P[0],D=L||pe(T),q=function(xe){var Ae=y.apply(E,Ki([xe],P));return m&&H?Ae[0]:Ae};D&&p&&typeof F=="function"&&F.length!=1&&(L=D=!1);var H=this.__chain__,Y=!!this.__actions__.length,ne=S&&!H,Ee=L&&!Y;if(!S&&D){T=Ee?T:new Ce(this);var oe=s.apply(T,P);return oe.__actions__.push({func:Dd,args:[q],thisArg:r}),new Sr(oe,H)}return ne&&Ee?s.apply(this,P):(oe=this.thru(q),ne?m?oe.value()[0]:oe.value():oe)})}),Er(["pop","push","shift","sort","splice","unshift"],function(s){var a=cd[s],p=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",m=/^(?:pop|shift)$/.test(s);E.prototype[s]=function(){var y=arguments;if(m&&!this.__chain__){var S=this.value();return a.apply(pe(S)?S:[],y)}return this[p](function(T){return a.apply(pe(T)?T:[],y)})}}),ti(Ce.prototype,function(s,a){var p=E[a];if(p){var m=p.name+"";$e.call(Ns,m)||(Ns[m]=[]),Ns[m].push({name:a,func:p})}}),Ns[Id(r,C).name]=[{name:"wrapper",func:r}],Ce.prototype.clone=mN,Ce.prototype.reverse=vN,Ce.prototype.value=gN,E.prototype.at=zD,E.prototype.chain=GD,E.prototype.commit=ZD,E.prototype.next=JD,E.prototype.plant=KD,E.prototype.reverse=XD,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=QD,E.prototype.first=E.prototype.head,$u&&(E.prototype[$u]=YD),E},Qi=ZR();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(pt._=Qi,define(function(){return Qi})):eo?((eo.exports=Qi)._=Qi,ag._=Qi):pt._=Qi}).call(Ys)});var Be=O(Kd=>{"use strict";d();Object.defineProperty(Kd,"__esModule",{value:!0});Kd.isFunction=void 0;function w3(r){return typeof r=="function"}Kd.isFunction=w3});var cn=O(Xd=>{"use strict";d();Object.defineProperty(Xd,"__esModule",{value:!0});Xd.createErrorClass=void 0;function S3(r){var t=function(i){Error.call(i),i.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Xd.createErrorClass=S3});var Sy=O(Qd=>{"use strict";d();Object.defineProperty(Qd,"__esModule",{value:!0});Qd.UnsubscriptionError=void 0;var O3=cn();Qd.UnsubscriptionError=O3.createErrorClass(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(i,n){return n+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}})});var Ai=O(ep=>{"use strict";d();Object.defineProperty(ep,"__esModule",{value:!0});ep.arrRemove=void 0;function x3(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}ep.arrRemove=x3});var ur=O(Vt=>{"use strict";d();var BO=Vt&&Vt.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jO=Vt&&Vt.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},WO=Vt&&Vt.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.isSubscription=Vt.EMPTY_SUBSCRIPTION=Vt.Subscription=void 0;var uc=Be(),Oy=Sy(),UO=Ai(),xy=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,i,n,o;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var c=BO(u),l=c.next();!l.done;l=c.next()){var h=l.value;h.remove(this)}}catch(C){t={error:C}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}else u.remove(this);var f=this.initialTeardown;if(uc.isFunction(f))try{f()}catch(C){o=C instanceof Oy.UnsubscriptionError?C.errors:[C]}var v=this._finalizers;if(v){this._finalizers=null;try{for(var b=BO(v),w=b.next();!w.done;w=b.next()){var x=w.value;try{HO(x)}catch(C){o=o??[],C instanceof Oy.UnsubscriptionError?o=WO(WO([],jO(o)),jO(C.errors)):o.push(C)}}}catch(C){i={error:C}}finally{try{w&&!w.done&&(n=b.return)&&n.call(b)}finally{if(i)throw i.error}}}if(o)throw new Oy.UnsubscriptionError(o)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)HO(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&UO.arrRemove(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&UO.arrRemove(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}();Vt.Subscription=xy;Vt.EMPTY_SUBSCRIPTION=xy.EMPTY;function T3(r){return r instanceof xy||r&&"closed"in r&&uc.isFunction(r.remove)&&uc.isFunction(r.add)&&uc.isFunction(r.unsubscribe)}Vt.isSubscription=T3;function HO(r){uc.isFunction(r)?r():r.unsubscribe()}});var Ks=O(tp=>{"use strict";d();Object.defineProperty(tp,"__esModule",{value:!0});tp.config=void 0;tp.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}});var Ty=O(oi=>{"use strict";d();var VO=oi&&oi.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},zO=oi&&oi.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(oi,"__esModule",{value:!0});oi.timeoutProvider=void 0;oi.timeoutProvider={setTimeout:function(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var n=oi.timeoutProvider.delegate;return n!=null&&n.setTimeout?n.setTimeout.apply(n,zO([r,t],VO(e))):setTimeout.apply(void 0,zO([r,t],VO(e)))},clearTimeout:function(r){var t=oi.timeoutProvider.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0}});var Cy=O(rp=>{"use strict";d();Object.defineProperty(rp,"__esModule",{value:!0});rp.reportUnhandledError=void 0;var C3=Ks(),P3=Ty();function A3(r){P3.timeoutProvider.setTimeout(function(){var t=C3.config.onUnhandledError;if(t)t(r);else throw r})}rp.reportUnhandledError=A3});var Ot=O(ip=>{"use strict";d();Object.defineProperty(ip,"__esModule",{value:!0});ip.noop=void 0;function I3(){}ip.noop=I3});var GO=O(si=>{"use strict";d();Object.defineProperty(si,"__esModule",{value:!0});si.createNotification=si.nextNotification=si.errorNotification=si.COMPLETE_NOTIFICATION=void 0;si.COMPLETE_NOTIFICATION=function(){return np("C",void 0,void 0)}();function M3(r){return np("E",void 0,r)}si.errorNotification=M3;function L3(r){return np("N",r,void 0)}si.nextNotification=L3;function np(r,t,e){return{kind:r,value:t,error:e}}si.createNotification=np});var op=O(Xs=>{"use strict";d();Object.defineProperty(Xs,"__esModule",{value:!0});Xs.captureError=Xs.errorContext=void 0;var ZO=Ks(),ho=null;function k3(r){if(ZO.config.useDeprecatedSynchronousErrorHandling){var t=!ho;if(t&&(ho={errorThrown:!1,error:null}),r(),t){var e=ho,i=e.errorThrown,n=e.error;if(ho=null,i)throw n}}else r()}Xs.errorContext=k3;function R3(r){ZO.config.useDeprecatedSynchronousErrorHandling&&ho&&(ho.errorThrown=!0,ho.error=r)}Xs.captureError=R3});var Qs=O(Wr=>{"use strict";d();var KO=Wr&&Wr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(Wr,"__esModule",{value:!0});Wr.EMPTY_OBSERVER=Wr.SafeSubscriber=Wr.Subscriber=void 0;var N3=Be(),JO=ur(),My=Ks(),F3=Cy(),YO=Ot(),Py=GO(),D3=Ty(),q3=op(),XO=function(r){KO(t,r);function t(e){var i=r.call(this)||this;return i.isStopped=!1,e?(i.destination=e,JO.isSubscription(e)&&e.add(i)):i.destination=Wr.EMPTY_OBSERVER,i}return t.create=function(e,i,n){return new QO(e,i,n)},t.prototype.next=function(e){this.isStopped?Iy(Py.nextNotification(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Iy(Py.errorNotification(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Iy(Py.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(JO.Subscription);Wr.Subscriber=XO;var $3=Function.prototype.bind;function Ay(r,t){return $3.call(r,t)}var B3=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(i){sp(i)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(i){sp(i)}else sp(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){sp(e)}},r}(),QO=function(r){KO(t,r);function t(e,i,n){var o=r.call(this)||this,u;if(N3.isFunction(e)||!e)u={next:e??void 0,error:i??void 0,complete:n??void 0};else{var c;o&&My.config.useDeprecatedNextContext?(c=Object.create(e),c.unsubscribe=function(){return o.unsubscribe()},u={next:e.next&&Ay(e.next,c),error:e.error&&Ay(e.error,c),complete:e.complete&&Ay(e.complete,c)}):u=e}return o.destination=new B3(u),o}return t}(XO);Wr.SafeSubscriber=QO;function sp(r){My.config.useDeprecatedSynchronousErrorHandling?q3.captureError(r):F3.reportUnhandledError(r)}function j3(r){throw r}function Iy(r,t){var e=My.config.onStoppedNotification;e&&D3.timeoutProvider.setTimeout(function(){return e(r,t)})}Wr.EMPTY_OBSERVER={closed:!0,next:YO.noop,error:j3,complete:YO.noop}});var cc=O(ap=>{"use strict";d();Object.defineProperty(ap,"__esModule",{value:!0});ap.observable=void 0;ap.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var xt=O(up=>{"use strict";d();Object.defineProperty(up,"__esModule",{value:!0});up.identity=void 0;function W3(r){return r}up.identity=W3});var lc=O(ea=>{"use strict";d();Object.defineProperty(ea,"__esModule",{value:!0});ea.pipeFromArray=ea.pipe=void 0;var U3=xt();function H3(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return ex(r)}ea.pipe=H3;function ex(r){return r.length===0?U3.identity:r.length===1?r[0]:function(e){return r.reduce(function(i,n){return n(i)},e)}}ea.pipeFromArray=ex});var We=O(cp=>{"use strict";d();Object.defineProperty(cp,"__esModule",{value:!0});cp.Observable=void 0;var ky=Qs(),V3=ur(),z3=cc(),G3=lc(),Z3=Ks(),Ly=Be(),J3=op(),Y3=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,i){var n=this,o=X3(t)?t:new ky.SafeSubscriber(t,e,i);return J3.errorContext(function(){var u=n,c=u.operator,l=u.source;o.add(c?c.call(o,l):l?n._subscribe(o):n._trySubscribe(o))}),o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var i=this;return e=tx(e),new e(function(n,o){var u=new ky.SafeSubscriber({next:function(c){try{t(c)}catch(l){o(l),u.unsubscribe()}},error:o,complete:n});i.subscribe(u)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[z3.observable]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return G3.pipeFromArray(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=tx(t),new t(function(i,n){var o;e.subscribe(function(u){return o=u},function(u){return n(u)},function(){return i(o)})})},r.create=function(t){return new r(t)},r}();cp.Observable=Y3;function tx(r){var t;return(t=r??Z3.config.Promise)!==null&&t!==void 0?t:Promise}function K3(r){return r&&Ly.isFunction(r.next)&&Ly.isFunction(r.error)&&Ly.isFunction(r.complete)}function X3(r){return r&&r instanceof ky.Subscriber||K3(r)&&V3.isSubscription(r)}});var G=O(ta=>{"use strict";d();Object.defineProperty(ta,"__esModule",{value:!0});ta.operate=ta.hasLift=void 0;var Q3=Be();function rx(r){return Q3.isFunction(r==null?void 0:r.lift)}ta.hasLift=rx;function ej(r){return function(t){if(rx(t))return t.lift(function(e){try{return r(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}ta.operate=ej});var K=O(ln=>{"use strict";d();var tj=ln&&ln.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(ln,"__esModule",{value:!0});ln.OperatorSubscriber=ln.createOperatorSubscriber=void 0;var rj=Qs();function ij(r,t,e,i,n){return new ix(r,t,e,i,n)}ln.createOperatorSubscriber=ij;var ix=function(r){tj(t,r);function t(e,i,n,o,u,c){var l=r.call(this,e)||this;return l.onFinalize=u,l.shouldUnsubscribe=c,l._next=i?function(h){try{i(h)}catch(f){e.error(f)}}:r.prototype._next,l._error=o?function(h){try{o(h)}catch(f){e.error(f)}finally{this.unsubscribe()}}:r.prototype._error,l._complete=n?function(){try{n()}catch(h){e.error(h)}finally{this.unsubscribe()}}:r.prototype._complete,l}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;r.prototype.unsubscribe.call(this),!i&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(rj.Subscriber);ln.OperatorSubscriber=ix});var Ry=O(lp=>{"use strict";d();Object.defineProperty(lp,"__esModule",{value:!0});lp.refCount=void 0;var nj=G(),oj=K();function sj(){return nj.operate(function(r,t){var e=null;r._refCount++;var i=oj.createOperatorSubscriber(t,void 0,void 0,void 0,function(){if(!r||r._refCount<=0||0<--r._refCount){e=null;return}var n=r._connection,o=e;e=null,n&&(!o||n===o)&&n.unsubscribe(),t.unsubscribe()});r.subscribe(i),i.closed||(e=r.connect())})}lp.refCount=sj});var dc=O(ra=>{"use strict";d();var aj=ra&&ra.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(ra,"__esModule",{value:!0});ra.ConnectableObservable=void 0;var uj=We(),nx=ur(),cj=Ry(),lj=K(),dj=G(),pj=function(r){aj(t,r);function t(e,i){var n=r.call(this)||this;return n.source=e,n.subjectFactory=i,n._subject=null,n._refCount=0,n._connection=null,dj.hasLift(e)&&(n.lift=e.lift),n}return t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,e==null||e.unsubscribe()},t.prototype.connect=function(){var e=this,i=this._connection;if(!i){i=this._connection=new nx.Subscription;var n=this.getSubject();i.add(this.source.subscribe(lj.createOperatorSubscriber(n,void 0,function(){e._teardown(),n.complete()},function(o){e._teardown(),n.error(o)},function(){return e._teardown()}))),i.closed&&(this._connection=null,i=nx.Subscription.EMPTY)}return i},t.prototype.refCount=function(){return cj.refCount()(this)},t}(uj.Observable);ra.ConnectableObservable=pj});var ox=O(pc=>{"use strict";d();Object.defineProperty(pc,"__esModule",{value:!0});pc.performanceTimestampProvider=void 0;pc.performanceTimestampProvider={now:function(){return(pc.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}});var Ny=O(Ur=>{"use strict";d();var sx=Ur&&Ur.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},ax=Ur&&Ur.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.animationFrameProvider=void 0;var hj=ur();Ur.animationFrameProvider={schedule:function(r){var t=requestAnimationFrame,e=cancelAnimationFrame,i=Ur.animationFrameProvider.delegate;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);var n=t(function(o){e=void 0,r(o)});return new hj.Subscription(function(){return e==null?void 0:e(n)})},requestAnimationFrame:function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Ur.animationFrameProvider.delegate;return((e==null?void 0:e.requestAnimationFrame)||requestAnimationFrame).apply(void 0,ax([],sx(r)))},cancelAnimationFrame:function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Ur.animationFrameProvider.delegate;return((e==null?void 0:e.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,ax([],sx(r)))},delegate:void 0}});var lx=O(dp=>{"use strict";d();Object.defineProperty(dp,"__esModule",{value:!0});dp.animationFrames=void 0;var fj=We(),mj=ox(),ux=Ny();function vj(r){return r?cx(r):gj}dp.animationFrames=vj;function cx(r){return new fj.Observable(function(t){var e=r||mj.performanceTimestampProvider,i=e.now(),n=0,o=function(){t.closed||(n=ux.animationFrameProvider.requestAnimationFrame(function(u){n=0;var c=e.now();t.next({timestamp:r?c:u,elapsed:c-i}),o()}))};return o(),function(){n&&ux.animationFrameProvider.cancelAnimationFrame(n)}})}var gj=cx()});var Fy=O(pp=>{"use strict";d();Object.defineProperty(pp,"__esModule",{value:!0});pp.ObjectUnsubscribedError=void 0;var yj=cn();pp.ObjectUnsubscribedError=yj.createErrorClass(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})});var Tt=O(ai=>{"use strict";d();var px=ai&&ai.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),bj=ai&&ai.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ai,"__esModule",{value:!0});ai.AnonymousSubject=ai.Subject=void 0;var dx=We(),qy=ur(),_j=Fy(),Ej=Ai(),Dy=op(),hx=function(r){px(t,r);function t(){var e=r.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var i=new $y(this,this);return i.operator=e,i},t.prototype._throwIfClosed=function(){if(this.closed)throw new _j.ObjectUnsubscribedError},t.prototype.next=function(e){var i=this;Dy.errorContext(function(){var n,o;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var u=bj(i.currentObservers),c=u.next();!c.done;c=u.next()){var l=c.value;l.next(e)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}}})},t.prototype.error=function(e){var i=this;Dy.errorContext(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=e;for(var n=i.observers;n.length;)n.shift().error(e)}})},t.prototype.complete=function(){var e=this;Dy.errorContext(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var i=e.observers;i.length;)i.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var i=this,n=this,o=n.hasError,u=n.isStopped,c=n.observers;return o||u?qy.EMPTY_SUBSCRIPTION:(this.currentObservers=null,c.push(e),new qy.Subscription(function(){i.currentObservers=null,Ej.arrRemove(c,e)}))},t.prototype._checkFinalizedStatuses=function(e){var i=this,n=i.hasError,o=i.thrownError,u=i.isStopped;n?e.error(o):u&&e.complete()},t.prototype.asObservable=function(){var e=new dx.Observable;return e.source=this,e},t.create=function(e,i){return new $y(e,i)},t}(dx.Observable);ai.Subject=hx;var $y=function(r){px(t,r);function t(e,i){var n=r.call(this)||this;return n.destination=e,n.source=i,n}return t.prototype.next=function(e){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.next)===null||n===void 0||n.call(i,e)},t.prototype.error=function(e){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.error)===null||n===void 0||n.call(i,e)},t.prototype.complete=function(){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||i===void 0||i.call(e)},t.prototype._subscribe=function(e){var i,n;return(n=(i=this.source)===null||i===void 0?void 0:i.subscribe(e))!==null&&n!==void 0?n:qy.EMPTY_SUBSCRIPTION},t}(hx);ai.AnonymousSubject=$y});var By=O(ia=>{"use strict";d();var wj=ia&&ia.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(ia,"__esModule",{value:!0});ia.BehaviorSubject=void 0;var Sj=Tt(),Oj=function(r){wj(t,r);function t(e){var i=r.call(this)||this;return i._value=e,i}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(e){var i=r.prototype._subscribe.call(this,e);return!i.closed&&e.next(this._value),i},t.prototype.getValue=function(){var e=this,i=e.hasError,n=e.thrownError,o=e._value;if(i)throw n;return this._throwIfClosed(),o},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(Sj.Subject);ia.BehaviorSubject=Oj});var hp=O(hc=>{"use strict";d();Object.defineProperty(hc,"__esModule",{value:!0});hc.dateTimestampProvider=void 0;hc.dateTimestampProvider={now:function(){return(hc.dateTimestampProvider.delegate||Date).now()},delegate:void 0}});var fp=O(na=>{"use strict";d();var xj=na&&na.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(na,"__esModule",{value:!0});na.ReplaySubject=void 0;var Tj=Tt(),Cj=hp(),Pj=function(r){xj(t,r);function t(e,i,n){e===void 0&&(e=1/0),i===void 0&&(i=1/0),n===void 0&&(n=Cj.dateTimestampProvider);var o=r.call(this)||this;return o._bufferSize=e,o._windowTime=i,o._timestampProvider=n,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=i===1/0,o._bufferSize=Math.max(1,e),o._windowTime=Math.max(1,i),o}return t.prototype.next=function(e){var i=this,n=i.isStopped,o=i._buffer,u=i._infiniteTimeWindow,c=i._timestampProvider,l=i._windowTime;n||(o.push(e),!u&&o.push(c.now()+l)),this._trimBuffer(),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var i=this._innerSubscribe(e),n=this,o=n._infiniteTimeWindow,u=n._buffer,c=u.slice(),l=0;l<c.length&&!e.closed;l+=o?1:2)e.next(c[l]);return this._checkFinalizedStatuses(e),i},t.prototype._trimBuffer=function(){var e=this,i=e._bufferSize,n=e._timestampProvider,o=e._buffer,u=e._infiniteTimeWindow,c=(u?1:2)*i;if(i<1/0&&c<o.length&&o.splice(0,o.length-c),!u){for(var l=n.now(),h=0,f=1;f<o.length&&o[f]<=l;f+=2)h=f;h&&o.splice(0,h+1)}},t}(Tj.Subject);na.ReplaySubject=Pj});var mp=O(oa=>{"use strict";d();var Aj=oa&&oa.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(oa,"__esModule",{value:!0});oa.AsyncSubject=void 0;var Ij=Tt(),Mj=function(r){Aj(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._value=null,e._hasValue=!1,e._isComplete=!1,e}return t.prototype._checkFinalizedStatuses=function(e){var i=this,n=i.hasError,o=i._hasValue,u=i._value,c=i.thrownError,l=i.isStopped,h=i._isComplete;n?e.error(c):(l||h)&&(o&&e.next(u),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var e=this,i=e._hasValue,n=e._value,o=e._isComplete;o||(this._isComplete=!0,i&&r.prototype.next.call(this,n),r.prototype.complete.call(this))},t}(Ij.Subject);oa.AsyncSubject=Mj});var fx=O(sa=>{"use strict";d();var Lj=sa&&sa.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(sa,"__esModule",{value:!0});sa.Action=void 0;var kj=ur(),Rj=function(r){Lj(t,r);function t(e,i){return r.call(this)||this}return t.prototype.schedule=function(e,i){return i===void 0&&(i=0),this},t}(kj.Subscription);sa.Action=Rj});var gx=O(ui=>{"use strict";d();var mx=ui&&ui.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},vx=ui&&ui.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(ui,"__esModule",{value:!0});ui.intervalProvider=void 0;ui.intervalProvider={setInterval:function(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var n=ui.intervalProvider.delegate;return n!=null&&n.setInterval?n.setInterval.apply(n,vx([r,t],mx(e))):setInterval.apply(void 0,vx([r,t],mx(e)))},clearInterval:function(r){var t=ui.intervalProvider.delegate;return((t==null?void 0:t.clearInterval)||clearInterval)(r)},delegate:void 0}});var ua=O(aa=>{"use strict";d();var Nj=aa&&aa.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(aa,"__esModule",{value:!0});aa.AsyncAction=void 0;var Fj=fx(),yx=gx(),Dj=Ai(),qj=function(r){Nj(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.scheduler=e,n.work=i,n.pending=!1,n}return t.prototype.schedule=function(e,i){var n;if(i===void 0&&(i=0),this.closed)return this;this.state=e;var o=this.id,u=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(u,o,i)),this.pending=!0,this.delay=i,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(u,this.id,i),this},t.prototype.requestAsyncId=function(e,i,n){return n===void 0&&(n=0),yx.intervalProvider.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,i,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return i;i!=null&&yx.intervalProvider.clearInterval(i)},t.prototype.execute=function(e,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,i);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,i){var n=!1,o;try{this.work(e)}catch(u){n=!0,o=u||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var e=this,i=e.id,n=e.scheduler,o=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Dj.arrRemove(o,this),i!=null&&(this.id=this.recycleAsyncId(n,i,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},t}(Fj.Action);aa.AsyncAction=qj});var _x=O(ca=>{"use strict";d();Object.defineProperty(ca,"__esModule",{value:!0});ca.TestTools=ca.Immediate=void 0;var $j=1,jy,vp={};function bx(r){return r in vp?(delete vp[r],!0):!1}ca.Immediate={setImmediate:function(r){var t=$j++;return vp[t]=!0,jy||(jy=Promise.resolve()),jy.then(function(){return bx(t)&&r()}),t},clearImmediate:function(r){bx(r)}};ca.TestTools={pending:function(){return Object.keys(vp).length}}});var wx=O(ci=>{"use strict";d();var Bj=ci&&ci.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},jj=ci&&ci.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(ci,"__esModule",{value:!0});ci.immediateProvider=void 0;var Ex=_x(),Wj=Ex.Immediate.setImmediate,Uj=Ex.Immediate.clearImmediate;ci.immediateProvider={setImmediate:function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=ci.immediateProvider.delegate;return((e==null?void 0:e.setImmediate)||Wj).apply(void 0,jj([],Bj(r)))},clearImmediate:function(r){var t=ci.immediateProvider.delegate;return((t==null?void 0:t.clearImmediate)||Uj)(r)},delegate:void 0}});var Ox=O(la=>{"use strict";d();var Hj=la&&la.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(la,"__esModule",{value:!0});la.AsapAction=void 0;var Vj=ua(),Sx=wx(),zj=function(r){Hj(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return t.prototype.requestAsyncId=function(e,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,e,i,n):(e.actions.push(this),e._scheduled||(e._scheduled=Sx.immediateProvider.setImmediate(e.flush.bind(e,void 0))))},t.prototype.recycleAsyncId=function(e,i,n){var o;if(n===void 0&&(n=0),n!=null?n>0:this.delay>0)return r.prototype.recycleAsyncId.call(this,e,i,n);var u=e.actions;i!=null&&((o=u[u.length-1])===null||o===void 0?void 0:o.id)!==i&&(Sx.immediateProvider.clearImmediate(i),e._scheduled===i&&(e._scheduled=void 0))},t}(Vj.AsyncAction);la.AsapAction=zj});var Wy=O(gp=>{"use strict";d();Object.defineProperty(gp,"__esModule",{value:!0});gp.Scheduler=void 0;var Gj=hp(),Zj=function(){function r(t,e){e===void 0&&(e=r.now),this.schedulerActionCtor=t,this.now=e}return r.prototype.schedule=function(t,e,i){return e===void 0&&(e=0),new this.schedulerActionCtor(this,t).schedule(i,e)},r.now=Gj.dateTimestampProvider.now,r}();gp.Scheduler=Zj});var pa=O(da=>{"use strict";d();var Jj=da&&da.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(da,"__esModule",{value:!0});da.AsyncScheduler=void 0;var xx=Wy(),Yj=function(r){Jj(t,r);function t(e,i){i===void 0&&(i=xx.Scheduler.now);var n=r.call(this,e,i)||this;return n.actions=[],n._active=!1,n}return t.prototype.flush=function(e){var i=this.actions;if(this._active){i.push(e);return}var n;this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=i.shift());if(this._active=!1,n){for(;e=i.shift();)e.unsubscribe();throw n}},t}(xx.Scheduler);da.AsyncScheduler=Yj});var Tx=O(ha=>{"use strict";d();var Kj=ha&&ha.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(ha,"__esModule",{value:!0});ha.AsapScheduler=void 0;var Xj=pa(),Qj=function(r){Kj(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var n=this.actions,o;e=e||n.shift();do if(o=e.execute(e.state,e.delay))break;while((e=n[0])&&e.id===i&&n.shift());if(this._active=!1,o){for(;(e=n[0])&&e.id===i&&n.shift();)e.unsubscribe();throw o}},t}(Xj.AsyncScheduler);ha.AsapScheduler=Qj});var Cx=O(fo=>{"use strict";d();Object.defineProperty(fo,"__esModule",{value:!0});fo.asap=fo.asapScheduler=void 0;var eW=Ox(),tW=Tx();fo.asapScheduler=new tW.AsapScheduler(eW.AsapAction);fo.asap=fo.asapScheduler});var zt=O(mo=>{"use strict";d();Object.defineProperty(mo,"__esModule",{value:!0});mo.async=mo.asyncScheduler=void 0;var rW=ua(),iW=pa();mo.asyncScheduler=new iW.AsyncScheduler(rW.AsyncAction);mo.async=mo.asyncScheduler});var Px=O(fa=>{"use strict";d();var nW=fa&&fa.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(fa,"__esModule",{value:!0});fa.QueueAction=void 0;var oW=ua(),sW=function(r){nW(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return t.prototype.schedule=function(e,i){return i===void 0&&(i=0),i>0?r.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,i){return i>0||this.closed?r.prototype.execute.call(this,e,i):this._execute(e,i)},t.prototype.requestAsyncId=function(e,i,n){return n===void 0&&(n=0),n!=null&&n>0||n==null&&this.delay>0?r.prototype.requestAsyncId.call(this,e,i,n):(e.flush(this),0)},t}(oW.AsyncAction);fa.QueueAction=sW});var Ax=O(ma=>{"use strict";d();var aW=ma&&ma.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(ma,"__esModule",{value:!0});ma.QueueScheduler=void 0;var uW=pa(),cW=function(r){aW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(uW.AsyncScheduler);ma.QueueScheduler=cW});var Ix=O(vo=>{"use strict";d();Object.defineProperty(vo,"__esModule",{value:!0});vo.queue=vo.queueScheduler=void 0;var lW=Px(),dW=Ax();vo.queueScheduler=new dW.QueueScheduler(lW.QueueAction);vo.queue=vo.queueScheduler});var Lx=O(va=>{"use strict";d();var pW=va&&va.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(va,"__esModule",{value:!0});va.AnimationFrameAction=void 0;var hW=ua(),Mx=Ny(),fW=function(r){pW(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return t.prototype.requestAsyncId=function(e,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,e,i,n):(e.actions.push(this),e._scheduled||(e._scheduled=Mx.animationFrameProvider.requestAnimationFrame(function(){return e.flush(void 0)})))},t.prototype.recycleAsyncId=function(e,i,n){var o;if(n===void 0&&(n=0),n!=null?n>0:this.delay>0)return r.prototype.recycleAsyncId.call(this,e,i,n);var u=e.actions;i!=null&&((o=u[u.length-1])===null||o===void 0?void 0:o.id)!==i&&(Mx.animationFrameProvider.cancelAnimationFrame(i),e._scheduled=void 0)},t}(hW.AsyncAction);va.AnimationFrameAction=fW});var kx=O(ga=>{"use strict";d();var mW=ga&&ga.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(ga,"__esModule",{value:!0});ga.AnimationFrameScheduler=void 0;var vW=pa(),gW=function(r){mW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var n=this.actions,o;e=e||n.shift();do if(o=e.execute(e.state,e.delay))break;while((e=n[0])&&e.id===i&&n.shift());if(this._active=!1,o){for(;(e=n[0])&&e.id===i&&n.shift();)e.unsubscribe();throw o}},t}(vW.AsyncScheduler);ga.AnimationFrameScheduler=gW});var Rx=O(go=>{"use strict";d();Object.defineProperty(go,"__esModule",{value:!0});go.animationFrame=go.animationFrameScheduler=void 0;var yW=Lx(),bW=kx();go.animationFrameScheduler=new bW.AnimationFrameScheduler(yW.AnimationFrameAction);go.animationFrame=go.animationFrameScheduler});var Dx=O(dn=>{"use strict";d();var Nx=dn&&dn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(dn,"__esModule",{value:!0});dn.VirtualAction=dn.VirtualTimeScheduler=void 0;var _W=ua(),EW=ur(),wW=pa(),SW=function(r){Nx(t,r);function t(e,i){e===void 0&&(e=Fx),i===void 0&&(i=1/0);var n=r.call(this,e,function(){return n.frame})||this;return n.maxFrames=i,n.frame=0,n.index=-1,n}return t.prototype.flush=function(){for(var e=this,i=e.actions,n=e.maxFrames,o,u;(u=i[0])&&u.delay<=n&&(i.shift(),this.frame=u.delay,!(o=u.execute(u.state,u.delay))););if(o){for(;u=i.shift();)u.unsubscribe();throw o}},t.frameTimeFactor=10,t}(wW.AsyncScheduler);dn.VirtualTimeScheduler=SW;var Fx=function(r){Nx(t,r);function t(e,i,n){n===void 0&&(n=e.index+=1);var o=r.call(this,e,i)||this;return o.scheduler=e,o.work=i,o.index=n,o.active=!0,o.index=e.index=n,o}return t.prototype.schedule=function(e,i){if(i===void 0&&(i=0),Number.isFinite(i)){if(!this.id)return r.prototype.schedule.call(this,e,i);this.active=!1;var n=new t(this.scheduler,this.work);return this.add(n),n.schedule(e,i)}else return EW.Subscription.EMPTY},t.prototype.requestAsyncId=function(e,i,n){n===void 0&&(n=0),this.delay=e.frame+n;var o=e.actions;return o.push(this),o.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(e,i,n){n===void 0&&(n=0)},t.prototype._execute=function(e,i){if(this.active===!0)return r.prototype._execute.call(this,e,i)},t.sortActions=function(e,i){return e.delay===i.delay?e.index===i.index?0:e.index>i.index?1:-1:e.delay>i.delay?1:-1},t}(_W.AsyncAction);dn.VirtualAction=Fx});var Hr=O(yo=>{"use strict";d();Object.defineProperty(yo,"__esModule",{value:!0});yo.empty=yo.EMPTY=void 0;var qx=We();yo.EMPTY=new qx.Observable(function(r){return r.complete()});function OW(r){return r?xW(r):yo.EMPTY}yo.empty=OW;function xW(r){return new qx.Observable(function(t){return r.schedule(function(){return t.complete()})})}});var fc=O(yp=>{"use strict";d();Object.defineProperty(yp,"__esModule",{value:!0});yp.isScheduler=void 0;var TW=Be();function CW(r){return r&&TW.isFunction(r.schedule)}yp.isScheduler=CW});var Gt=O(pn=>{"use strict";d();Object.defineProperty(pn,"__esModule",{value:!0});pn.popNumber=pn.popScheduler=pn.popResultSelector=void 0;var PW=Be(),AW=fc();function Uy(r){return r[r.length-1]}function IW(r){return PW.isFunction(Uy(r))?r.pop():void 0}pn.popResultSelector=IW;function MW(r){return AW.isScheduler(Uy(r))?r.pop():void 0}pn.popScheduler=MW;function LW(r,t){return typeof Uy(r)=="number"?r.pop():t}pn.popNumber=LW});var _p=O(bp=>{"use strict";d();Object.defineProperty(bp,"__esModule",{value:!0});bp.isArrayLike=void 0;bp.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var Hy=O(Ep=>{"use strict";d();Object.defineProperty(Ep,"__esModule",{value:!0});Ep.isPromise=void 0;var kW=Be();function RW(r){return kW.isFunction(r==null?void 0:r.then)}Ep.isPromise=RW});var Vy=O(wp=>{"use strict";d();Object.defineProperty(wp,"__esModule",{value:!0});wp.isInteropObservable=void 0;var NW=cc(),FW=Be();function DW(r){return FW.isFunction(r[NW.observable])}wp.isInteropObservable=DW});var zy=O(Sp=>{"use strict";d();Object.defineProperty(Sp,"__esModule",{value:!0});Sp.isAsyncIterable=void 0;var qW=Be();function $W(r){return Symbol.asyncIterator&&qW.isFunction(r==null?void 0:r[Symbol.asyncIterator])}Sp.isAsyncIterable=$W});var Gy=O(Op=>{"use strict";d();Object.defineProperty(Op,"__esModule",{value:!0});Op.createInvalidObservableTypeError=void 0;function BW(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}Op.createInvalidObservableTypeError=BW});var Zy=O(ya=>{"use strict";d();Object.defineProperty(ya,"__esModule",{value:!0});ya.iterator=ya.getSymbolIterator=void 0;function $x(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}ya.getSymbolIterator=$x;ya.iterator=$x()});var Jy=O(xp=>{"use strict";d();Object.defineProperty(xp,"__esModule",{value:!0});xp.isIterable=void 0;var jW=Zy(),WW=Be();function UW(r){return WW.isFunction(r==null?void 0:r[jW.iterator])}xp.isIterable=UW});var Tp=O(Ar=>{"use strict";d();var HW=Ar&&Ar.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(h){return function(f){return l([h,f])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,n&&(o=h[0]&2?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,n=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){e.label=h[1];break}if(h[0]===6&&e.label<o[1]){e.label=o[1],o=h;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(h);break}o[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(r,e)}catch(f){h=[6,f],n=0}finally{i=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},ba=Ar&&Ar.__await||function(r){return this instanceof ba?(this.v=r,this):new ba(r)},VW=Ar&&Ar.__asyncGenerator||function(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(r,t||[]),n,o=[];return n={},u("next"),u("throw"),u("return"),n[Symbol.asyncIterator]=function(){return this},n;function u(b){i[b]&&(n[b]=function(w){return new Promise(function(x,C){o.push([b,w,x,C])>1||c(b,w)})})}function c(b,w){try{l(i[b](w))}catch(x){v(o[0][3],x)}}function l(b){b.value instanceof ba?Promise.resolve(b.value.v).then(h,f):v(o[0][2],b)}function h(b){c("next",b)}function f(b){c("throw",b)}function v(b,w){b(w),o.shift(),o.length&&c(o[0][0],o[0][1])}};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.isReadableStreamLike=Ar.readableStreamLikeToAsyncGenerator=void 0;var zW=Be();function GW(r){return VW(this,arguments,function(){var e,i,n,o;return HW(this,function(u){switch(u.label){case 0:e=r.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,ba(e.read())];case 3:return i=u.sent(),n=i.value,o=i.done,o?[4,ba(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,ba(n)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}Ar.readableStreamLikeToAsyncGenerator=GW;function ZW(r){return zW.isFunction(r==null?void 0:r.getReader)}Ar.isReadableStreamLike=ZW});var fe=O(Ze=>{"use strict";d();var JW=Ze&&Ze.__awaiter||function(r,t,e,i){function n(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function c(f){try{h(i.next(f))}catch(v){u(v)}}function l(f){try{h(i.throw(f))}catch(v){u(v)}}function h(f){f.done?o(f.value):n(f.value).then(c,l)}h((i=i.apply(r,t||[])).next())})},YW=Ze&&Ze.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(h){return function(f){return l([h,f])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,n&&(o=h[0]&2?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,n=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){e.label=h[1];break}if(h[0]===6&&e.label<o[1]){e.label=o[1],o=h;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(h);break}o[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(r,e)}catch(f){h=[6,f],n=0}finally{i=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},KW=Ze&&Ze.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof Yy=="function"?Yy(r):r[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=r[o]&&function(u){return new Promise(function(c,l){u=r[o](u),n(c,l,u.done,u.value)})}}function n(o,u,c,l){Promise.resolve(l).then(function(h){o({value:h,done:c})},u)}},Yy=Ze&&Ze.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.fromReadableStreamLike=Ze.fromAsyncIterable=Ze.fromIterable=Ze.fromPromise=Ze.fromArrayLike=Ze.fromInteropObservable=Ze.innerFrom=void 0;var XW=_p(),QW=Hy(),_a=We(),eU=Vy(),tU=zy(),rU=Gy(),iU=Jy(),Bx=Tp(),nU=Be(),oU=Cy(),sU=cc();function aU(r){if(r instanceof _a.Observable)return r;if(r!=null){if(eU.isInteropObservable(r))return jx(r);if(XW.isArrayLike(r))return Wx(r);if(QW.isPromise(r))return Ux(r);if(tU.isAsyncIterable(r))return Ky(r);if(iU.isIterable(r))return Hx(r);if(Bx.isReadableStreamLike(r))return Vx(r)}throw rU.createInvalidObservableTypeError(r)}Ze.innerFrom=aU;function jx(r){return new _a.Observable(function(t){var e=r[sU.observable]();if(nU.isFunction(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}Ze.fromInteropObservable=jx;function Wx(r){return new _a.Observable(function(t){for(var e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}Ze.fromArrayLike=Wx;function Ux(r){return new _a.Observable(function(t){r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,oU.reportUnhandledError)})}Ze.fromPromise=Ux;function Hx(r){return new _a.Observable(function(t){var e,i;try{for(var n=Yy(r),o=n.next();!o.done;o=n.next()){var u=o.value;if(t.next(u),t.closed)return}}catch(c){e={error:c}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}t.complete()})}Ze.fromIterable=Hx;function Ky(r){return new _a.Observable(function(t){uU(r,t).catch(function(e){return t.error(e)})})}Ze.fromAsyncIterable=Ky;function Vx(r){return Ky(Bx.readableStreamLikeToAsyncGenerator(r))}Ze.fromReadableStreamLike=Vx;function uU(r,t){var e,i,n,o;return JW(this,void 0,void 0,function(){var u,c;return YW(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),e=KW(r),l.label=1;case 1:return[4,e.next()];case 2:if(i=l.sent(),!!i.done)return[3,4];if(u=i.value,t.next(u),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=l.sent(),n={error:c},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}});var Ii=O(Cp=>{"use strict";d();Object.defineProperty(Cp,"__esModule",{value:!0});Cp.executeSchedule=void 0;function cU(r,t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var o=t.schedule(function(){e(),n?r.add(this.schedule(null,i)):this.unsubscribe()},i);if(r.add(o),!n)return o}Cp.executeSchedule=cU});var mc=O(Pp=>{"use strict";d();Object.defineProperty(Pp,"__esModule",{value:!0});Pp.observeOn=void 0;var Xy=Ii(),lU=G(),dU=K();function pU(r,t){return t===void 0&&(t=0),lU.operate(function(e,i){e.subscribe(dU.createOperatorSubscriber(i,function(n){return Xy.executeSchedule(i,r,function(){return i.next(n)},t)},function(){return Xy.executeSchedule(i,r,function(){return i.complete()},t)},function(n){return Xy.executeSchedule(i,r,function(){return i.error(n)},t)}))})}Pp.observeOn=pU});var vc=O(Ap=>{"use strict";d();Object.defineProperty(Ap,"__esModule",{value:!0});Ap.subscribeOn=void 0;var hU=G();function fU(r,t){return t===void 0&&(t=0),hU.operate(function(e,i){i.add(r.schedule(function(){return e.subscribe(i)},t))})}Ap.subscribeOn=fU});var zx=O(Ip=>{"use strict";d();Object.defineProperty(Ip,"__esModule",{value:!0});Ip.scheduleObservable=void 0;var mU=fe(),vU=mc(),gU=vc();function yU(r,t){return mU.innerFrom(r).pipe(gU.subscribeOn(t),vU.observeOn(t))}Ip.scheduleObservable=yU});var Gx=O(Mp=>{"use strict";d();Object.defineProperty(Mp,"__esModule",{value:!0});Mp.schedulePromise=void 0;var bU=fe(),_U=mc(),EU=vc();function wU(r,t){return bU.innerFrom(r).pipe(EU.subscribeOn(t),_U.observeOn(t))}Mp.schedulePromise=wU});var Zx=O(Lp=>{"use strict";d();Object.defineProperty(Lp,"__esModule",{value:!0});Lp.scheduleArray=void 0;var SU=We();function OU(r,t){return new SU.Observable(function(e){var i=0;return t.schedule(function(){i===r.length?e.complete():(e.next(r[i++]),e.closed||this.schedule())})})}Lp.scheduleArray=OU});var Qy=O(kp=>{"use strict";d();Object.defineProperty(kp,"__esModule",{value:!0});kp.scheduleIterable=void 0;var xU=We(),TU=Zy(),CU=Be(),Jx=Ii();function PU(r,t){return new xU.Observable(function(e){var i;return Jx.executeSchedule(e,t,function(){i=r[TU.iterator](),Jx.executeSchedule(e,t,function(){var n,o,u;try{n=i.next(),o=n.value,u=n.done}catch(c){e.error(c);return}u?e.complete():e.next(o)},0,!0)}),function(){return CU.isFunction(i==null?void 0:i.return)&&i.return()}})}kp.scheduleIterable=PU});var eb=O(Rp=>{"use strict";d();Object.defineProperty(Rp,"__esModule",{value:!0});Rp.scheduleAsyncIterable=void 0;var AU=We(),Yx=Ii();function IU(r,t){if(!r)throw new Error("Iterable cannot be null");return new AU.Observable(function(e){Yx.executeSchedule(e,t,function(){var i=r[Symbol.asyncIterator]();Yx.executeSchedule(e,t,function(){i.next().then(function(n){n.done?e.complete():e.next(n.value)})},0,!0)})})}Rp.scheduleAsyncIterable=IU});var Kx=O(Np=>{"use strict";d();Object.defineProperty(Np,"__esModule",{value:!0});Np.scheduleReadableStreamLike=void 0;var MU=eb(),LU=Tp();function kU(r,t){return MU.scheduleAsyncIterable(LU.readableStreamLikeToAsyncGenerator(r),t)}Np.scheduleReadableStreamLike=kU});var tb=O(Fp=>{"use strict";d();Object.defineProperty(Fp,"__esModule",{value:!0});Fp.scheduled=void 0;var RU=zx(),NU=Gx(),FU=Zx(),DU=Qy(),qU=eb(),$U=Vy(),BU=Hy(),jU=_p(),WU=Jy(),UU=zy(),HU=Gy(),VU=Tp(),zU=Kx();function GU(r,t){if(r!=null){if($U.isInteropObservable(r))return RU.scheduleObservable(r,t);if(jU.isArrayLike(r))return FU.scheduleArray(r,t);if(BU.isPromise(r))return NU.schedulePromise(r,t);if(UU.isAsyncIterable(r))return qU.scheduleAsyncIterable(r,t);if(WU.isIterable(r))return DU.scheduleIterable(r,t);if(VU.isReadableStreamLike(r))return zU.scheduleReadableStreamLike(r,t)}throw HU.createInvalidObservableTypeError(r)}Fp.scheduled=GU});var Mi=O(Dp=>{"use strict";d();Object.defineProperty(Dp,"__esModule",{value:!0});Dp.from=void 0;var ZU=tb(),JU=fe();function YU(r,t){return t?ZU.scheduled(r,t):JU.innerFrom(r)}Dp.from=YU});var $p=O(qp=>{"use strict";d();Object.defineProperty(qp,"__esModule",{value:!0});qp.of=void 0;var KU=Gt(),XU=Mi();function QU(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=KU.popScheduler(r);return XU.from(r,e)}qp.of=QU});var rb=O(Bp=>{"use strict";d();Object.defineProperty(Bp,"__esModule",{value:!0});Bp.throwError=void 0;var eH=We(),tH=Be();function rH(r,t){var e=tH.isFunction(r)?r:function(){return r},i=function(n){return n.error(e())};return new eH.Observable(t?function(n){return t.schedule(i,0,n)}:i)}Bp.throwError=rH});var jp=O(Li=>{"use strict";d();Object.defineProperty(Li,"__esModule",{value:!0});Li.observeNotification=Li.Notification=Li.NotificationKind=void 0;var iH=Hr(),nH=$p(),oH=rb(),sH=Be(),aH;(function(r){r.NEXT="N",r.ERROR="E",r.COMPLETE="C"})(aH=Li.NotificationKind||(Li.NotificationKind={}));var uH=function(){function r(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue=t==="N"}return r.prototype.observe=function(t){return Xx(this,t)},r.prototype.do=function(t,e,i){var n=this,o=n.kind,u=n.value,c=n.error;return o==="N"?t==null?void 0:t(u):o==="E"?e==null?void 0:e(c):i==null?void 0:i()},r.prototype.accept=function(t,e,i){var n;return sH.isFunction((n=t)===null||n===void 0?void 0:n.next)?this.observe(t):this.do(t,e,i)},r.prototype.toObservable=function(){var t=this,e=t.kind,i=t.value,n=t.error,o=e==="N"?nH.of(i):e==="E"?oH.throwError(function(){return n}):e==="C"?iH.EMPTY:0;if(!o)throw new TypeError("Unexpected notification kind "+e);return o},r.createNext=function(t){return new r("N",t)},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r}();Li.Notification=uH;function Xx(r,t){var e,i,n,o=r,u=o.kind,c=o.value,l=o.error;if(typeof u!="string")throw new TypeError('Invalid notification, missing "kind"');u==="N"?(e=t.next)===null||e===void 0||e.call(t,c):u==="E"?(i=t.error)===null||i===void 0||i.call(t,l):(n=t.complete)===null||n===void 0||n.call(t)}Li.observeNotification=Xx});var eT=O(Wp=>{"use strict";d();Object.defineProperty(Wp,"__esModule",{value:!0});Wp.isObservable=void 0;var cH=We(),Qx=Be();function lH(r){return!!r&&(r instanceof cH.Observable||Qx.isFunction(r.lift)&&Qx.isFunction(r.subscribe))}Wp.isObservable=lH});var hn=O(Up=>{"use strict";d();Object.defineProperty(Up,"__esModule",{value:!0});Up.EmptyError=void 0;var dH=cn();Up.EmptyError=dH.createErrorClass(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}})});var tT=O(Hp=>{"use strict";d();Object.defineProperty(Hp,"__esModule",{value:!0});Hp.lastValueFrom=void 0;var pH=hn();function hH(r,t){var e=typeof t=="object";return new Promise(function(i,n){var o=!1,u;r.subscribe({next:function(c){u=c,o=!0},error:n,complete:function(){o?i(u):e?i(t.defaultValue):n(new pH.EmptyError)}})})}Hp.lastValueFrom=hH});var rT=O(Vp=>{"use strict";d();Object.defineProperty(Vp,"__esModule",{value:!0});Vp.firstValueFrom=void 0;var fH=hn(),mH=Qs();function vH(r,t){var e=typeof t=="object";return new Promise(function(i,n){var o=new mH.SafeSubscriber({next:function(u){i(u),o.unsubscribe()},error:n,complete:function(){e?i(t.defaultValue):n(new fH.EmptyError)}});r.subscribe(o)})}Vp.firstValueFrom=vH});var ib=O(zp=>{"use strict";d();Object.defineProperty(zp,"__esModule",{value:!0});zp.ArgumentOutOfRangeError=void 0;var gH=cn();zp.ArgumentOutOfRangeError=gH.createErrorClass(function(r){return function(){r(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})});var nb=O(Gp=>{"use strict";d();Object.defineProperty(Gp,"__esModule",{value:!0});Gp.NotFoundError=void 0;var yH=cn();Gp.NotFoundError=yH.createErrorClass(function(r){return function(e){r(this),this.name="NotFoundError",this.message=e}})});var ob=O(Zp=>{"use strict";d();Object.defineProperty(Zp,"__esModule",{value:!0});Zp.SequenceError=void 0;var bH=cn();Zp.SequenceError=bH.createErrorClass(function(r){return function(e){r(this),this.name="SequenceError",this.message=e}})});var Yp=O(Jp=>{"use strict";d();Object.defineProperty(Jp,"__esModule",{value:!0});Jp.isValidDate=void 0;function _H(r){return r instanceof Date&&!isNaN(r)}Jp.isValidDate=_H});var Kp=O(bo=>{"use strict";d();Object.defineProperty(bo,"__esModule",{value:!0});bo.timeout=bo.TimeoutError=void 0;var EH=zt(),wH=Yp(),SH=G(),OH=fe(),xH=cn(),TH=K(),CH=Ii();bo.TimeoutError=xH.createErrorClass(function(r){return function(e){e===void 0&&(e=null),r(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function PH(r,t){var e=wH.isValidDate(r)?{first:r}:typeof r=="number"?{each:r}:r,i=e.first,n=e.each,o=e.with,u=o===void 0?AH:o,c=e.scheduler,l=c===void 0?t??EH.asyncScheduler:c,h=e.meta,f=h===void 0?null:h;if(i==null&&n==null)throw new TypeError("No timeout provided.");return SH.operate(function(v,b){var w,x,C=null,I=0,A=function(j){x=CH.executeSchedule(b,l,function(){try{w.unsubscribe(),OH.innerFrom(u({meta:f,lastValue:C,seen:I})).subscribe(b)}catch(N){b.error(N)}},j)};w=v.subscribe(TH.createOperatorSubscriber(b,function(j){x==null||x.unsubscribe(),I++,b.next(C=j),n>0&&A(n)},void 0,void 0,function(){x!=null&&x.closed||x==null||x.unsubscribe(),C=null})),!I&&A(i!=null?typeof i=="number"?i:+i-l.now():n)})}bo.timeout=PH;function AH(r){throw new bo.TimeoutError(r)}});var fn=O(Xp=>{"use strict";d();Object.defineProperty(Xp,"__esModule",{value:!0});Xp.map=void 0;var IH=G(),MH=K();function LH(r,t){return IH.operate(function(e,i){var n=0;e.subscribe(MH.createOperatorSubscriber(i,function(o){i.next(r.call(t,o,n++))}))})}Xp.map=LH});var vn=O(mn=>{"use strict";d();var kH=mn&&mn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},RH=mn&&mn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(mn,"__esModule",{value:!0});mn.mapOneOrManyArgs=void 0;var NH=fn(),FH=Array.isArray;function DH(r,t){return FH(t)?r.apply(void 0,RH([],kH(t))):r(t)}function qH(r){return NH.map(function(t){return DH(r,t)})}mn.mapOneOrManyArgs=qH});var ab=O(gn=>{"use strict";d();var $H=gn&&gn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},iT=gn&&gn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(gn,"__esModule",{value:!0});gn.bindCallbackInternals=void 0;var BH=fc(),jH=We(),WH=vc(),UH=vn(),HH=mc(),VH=mp();function sb(r,t,e,i){if(e)if(BH.isScheduler(e))i=e;else return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return sb(r,t,i).apply(this,n).pipe(UH.mapOneOrManyArgs(e))};return i?function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return sb(r,t).apply(this,n).pipe(WH.subscribeOn(i),HH.observeOn(i))}:function(){for(var n=this,o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];var c=new VH.AsyncSubject,l=!0;return new jH.Observable(function(h){var f=c.subscribe(h);if(l){l=!1;var v=!1,b=!1;t.apply(n,iT(iT([],$H(o)),[function(){for(var w=[],x=0;x<arguments.length;x++)w[x]=arguments[x];if(r){var C=w.shift();if(C!=null){c.error(C);return}}c.next(1<w.length?w:w[0]),b=!0,v&&c.complete()}])),b&&c.complete(),v=!0}return f})}}gn.bindCallbackInternals=sb});var nT=O(Qp=>{"use strict";d();Object.defineProperty(Qp,"__esModule",{value:!0});Qp.bindCallback=void 0;var zH=ab();function GH(r,t,e){return zH.bindCallbackInternals(!1,r,t,e)}Qp.bindCallback=GH});var oT=O(eh=>{"use strict";d();Object.defineProperty(eh,"__esModule",{value:!0});eh.bindNodeCallback=void 0;var ZH=ab();function JH(r,t,e){return ZH.bindCallbackInternals(!0,r,t,e)}eh.bindNodeCallback=JH});var ub=O(th=>{"use strict";d();Object.defineProperty(th,"__esModule",{value:!0});th.argsArgArrayOrObject=void 0;var YH=Array.isArray,KH=Object.getPrototypeOf,XH=Object.prototype,QH=Object.keys;function eV(r){if(r.length===1){var t=r[0];if(YH(t))return{args:t,keys:null};if(tV(t)){var e=QH(t);return{args:e.map(function(i){return t[i]}),keys:e}}}return{args:r,keys:null}}th.argsArgArrayOrObject=eV;function tV(r){return r&&typeof r=="object"&&KH(r)===XH}});var cb=O(rh=>{"use strict";d();Object.defineProperty(rh,"__esModule",{value:!0});rh.createObject=void 0;function rV(r,t){return r.reduce(function(e,i,n){return e[i]=t[n],e},{})}rh.createObject=rV});var ih=O(Ea=>{"use strict";d();Object.defineProperty(Ea,"__esModule",{value:!0});Ea.combineLatestInit=Ea.combineLatest=void 0;var iV=We(),nV=ub(),uT=Mi(),cT=xt(),oV=vn(),sT=Gt(),sV=cb(),aV=K(),uV=Ii();function cV(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=sT.popScheduler(r),i=sT.popResultSelector(r),n=nV.argsArgArrayOrObject(r),o=n.args,u=n.keys;if(o.length===0)return uT.from([],e);var c=new iV.Observable(lT(o,e,u?function(l){return sV.createObject(u,l)}:cT.identity));return i?c.pipe(oV.mapOneOrManyArgs(i)):c}Ea.combineLatest=cV;function lT(r,t,e){return e===void 0&&(e=cT.identity),function(i){aT(t,function(){for(var n=r.length,o=new Array(n),u=n,c=n,l=function(f){aT(t,function(){var v=uT.from(r[f],t),b=!1;v.subscribe(aV.createOperatorSubscriber(i,function(w){o[f]=w,b||(b=!0,c--),c||i.next(e(o.slice()))},function(){--u||i.complete()}))},i)},h=0;h<n;h++)l(h)},i)}}Ea.combineLatestInit=lT;function aT(r,t,e){r?uV.executeSchedule(e,r,t):t()}});var oh=O(nh=>{"use strict";d();Object.defineProperty(nh,"__esModule",{value:!0});nh.mergeInternals=void 0;var lV=fe(),dV=Ii(),dT=K();function pV(r,t,e,i,n,o,u,c){var l=[],h=0,f=0,v=!1,b=function(){v&&!l.length&&!h&&t.complete()},w=function(C){return h<i?x(C):l.push(C)},x=function(C){o&&t.next(C),h++;var I=!1;lV.innerFrom(e(C,f++)).subscribe(dT.createOperatorSubscriber(t,function(A){n==null||n(A),o?w(A):t.next(A)},function(){I=!0},void 0,function(){if(I)try{h--;for(var A=function(){var j=l.shift();u?dV.executeSchedule(t,u,function(){return x(j)}):x(j)};l.length&&h<i;)A();b()}catch(j){t.error(j)}}))};return r.subscribe(dT.createOperatorSubscriber(t,w,function(){v=!0,b()})),function(){c==null||c()}}nh.mergeInternals=pV});var ki=O(sh=>{"use strict";d();Object.defineProperty(sh,"__esModule",{value:!0});sh.mergeMap=void 0;var hV=fn(),fV=fe(),mV=G(),vV=oh(),gV=Be();function pT(r,t,e){return e===void 0&&(e=1/0),gV.isFunction(t)?pT(function(i,n){return hV.map(function(o,u){return t(i,o,n,u)})(fV.innerFrom(r(i,n)))},e):(typeof t=="number"&&(e=t),mV.operate(function(i,n){return vV.mergeInternals(i,n,r,e)}))}sh.mergeMap=pT});var gc=O(ah=>{"use strict";d();Object.defineProperty(ah,"__esModule",{value:!0});ah.mergeAll=void 0;var yV=ki(),bV=xt();function _V(r){return r===void 0&&(r=1/0),yV.mergeMap(bV.identity,r)}ah.mergeAll=_V});var ch=O(uh=>{"use strict";d();Object.defineProperty(uh,"__esModule",{value:!0});uh.concatAll=void 0;var EV=gc();function wV(){return EV.mergeAll(1)}uh.concatAll=wV});var yc=O(lh=>{"use strict";d();Object.defineProperty(lh,"__esModule",{value:!0});lh.concat=void 0;var SV=ch(),OV=Gt(),xV=Mi();function TV(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return SV.concatAll()(xV.from(r,OV.popScheduler(r)))}lh.concat=TV});var bc=O(dh=>{"use strict";d();Object.defineProperty(dh,"__esModule",{value:!0});dh.defer=void 0;var CV=We(),PV=fe();function AV(r){return new CV.Observable(function(t){PV.innerFrom(r()).subscribe(t)})}dh.defer=AV});var hT=O(ph=>{"use strict";d();Object.defineProperty(ph,"__esModule",{value:!0});ph.connectable=void 0;var IV=Tt(),MV=We(),LV=bc(),kV={connector:function(){return new IV.Subject},resetOnDisconnect:!0};function RV(r,t){t===void 0&&(t=kV);var e=null,i=t.connector,n=t.resetOnDisconnect,o=n===void 0?!0:n,u=i(),c=new MV.Observable(function(l){return u.subscribe(l)});return c.connect=function(){return(!e||e.closed)&&(e=LV.defer(function(){return r}).subscribe(u),o&&e.add(function(){return u=i()})),e},c}ph.connectable=RV});var fT=O(hh=>{"use strict";d();Object.defineProperty(hh,"__esModule",{value:!0});hh.forkJoin=void 0;var NV=We(),FV=ub(),DV=fe(),qV=Gt(),$V=K(),BV=vn(),jV=cb();function WV(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=qV.popResultSelector(r),i=FV.argsArgArrayOrObject(r),n=i.args,o=i.keys,u=new NV.Observable(function(c){var l=n.length;if(!l){c.complete();return}for(var h=new Array(l),f=l,v=l,b=function(x){var C=!1;DV.innerFrom(n[x]).subscribe($V.createOperatorSubscriber(c,function(I){C||(C=!0,v--),h[x]=I},function(){return f--},void 0,function(){(!f||!C)&&(v||c.next(o?jV.createObject(o,h):h),c.complete())}))},w=0;w<l;w++)b(w)});return e?u.pipe(BV.mapOneOrManyArgs(e)):u}hh.forkJoin=WV});var vT=O(wa=>{"use strict";d();var UV=wa&&wa.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o};Object.defineProperty(wa,"__esModule",{value:!0});wa.fromEvent=void 0;var HV=fe(),VV=We(),zV=ki(),GV=_p(),_o=Be(),ZV=vn(),JV=["addListener","removeListener"],YV=["addEventListener","removeEventListener"],KV=["on","off"];function lb(r,t,e,i){if(_o.isFunction(e)&&(i=e,e=void 0),i)return lb(r,t,e).pipe(ZV.mapOneOrManyArgs(i));var n=UV(ez(r)?YV.map(function(c){return function(l){return r[c](t,l,e)}}):XV(r)?JV.map(mT(r,t)):QV(r)?KV.map(mT(r,t)):[],2),o=n[0],u=n[1];if(!o&&GV.isArrayLike(r))return zV.mergeMap(function(c){return lb(c,t,e)})(HV.innerFrom(r));if(!o)throw new TypeError("Invalid event target");return new VV.Observable(function(c){var l=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return c.next(1<h.length?h:h[0])};return o(l),function(){return u(l)}})}wa.fromEvent=lb;function mT(r,t){return function(e){return function(i){return r[e](t,i)}}}function XV(r){return _o.isFunction(r.addListener)&&_o.isFunction(r.removeListener)}function QV(r){return _o.isFunction(r.on)&&_o.isFunction(r.off)}function ez(r){return _o.isFunction(r.addEventListener)&&_o.isFunction(r.removeEventListener)}});var yT=O(fh=>{"use strict";d();Object.defineProperty(fh,"__esModule",{value:!0});fh.fromEventPattern=void 0;var tz=We(),rz=Be(),iz=vn();function gT(r,t,e){return e?gT(r,t).pipe(iz.mapOneOrManyArgs(e)):new tz.Observable(function(i){var n=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return i.next(u.length===1?u[0]:u)},o=r(n);return rz.isFunction(t)?function(){return t(n,o)}:void 0})}fh.fromEventPattern=gT});var _T=O(Sa=>{"use strict";d();var nz=Sa&&Sa.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(h){return function(f){return l([h,f])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,n&&(o=h[0]&2?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,n=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){e.label=h[1];break}if(h[0]===6&&e.label<o[1]){e.label=o[1],o=h;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(h);break}o[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(r,e)}catch(f){h=[6,f],n=0}finally{i=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.generate=void 0;var bT=xt(),oz=fc(),sz=bc(),az=Qy();function uz(r,t,e,i,n){var o,u,c,l;arguments.length===1?(o=r,l=o.initialState,t=o.condition,e=o.iterate,u=o.resultSelector,c=u===void 0?bT.identity:u,n=o.scheduler):(l=r,!i||oz.isScheduler(i)?(c=bT.identity,n=i):c=i);function h(){var f;return nz(this,function(v){switch(v.label){case 0:f=l,v.label=1;case 1:return!t||t(f)?[4,c(f)]:[3,4];case 2:v.sent(),v.label=3;case 3:return f=e(f),[3,1];case 4:return[2]}})}return sz.defer(n?function(){return az.scheduleIterable(h(),n)}:h)}Sa.generate=uz});var ET=O(mh=>{"use strict";d();Object.defineProperty(mh,"__esModule",{value:!0});mh.iif=void 0;var cz=bc();function lz(r,t,e){return cz.defer(function(){return r()?t:e})}mh.iif=lz});var yn=O(vh=>{"use strict";d();Object.defineProperty(vh,"__esModule",{value:!0});vh.timer=void 0;var dz=We(),pz=zt(),hz=fc(),fz=Yp();function mz(r,t,e){r===void 0&&(r=0),e===void 0&&(e=pz.async);var i=-1;return t!=null&&(hz.isScheduler(t)?e=t:i=t),new dz.Observable(function(n){var o=fz.isValidDate(r)?+r-e.now():r;o<0&&(o=0);var u=0;return e.schedule(function(){n.closed||(n.next(u++),0<=i?this.schedule(void 0,i):n.complete())},o)})}vh.timer=mz});var db=O(gh=>{"use strict";d();Object.defineProperty(gh,"__esModule",{value:!0});gh.interval=void 0;var vz=zt(),gz=yn();function yz(r,t){return r===void 0&&(r=0),t===void 0&&(t=vz.asyncScheduler),r<0&&(r=0),gz.timer(r,r,t)}gh.interval=yz});var ST=O(yh=>{"use strict";d();Object.defineProperty(yh,"__esModule",{value:!0});yh.merge=void 0;var bz=gc(),_z=fe(),Ez=Hr(),wT=Gt(),wz=Mi();function Sz(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=wT.popScheduler(r),i=wT.popNumber(r,1/0),n=r;return n.length?n.length===1?_z.innerFrom(n[0]):bz.mergeAll(i)(wz.from(n,e)):Ez.EMPTY}yh.merge=Sz});var pb=O(Eo=>{"use strict";d();Object.defineProperty(Eo,"__esModule",{value:!0});Eo.never=Eo.NEVER=void 0;var Oz=We(),xz=Ot();Eo.NEVER=new Oz.Observable(xz.noop);function Tz(){return Eo.NEVER}Eo.never=Tz});var wo=O(bh=>{"use strict";d();Object.defineProperty(bh,"__esModule",{value:!0});bh.argsOrArgArray=void 0;var Cz=Array.isArray;function Pz(r){return r.length===1&&Cz(r[0])?r[0]:r}bh.argsOrArgArray=Pz});var hb=O(_h=>{"use strict";d();Object.defineProperty(_h,"__esModule",{value:!0});_h.onErrorResumeNext=void 0;var Az=We(),Iz=wo(),Mz=K(),OT=Ot(),Lz=fe();function kz(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Iz.argsOrArgArray(r);return new Az.Observable(function(i){var n=0,o=function(){if(n<e.length){var u=void 0;try{u=Lz.innerFrom(e[n++])}catch{o();return}var c=new Mz.OperatorSubscriber(i,void 0,OT.noop,OT.noop);u.subscribe(c),c.add(o)}else i.complete()};o()})}_h.onErrorResumeNext=kz});var xT=O(Eh=>{"use strict";d();Object.defineProperty(Eh,"__esModule",{value:!0});Eh.pairs=void 0;var Rz=Mi();function Nz(r,t){return Rz.from(Object.entries(r),t)}Eh.pairs=Nz});var TT=O(wh=>{"use strict";d();Object.defineProperty(wh,"__esModule",{value:!0});wh.not=void 0;function Fz(r,t){return function(e,i){return!r.call(t,e,i)}}wh.not=Fz});var So=O(Sh=>{"use strict";d();Object.defineProperty(Sh,"__esModule",{value:!0});Sh.filter=void 0;var Dz=G(),qz=K();function $z(r,t){return Dz.operate(function(e,i){var n=0;e.subscribe(qz.createOperatorSubscriber(i,function(o){return r.call(t,o,n++)&&i.next(o)}))})}Sh.filter=$z});var AT=O(Oh=>{"use strict";d();Object.defineProperty(Oh,"__esModule",{value:!0});Oh.partition=void 0;var Bz=TT(),CT=So(),PT=fe();function jz(r,t,e){return[CT.filter(t,e)(PT.innerFrom(r)),CT.filter(Bz.not(t,e))(PT.innerFrom(r))]}Oh.partition=jz});var fb=O(Oa=>{"use strict";d();Object.defineProperty(Oa,"__esModule",{value:!0});Oa.raceInit=Oa.race=void 0;var Wz=We(),IT=fe(),Uz=wo(),Hz=K();function Vz(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r=Uz.argsOrArgArray(r),r.length===1?IT.innerFrom(r[0]):new Wz.Observable(MT(r))}Oa.race=Vz;function MT(r){return function(t){for(var e=[],i=function(o){e.push(IT.innerFrom(r[o]).subscribe(Hz.createOperatorSubscriber(t,function(u){if(e){for(var c=0;c<e.length;c++)c!==o&&e[c].unsubscribe();e=null}t.next(u)})))},n=0;e&&!t.closed&&n<r.length;n++)i(n)}}Oa.raceInit=MT});var LT=O(xh=>{"use strict";d();Object.defineProperty(xh,"__esModule",{value:!0});xh.range=void 0;var zz=We(),Gz=Hr();function Zz(r,t,e){if(t==null&&(t=r,r=0),t<=0)return Gz.EMPTY;var i=t+r;return new zz.Observable(e?function(n){var o=r;return e.schedule(function(){o<i?(n.next(o++),this.schedule()):n.complete()})}:function(n){for(var o=r;o<i&&!n.closed;)n.next(o++);n.complete()})}xh.range=Zz});var kT=O(Th=>{"use strict";d();Object.defineProperty(Th,"__esModule",{value:!0});Th.using=void 0;var Jz=We(),Yz=fe(),Kz=Hr();function Xz(r,t){return new Jz.Observable(function(e){var i=r(),n=t(i),o=n?Yz.innerFrom(n):Kz.EMPTY;return o.subscribe(e),function(){i&&i.unsubscribe()}})}Th.using=Xz});var Ch=O(bn=>{"use strict";d();var Qz=bn&&bn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},eG=bn&&bn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(bn,"__esModule",{value:!0});bn.zip=void 0;var tG=We(),rG=fe(),iG=wo(),nG=Hr(),oG=K(),sG=Gt();function aG(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=sG.popResultSelector(r),i=iG.argsOrArgArray(r);return i.length?new tG.Observable(function(n){var o=i.map(function(){return[]}),u=i.map(function(){return!1});n.add(function(){o=u=null});for(var c=function(h){rG.innerFrom(i[h]).subscribe(oG.createOperatorSubscriber(n,function(f){if(o[h].push(f),o.every(function(b){return b.length})){var v=o.map(function(b){return b.shift()});n.next(e?e.apply(void 0,eG([],Qz(v))):v),o.some(function(b,w){return!b.length&&u[w]})&&n.complete()}},function(){u[h]=!0,!o[h].length&&n.complete()}))},l=0;!n.closed&&l<i.length;l++)c(l);return function(){o=u=null}}):nG.EMPTY}bn.zip=aG});var NT=O(RT=>{"use strict";d();Object.defineProperty(RT,"__esModule",{value:!0})});var mb=O(Ph=>{"use strict";d();Object.defineProperty(Ph,"__esModule",{value:!0});Ph.audit=void 0;var uG=G(),cG=fe(),FT=K();function lG(r){return uG.operate(function(t,e){var i=!1,n=null,o=null,u=!1,c=function(){if(o==null||o.unsubscribe(),o=null,i){i=!1;var h=n;n=null,e.next(h)}u&&e.complete()},l=function(){o=null,u&&e.complete()};t.subscribe(FT.createOperatorSubscriber(e,function(h){i=!0,n=h,o||cG.innerFrom(r(h)).subscribe(o=FT.createOperatorSubscriber(e,c,l))},function(){u=!0,(!i||!o||o.closed)&&e.complete()}))})}Ph.audit=lG});var DT=O(Ah=>{"use strict";d();Object.defineProperty(Ah,"__esModule",{value:!0});Ah.auditTime=void 0;var dG=zt(),pG=mb(),hG=yn();function fG(r,t){return t===void 0&&(t=dG.asyncScheduler),pG.audit(function(){return hG.timer(r,t)})}Ah.auditTime=fG});var $T=O(Ih=>{"use strict";d();Object.defineProperty(Ih,"__esModule",{value:!0});Ih.buffer=void 0;var mG=G(),vG=Ot(),qT=K(),gG=fe();function yG(r){return mG.operate(function(t,e){var i=[];return t.subscribe(qT.createOperatorSubscriber(e,function(n){return i.push(n)},function(){e.next(i),e.complete()})),gG.innerFrom(r).subscribe(qT.createOperatorSubscriber(e,function(){var n=i;i=[],e.next(n)},vG.noop)),function(){i=null}})}Ih.buffer=yG});var BT=O(xa=>{"use strict";d();var vb=xa&&xa.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(xa,"__esModule",{value:!0});xa.bufferCount=void 0;var bG=G(),_G=K(),EG=Ai();function wG(r,t){return t===void 0&&(t=null),t=t??r,bG.operate(function(e,i){var n=[],o=0;e.subscribe(_G.createOperatorSubscriber(i,function(u){var c,l,h,f,v=null;o++%t===0&&n.push([]);try{for(var b=vb(n),w=b.next();!w.done;w=b.next()){var x=w.value;x.push(u),r<=x.length&&(v=v??[],v.push(x))}}catch(A){c={error:A}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(c)throw c.error}}if(v)try{for(var C=vb(v),I=C.next();!I.done;I=C.next()){var x=I.value;EG.arrRemove(n,x),i.next(x)}}catch(A){h={error:A}}finally{try{I&&!I.done&&(f=C.return)&&f.call(C)}finally{if(h)throw h.error}}},function(){var u,c;try{for(var l=vb(n),h=l.next();!h.done;h=l.next()){var f=h.value;i.next(f)}}catch(v){u={error:v}}finally{try{h&&!h.done&&(c=l.return)&&c.call(l)}finally{if(u)throw u.error}}i.complete()},void 0,function(){n=null}))})}xa.bufferCount=wG});var WT=O(Ta=>{"use strict";d();var SG=Ta&&Ta.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.bufferTime=void 0;var OG=ur(),xG=G(),TG=K(),CG=Ai(),PG=zt(),AG=Gt(),jT=Ii();function IG(r){for(var t,e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=(t=AG.popScheduler(i))!==null&&t!==void 0?t:PG.asyncScheduler,u=(e=i[0])!==null&&e!==void 0?e:null,c=i[1]||1/0;return xG.operate(function(l,h){var f=[],v=!1,b=function(C){var I=C.buffer,A=C.subs;A.unsubscribe(),CG.arrRemove(f,C),h.next(I),v&&w()},w=function(){if(f){var C=new OG.Subscription;h.add(C);var I=[],A={buffer:I,subs:C};f.push(A),jT.executeSchedule(C,o,function(){return b(A)},r)}};u!==null&&u>=0?jT.executeSchedule(h,o,w,u,!0):v=!0,w();var x=TG.createOperatorSubscriber(h,function(C){var I,A,j=f.slice();try{for(var N=SG(j),U=N.next();!U.done;U=N.next()){var ee=U.value,$=ee.buffer;$.push(C),c<=$.length&&b(ee)}}catch(te){I={error:te}}finally{try{U&&!U.done&&(A=N.return)&&A.call(N)}finally{if(I)throw I.error}}},function(){for(;f!=null&&f.length;)h.next(f.shift().buffer);x==null||x.unsubscribe(),h.complete(),h.unsubscribe()},void 0,function(){return f=null});l.subscribe(x)})}Ta.bufferTime=IG});var VT=O(Ca=>{"use strict";d();var MG=Ca&&Ca.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.bufferToggle=void 0;var LG=ur(),kG=G(),UT=fe(),gb=K(),HT=Ot(),RG=Ai();function NG(r,t){return kG.operate(function(e,i){var n=[];UT.innerFrom(r).subscribe(gb.createOperatorSubscriber(i,function(o){var u=[];n.push(u);var c=new LG.Subscription,l=function(){RG.arrRemove(n,u),i.next(u),c.unsubscribe()};c.add(UT.innerFrom(t(o)).subscribe(gb.createOperatorSubscriber(i,l,HT.noop)))},HT.noop)),e.subscribe(gb.createOperatorSubscriber(i,function(o){var u,c;try{for(var l=MG(n),h=l.next();!h.done;h=l.next()){var f=h.value;f.push(o)}}catch(v){u={error:v}}finally{try{h&&!h.done&&(c=l.return)&&c.call(l)}finally{if(u)throw u.error}}},function(){for(;n.length>0;)i.next(n.shift());i.complete()}))})}Ca.bufferToggle=NG});var GT=O(Mh=>{"use strict";d();Object.defineProperty(Mh,"__esModule",{value:!0});Mh.bufferWhen=void 0;var FG=G(),DG=Ot(),zT=K(),qG=fe();function $G(r){return FG.operate(function(t,e){var i=null,n=null,o=function(){n==null||n.unsubscribe();var u=i;i=[],u&&e.next(u),qG.innerFrom(r()).subscribe(n=zT.createOperatorSubscriber(e,o,DG.noop))};o(),t.subscribe(zT.createOperatorSubscriber(e,function(u){return i==null?void 0:i.push(u)},function(){i&&e.next(i),e.complete()},void 0,function(){return i=n=null}))})}Mh.bufferWhen=$G});var JT=O(Lh=>{"use strict";d();Object.defineProperty(Lh,"__esModule",{value:!0});Lh.catchError=void 0;var BG=fe(),jG=K(),WG=G();function ZT(r){return WG.operate(function(t,e){var i=null,n=!1,o;i=t.subscribe(jG.createOperatorSubscriber(e,void 0,void 0,function(u){o=BG.innerFrom(r(u,ZT(r)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):n=!0})),n&&(i.unsubscribe(),i=null,o.subscribe(e))})}Lh.catchError=ZT});var yb=O(kh=>{"use strict";d();Object.defineProperty(kh,"__esModule",{value:!0});kh.scanInternals=void 0;var UG=K();function HG(r,t,e,i,n){return function(o,u){var c=e,l=t,h=0;o.subscribe(UG.createOperatorSubscriber(u,function(f){var v=h++;l=c?r(l,f,v):(c=!0,f),i&&u.next(l)},n&&function(){c&&u.next(l),u.complete()}))}}kh.scanInternals=HG});var Pa=O(Rh=>{"use strict";d();Object.defineProperty(Rh,"__esModule",{value:!0});Rh.reduce=void 0;var VG=yb(),zG=G();function GG(r,t){return zG.operate(VG.scanInternals(r,t,arguments.length>=2,!1,!0))}Rh.reduce=GG});var bb=O(Nh=>{"use strict";d();Object.defineProperty(Nh,"__esModule",{value:!0});Nh.toArray=void 0;var ZG=Pa(),JG=G(),YG=function(r,t){return r.push(t),r};function KG(){return JG.operate(function(r,t){ZG.reduce(YG,[])(r).subscribe(t)})}Nh.toArray=KG});var _b=O(Fh=>{"use strict";d();Object.defineProperty(Fh,"__esModule",{value:!0});Fh.joinAllInternals=void 0;var XG=xt(),QG=vn(),e6=lc(),t6=ki(),r6=bb();function i6(r,t){return e6.pipe(r6.toArray(),t6.mergeMap(function(e){return r(e)}),t?QG.mapOneOrManyArgs(t):XG.identity)}Fh.joinAllInternals=i6});var Eb=O(Dh=>{"use strict";d();Object.defineProperty(Dh,"__esModule",{value:!0});Dh.combineLatestAll=void 0;var n6=ih(),o6=_b();function s6(r){return o6.joinAllInternals(n6.combineLatest,r)}Dh.combineLatestAll=s6});var YT=O(qh=>{"use strict";d();Object.defineProperty(qh,"__esModule",{value:!0});qh.combineAll=void 0;var a6=Eb();qh.combineAll=a6.combineLatestAll});var eC=O(_n=>{"use strict";d();var KT=_n&&_n.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},XT=_n&&_n.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(_n,"__esModule",{value:!0});_n.combineLatest=void 0;var u6=ih(),c6=G(),l6=wo(),d6=vn(),p6=lc(),h6=Gt();function QT(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=h6.popResultSelector(r);return e?p6.pipe(QT.apply(void 0,XT([],KT(r))),d6.mapOneOrManyArgs(e)):c6.operate(function(i,n){u6.combineLatestInit(XT([i],KT(l6.argsOrArgArray(r))))(n)})}_n.combineLatest=QT});var tC=O(En=>{"use strict";d();var f6=En&&En.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},m6=En&&En.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(En,"__esModule",{value:!0});En.combineLatestWith=void 0;var v6=eC();function g6(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return v6.combineLatest.apply(void 0,m6([],f6(r)))}En.combineLatestWith=g6});var wb=O($h=>{"use strict";d();Object.defineProperty($h,"__esModule",{value:!0});$h.concatMap=void 0;var rC=ki(),y6=Be();function b6(r,t){return y6.isFunction(t)?rC.mergeMap(r,t,1):rC.mergeMap(r,1)}$h.concatMap=b6});var nC=O(Bh=>{"use strict";d();Object.defineProperty(Bh,"__esModule",{value:!0});Bh.concatMapTo=void 0;var iC=wb(),_6=Be();function E6(r,t){return _6.isFunction(t)?iC.concatMap(function(){return r},t):iC.concatMap(function(){return r})}Bh.concatMapTo=E6});var oC=O(wn=>{"use strict";d();var w6=wn&&wn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},S6=wn&&wn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(wn,"__esModule",{value:!0});wn.concat=void 0;var O6=G(),x6=ch(),T6=Gt(),C6=Mi();function P6(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=T6.popScheduler(r);return O6.operate(function(i,n){x6.concatAll()(C6.from(S6([i],w6(r)),e)).subscribe(n)})}wn.concat=P6});var sC=O(Sn=>{"use strict";d();var A6=Sn&&Sn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},I6=Sn&&Sn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.concatWith=void 0;var M6=oC();function L6(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return M6.concat.apply(void 0,I6([],A6(r)))}Sn.concatWith=L6});var aC=O(jh=>{"use strict";d();Object.defineProperty(jh,"__esModule",{value:!0});jh.fromSubscribable=void 0;var k6=We();function R6(r){return new k6.Observable(function(t){return r.subscribe(t)})}jh.fromSubscribable=R6});var Uh=O(Wh=>{"use strict";d();Object.defineProperty(Wh,"__esModule",{value:!0});Wh.connect=void 0;var N6=Tt(),F6=fe(),D6=G(),q6=aC(),$6={connector:function(){return new N6.Subject}};function B6(r,t){t===void 0&&(t=$6);var e=t.connector;return D6.operate(function(i,n){var o=e();F6.innerFrom(r(q6.fromSubscribable(o))).subscribe(n),n.add(i.subscribe(o))})}Wh.connect=B6});var uC=O(Hh=>{"use strict";d();Object.defineProperty(Hh,"__esModule",{value:!0});Hh.count=void 0;var j6=Pa();function W6(r){return j6.reduce(function(t,e,i){return!r||r(e,i)?t+1:t},0)}Hh.count=W6});var lC=O(Vh=>{"use strict";d();Object.defineProperty(Vh,"__esModule",{value:!0});Vh.debounce=void 0;var U6=G(),H6=Ot(),cC=K(),V6=fe();function z6(r){return U6.operate(function(t,e){var i=!1,n=null,o=null,u=function(){if(o==null||o.unsubscribe(),o=null,i){i=!1;var c=n;n=null,e.next(c)}};t.subscribe(cC.createOperatorSubscriber(e,function(c){o==null||o.unsubscribe(),i=!0,n=c,o=cC.createOperatorSubscriber(e,u,H6.noop),V6.innerFrom(r(c)).subscribe(o)},function(){u(),e.complete()},void 0,function(){n=o=null}))})}Vh.debounce=z6});var dC=O(zh=>{"use strict";d();Object.defineProperty(zh,"__esModule",{value:!0});zh.debounceTime=void 0;var G6=zt(),Z6=G(),J6=K();function Y6(r,t){return t===void 0&&(t=G6.asyncScheduler),Z6.operate(function(e,i){var n=null,o=null,u=null,c=function(){if(n){n.unsubscribe(),n=null;var h=o;o=null,i.next(h)}};function l(){var h=u+r,f=t.now();if(f<h){n=this.schedule(void 0,h-f),i.add(n);return}c()}e.subscribe(J6.createOperatorSubscriber(i,function(h){o=h,u=t.now(),n||(n=t.schedule(l,r),i.add(n))},function(){c(),i.complete()},void 0,function(){o=n=null}))})}zh.debounceTime=Y6});var _c=O(Gh=>{"use strict";d();Object.defineProperty(Gh,"__esModule",{value:!0});Gh.defaultIfEmpty=void 0;var K6=G(),X6=K();function Q6(r){return K6.operate(function(t,e){var i=!1;t.subscribe(X6.createOperatorSubscriber(e,function(n){i=!0,e.next(n)},function(){i||e.next(r),e.complete()}))})}Gh.defaultIfEmpty=Q6});var Ec=O(Zh=>{"use strict";d();Object.defineProperty(Zh,"__esModule",{value:!0});Zh.take=void 0;var e4=Hr(),t4=G(),r4=K();function i4(r){return r<=0?function(){return e4.EMPTY}:t4.operate(function(t,e){var i=0;t.subscribe(r4.createOperatorSubscriber(e,function(n){++i<=r&&(e.next(n),r<=i&&e.complete())}))})}Zh.take=i4});var Sb=O(Jh=>{"use strict";d();Object.defineProperty(Jh,"__esModule",{value:!0});Jh.ignoreElements=void 0;var n4=G(),o4=K(),s4=Ot();function a4(){return n4.operate(function(r,t){r.subscribe(o4.createOperatorSubscriber(t,s4.noop))})}Jh.ignoreElements=a4});var Ob=O(Yh=>{"use strict";d();Object.defineProperty(Yh,"__esModule",{value:!0});Yh.mapTo=void 0;var u4=fn();function c4(r){return u4.map(function(){return r})}Yh.mapTo=c4});var xb=O(Kh=>{"use strict";d();Object.defineProperty(Kh,"__esModule",{value:!0});Kh.delayWhen=void 0;var l4=yc(),pC=Ec(),d4=Sb(),p4=Ob(),h4=ki(),f4=fe();function hC(r,t){return t?function(e){return l4.concat(t.pipe(pC.take(1),d4.ignoreElements()),e.pipe(hC(r)))}:h4.mergeMap(function(e,i){return f4.innerFrom(r(e,i)).pipe(pC.take(1),p4.mapTo(e))})}Kh.delayWhen=hC});var fC=O(Xh=>{"use strict";d();Object.defineProperty(Xh,"__esModule",{value:!0});Xh.delay=void 0;var m4=zt(),v4=xb(),g4=yn();function y4(r,t){t===void 0&&(t=m4.asyncScheduler);var e=g4.timer(r,t);return v4.delayWhen(function(){return e})}Xh.delay=y4});var mC=O(Qh=>{"use strict";d();Object.defineProperty(Qh,"__esModule",{value:!0});Qh.dematerialize=void 0;var b4=jp(),_4=G(),E4=K();function w4(){return _4.operate(function(r,t){r.subscribe(E4.createOperatorSubscriber(t,function(e){return b4.observeNotification(e,t)}))})}Qh.dematerialize=w4});var gC=O(ef=>{"use strict";d();Object.defineProperty(ef,"__esModule",{value:!0});ef.distinct=void 0;var S4=G(),vC=K(),O4=Ot(),x4=fe();function T4(r,t){return S4.operate(function(e,i){var n=new Set;e.subscribe(vC.createOperatorSubscriber(i,function(o){var u=r?r(o):o;n.has(u)||(n.add(u),i.next(o))})),t&&x4.innerFrom(t).subscribe(vC.createOperatorSubscriber(i,function(){return n.clear()},O4.noop))})}ef.distinct=T4});var Tb=O(tf=>{"use strict";d();Object.defineProperty(tf,"__esModule",{value:!0});tf.distinctUntilChanged=void 0;var C4=xt(),P4=G(),A4=K();function I4(r,t){return t===void 0&&(t=C4.identity),r=r??M4,P4.operate(function(e,i){var n,o=!0;e.subscribe(A4.createOperatorSubscriber(i,function(u){var c=t(u);(o||!r(n,c))&&(o=!1,n=c,i.next(u))}))})}tf.distinctUntilChanged=I4;function M4(r,t){return r===t}});var yC=O(rf=>{"use strict";d();Object.defineProperty(rf,"__esModule",{value:!0});rf.distinctUntilKeyChanged=void 0;var L4=Tb();function k4(r,t){return L4.distinctUntilChanged(function(e,i){return t?t(e[r],i[r]):e[r]===i[r]})}rf.distinctUntilKeyChanged=k4});var wc=O(nf=>{"use strict";d();Object.defineProperty(nf,"__esModule",{value:!0});nf.throwIfEmpty=void 0;var R4=hn(),N4=G(),F4=K();function D4(r){return r===void 0&&(r=q4),N4.operate(function(t,e){var i=!1;t.subscribe(F4.createOperatorSubscriber(e,function(n){i=!0,e.next(n)},function(){return i?e.complete():e.error(r())}))})}nf.throwIfEmpty=D4;function q4(){return new R4.EmptyError}});var _C=O(of=>{"use strict";d();Object.defineProperty(of,"__esModule",{value:!0});of.elementAt=void 0;var bC=ib(),$4=So(),B4=wc(),j4=_c(),W4=Ec();function U4(r,t){if(r<0)throw new bC.ArgumentOutOfRangeError;var e=arguments.length>=2;return function(i){return i.pipe($4.filter(function(n,o){return o===r}),W4.take(1),e?j4.defaultIfEmpty(t):B4.throwIfEmpty(function(){return new bC.ArgumentOutOfRangeError}))}}of.elementAt=U4});var EC=O(On=>{"use strict";d();var H4=On&&On.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},V4=On&&On.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(On,"__esModule",{value:!0});On.endWith=void 0;var z4=yc(),G4=$p();function Z4(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return z4.concat(e,G4.of.apply(void 0,V4([],H4(r))))}}On.endWith=Z4});var wC=O(sf=>{"use strict";d();Object.defineProperty(sf,"__esModule",{value:!0});sf.every=void 0;var J4=G(),Y4=K();function K4(r,t){return J4.operate(function(e,i){var n=0;e.subscribe(Y4.createOperatorSubscriber(i,function(o){r.call(t,o,n++,e)||(i.next(!1),i.complete())},function(){i.next(!0),i.complete()}))})}sf.every=K4});var Cb=O(af=>{"use strict";d();Object.defineProperty(af,"__esModule",{value:!0});af.exhaustMap=void 0;var X4=fn(),SC=fe(),Q4=G(),OC=K();function xC(r,t){return t?function(e){return e.pipe(xC(function(i,n){return SC.innerFrom(r(i,n)).pipe(X4.map(function(o,u){return t(i,o,n,u)}))}))}:Q4.operate(function(e,i){var n=0,o=null,u=!1;e.subscribe(OC.createOperatorSubscriber(i,function(c){o||(o=OC.createOperatorSubscriber(i,void 0,function(){o=null,u&&i.complete()}),SC.innerFrom(r(c,n++)).subscribe(o))},function(){u=!0,!o&&i.complete()}))})}af.exhaustMap=xC});var Pb=O(uf=>{"use strict";d();Object.defineProperty(uf,"__esModule",{value:!0});uf.exhaustAll=void 0;var e9=Cb(),t9=xt();function r9(){return e9.exhaustMap(t9.identity)}uf.exhaustAll=r9});var TC=O(cf=>{"use strict";d();Object.defineProperty(cf,"__esModule",{value:!0});cf.exhaust=void 0;var i9=Pb();cf.exhaust=i9.exhaustAll});var CC=O(lf=>{"use strict";d();Object.defineProperty(lf,"__esModule",{value:!0});lf.expand=void 0;var n9=G(),o9=oh();function s9(r,t,e){return t===void 0&&(t=1/0),t=(t||0)<1?1/0:t,n9.operate(function(i,n){return o9.mergeInternals(i,n,r,t,void 0,!0,e)})}lf.expand=s9});var PC=O(df=>{"use strict";d();Object.defineProperty(df,"__esModule",{value:!0});df.finalize=void 0;var a9=G();function u9(r){return a9.operate(function(t,e){try{t.subscribe(e)}finally{e.add(r)}})}df.finalize=u9});var Ab=O(Aa=>{"use strict";d();Object.defineProperty(Aa,"__esModule",{value:!0});Aa.createFind=Aa.find=void 0;var c9=G(),l9=K();function d9(r,t){return c9.operate(AC(r,t,"value"))}Aa.find=d9;function AC(r,t,e){var i=e==="index";return function(n,o){var u=0;n.subscribe(l9.createOperatorSubscriber(o,function(c){var l=u++;r.call(t,c,l,n)&&(o.next(i?l:c),o.complete())},function(){o.next(i?-1:void 0),o.complete()}))}}Aa.createFind=AC});var IC=O(pf=>{"use strict";d();Object.defineProperty(pf,"__esModule",{value:!0});pf.findIndex=void 0;var p9=G(),h9=Ab();function f9(r,t){return p9.operate(h9.createFind(r,t,"index"))}pf.findIndex=f9});var MC=O(hf=>{"use strict";d();Object.defineProperty(hf,"__esModule",{value:!0});hf.first=void 0;var m9=hn(),v9=So(),g9=Ec(),y9=_c(),b9=wc(),_9=xt();function E9(r,t){var e=arguments.length>=2;return function(i){return i.pipe(r?v9.filter(function(n,o){return r(n,o,i)}):_9.identity,g9.take(1),e?y9.defaultIfEmpty(t):b9.throwIfEmpty(function(){return new m9.EmptyError}))}}hf.first=E9});var kC=O(ff=>{"use strict";d();Object.defineProperty(ff,"__esModule",{value:!0});ff.groupBy=void 0;var w9=We(),S9=fe(),O9=Tt(),x9=G(),LC=K();function T9(r,t,e,i){return x9.operate(function(n,o){var u;!t||typeof t=="function"?u=t:(e=t.duration,u=t.element,i=t.connector);var c=new Map,l=function(x){c.forEach(x),x(o)},h=function(x){return l(function(C){return C.error(x)})},f=0,v=!1,b=new LC.OperatorSubscriber(o,function(x){try{var C=r(x),I=c.get(C);if(!I){c.set(C,I=i?i():new O9.Subject);var A=w(C,I);if(o.next(A),e){var j=LC.createOperatorSubscriber(I,function(){I.complete(),j==null||j.unsubscribe()},void 0,void 0,function(){return c.delete(C)});b.add(S9.innerFrom(e(A)).subscribe(j))}}I.next(u?u(x):x)}catch(N){h(N)}},function(){return l(function(x){return x.complete()})},h,function(){return c.clear()},function(){return v=!0,f===0});n.subscribe(b);function w(x,C){var I=new w9.Observable(function(A){f++;var j=C.subscribe(A);return function(){j.unsubscribe(),--f===0&&v&&b.unsubscribe()}});return I.key=x,I}})}ff.groupBy=T9});var RC=O(mf=>{"use strict";d();Object.defineProperty(mf,"__esModule",{value:!0});mf.isEmpty=void 0;var C9=G(),P9=K();function A9(){return C9.operate(function(r,t){r.subscribe(P9.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}mf.isEmpty=A9});var Ib=O(Ia=>{"use strict";d();var I9=Ia&&Ia.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.takeLast=void 0;var M9=Hr(),L9=G(),k9=K();function R9(r){return r<=0?function(){return M9.EMPTY}:L9.operate(function(t,e){var i=[];t.subscribe(k9.createOperatorSubscriber(e,function(n){i.push(n),r<i.length&&i.shift()},function(){var n,o;try{for(var u=I9(i),c=u.next();!c.done;c=u.next()){var l=c.value;e.next(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}e.complete()},void 0,function(){i=null}))})}Ia.takeLast=R9});var NC=O(vf=>{"use strict";d();Object.defineProperty(vf,"__esModule",{value:!0});vf.last=void 0;var N9=hn(),F9=So(),D9=Ib(),q9=wc(),$9=_c(),B9=xt();function j9(r,t){var e=arguments.length>=2;return function(i){return i.pipe(r?F9.filter(function(n,o){return r(n,o,i)}):B9.identity,D9.takeLast(1),e?$9.defaultIfEmpty(t):q9.throwIfEmpty(function(){return new N9.EmptyError}))}}vf.last=j9});var FC=O(gf=>{"use strict";d();Object.defineProperty(gf,"__esModule",{value:!0});gf.materialize=void 0;var Mb=jp(),W9=G(),U9=K();function H9(){return W9.operate(function(r,t){r.subscribe(U9.createOperatorSubscriber(t,function(e){t.next(Mb.Notification.createNext(e))},function(){t.next(Mb.Notification.createComplete()),t.complete()},function(e){t.next(Mb.Notification.createError(e)),t.complete()}))})}gf.materialize=H9});var DC=O(yf=>{"use strict";d();Object.defineProperty(yf,"__esModule",{value:!0});yf.max=void 0;var V9=Pa(),z9=Be();function G9(r){return V9.reduce(z9.isFunction(r)?function(t,e){return r(t,e)>0?t:e}:function(t,e){return t>e?t:e})}yf.max=G9});var qC=O(bf=>{"use strict";d();Object.defineProperty(bf,"__esModule",{value:!0});bf.flatMap=void 0;var Z9=ki();bf.flatMap=Z9.mergeMap});var BC=O(_f=>{"use strict";d();Object.defineProperty(_f,"__esModule",{value:!0});_f.mergeMapTo=void 0;var $C=ki(),J9=Be();function Y9(r,t,e){return e===void 0&&(e=1/0),J9.isFunction(t)?$C.mergeMap(function(){return r},t,e):(typeof t=="number"&&(e=t),$C.mergeMap(function(){return r},e))}_f.mergeMapTo=Y9});var jC=O(Ef=>{"use strict";d();Object.defineProperty(Ef,"__esModule",{value:!0});Ef.mergeScan=void 0;var K9=G(),X9=oh();function Q9(r,t,e){return e===void 0&&(e=1/0),K9.operate(function(i,n){var o=t;return X9.mergeInternals(i,n,function(u,c){return r(o,u,c)},e,function(u){o=u},!1,void 0,function(){return o=null})})}Ef.mergeScan=Q9});var UC=O(xn=>{"use strict";d();var e8=xn&&xn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},t8=xn&&xn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(xn,"__esModule",{value:!0});xn.merge=void 0;var r8=G(),i8=wo(),n8=gc(),WC=Gt(),o8=Mi();function s8(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=WC.popScheduler(r),i=WC.popNumber(r,1/0);return r=i8.argsOrArgArray(r),r8.operate(function(n,o){n8.mergeAll(i)(o8.from(t8([n],e8(r)),e)).subscribe(o)})}xn.merge=s8});var HC=O(Tn=>{"use strict";d();var a8=Tn&&Tn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},u8=Tn&&Tn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.mergeWith=void 0;var c8=UC();function l8(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return c8.merge.apply(void 0,u8([],a8(r)))}Tn.mergeWith=l8});var VC=O(wf=>{"use strict";d();Object.defineProperty(wf,"__esModule",{value:!0});wf.min=void 0;var d8=Pa(),p8=Be();function h8(r){return d8.reduce(p8.isFunction(r)?function(t,e){return r(t,e)<0?t:e}:function(t,e){return t<e?t:e})}wf.min=h8});var Of=O(Sf=>{"use strict";d();Object.defineProperty(Sf,"__esModule",{value:!0});Sf.multicast=void 0;var f8=dc(),zC=Be(),m8=Uh();function v8(r,t){var e=zC.isFunction(r)?r:function(){return r};return zC.isFunction(t)?m8.connect(t,{connector:e}):function(i){return new f8.ConnectableObservable(i,e)}}Sf.multicast=v8});var ZC=O(li=>{"use strict";d();var g8=li&&li.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},y8=li&&li.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(li,"__esModule",{value:!0});li.onErrorResumeNext=li.onErrorResumeNextWith=void 0;var b8=wo(),_8=hb();function GC(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=b8.argsOrArgArray(r);return function(i){return _8.onErrorResumeNext.apply(void 0,y8([i],g8(e)))}}li.onErrorResumeNextWith=GC;li.onErrorResumeNext=GC});var JC=O(xf=>{"use strict";d();Object.defineProperty(xf,"__esModule",{value:!0});xf.pairwise=void 0;var E8=G(),w8=K();function S8(){return E8.operate(function(r,t){var e,i=!1;r.subscribe(w8.createOperatorSubscriber(t,function(n){var o=e;e=n,i&&t.next([o,n]),i=!0}))})}xf.pairwise=S8});var YC=O(Tf=>{"use strict";d();Object.defineProperty(Tf,"__esModule",{value:!0});Tf.pluck=void 0;var O8=fn();function x8(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r.length;if(e===0)throw new Error("list of properties cannot be empty.");return O8.map(function(i){for(var n=i,o=0;o<e;o++){var u=n==null?void 0:n[r[o]];if(typeof u<"u")n=u;else return}return n})}Tf.pluck=x8});var KC=O(Cf=>{"use strict";d();Object.defineProperty(Cf,"__esModule",{value:!0});Cf.publish=void 0;var T8=Tt(),C8=Of(),P8=Uh();function A8(r){return r?function(t){return P8.connect(r)(t)}:function(t){return C8.multicast(new T8.Subject)(t)}}Cf.publish=A8});var XC=O(Pf=>{"use strict";d();Object.defineProperty(Pf,"__esModule",{value:!0});Pf.publishBehavior=void 0;var I8=By(),M8=dc();function L8(r){return function(t){var e=new I8.BehaviorSubject(r);return new M8.ConnectableObservable(t,function(){return e})}}Pf.publishBehavior=L8});var QC=O(Af=>{"use strict";d();Object.defineProperty(Af,"__esModule",{value:!0});Af.publishLast=void 0;var k8=mp(),R8=dc();function N8(){return function(r){var t=new k8.AsyncSubject;return new R8.ConnectableObservable(r,function(){return t})}}Af.publishLast=N8});var tP=O(If=>{"use strict";d();Object.defineProperty(If,"__esModule",{value:!0});If.publishReplay=void 0;var F8=fp(),D8=Of(),eP=Be();function q8(r,t,e,i){e&&!eP.isFunction(e)&&(i=e);var n=eP.isFunction(e)?e:void 0;return function(o){return D8.multicast(new F8.ReplaySubject(r,t,i),n)(o)}}If.publishReplay=q8});var rP=O(Cn=>{"use strict";d();var $8=Cn&&Cn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},B8=Cn&&Cn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.raceWith=void 0;var j8=fb(),W8=G(),U8=xt();function H8(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r.length?W8.operate(function(e,i){j8.raceInit(B8([e],$8(r)))(i)}):U8.identity}Cn.raceWith=H8});var nP=O(Mf=>{"use strict";d();Object.defineProperty(Mf,"__esModule",{value:!0});Mf.repeat=void 0;var V8=Hr(),z8=G(),iP=K(),G8=fe(),Z8=yn();function J8(r){var t,e=1/0,i;return r!=null&&(typeof r=="object"?(t=r.count,e=t===void 0?1/0:t,i=r.delay):e=r),e<=0?function(){return V8.EMPTY}:z8.operate(function(n,o){var u=0,c,l=function(){if(c==null||c.unsubscribe(),c=null,i!=null){var f=typeof i=="number"?Z8.timer(i):G8.innerFrom(i(u)),v=iP.createOperatorSubscriber(o,function(){v.unsubscribe(),h()});f.subscribe(v)}else h()},h=function(){var f=!1;c=n.subscribe(iP.createOperatorSubscriber(o,void 0,function(){++u<e?c?l():f=!0:o.complete()})),f&&l()};h()})}Mf.repeat=J8});var sP=O(Lf=>{"use strict";d();Object.defineProperty(Lf,"__esModule",{value:!0});Lf.repeatWhen=void 0;var Y8=fe(),K8=Tt(),X8=G(),oP=K();function Q8(r){return X8.operate(function(t,e){var i,n=!1,o,u=!1,c=!1,l=function(){return c&&u&&(e.complete(),!0)},h=function(){return o||(o=new K8.Subject,Y8.innerFrom(r(o)).subscribe(oP.createOperatorSubscriber(e,function(){i?f():n=!0},function(){u=!0,l()}))),o},f=function(){c=!1,i=t.subscribe(oP.createOperatorSubscriber(e,void 0,function(){c=!0,!l()&&h().next()})),n&&(i.unsubscribe(),i=null,n=!1,f())};f()})}Lf.repeatWhen=Q8});var uP=O(kf=>{"use strict";d();Object.defineProperty(kf,"__esModule",{value:!0});kf.retry=void 0;var e5=G(),aP=K(),t5=xt(),r5=yn(),i5=fe();function n5(r){r===void 0&&(r=1/0);var t;r&&typeof r=="object"?t=r:t={count:r};var e=t.count,i=e===void 0?1/0:e,n=t.delay,o=t.resetOnSuccess,u=o===void 0?!1:o;return i<=0?t5.identity:e5.operate(function(c,l){var h=0,f,v=function(){var b=!1;f=c.subscribe(aP.createOperatorSubscriber(l,function(w){u&&(h=0),l.next(w)},void 0,function(w){if(h++<i){var x=function(){f?(f.unsubscribe(),f=null,v()):b=!0};if(n!=null){var C=typeof n=="number"?r5.timer(n):i5.innerFrom(n(w,h)),I=aP.createOperatorSubscriber(l,function(){I.unsubscribe(),x()},function(){l.complete()});C.subscribe(I)}else x()}else l.error(w)})),b&&(f.unsubscribe(),f=null,v())};v()})}kf.retry=n5});var lP=O(Rf=>{"use strict";d();Object.defineProperty(Rf,"__esModule",{value:!0});Rf.retryWhen=void 0;var o5=fe(),s5=Tt(),a5=G(),cP=K();function u5(r){return a5.operate(function(t,e){var i,n=!1,o,u=function(){i=t.subscribe(cP.createOperatorSubscriber(e,void 0,void 0,function(c){o||(o=new s5.Subject,o5.innerFrom(r(o)).subscribe(cP.createOperatorSubscriber(e,function(){return i?u():n=!0}))),o&&o.next(c)})),n&&(i.unsubscribe(),i=null,n=!1,u())};u()})}Rf.retryWhen=u5});var Lb=O(Nf=>{"use strict";d();Object.defineProperty(Nf,"__esModule",{value:!0});Nf.sample=void 0;var c5=fe(),l5=G(),d5=Ot(),dP=K();function p5(r){return l5.operate(function(t,e){var i=!1,n=null;t.subscribe(dP.createOperatorSubscriber(e,function(o){i=!0,n=o})),c5.innerFrom(r).subscribe(dP.createOperatorSubscriber(e,function(){if(i){i=!1;var o=n;n=null,e.next(o)}},d5.noop))})}Nf.sample=p5});var pP=O(Ff=>{"use strict";d();Object.defineProperty(Ff,"__esModule",{value:!0});Ff.sampleTime=void 0;var h5=zt(),f5=Lb(),m5=db();function v5(r,t){return t===void 0&&(t=h5.asyncScheduler),f5.sample(m5.interval(r,t))}Ff.sampleTime=v5});var hP=O(Df=>{"use strict";d();Object.defineProperty(Df,"__esModule",{value:!0});Df.scan=void 0;var g5=G(),y5=yb();function b5(r,t){return g5.operate(y5.scanInternals(r,t,arguments.length>=2,!0))}Df.scan=b5});var mP=O(qf=>{"use strict";d();Object.defineProperty(qf,"__esModule",{value:!0});qf.sequenceEqual=void 0;var _5=G(),E5=K(),w5=fe();function S5(r,t){return t===void 0&&(t=function(e,i){return e===i}),_5.operate(function(e,i){var n=fP(),o=fP(),u=function(l){i.next(l),i.complete()},c=function(l,h){var f=E5.createOperatorSubscriber(i,function(v){var b=h.buffer,w=h.complete;b.length===0?w?u(!1):l.buffer.push(v):!t(v,b.shift())&&u(!1)},function(){l.complete=!0;var v=h.complete,b=h.buffer;v&&u(b.length===0),f==null||f.unsubscribe()});return f};e.subscribe(c(n,o)),w5.innerFrom(r).subscribe(c(o,n))})}qf.sequenceEqual=S5;function fP(){return{buffer:[],complete:!1}}});var Rb=O(Pn=>{"use strict";d();var O5=Pn&&Pn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},x5=Pn&&Pn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.share=void 0;var vP=fe(),T5=Tt(),gP=Qs(),C5=G();function P5(r){r===void 0&&(r={});var t=r.connector,e=t===void 0?function(){return new T5.Subject}:t,i=r.resetOnError,n=i===void 0?!0:i,o=r.resetOnComplete,u=o===void 0?!0:o,c=r.resetOnRefCountZero,l=c===void 0?!0:c;return function(h){var f,v,b,w=0,x=!1,C=!1,I=function(){v==null||v.unsubscribe(),v=void 0},A=function(){I(),f=b=void 0,x=C=!1},j=function(){var N=f;A(),N==null||N.unsubscribe()};return C5.operate(function(N,U){w++,!C&&!x&&I();var ee=b=b??e();U.add(function(){w--,w===0&&!C&&!x&&(v=kb(j,l))}),ee.subscribe(U),!f&&w>0&&(f=new gP.SafeSubscriber({next:function($){return ee.next($)},error:function($){C=!0,I(),v=kb(A,n,$),ee.error($)},complete:function(){x=!0,I(),v=kb(A,u),ee.complete()}}),vP.innerFrom(N).subscribe(f))})(h)}}Pn.share=P5;function kb(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];if(t===!0){r();return}if(t!==!1){var n=new gP.SafeSubscriber({next:function(){n.unsubscribe(),r()}});return vP.innerFrom(t.apply(void 0,x5([],O5(e)))).subscribe(n)}}});var yP=O($f=>{"use strict";d();Object.defineProperty($f,"__esModule",{value:!0});$f.shareReplay=void 0;var A5=fp(),I5=Rb();function M5(r,t,e){var i,n,o,u,c=!1;return r&&typeof r=="object"?(i=r.bufferSize,u=i===void 0?1/0:i,n=r.windowTime,t=n===void 0?1/0:n,o=r.refCount,c=o===void 0?!1:o,e=r.scheduler):u=r??1/0,I5.share({connector:function(){return new A5.ReplaySubject(u,t,e)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}$f.shareReplay=M5});var bP=O(Bf=>{"use strict";d();Object.defineProperty(Bf,"__esModule",{value:!0});Bf.single=void 0;var L5=hn(),k5=ob(),R5=nb(),N5=G(),F5=K();function D5(r){return N5.operate(function(t,e){var i=!1,n,o=!1,u=0;t.subscribe(F5.createOperatorSubscriber(e,function(c){o=!0,(!r||r(c,u++,t))&&(i&&e.error(new k5.SequenceError("Too many matching values")),i=!0,n=c)},function(){i?(e.next(n),e.complete()):e.error(o?new R5.NotFoundError("No matching values"):new L5.EmptyError)}))})}Bf.single=D5});var _P=O(jf=>{"use strict";d();Object.defineProperty(jf,"__esModule",{value:!0});jf.skip=void 0;var q5=So();function $5(r){return q5.filter(function(t,e){return r<=e})}jf.skip=$5});var EP=O(Wf=>{"use strict";d();Object.defineProperty(Wf,"__esModule",{value:!0});Wf.skipLast=void 0;var B5=xt(),j5=G(),W5=K();function U5(r){return r<=0?B5.identity:j5.operate(function(t,e){var i=new Array(r),n=0;return t.subscribe(W5.createOperatorSubscriber(e,function(o){var u=n++;if(u<r)i[u]=o;else{var c=u%r,l=i[c];i[c]=o,e.next(l)}})),function(){i=null}})}Wf.skipLast=U5});var SP=O(Uf=>{"use strict";d();Object.defineProperty(Uf,"__esModule",{value:!0});Uf.skipUntil=void 0;var H5=G(),wP=K(),V5=fe(),z5=Ot();function G5(r){return H5.operate(function(t,e){var i=!1,n=wP.createOperatorSubscriber(e,function(){n==null||n.unsubscribe(),i=!0},z5.noop);V5.innerFrom(r).subscribe(n),t.subscribe(wP.createOperatorSubscriber(e,function(o){return i&&e.next(o)}))})}Uf.skipUntil=G5});var OP=O(Hf=>{"use strict";d();Object.defineProperty(Hf,"__esModule",{value:!0});Hf.skipWhile=void 0;var Z5=G(),J5=K();function Y5(r){return Z5.operate(function(t,e){var i=!1,n=0;t.subscribe(J5.createOperatorSubscriber(e,function(o){return(i||(i=!r(o,n++)))&&e.next(o)}))})}Hf.skipWhile=Y5});var TP=O(Vf=>{"use strict";d();Object.defineProperty(Vf,"__esModule",{value:!0});Vf.startWith=void 0;var xP=yc(),K5=Gt(),X5=G();function Q5(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=K5.popScheduler(r);return X5.operate(function(i,n){(e?xP.concat(r,i,e):xP.concat(r,i)).subscribe(n)})}Vf.startWith=Q5});var Sc=O(zf=>{"use strict";d();Object.defineProperty(zf,"__esModule",{value:!0});zf.switchMap=void 0;var eZ=fe(),tZ=G(),CP=K();function rZ(r,t){return tZ.operate(function(e,i){var n=null,o=0,u=!1,c=function(){return u&&!n&&i.complete()};e.subscribe(CP.createOperatorSubscriber(i,function(l){n==null||n.unsubscribe();var h=0,f=o++;eZ.innerFrom(r(l,f)).subscribe(n=CP.createOperatorSubscriber(i,function(v){return i.next(t?t(l,v,f,h++):v)},function(){n=null,c()}))},function(){u=!0,c()}))})}zf.switchMap=rZ});var PP=O(Gf=>{"use strict";d();Object.defineProperty(Gf,"__esModule",{value:!0});Gf.switchAll=void 0;var iZ=Sc(),nZ=xt();function oZ(){return iZ.switchMap(nZ.identity)}Gf.switchAll=oZ});var IP=O(Zf=>{"use strict";d();Object.defineProperty(Zf,"__esModule",{value:!0});Zf.switchMapTo=void 0;var AP=Sc(),sZ=Be();function aZ(r,t){return sZ.isFunction(t)?AP.switchMap(function(){return r},t):AP.switchMap(function(){return r})}Zf.switchMapTo=aZ});var MP=O(Jf=>{"use strict";d();Object.defineProperty(Jf,"__esModule",{value:!0});Jf.switchScan=void 0;var uZ=Sc(),cZ=G();function lZ(r,t){return cZ.operate(function(e,i){var n=t;return uZ.switchMap(function(o,u){return r(n,o,u)},function(o,u){return n=u,u})(e).subscribe(i),function(){n=null}})}Jf.switchScan=lZ});var LP=O(Yf=>{"use strict";d();Object.defineProperty(Yf,"__esModule",{value:!0});Yf.takeUntil=void 0;var dZ=G(),pZ=K(),hZ=fe(),fZ=Ot();function mZ(r){return dZ.operate(function(t,e){hZ.innerFrom(r).subscribe(pZ.createOperatorSubscriber(e,function(){return e.complete()},fZ.noop)),!e.closed&&t.subscribe(e)})}Yf.takeUntil=mZ});var kP=O(Kf=>{"use strict";d();Object.defineProperty(Kf,"__esModule",{value:!0});Kf.takeWhile=void 0;var vZ=G(),gZ=K();function yZ(r,t){return t===void 0&&(t=!1),vZ.operate(function(e,i){var n=0;e.subscribe(gZ.createOperatorSubscriber(i,function(o){var u=r(o,n++);(u||t)&&i.next(o),!u&&i.complete()}))})}Kf.takeWhile=yZ});var RP=O(Xf=>{"use strict";d();Object.defineProperty(Xf,"__esModule",{value:!0});Xf.tap=void 0;var bZ=Be(),_Z=G(),EZ=K(),wZ=xt();function SZ(r,t,e){var i=bZ.isFunction(r)||t||e?{next:r,error:t,complete:e}:r;return i?_Z.operate(function(n,o){var u;(u=i.subscribe)===null||u===void 0||u.call(i);var c=!0;n.subscribe(EZ.createOperatorSubscriber(o,function(l){var h;(h=i.next)===null||h===void 0||h.call(i,l),o.next(l)},function(){var l;c=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},function(l){var h;c=!1,(h=i.error)===null||h===void 0||h.call(i,l),o.error(l)},function(){var l,h;c&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(h=i.finalize)===null||h===void 0||h.call(i)}))}):wZ.identity}Xf.tap=SZ});var Nb=O(Qf=>{"use strict";d();Object.defineProperty(Qf,"__esModule",{value:!0});Qf.throttle=void 0;var OZ=G(),NP=K(),xZ=fe();function TZ(r,t){return OZ.operate(function(e,i){var n=t??{},o=n.leading,u=o===void 0?!0:o,c=n.trailing,l=c===void 0?!1:c,h=!1,f=null,v=null,b=!1,w=function(){v==null||v.unsubscribe(),v=null,l&&(I(),b&&i.complete())},x=function(){v=null,b&&i.complete()},C=function(A){return v=xZ.innerFrom(r(A)).subscribe(NP.createOperatorSubscriber(i,w,x))},I=function(){if(h){h=!1;var A=f;f=null,i.next(A),!b&&C(A)}};e.subscribe(NP.createOperatorSubscriber(i,function(A){h=!0,f=A,!(v&&!v.closed)&&(u?I():C(A))},function(){b=!0,!(l&&h&&v&&!v.closed)&&i.complete()}))})}Qf.throttle=TZ});var FP=O(em=>{"use strict";d();Object.defineProperty(em,"__esModule",{value:!0});em.throttleTime=void 0;var CZ=zt(),PZ=Nb(),AZ=yn();function IZ(r,t,e){t===void 0&&(t=CZ.asyncScheduler);var i=AZ.timer(r,t);return PZ.throttle(function(){return i},e)}em.throttleTime=IZ});var qP=O(Ma=>{"use strict";d();Object.defineProperty(Ma,"__esModule",{value:!0});Ma.TimeInterval=Ma.timeInterval=void 0;var MZ=zt(),LZ=G(),kZ=K();function RZ(r){return r===void 0&&(r=MZ.asyncScheduler),LZ.operate(function(t,e){var i=r.now();t.subscribe(kZ.createOperatorSubscriber(e,function(n){var o=r.now(),u=o-i;i=o,e.next(new DP(n,u))}))})}Ma.timeInterval=RZ;var DP=function(){function r(t,e){this.value=t,this.interval=e}return r}();Ma.TimeInterval=DP});var $P=O(tm=>{"use strict";d();Object.defineProperty(tm,"__esModule",{value:!0});tm.timeoutWith=void 0;var NZ=zt(),FZ=Yp(),DZ=Kp();function qZ(r,t,e){var i,n,o;if(e=e??NZ.async,FZ.isValidDate(r)?i=r:typeof r=="number"&&(n=r),t)o=function(){return t};else throw new TypeError("No observable provided to switch to");if(i==null&&n==null)throw new TypeError("No timeout provided.");return DZ.timeout({first:i,each:n,scheduler:e,with:o})}tm.timeoutWith=qZ});var BP=O(rm=>{"use strict";d();Object.defineProperty(rm,"__esModule",{value:!0});rm.timestamp=void 0;var $Z=hp(),BZ=fn();function jZ(r){return r===void 0&&(r=$Z.dateTimestampProvider),BZ.map(function(t){return{value:t,timestamp:r.now()}})}rm.timestamp=jZ});var UP=O(im=>{"use strict";d();Object.defineProperty(im,"__esModule",{value:!0});im.window=void 0;var jP=Tt(),WZ=G(),WP=K(),UZ=Ot(),HZ=fe();function VZ(r){return WZ.operate(function(t,e){var i=new jP.Subject;e.next(i.asObservable());var n=function(o){i.error(o),e.error(o)};return t.subscribe(WP.createOperatorSubscriber(e,function(o){return i==null?void 0:i.next(o)},function(){i.complete(),e.complete()},n)),HZ.innerFrom(r).subscribe(WP.createOperatorSubscriber(e,function(){i.complete(),e.next(i=new jP.Subject)},UZ.noop,n)),function(){i==null||i.unsubscribe(),i=null}})}im.window=VZ});var VP=O(La=>{"use strict";d();var zZ=La&&La.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(La,"__esModule",{value:!0});La.windowCount=void 0;var HP=Tt(),GZ=G(),ZZ=K();function JZ(r,t){t===void 0&&(t=0);var e=t>0?t:r;return GZ.operate(function(i,n){var o=[new HP.Subject],u=[],c=0;n.next(o[0].asObservable()),i.subscribe(ZZ.createOperatorSubscriber(n,function(l){var h,f;try{for(var v=zZ(o),b=v.next();!b.done;b=v.next()){var w=b.value;w.next(l)}}catch(I){h={error:I}}finally{try{b&&!b.done&&(f=v.return)&&f.call(v)}finally{if(h)throw h.error}}var x=c-r+1;if(x>=0&&x%e===0&&o.shift().complete(),++c%e===0){var C=new HP.Subject;o.push(C),n.next(C.asObservable())}},function(){for(;o.length>0;)o.shift().complete();n.complete()},function(l){for(;o.length>0;)o.shift().error(l);n.error(l)},function(){u=null,o=null}))})}La.windowCount=JZ});var GP=O(nm=>{"use strict";d();Object.defineProperty(nm,"__esModule",{value:!0});nm.windowTime=void 0;var YZ=Tt(),KZ=zt(),XZ=ur(),QZ=G(),eJ=K(),tJ=Ai(),rJ=Gt(),zP=Ii();function iJ(r){for(var t,e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=(t=rJ.popScheduler(i))!==null&&t!==void 0?t:KZ.asyncScheduler,u=(e=i[0])!==null&&e!==void 0?e:null,c=i[1]||1/0;return QZ.operate(function(l,h){var f=[],v=!1,b=function(I){var A=I.window,j=I.subs;A.complete(),j.unsubscribe(),tJ.arrRemove(f,I),v&&w()},w=function(){if(f){var I=new XZ.Subscription;h.add(I);var A=new YZ.Subject,j={window:A,subs:I,seen:0};f.push(j),h.next(A.asObservable()),zP.executeSchedule(I,o,function(){return b(j)},r)}};u!==null&&u>=0?zP.executeSchedule(h,o,w,u,!0):v=!0,w();var x=function(I){return f.slice().forEach(I)},C=function(I){x(function(A){var j=A.window;return I(j)}),I(h),h.unsubscribe()};return l.subscribe(eJ.createOperatorSubscriber(h,function(I){x(function(A){A.window.next(I),c<=++A.seen&&b(A)})},function(){return C(function(I){return I.complete()})},function(I){return C(function(A){return A.error(I)})})),function(){f=null}})}nm.windowTime=iJ});var YP=O(ka=>{"use strict";d();var nJ=ka&&ka.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ka,"__esModule",{value:!0});ka.windowToggle=void 0;var oJ=Tt(),sJ=ur(),aJ=G(),ZP=fe(),Fb=K(),JP=Ot(),uJ=Ai();function cJ(r,t){return aJ.operate(function(e,i){var n=[],o=function(u){for(;0<n.length;)n.shift().error(u);i.error(u)};ZP.innerFrom(r).subscribe(Fb.createOperatorSubscriber(i,function(u){var c=new oJ.Subject;n.push(c);var l=new sJ.Subscription,h=function(){uJ.arrRemove(n,c),c.complete(),l.unsubscribe()},f;try{f=ZP.innerFrom(t(u))}catch(v){o(v);return}i.next(c.asObservable()),l.add(f.subscribe(Fb.createOperatorSubscriber(i,h,JP.noop,o)))},JP.noop)),e.subscribe(Fb.createOperatorSubscriber(i,function(u){var c,l,h=n.slice();try{for(var f=nJ(h),v=f.next();!v.done;v=f.next()){var b=v.value;b.next(u)}}catch(w){c={error:w}}finally{try{v&&!v.done&&(l=f.return)&&l.call(f)}finally{if(c)throw c.error}}},function(){for(;0<n.length;)n.shift().complete();i.complete()},o,function(){for(;0<n.length;)n.shift().unsubscribe()}))})}ka.windowToggle=cJ});var XP=O(om=>{"use strict";d();Object.defineProperty(om,"__esModule",{value:!0});om.windowWhen=void 0;var lJ=Tt(),dJ=G(),KP=K(),pJ=fe();function hJ(r){return dJ.operate(function(t,e){var i,n,o=function(c){i.error(c),e.error(c)},u=function(){n==null||n.unsubscribe(),i==null||i.complete(),i=new lJ.Subject,e.next(i.asObservable());var c;try{c=pJ.innerFrom(r())}catch(l){o(l);return}c.subscribe(n=KP.createOperatorSubscriber(e,u,u,o))};u(),t.subscribe(KP.createOperatorSubscriber(e,function(c){return i.next(c)},function(){i.complete(),e.complete()},o,function(){n==null||n.unsubscribe(),i=null}))})}om.windowWhen=hJ});var rA=O(An=>{"use strict";d();var QP=An&&An.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},eA=An&&An.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(An,"__esModule",{value:!0});An.withLatestFrom=void 0;var fJ=G(),tA=K(),mJ=fe(),vJ=xt(),gJ=Ot(),yJ=Gt();function bJ(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=yJ.popResultSelector(r);return fJ.operate(function(i,n){for(var o=r.length,u=new Array(o),c=r.map(function(){return!1}),l=!1,h=function(v){mJ.innerFrom(r[v]).subscribe(tA.createOperatorSubscriber(n,function(b){u[v]=b,!l&&!c[v]&&(c[v]=!0,(l=c.every(vJ.identity))&&(c=null))},gJ.noop))},f=0;f<o;f++)h(f);i.subscribe(tA.createOperatorSubscriber(n,function(v){if(l){var b=eA([v],QP(u));n.next(e?e.apply(void 0,eA([],QP(b))):b)}}))})}An.withLatestFrom=bJ});var iA=O(sm=>{"use strict";d();Object.defineProperty(sm,"__esModule",{value:!0});sm.zipAll=void 0;var _J=Ch(),EJ=_b();function wJ(r){return EJ.joinAllInternals(_J.zip,r)}sm.zipAll=wJ});var nA=O(In=>{"use strict";d();var SJ=In&&In.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},OJ=In&&In.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(In,"__esModule",{value:!0});In.zip=void 0;var xJ=Ch(),TJ=G();function CJ(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return TJ.operate(function(e,i){xJ.zip.apply(void 0,OJ([e],SJ(r))).subscribe(i)})}In.zip=CJ});var oA=O(Mn=>{"use strict";d();var PJ=Mn&&Mn.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],u;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){u={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return o},AJ=Mn&&Mn.__spreadArray||function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.zipWith=void 0;var IJ=nA();function MJ(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return IJ.zip.apply(void 0,AJ([],PJ(r)))}Mn.zipWith=MJ});var Oo=O(_=>{"use strict";d();var LJ=_&&_.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),kJ=_&&_.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&LJ(t,r,e)};Object.defineProperty(_,"__esModule",{value:!0});_.interval=_.iif=_.generate=_.fromEventPattern=_.fromEvent=_.from=_.forkJoin=_.empty=_.defer=_.connectable=_.concat=_.combineLatest=_.bindNodeCallback=_.bindCallback=_.UnsubscriptionError=_.TimeoutError=_.SequenceError=_.ObjectUnsubscribedError=_.NotFoundError=_.EmptyError=_.ArgumentOutOfRangeError=_.firstValueFrom=_.lastValueFrom=_.isObservable=_.identity=_.noop=_.pipe=_.NotificationKind=_.Notification=_.Subscriber=_.Subscription=_.Scheduler=_.VirtualAction=_.VirtualTimeScheduler=_.animationFrameScheduler=_.animationFrame=_.queueScheduler=_.queue=_.asyncScheduler=_.async=_.asapScheduler=_.asap=_.AsyncSubject=_.ReplaySubject=_.BehaviorSubject=_.Subject=_.animationFrames=_.observable=_.ConnectableObservable=_.Observable=void 0;_.filter=_.expand=_.exhaustMap=_.exhaustAll=_.exhaust=_.every=_.endWith=_.elementAt=_.distinctUntilKeyChanged=_.distinctUntilChanged=_.distinct=_.dematerialize=_.delayWhen=_.delay=_.defaultIfEmpty=_.debounceTime=_.debounce=_.count=_.connect=_.concatWith=_.concatMapTo=_.concatMap=_.concatAll=_.combineLatestWith=_.combineLatestAll=_.combineAll=_.catchError=_.bufferWhen=_.bufferToggle=_.bufferTime=_.bufferCount=_.buffer=_.auditTime=_.audit=_.config=_.NEVER=_.EMPTY=_.scheduled=_.zip=_.using=_.timer=_.throwError=_.range=_.race=_.partition=_.pairs=_.onErrorResumeNext=_.of=_.never=_.merge=void 0;_.switchMap=_.switchAll=_.subscribeOn=_.startWith=_.skipWhile=_.skipUntil=_.skipLast=_.skip=_.single=_.shareReplay=_.share=_.sequenceEqual=_.scan=_.sampleTime=_.sample=_.refCount=_.retryWhen=_.retry=_.repeatWhen=_.repeat=_.reduce=_.raceWith=_.publishReplay=_.publishLast=_.publishBehavior=_.publish=_.pluck=_.pairwise=_.onErrorResumeNextWith=_.observeOn=_.multicast=_.min=_.mergeWith=_.mergeScan=_.mergeMapTo=_.mergeMap=_.flatMap=_.mergeAll=_.max=_.materialize=_.mapTo=_.map=_.last=_.isEmpty=_.ignoreElements=_.groupBy=_.first=_.findIndex=_.find=_.finalize=void 0;_.zipWith=_.zipAll=_.withLatestFrom=_.windowWhen=_.windowToggle=_.windowTime=_.windowCount=_.window=_.toArray=_.timestamp=_.timeoutWith=_.timeout=_.timeInterval=_.throwIfEmpty=_.throttleTime=_.throttle=_.tap=_.takeWhile=_.takeUntil=_.takeLast=_.take=_.switchScan=_.switchMapTo=void 0;var RJ=We();Object.defineProperty(_,"Observable",{enumerable:!0,get:function(){return RJ.Observable}});var NJ=dc();Object.defineProperty(_,"ConnectableObservable",{enumerable:!0,get:function(){return NJ.ConnectableObservable}});var FJ=cc();Object.defineProperty(_,"observable",{enumerable:!0,get:function(){return FJ.observable}});var DJ=lx();Object.defineProperty(_,"animationFrames",{enumerable:!0,get:function(){return DJ.animationFrames}});var qJ=Tt();Object.defineProperty(_,"Subject",{enumerable:!0,get:function(){return qJ.Subject}});var $J=By();Object.defineProperty(_,"BehaviorSubject",{enumerable:!0,get:function(){return $J.BehaviorSubject}});var BJ=fp();Object.defineProperty(_,"ReplaySubject",{enumerable:!0,get:function(){return BJ.ReplaySubject}});var jJ=mp();Object.defineProperty(_,"AsyncSubject",{enumerable:!0,get:function(){return jJ.AsyncSubject}});var sA=Cx();Object.defineProperty(_,"asap",{enumerable:!0,get:function(){return sA.asap}});Object.defineProperty(_,"asapScheduler",{enumerable:!0,get:function(){return sA.asapScheduler}});var aA=zt();Object.defineProperty(_,"async",{enumerable:!0,get:function(){return aA.async}});Object.defineProperty(_,"asyncScheduler",{enumerable:!0,get:function(){return aA.asyncScheduler}});var uA=Ix();Object.defineProperty(_,"queue",{enumerable:!0,get:function(){return uA.queue}});Object.defineProperty(_,"queueScheduler",{enumerable:!0,get:function(){return uA.queueScheduler}});var cA=Rx();Object.defineProperty(_,"animationFrame",{enumerable:!0,get:function(){return cA.animationFrame}});Object.defineProperty(_,"animationFrameScheduler",{enumerable:!0,get:function(){return cA.animationFrameScheduler}});var lA=Dx();Object.defineProperty(_,"VirtualTimeScheduler",{enumerable:!0,get:function(){return lA.VirtualTimeScheduler}});Object.defineProperty(_,"VirtualAction",{enumerable:!0,get:function(){return lA.VirtualAction}});var WJ=Wy();Object.defineProperty(_,"Scheduler",{enumerable:!0,get:function(){return WJ.Scheduler}});var UJ=ur();Object.defineProperty(_,"Subscription",{enumerable:!0,get:function(){return UJ.Subscription}});var HJ=Qs();Object.defineProperty(_,"Subscriber",{enumerable:!0,get:function(){return HJ.Subscriber}});var dA=jp();Object.defineProperty(_,"Notification",{enumerable:!0,get:function(){return dA.Notification}});Object.defineProperty(_,"NotificationKind",{enumerable:!0,get:function(){return dA.NotificationKind}});var VJ=lc();Object.defineProperty(_,"pipe",{enumerable:!0,get:function(){return VJ.pipe}});var zJ=Ot();Object.defineProperty(_,"noop",{enumerable:!0,get:function(){return zJ.noop}});var GJ=xt();Object.defineProperty(_,"identity",{enumerable:!0,get:function(){return GJ.identity}});var ZJ=eT();Object.defineProperty(_,"isObservable",{enumerable:!0,get:function(){return ZJ.isObservable}});var JJ=tT();Object.defineProperty(_,"lastValueFrom",{enumerable:!0,get:function(){return JJ.lastValueFrom}});var YJ=rT();Object.defineProperty(_,"firstValueFrom",{enumerable:!0,get:function(){return YJ.firstValueFrom}});var KJ=ib();Object.defineProperty(_,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return KJ.ArgumentOutOfRangeError}});var XJ=hn();Object.defineProperty(_,"EmptyError",{enumerable:!0,get:function(){return XJ.EmptyError}});var QJ=nb();Object.defineProperty(_,"NotFoundError",{enumerable:!0,get:function(){return QJ.NotFoundError}});var e7=Fy();Object.defineProperty(_,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return e7.ObjectUnsubscribedError}});var t7=ob();Object.defineProperty(_,"SequenceError",{enumerable:!0,get:function(){return t7.SequenceError}});var r7=Kp();Object.defineProperty(_,"TimeoutError",{enumerable:!0,get:function(){return r7.TimeoutError}});var i7=Sy();Object.defineProperty(_,"UnsubscriptionError",{enumerable:!0,get:function(){return i7.UnsubscriptionError}});var n7=nT();Object.defineProperty(_,"bindCallback",{enumerable:!0,get:function(){return n7.bindCallback}});var o7=oT();Object.defineProperty(_,"bindNodeCallback",{enumerable:!0,get:function(){return o7.bindNodeCallback}});var s7=ih();Object.defineProperty(_,"combineLatest",{enumerable:!0,get:function(){return s7.combineLatest}});var a7=yc();Object.defineProperty(_,"concat",{enumerable:!0,get:function(){return a7.concat}});var u7=hT();Object.defineProperty(_,"connectable",{enumerable:!0,get:function(){return u7.connectable}});var c7=bc();Object.defineProperty(_,"defer",{enumerable:!0,get:function(){return c7.defer}});var l7=Hr();Object.defineProperty(_,"empty",{enumerable:!0,get:function(){return l7.empty}});var d7=fT();Object.defineProperty(_,"forkJoin",{enumerable:!0,get:function(){return d7.forkJoin}});var p7=Mi();Object.defineProperty(_,"from",{enumerable:!0,get:function(){return p7.from}});var h7=vT();Object.defineProperty(_,"fromEvent",{enumerable:!0,get:function(){return h7.fromEvent}});var f7=yT();Object.defineProperty(_,"fromEventPattern",{enumerable:!0,get:function(){return f7.fromEventPattern}});var m7=_T();Object.defineProperty(_,"generate",{enumerable:!0,get:function(){return m7.generate}});var v7=ET();Object.defineProperty(_,"iif",{enumerable:!0,get:function(){return v7.iif}});var g7=db();Object.defineProperty(_,"interval",{enumerable:!0,get:function(){return g7.interval}});var y7=ST();Object.defineProperty(_,"merge",{enumerable:!0,get:function(){return y7.merge}});var b7=pb();Object.defineProperty(_,"never",{enumerable:!0,get:function(){return b7.never}});var _7=$p();Object.defineProperty(_,"of",{enumerable:!0,get:function(){return _7.of}});var E7=hb();Object.defineProperty(_,"onErrorResumeNext",{enumerable:!0,get:function(){return E7.onErrorResumeNext}});var w7=xT();Object.defineProperty(_,"pairs",{enumerable:!0,get:function(){return w7.pairs}});var S7=AT();Object.defineProperty(_,"partition",{enumerable:!0,get:function(){return S7.partition}});var O7=fb();Object.defineProperty(_,"race",{enumerable:!0,get:function(){return O7.race}});var x7=LT();Object.defineProperty(_,"range",{enumerable:!0,get:function(){return x7.range}});var T7=rb();Object.defineProperty(_,"throwError",{enumerable:!0,get:function(){return T7.throwError}});var C7=yn();Object.defineProperty(_,"timer",{enumerable:!0,get:function(){return C7.timer}});var P7=kT();Object.defineProperty(_,"using",{enumerable:!0,get:function(){return P7.using}});var A7=Ch();Object.defineProperty(_,"zip",{enumerable:!0,get:function(){return A7.zip}});var I7=tb();Object.defineProperty(_,"scheduled",{enumerable:!0,get:function(){return I7.scheduled}});var M7=Hr();Object.defineProperty(_,"EMPTY",{enumerable:!0,get:function(){return M7.EMPTY}});var L7=pb();Object.defineProperty(_,"NEVER",{enumerable:!0,get:function(){return L7.NEVER}});kJ(NT(),_);var k7=Ks();Object.defineProperty(_,"config",{enumerable:!0,get:function(){return k7.config}});var R7=mb();Object.defineProperty(_,"audit",{enumerable:!0,get:function(){return R7.audit}});var N7=DT();Object.defineProperty(_,"auditTime",{enumerable:!0,get:function(){return N7.auditTime}});var F7=$T();Object.defineProperty(_,"buffer",{enumerable:!0,get:function(){return F7.buffer}});var D7=BT();Object.defineProperty(_,"bufferCount",{enumerable:!0,get:function(){return D7.bufferCount}});var q7=WT();Object.defineProperty(_,"bufferTime",{enumerable:!0,get:function(){return q7.bufferTime}});var $7=VT();Object.defineProperty(_,"bufferToggle",{enumerable:!0,get:function(){return $7.bufferToggle}});var B7=GT();Object.defineProperty(_,"bufferWhen",{enumerable:!0,get:function(){return B7.bufferWhen}});var j7=JT();Object.defineProperty(_,"catchError",{enumerable:!0,get:function(){return j7.catchError}});var W7=YT();Object.defineProperty(_,"combineAll",{enumerable:!0,get:function(){return W7.combineAll}});var U7=Eb();Object.defineProperty(_,"combineLatestAll",{enumerable:!0,get:function(){return U7.combineLatestAll}});var H7=tC();Object.defineProperty(_,"combineLatestWith",{enumerable:!0,get:function(){return H7.combineLatestWith}});var V7=ch();Object.defineProperty(_,"concatAll",{enumerable:!0,get:function(){return V7.concatAll}});var z7=wb();Object.defineProperty(_,"concatMap",{enumerable:!0,get:function(){return z7.concatMap}});var G7=nC();Object.defineProperty(_,"concatMapTo",{enumerable:!0,get:function(){return G7.concatMapTo}});var Z7=sC();Object.defineProperty(_,"concatWith",{enumerable:!0,get:function(){return Z7.concatWith}});var J7=Uh();Object.defineProperty(_,"connect",{enumerable:!0,get:function(){return J7.connect}});var Y7=uC();Object.defineProperty(_,"count",{enumerable:!0,get:function(){return Y7.count}});var K7=lC();Object.defineProperty(_,"debounce",{enumerable:!0,get:function(){return K7.debounce}});var X7=dC();Object.defineProperty(_,"debounceTime",{enumerable:!0,get:function(){return X7.debounceTime}});var Q7=_c();Object.defineProperty(_,"defaultIfEmpty",{enumerable:!0,get:function(){return Q7.defaultIfEmpty}});var eY=fC();Object.defineProperty(_,"delay",{enumerable:!0,get:function(){return eY.delay}});var tY=xb();Object.defineProperty(_,"delayWhen",{enumerable:!0,get:function(){return tY.delayWhen}});var rY=mC();Object.defineProperty(_,"dematerialize",{enumerable:!0,get:function(){return rY.dematerialize}});var iY=gC();Object.defineProperty(_,"distinct",{enumerable:!0,get:function(){return iY.distinct}});var nY=Tb();Object.defineProperty(_,"distinctUntilChanged",{enumerable:!0,get:function(){return nY.distinctUntilChanged}});var oY=yC();Object.defineProperty(_,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return oY.distinctUntilKeyChanged}});var sY=_C();Object.defineProperty(_,"elementAt",{enumerable:!0,get:function(){return sY.elementAt}});var aY=EC();Object.defineProperty(_,"endWith",{enumerable:!0,get:function(){return aY.endWith}});var uY=wC();Object.defineProperty(_,"every",{enumerable:!0,get:function(){return uY.every}});var cY=TC();Object.defineProperty(_,"exhaust",{enumerable:!0,get:function(){return cY.exhaust}});var lY=Pb();Object.defineProperty(_,"exhaustAll",{enumerable:!0,get:function(){return lY.exhaustAll}});var dY=Cb();Object.defineProperty(_,"exhaustMap",{enumerable:!0,get:function(){return dY.exhaustMap}});var pY=CC();Object.defineProperty(_,"expand",{enumerable:!0,get:function(){return pY.expand}});var hY=So();Object.defineProperty(_,"filter",{enumerable:!0,get:function(){return hY.filter}});var fY=PC();Object.defineProperty(_,"finalize",{enumerable:!0,get:function(){return fY.finalize}});var mY=Ab();Object.defineProperty(_,"find",{enumerable:!0,get:function(){return mY.find}});var vY=IC();Object.defineProperty(_,"findIndex",{enumerable:!0,get:function(){return vY.findIndex}});var gY=MC();Object.defineProperty(_,"first",{enumerable:!0,get:function(){return gY.first}});var yY=kC();Object.defineProperty(_,"groupBy",{enumerable:!0,get:function(){return yY.groupBy}});var bY=Sb();Object.defineProperty(_,"ignoreElements",{enumerable:!0,get:function(){return bY.ignoreElements}});var _Y=RC();Object.defineProperty(_,"isEmpty",{enumerable:!0,get:function(){return _Y.isEmpty}});var EY=NC();Object.defineProperty(_,"last",{enumerable:!0,get:function(){return EY.last}});var wY=fn();Object.defineProperty(_,"map",{enumerable:!0,get:function(){return wY.map}});var SY=Ob();Object.defineProperty(_,"mapTo",{enumerable:!0,get:function(){return SY.mapTo}});var OY=FC();Object.defineProperty(_,"materialize",{enumerable:!0,get:function(){return OY.materialize}});var xY=DC();Object.defineProperty(_,"max",{enumerable:!0,get:function(){return xY.max}});var TY=gc();Object.defineProperty(_,"mergeAll",{enumerable:!0,get:function(){return TY.mergeAll}});var CY=qC();Object.defineProperty(_,"flatMap",{enumerable:!0,get:function(){return CY.flatMap}});var PY=ki();Object.defineProperty(_,"mergeMap",{enumerable:!0,get:function(){return PY.mergeMap}});var AY=BC();Object.defineProperty(_,"mergeMapTo",{enumerable:!0,get:function(){return AY.mergeMapTo}});var IY=jC();Object.defineProperty(_,"mergeScan",{enumerable:!0,get:function(){return IY.mergeScan}});var MY=HC();Object.defineProperty(_,"mergeWith",{enumerable:!0,get:function(){return MY.mergeWith}});var LY=VC();Object.defineProperty(_,"min",{enumerable:!0,get:function(){return LY.min}});var kY=Of();Object.defineProperty(_,"multicast",{enumerable:!0,get:function(){return kY.multicast}});var RY=mc();Object.defineProperty(_,"observeOn",{enumerable:!0,get:function(){return RY.observeOn}});var NY=ZC();Object.defineProperty(_,"onErrorResumeNextWith",{enumerable:!0,get:function(){return NY.onErrorResumeNextWith}});var FY=JC();Object.defineProperty(_,"pairwise",{enumerable:!0,get:function(){return FY.pairwise}});var DY=YC();Object.defineProperty(_,"pluck",{enumerable:!0,get:function(){return DY.pluck}});var qY=KC();Object.defineProperty(_,"publish",{enumerable:!0,get:function(){return qY.publish}});var $Y=XC();Object.defineProperty(_,"publishBehavior",{enumerable:!0,get:function(){return $Y.publishBehavior}});var BY=QC();Object.defineProperty(_,"publishLast",{enumerable:!0,get:function(){return BY.publishLast}});var jY=tP();Object.defineProperty(_,"publishReplay",{enumerable:!0,get:function(){return jY.publishReplay}});var WY=rP();Object.defineProperty(_,"raceWith",{enumerable:!0,get:function(){return WY.raceWith}});var UY=Pa();Object.defineProperty(_,"reduce",{enumerable:!0,get:function(){return UY.reduce}});var HY=nP();Object.defineProperty(_,"repeat",{enumerable:!0,get:function(){return HY.repeat}});var VY=sP();Object.defineProperty(_,"repeatWhen",{enumerable:!0,get:function(){return VY.repeatWhen}});var zY=uP();Object.defineProperty(_,"retry",{enumerable:!0,get:function(){return zY.retry}});var GY=lP();Object.defineProperty(_,"retryWhen",{enumerable:!0,get:function(){return GY.retryWhen}});var ZY=Ry();Object.defineProperty(_,"refCount",{enumerable:!0,get:function(){return ZY.refCount}});var JY=Lb();Object.defineProperty(_,"sample",{enumerable:!0,get:function(){return JY.sample}});var YY=pP();Object.defineProperty(_,"sampleTime",{enumerable:!0,get:function(){return YY.sampleTime}});var KY=hP();Object.defineProperty(_,"scan",{enumerable:!0,get:function(){return KY.scan}});var XY=mP();Object.defineProperty(_,"sequenceEqual",{enumerable:!0,get:function(){return XY.sequenceEqual}});var QY=Rb();Object.defineProperty(_,"share",{enumerable:!0,get:function(){return QY.share}});var eK=yP();Object.defineProperty(_,"shareReplay",{enumerable:!0,get:function(){return eK.shareReplay}});var tK=bP();Object.defineProperty(_,"single",{enumerable:!0,get:function(){return tK.single}});var rK=_P();Object.defineProperty(_,"skip",{enumerable:!0,get:function(){return rK.skip}});var iK=EP();Object.defineProperty(_,"skipLast",{enumerable:!0,get:function(){return iK.skipLast}});var nK=SP();Object.defineProperty(_,"skipUntil",{enumerable:!0,get:function(){return nK.skipUntil}});var oK=OP();Object.defineProperty(_,"skipWhile",{enumerable:!0,get:function(){return oK.skipWhile}});var sK=TP();Object.defineProperty(_,"startWith",{enumerable:!0,get:function(){return sK.startWith}});var aK=vc();Object.defineProperty(_,"subscribeOn",{enumerable:!0,get:function(){return aK.subscribeOn}});var uK=PP();Object.defineProperty(_,"switchAll",{enumerable:!0,get:function(){return uK.switchAll}});var cK=Sc();Object.defineProperty(_,"switchMap",{enumerable:!0,get:function(){return cK.switchMap}});var lK=IP();Object.defineProperty(_,"switchMapTo",{enumerable:!0,get:function(){return lK.switchMapTo}});var dK=MP();Object.defineProperty(_,"switchScan",{enumerable:!0,get:function(){return dK.switchScan}});var pK=Ec();Object.defineProperty(_,"take",{enumerable:!0,get:function(){return pK.take}});var hK=Ib();Object.defineProperty(_,"takeLast",{enumerable:!0,get:function(){return hK.takeLast}});var fK=LP();Object.defineProperty(_,"takeUntil",{enumerable:!0,get:function(){return fK.takeUntil}});var mK=kP();Object.defineProperty(_,"takeWhile",{enumerable:!0,get:function(){return mK.takeWhile}});var vK=RP();Object.defineProperty(_,"tap",{enumerable:!0,get:function(){return vK.tap}});var gK=Nb();Object.defineProperty(_,"throttle",{enumerable:!0,get:function(){return gK.throttle}});var yK=FP();Object.defineProperty(_,"throttleTime",{enumerable:!0,get:function(){return yK.throttleTime}});var bK=wc();Object.defineProperty(_,"throwIfEmpty",{enumerable:!0,get:function(){return bK.throwIfEmpty}});var _K=qP();Object.defineProperty(_,"timeInterval",{enumerable:!0,get:function(){return _K.timeInterval}});var EK=Kp();Object.defineProperty(_,"timeout",{enumerable:!0,get:function(){return EK.timeout}});var wK=$P();Object.defineProperty(_,"timeoutWith",{enumerable:!0,get:function(){return wK.timeoutWith}});var SK=BP();Object.defineProperty(_,"timestamp",{enumerable:!0,get:function(){return SK.timestamp}});var OK=bb();Object.defineProperty(_,"toArray",{enumerable:!0,get:function(){return OK.toArray}});var xK=UP();Object.defineProperty(_,"window",{enumerable:!0,get:function(){return xK.window}});var TK=VP();Object.defineProperty(_,"windowCount",{enumerable:!0,get:function(){return TK.windowCount}});var CK=GP();Object.defineProperty(_,"windowTime",{enumerable:!0,get:function(){return CK.windowTime}});var PK=YP();Object.defineProperty(_,"windowToggle",{enumerable:!0,get:function(){return PK.windowToggle}});var AK=XP();Object.defineProperty(_,"windowWhen",{enumerable:!0,get:function(){return AK.windowWhen}});var IK=rA();Object.defineProperty(_,"withLatestFrom",{enumerable:!0,get:function(){return IK.withLatestFrom}});var MK=iA();Object.defineProperty(_,"zipAll",{enumerable:!0,get:function(){return MK.zipAll}});var LK=oA();Object.defineProperty(_,"zipWith",{enumerable:!0,get:function(){return LK.zipWith}})});var To=O(PA=>{d();PA.Emitter=Dt;function Dt(r){if(r)return dX(r)}function dX(r){for(var t in Dt.prototype)r[t]=Dt.prototype[t];return r}Dt.prototype.on=Dt.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};Dt.prototype.once=function(r,t){function e(){this.off(r,e),t.apply(this,arguments)}return e.fn=t,this.on(r,e),this};Dt.prototype.off=Dt.prototype.removeListener=Dt.prototype.removeAllListeners=Dt.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,n=0;n<e.length;n++)if(i=e[n],i===t||i.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+r],this};Dt.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+r],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,n=e.length;i<n;++i)e[i].apply(this,t)}return this};Dt.prototype.emitReserved=Dt.prototype.emit;Dt.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Dt.prototype.hasListeners=function(r){return!!this.listeners(r).length}});var Gb=O((Qme,IA)=>{d();function vX(r){e.debug=e,e.default=e,e.coerce=l,e.disable=o,e.enable=n,e.enabled=u,e.humanize=nc(),e.destroy=h,Object.keys(r).forEach(f=>{e[f]=r[f]}),e.names=[],e.skips=[],e.formatters={};function t(f){let v=0;for(let b=0;b<f.length;b++)v=(v<<5)-v+f.charCodeAt(b),v|=0;return e.colors[Math.abs(v)%e.colors.length]}e.selectColor=t;function e(f){let v,b=null,w,x;function C(...I){if(!C.enabled)return;let A=C,j=Number(new Date),N=j-(v||j);A.diff=N,A.prev=v,A.curr=j,v=j,I[0]=e.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let U=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,($,te)=>{if($==="%%")return"%";U++;let Te=e.formatters[te];if(typeof Te=="function"){let Oe=I[U];$=Te.call(A,Oe),I.splice(U,1),U--}return $}),e.formatArgs.call(A,I),(A.log||e.log).apply(A,I)}return C.namespace=f,C.useColors=e.useColors(),C.color=e.selectColor(f),C.extend=i,C.destroy=e.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(w!==e.namespaces&&(w=e.namespaces,x=e.enabled(f)),x),set:I=>{b=I}}),typeof e.init=="function"&&e.init(C),C}function i(f,v){let b=e(this.namespace+(typeof v>"u"?":":v)+f);return b.log=this.log,b}function n(f){e.save(f),e.namespaces=f,e.names=[],e.skips=[];let v,b=(typeof f=="string"?f:"").split(/[\s,]+/),w=b.length;for(v=0;v<w;v++)b[v]&&(f=b[v].replace(/\*/g,".*?"),f[0]==="-"?e.skips.push(new RegExp("^"+f.slice(1)+"$")):e.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...e.names.map(c),...e.skips.map(c).map(v=>"-"+v)].join(",");return e.enable(""),f}function u(f){if(f[f.length-1]==="*")return!0;let v,b;for(v=0,b=e.skips.length;v<b;v++)if(e.skips[v].test(f))return!1;for(v=0,b=e.names.length;v<b;v++)if(e.names[v].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}IA.exports=vX});var MA=O((cr,pm)=>{d();cr.formatArgs=yX;cr.save=bX;cr.load=_X;cr.useColors=gX;cr.storage=EX();cr.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();cr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gX(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function yX(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+pm.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;r.splice(1,0,t,"color: inherit");let e=0,i=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(e++,n==="%c"&&(i=e))}),r.splice(i,0,t)}cr.log=console.debug||console.log||(()=>{});function bX(r){try{r?cr.storage.setItem("debug",r):cr.storage.removeItem("debug")}catch{}}function _X(){let r;try{r=cr.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=g.DEBUG),r}function EX(){try{return localStorage}catch{}}pm.exports=Gb()(cr);var{formatters:wX}=pm.exports;wX.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var kA=O((mt,fm)=>{d();var SX=require("tty"),hm=require("util");mt.init=IX;mt.log=CX;mt.formatArgs=xX;mt.save=PX;mt.load=AX;mt.useColors=OX;mt.destroy=hm.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");mt.colors=[6,2,3,4,5,1];try{let r=oc();r&&(r.stderr||r).level>=2&&(mt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}mt.inspectOpts=Object.keys(g).filter(r=>/^debug_/i.test(r)).reduce((r,t)=>{let e=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,o)=>o.toUpperCase()),i=g[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),r[e]=i,r},{});function OX(){return"colors"in mt.inspectOpts?!!mt.inspectOpts.colors:SX.isatty(process.stderr.fd)}function xX(r){let{namespace:t,useColors:e}=this;if(e){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),o=`  ${n};1m${t} \x1B[0m`;r[0]=o+r[0].split(`
`).join(`
`+o),r.push(n+"m+"+fm.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=TX()+t+" "+r[0]}function TX(){return mt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function CX(...r){return process.stderr.write(hm.formatWithOptions(mt.inspectOpts,...r)+`
`)}function PX(r){r?g.DEBUG=r:delete g.DEBUG}function AX(){return g.DEBUG}function IX(r){r.inspectOpts={};let t=Object.keys(mt.inspectOpts);for(let e=0;e<t.length;e++)r.inspectOpts[t[e]]=mt.inspectOpts[t[e]]}fm.exports=Gb()(mt);var{formatters:LA}=fm.exports;LA.o=function(r){return this.inspectOpts.colors=this.useColors,hm.inspect(r,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};LA.O=function(r){return this.inspectOpts.colors=this.useColors,hm.inspect(r,this.inspectOpts)}});var $a=O((ive,Zb)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Zb.exports=MA():Zb.exports=kA()});var HA=O((fve,UA)=>{d();var Ba=require("fs"),WA=require("url"),kX=require("child_process").spawn;UA.exports=Yb;Yb.XMLHttpRequest=Yb;function Yb(r){"use strict";r=r||{};var t=this,e=require("http"),i=require("https"),n,o,u={},c=!1,l={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},h=Object.assign({},l),f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],v=["TRACE","TRACK","CONNECT"],b=!1,w=!1,x=!1,C={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null;var I=function(N){return c||N&&f.indexOf(N.toLowerCase())===-1},A=function(N){return N&&v.indexOf(N)===-1};this.open=function(N,U,ee,$,te){if(this.abort(),w=!1,x=!1,!A(N))throw new Error("SecurityError: Request method not allowed");u={method:N,url:U.toString(),async:typeof ee!="boolean"?!0:ee,user:$||null,password:te||null},j(this.OPENED)},this.setDisableHeaderCheck=function(N){c=N},this.setRequestHeader=function(N,U){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!I(N))return console.warn('Refused to set unsafe header "'+N+'"'),!1;if(b)throw new Error("INVALID_STATE_ERR: send flag is true");return h[N]=U,!0},this.getResponseHeader=function(N){return typeof N=="string"&&this.readyState>this.OPENED&&o.headers[N.toLowerCase()]&&!w?o.headers[N.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||w)return"";var N="";for(var U in o.headers)U!=="set-cookie"&&U!=="set-cookie2"&&(N+=U+": "+o.headers[U]+`\r
`);return N.substr(0,N.length-2)},this.getRequestHeader=function(N){return typeof N=="string"&&h[N]?h[N]:""},this.send=function(N){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(b)throw new Error("INVALID_STATE_ERR: send has already been called");var U=!1,ee=!1,$=WA.parse(u.url),te;switch($.protocol){case"https:":U=!0;case"http:":te=$.hostname;break;case"file:":ee=!0;break;case void 0:case"":te="localhost";break;default:throw new Error("Protocol not supported.")}if(ee){if(u.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(u.async)Ba.readFile(unescape($.pathname),"utf8",function(Bt,Qt){Bt?t.handleError(Bt,Bt.errno||-1):(t.status=200,t.responseText=Qt,j(t.DONE))});else try{this.responseText=Ba.readFileSync(unescape($.pathname),"utf8"),this.status=200,j(t.DONE)}catch(Bt){this.handleError(Bt,Bt.errno||-1)}return}var Te=$.port||(U?443:80),Oe=$.pathname+($.search?$.search:"");if(h.Host=te,U&&Te===443||Te===80||(h.Host+=":"+$.port),u.user){typeof u.password>"u"&&(u.password="");var tt=new Buffer(u.user+":"+u.password);h.Authorization="Basic "+tt.toString("base64")}u.method==="GET"||u.method==="HEAD"?N=null:N?(h["Content-Length"]=Buffer.isBuffer(N)?N.length:Buffer.byteLength(N),h["Content-Type"]||(h["Content-Type"]="text/plain;charset=UTF-8")):u.method==="POST"&&(h["Content-Length"]=0);var yr=r.agent||!1,ot={host:te,port:Te,path:Oe,method:u.method,headers:h,agent:yr};if(U&&(ot.pfx=r.pfx,ot.key=r.key,ot.passphrase=r.passphrase,ot.cert=r.cert,ot.ca=r.ca,ot.ciphers=r.ciphers,ot.rejectUnauthorized=r.rejectUnauthorized!==!1),w=!1,u.async){var Kn=U?i.request:e.request;b=!0,t.dispatchEvent("readystatechange");var Xn=function(Bt){if(o=Bt,o.statusCode===302||o.statusCode===303||o.statusCode===307){u.url=o.headers.location;var Qt=WA.parse(u.url);te=Qt.hostname;var er={hostname:Qt.hostname,port:Qt.port,path:Qt.path,method:o.statusCode===303?"GET":u.method,headers:h};U&&(er.pfx=r.pfx,er.key=r.key,er.passphrase=r.passphrase,er.cert=r.cert,er.ca=r.ca,er.ciphers=r.ciphers,er.rejectUnauthorized=r.rejectUnauthorized!==!1),n=Kn(er,Xn).on("error",Xt),n.end();return}o&&o.setEncoding&&o.setEncoding("utf8"),j(t.HEADERS_RECEIVED),t.status=o.statusCode,o.on("data",function(Cs){Cs&&(t.responseText+=Cs),b&&j(t.LOADING)}),o.on("end",function(){b&&(b=!1,j(t.DONE))}),o.on("error",function(Cs){t.handleError(Cs)})},Xt=function(Bt){t.handleError(Bt)};n=Kn(ot,Xn).on("error",Xt),r.autoUnref&&n.on("socket",Bt=>{Bt.unref()}),N&&n.write(N),n.end(),t.dispatchEvent("loadstart")}else{var $t=".node-xmlhttprequest-content-"+process.pid,Qn=".node-xmlhttprequest-sync-"+process.pid;Ba.writeFileSync(Qn,"","utf8");for(var Ts="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(U?"s":"")+".request;var options = "+JSON.stringify(ot)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+$t+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');fs.unlinkSync('"+Qn+"');});response.on('error', function(error) {fs.writeFileSync('"+$t+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Qn+"');});}).on('error', function(error) {fs.writeFileSync('"+$t+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Qn+"');});"+(N?"req.write('"+JSON.stringify(N).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",br=kX(process.argv[0],["-e",Ts]),fE;Ba.existsSync(Qn););if(t.responseText=Ba.readFileSync($t,"utf8"),br.stdin.end(),Ba.unlinkSync($t),t.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var Hv=t.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,"");t.handleError(Hv,503)}else t.status=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1"),t.responseText=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"),j(t.DONE)}},this.handleError=function(N,U){this.status=U||0,this.statusText=N,this.responseText=N.stack,w=!0,j(this.DONE)},this.abort=function(){n&&(n.abort(),n=null),h=Object.assign({},l),this.responseText="",this.responseXML="",w=x=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||b)&&this.readyState!==this.DONE&&(b=!1,j(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(N,U){N in C||(C[N]=[]),C[N].push(U)},this.removeEventListener=function(N,U){N in C&&(C[N]=C[N].filter(function(ee){return ee!==U}))},this.dispatchEvent=function(N){if(typeof t["on"+N]=="function"&&(this.readyState===this.DONE?setImmediate(function(){t["on"+N]()}):t["on"+N]()),N in C)for(let U=0,ee=C[N].length;U<ee;U++)this.readyState===this.DONE?setImmediate(function(){C[N][U].call(t)}):C[N][U].call(t)};var j=function(N){if(!(t.readyState===N||t.readyState===t.UNSENT&&x)&&(t.readyState=N,(u.async||t.readyState<t.OPENED||t.readyState===t.DONE)&&t.dispatchEvent("readystatechange"),t.readyState===t.DONE)){let U;x?U="abort":w?U="error":U="load",t.dispatchEvent(U),t.dispatchEvent("loadend")}}}});var XA=O((Tve,KA)=>{"use strict";d();var{Duplex:DX}=require("stream");function JA(r){r.emit("close")}function qX(){!this.destroyed&&this._writableState.finished&&this.destroy()}function YA(r){this.removeListener("error",YA),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function $X(r,t){let e=!0,i=new DX({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return r.on("message",function(o,u){let c=!u&&i._readableState.objectMode?o.toString():o;i.push(c)||r.pause()}),r.once("error",function(o){i.destroyed||(e=!1,i.destroy(o))}),r.once("close",function(){i.destroyed||i.push(null)}),i._destroy=function(n,o){if(r.readyState===r.CLOSED){o(n),process.nextTick(JA,i);return}let u=!1;r.once("error",function(l){u=!0,o(l)}),r.once("close",function(){u||o(n),process.nextTick(JA,i)}),e&&r.terminate()},i._final=function(n){if(r.readyState===r.CONNECTING){r.once("open",function(){i._final(n)});return}r._socket!==null&&(r._socket._writableState.finished?(n(),i._readableState.endEmitted&&i.destroy()):(r._socket.once("finish",function(){n()}),r.close()))},i._read=function(){r.isPaused&&r.resume()},i._write=function(n,o,u){if(r.readyState===r.CONNECTING){r.once("open",function(){i._write(n,o,u)});return}r.send(n,u)},i.on("end",qX),i.on("error",YA),i}KA.exports=$X});var kn=O((Pve,QA)=>{"use strict";d();QA.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Lc=O((Ive,bm)=>{"use strict";d();var{EMPTY_BUFFER:BX}=kn(),e_=Buffer[Symbol.species];function jX(r,t){if(r.length===0)return BX;if(r.length===1)return r[0];let e=Buffer.allocUnsafe(t),i=0;for(let n=0;n<r.length;n++){let o=r[n];e.set(o,i),i+=o.length}return i<t?new e_(e.buffer,e.byteOffset,i):e}function e1(r,t,e,i,n){for(let o=0;o<n;o++)e[i+o]=r[o]^t[o&3]}function t1(r,t){for(let e=0;e<r.length;e++)r[e]^=t[e&3]}function WX(r){return r.length===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.length)}function t_(r){if(t_.readOnly=!0,Buffer.isBuffer(r))return r;let t;return r instanceof ArrayBuffer?t=new e_(r):ArrayBuffer.isView(r)?t=new e_(r.buffer,r.byteOffset,r.byteLength):(t=Buffer.from(r),t_.readOnly=!1),t}bm.exports={concat:jX,mask:e1,toArrayBuffer:WX,toBuffer:t_,unmask:t1};if(!g.WS_NO_BUFFER_UTIL)try{let r=require("bufferutil");bm.exports.mask=function(t,e,i,n,o){o<48?e1(t,e,i,n,o):r.mask(t,e,i,n,o)},bm.exports.unmask=function(t,e){t.length<32?t1(t,e):r.unmask(t,e)}}catch{}});var n1=O((Lve,i1)=>{"use strict";d();var r1=Symbol("kDone"),r_=Symbol("kRun"),i_=class{constructor(t){this[r1]=()=>{this.pending--,this[r_]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[r_]()}[r_](){if(this.pending!==this.concurrency&&this.jobs.length){let t=this.jobs.shift();this.pending++,t(this[r1])}}};i1.exports=i_});var Nc=O((Rve,u1)=>{"use strict";d();var kc=require("zlib"),o1=Lc(),UX=n1(),{kStatusCode:s1}=kn(),HX=Buffer[Symbol.species],VX=Buffer.from([0,0,255,255]),wm=Symbol("permessage-deflate"),qi=Symbol("total-length"),Rc=Symbol("callback"),Rn=Symbol("buffers"),Em=Symbol("error"),_m,n_=class{constructor(t,e,i){if(this._maxPayload=i|0,this._options=t||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!e,this._deflate=null,this._inflate=null,this.params=null,!_m){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;_m=new UX(n)}}static get extensionName(){return"permessage-deflate"}offer(){let t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let t=this._deflate[Rc];this._deflate.close(),this._deflate=null,t&&t(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){let e=this._options,i=t.find(n=>!(e.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(e.serverMaxWindowBits===!1||typeof e.serverMaxWindowBits=="number"&&e.serverMaxWindowBits>n.server_max_window_bits)||typeof e.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!i)throw new Error("None of the extension offers can be accepted");return e.serverNoContextTakeover&&(i.server_no_context_takeover=!0),e.clientNoContextTakeover&&(i.client_no_context_takeover=!0),typeof e.serverMaxWindowBits=="number"&&(i.server_max_window_bits=e.serverMaxWindowBits),typeof e.clientMaxWindowBits=="number"?i.client_max_window_bits=e.clientMaxWindowBits:(i.client_max_window_bits===!0||e.clientMaxWindowBits===!1)&&delete i.client_max_window_bits,i}acceptAsClient(t){let e=t[0];if(this._options.clientNoContextTakeover===!1&&e.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!e.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(e.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&e.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return e}normalizeParams(t){return t.forEach(e=>{Object.keys(e).forEach(i=>{let n=e[i];if(n.length>1)throw new Error(`Parameter "${i}" must have only a single value`);if(n=n[0],i==="client_max_window_bits"){if(n!==!0){let o=+n;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=o}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else if(i==="server_max_window_bits"){let o=+n;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=o}else if(i==="client_no_context_takeover"||i==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else throw new Error(`Unknown parameter "${i}"`);e[i]=n})}),t}decompress(t,e,i){_m.add(n=>{this._decompress(t,e,(o,u)=>{n(),i(o,u)})})}compress(t,e,i){_m.add(n=>{this._compress(t,e,(o,u)=>{n(),i(o,u)})})}_decompress(t,e,i){let n=this._isServer?"client":"server";if(!this._inflate){let o=`${n}_max_window_bits`,u=typeof this.params[o]!="number"?kc.Z_DEFAULT_WINDOWBITS:this.params[o];this._inflate=kc.createInflateRaw({...this._options.zlibInflateOptions,windowBits:u}),this._inflate[wm]=this,this._inflate[qi]=0,this._inflate[Rn]=[],this._inflate.on("error",GX),this._inflate.on("data",a1)}this._inflate[Rc]=i,this._inflate.write(t),e&&this._inflate.write(VX),this._inflate.flush(()=>{let o=this._inflate[Em];if(o){this._inflate.close(),this._inflate=null,i(o);return}let u=o1.concat(this._inflate[Rn],this._inflate[qi]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[qi]=0,this._inflate[Rn]=[],e&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),i(null,u)})}_compress(t,e,i){let n=this._isServer?"server":"client";if(!this._deflate){let o=`${n}_max_window_bits`,u=typeof this.params[o]!="number"?kc.Z_DEFAULT_WINDOWBITS:this.params[o];this._deflate=kc.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:u}),this._deflate[qi]=0,this._deflate[Rn]=[],this._deflate.on("data",zX)}this._deflate[Rc]=i,this._deflate.write(t),this._deflate.flush(kc.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let o=o1.concat(this._deflate[Rn],this._deflate[qi]);e&&(o=new HX(o.buffer,o.byteOffset,o.length-4)),this._deflate[Rc]=null,this._deflate[qi]=0,this._deflate[Rn]=[],e&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),i(null,o)})}};u1.exports=n_;function zX(r){this[Rn].push(r),this[qi]+=r.length}function a1(r){if(this[qi]+=r.length,this[wm]._maxPayload<1||this[qi]<=this[wm]._maxPayload){this[Rn].push(r);return}this[Em]=new RangeError("Max payload size exceeded"),this[Em].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Em][s1]=1009,this.removeListener("data",a1),this.reset()}function GX(r){this[wm]._inflate=null,r[s1]=1007,this[Rc](r)}});var Fc=O((Fve,Sm)=>{"use strict";d();var{isUtf8:c1}=require("buffer"),ZX=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function JX(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function o_(r){let t=r.length,e=0;for(;e<t;)if(!(r[e]&128))e++;else if((r[e]&224)===192){if(e+1===t||(r[e+1]&192)!==128||(r[e]&254)===192)return!1;e+=2}else if((r[e]&240)===224){if(e+2>=t||(r[e+1]&192)!==128||(r[e+2]&192)!==128||r[e]===224&&(r[e+1]&224)===128||r[e]===237&&(r[e+1]&224)===160)return!1;e+=3}else if((r[e]&248)===240){if(e+3>=t||(r[e+1]&192)!==128||(r[e+2]&192)!==128||(r[e+3]&192)!==128||r[e]===240&&(r[e+1]&240)===128||r[e]===244&&r[e+1]>143||r[e]>244)return!1;e+=4}else return!1;return!0}Sm.exports={isValidStatusCode:JX,isValidUTF8:o_,tokenChars:ZX};if(c1)Sm.exports.isValidUTF8=function(r){return r.length<24?o_(r):c1(r)};else if(!g.WS_NO_UTF_8_VALIDATE)try{let r=require("utf-8-validate");Sm.exports.isValidUTF8=function(t){return t.length<32?o_(t):r(t)}}catch{}});var l_=O((qve,v1)=>{"use strict";d();var{Writable:YX}=require("stream"),l1=Nc(),{BINARY_TYPES:KX,EMPTY_BUFFER:d1,kStatusCode:XX,kWebSocket:QX}=kn(),{concat:s_,toArrayBuffer:eQ,unmask:tQ}=Lc(),{isValidStatusCode:rQ,isValidUTF8:p1}=Fc(),Om=Buffer[Symbol.species],Ir=0,h1=1,f1=2,m1=3,a_=4,u_=5,xm=6,c_=class extends YX{constructor(t={}){super(),this._allowSynchronousEvents=t.allowSynchronousEvents!==void 0?t.allowSynchronousEvents:!0,this._binaryType=t.binaryType||KX[0],this._extensions=t.extensions||{},this._isServer=!!t.isServer,this._maxPayload=t.maxPayload|0,this._skipUTF8Validation=!!t.skipUTF8Validation,this[QX]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=Ir}_write(t,e,i){if(this._opcode===8&&this._state==Ir)return i();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(i)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){let i=this._buffers[0];return this._buffers[0]=new Om(i.buffer,i.byteOffset+t,i.length-t),new Om(i.buffer,i.byteOffset,t)}let e=Buffer.allocUnsafe(t);do{let i=this._buffers[0],n=e.length-t;t>=i.length?e.set(this._buffers.shift(),n):(e.set(new Uint8Array(i.buffer,i.byteOffset,t),n),this._buffers[0]=new Om(i.buffer,i.byteOffset+t,i.length-t)),t-=i.length}while(t>0);return e}startLoop(t){this._loop=!0;do switch(this._state){case Ir:this.getInfo(t);break;case h1:this.getPayloadLength16(t);break;case f1:this.getPayloadLength64(t);break;case m1:this.getMask();break;case a_:this.getData(t);break;case u_:case xm:this._loop=!1;return}while(this._loop);this._errored||t()}getInfo(t){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48){let n=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");t(n);return}let i=(e[0]&64)===64;if(i&&!this._extensions[l1.extensionName]){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(n);return}if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(i){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(n);return}if(!this._fragmented){let n=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");t(n);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");t(n);return}this._compressed=i}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let n=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");t(n);return}if(i){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(n);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let n=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");t(n);return}}else{let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");t(n);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked){let n=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");t(n);return}}else if(this._masked){let n=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");t(n);return}this._payloadLength===126?this._state=h1:this._payloadLength===127?this._state=f1:this.haveLength(t)}getPayloadLength16(t){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(t)}getPayloadLength64(t){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),i=e.readUInt32BE(0);if(i>Math.pow(2,21)-1){let n=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");t(n);return}this._payloadLength=i*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength(t)}haveLength(t){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(e);return}this._masked?this._state=m1:this._state=a_}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=a_}getData(t){let e=d1;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}e=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&tQ(e,this._mask)}if(this._opcode>7){this.controlMessage(e,t);return}if(this._compressed){this._state=u_,this.decompress(e,t);return}e.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(e)),this.dataMessage(t)}decompress(t,e){this._extensions[l1.extensionName].decompress(t,this._fin,(n,o)=>{if(n)return e(n);if(o.length){if(this._messageLength+=o.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let u=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(u);return}this._fragments.push(o)}this.dataMessage(e),this._state===Ir&&this.startLoop(e)})}dataMessage(t){if(!this._fin){this._state=Ir;return}let e=this._messageLength,i=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=s_(i,e):this._binaryType==="arraybuffer"?n=eQ(s_(i,e)):n=i,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=Ir):(this._state=xm,setImmediate(()=>{this.emit("message",n,!0),this._state=Ir,this.startLoop(t)}))}else{let n=s_(i,e);if(!this._skipUTF8Validation&&!p1(n)){let o=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(o);return}this._state===u_||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=Ir):(this._state=xm,setImmediate(()=>{this.emit("message",n,!1),this._state=Ir,this.startLoop(t)}))}}controlMessage(t,e){if(this._opcode===8){if(t.length===0)this._loop=!1,this.emit("conclude",1005,d1),this.end();else{let i=t.readUInt16BE(0);if(!rQ(i)){let o=this.createError(RangeError,`invalid status code ${i}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");e(o);return}let n=new Om(t.buffer,t.byteOffset+2,t.length-2);if(!this._skipUTF8Validation&&!p1(n)){let o=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(o);return}this._loop=!1,this.emit("conclude",i,n),this.end()}this._state=Ir;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",t),this._state=Ir):(this._state=xm,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",t),this._state=Ir,this.startLoop(e)}))}createError(t,e,i,n,o){this._loop=!1,this._errored=!0;let u=new t(i?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(u,this.createError),u.code=o,u[XX]=n,u}};v1.exports=c_});var p_=O((jve,b1)=>{"use strict";d();var{Duplex:Bve}=require("stream"),{randomFillSync:iQ}=require("crypto"),g1=Nc(),{EMPTY_BUFFER:nQ}=kn(),{isValidStatusCode:oQ}=Fc(),{mask:y1,toBuffer:ja}=Lc(),Gr=Symbol("kByteLength"),sQ=Buffer.alloc(4),Tm=8*1024,Co,Wa=Tm,d_=class r{constructor(t,e,i){this._extensions=e||{},i&&(this._generateMask=i,this._maskBuffer=Buffer.alloc(4)),this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,e){let i,n=!1,o=2,u=!1;e.mask&&(i=e.maskBuffer||sQ,e.generateMask?e.generateMask(i):(Wa===Tm&&(Co===void 0&&(Co=Buffer.alloc(Tm)),iQ(Co,0,Tm),Wa=0),i[0]=Co[Wa++],i[1]=Co[Wa++],i[2]=Co[Wa++],i[3]=Co[Wa++]),u=(i[0]|i[1]|i[2]|i[3])===0,o=6);let c;typeof t=="string"?(!e.mask||u)&&e[Gr]!==void 0?c=e[Gr]:(t=Buffer.from(t),c=t.length):(c=t.length,n=e.mask&&e.readOnly&&!u);let l=c;c>=65536?(o+=8,l=127):c>125&&(o+=2,l=126);let h=Buffer.allocUnsafe(n?c+o:o);return h[0]=e.fin?e.opcode|128:e.opcode,e.rsv1&&(h[0]|=64),h[1]=l,l===126?h.writeUInt16BE(c,2):l===127&&(h[2]=h[3]=0,h.writeUIntBE(c,4,6)),e.mask?(h[1]|=128,h[o-4]=i[0],h[o-3]=i[1],h[o-2]=i[2],h[o-1]=i[3],u?[h,t]:n?(y1(t,i,h,o,c),[h]):(y1(t,i,t,0,c),[h,t])):[h,t]}close(t,e,i,n){let o;if(t===void 0)o=nQ;else{if(typeof t!="number"||!oQ(t))throw new TypeError("First argument must be a valid error code number");if(e===void 0||!e.length)o=Buffer.allocUnsafe(2),o.writeUInt16BE(t,0);else{let c=Buffer.byteLength(e);if(c>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+c),o.writeUInt16BE(t,0),typeof e=="string"?o.write(e,2):o.set(e,2)}}let u={[Gr]:o.length,fin:!0,generateMask:this._generateMask,mask:i,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,o,!1,u,n]):this.sendFrame(r.frame(o,u),n)}ping(t,e,i){let n,o;if(typeof t=="string"?(n=Buffer.byteLength(t),o=!1):(t=ja(t),n=t.length,o=ja.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let u={[Gr]:n,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,t,!1,u,i]):this.sendFrame(r.frame(t,u),i)}pong(t,e,i){let n,o;if(typeof t=="string"?(n=Buffer.byteLength(t),o=!1):(t=ja(t),n=t.length,o=ja.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let u={[Gr]:n,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,t,!1,u,i]):this.sendFrame(r.frame(t,u),i)}send(t,e,i){let n=this._extensions[g1.extensionName],o=e.binary?2:1,u=e.compress,c,l;if(typeof t=="string"?(c=Buffer.byteLength(t),l=!1):(t=ja(t),c=t.length,l=ja.readOnly),this._firstFragment?(this._firstFragment=!1,u&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(u=c>=n._threshold),this._compress=u):(u=!1,o=0),e.fin&&(this._firstFragment=!0),n){let h={[Gr]:c,fin:e.fin,generateMask:this._generateMask,mask:e.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:l,rsv1:u};this._deflating?this.enqueue([this.dispatch,t,this._compress,h,i]):this.dispatch(t,this._compress,h,i)}else this.sendFrame(r.frame(t,{[Gr]:c,fin:e.fin,generateMask:this._generateMask,mask:e.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:l,rsv1:!1}),i)}dispatch(t,e,i,n){if(!e){this.sendFrame(r.frame(t,i),n);return}let o=this._extensions[g1.extensionName];this._bufferedBytes+=i[Gr],this._deflating=!0,o.compress(t,i.fin,(u,c)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");typeof n=="function"&&n(l);for(let h=0;h<this._queue.length;h++){let f=this._queue[h],v=f[f.length-1];typeof v=="function"&&v(l)}return}this._bufferedBytes-=i[Gr],this._deflating=!1,i.readOnly=!1,this.sendFrame(r.frame(c,i),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let t=this._queue.shift();this._bufferedBytes-=t[3][Gr],Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[3][Gr],this._queue.push(t)}sendFrame(t,e){t.length===2?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],e),this._socket.uncork()):this._socket.write(t[0],e)}};b1.exports=d_});var P1=O((Uve,C1)=>{"use strict";d();var{kForOnEventAttribute:Dc,kListener:h_}=kn(),_1=Symbol("kCode"),E1=Symbol("kData"),w1=Symbol("kError"),S1=Symbol("kMessage"),O1=Symbol("kReason"),Ua=Symbol("kTarget"),x1=Symbol("kType"),T1=Symbol("kWasClean"),$i=class{constructor(t){this[Ua]=null,this[x1]=t}get target(){return this[Ua]}get type(){return this[x1]}};Object.defineProperty($i.prototype,"target",{enumerable:!0});Object.defineProperty($i.prototype,"type",{enumerable:!0});var Po=class extends $i{constructor(t,e={}){super(t),this[_1]=e.code===void 0?0:e.code,this[O1]=e.reason===void 0?"":e.reason,this[T1]=e.wasClean===void 0?!1:e.wasClean}get code(){return this[_1]}get reason(){return this[O1]}get wasClean(){return this[T1]}};Object.defineProperty(Po.prototype,"code",{enumerable:!0});Object.defineProperty(Po.prototype,"reason",{enumerable:!0});Object.defineProperty(Po.prototype,"wasClean",{enumerable:!0});var Ha=class extends $i{constructor(t,e={}){super(t),this[w1]=e.error===void 0?null:e.error,this[S1]=e.message===void 0?"":e.message}get error(){return this[w1]}get message(){return this[S1]}};Object.defineProperty(Ha.prototype,"error",{enumerable:!0});Object.defineProperty(Ha.prototype,"message",{enumerable:!0});var qc=class extends $i{constructor(t,e={}){super(t),this[E1]=e.data===void 0?null:e.data}get data(){return this[E1]}};Object.defineProperty(qc.prototype,"data",{enumerable:!0});var aQ={addEventListener(r,t,e={}){for(let n of this.listeners(r))if(!e[Dc]&&n[h_]===t&&!n[Dc])return;let i;if(r==="message")i=function(o,u){let c=new qc("message",{data:u?o:o.toString()});c[Ua]=this,Cm(t,this,c)};else if(r==="close")i=function(o,u){let c=new Po("close",{code:o,reason:u.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});c[Ua]=this,Cm(t,this,c)};else if(r==="error")i=function(o){let u=new Ha("error",{error:o,message:o.message});u[Ua]=this,Cm(t,this,u)};else if(r==="open")i=function(){let o=new $i("open");o[Ua]=this,Cm(t,this,o)};else return;i[Dc]=!!e[Dc],i[h_]=t,e.once?this.once(r,i):this.on(r,i)},removeEventListener(r,t){for(let e of this.listeners(r))if(e[h_]===t&&!e[Dc]){this.removeListener(r,e);break}}};C1.exports={CloseEvent:Po,ErrorEvent:Ha,Event:$i,EventTarget:aQ,MessageEvent:qc};function Cm(r,t,e){typeof r=="object"&&r.handleEvent?r.handleEvent.call(r,e):r.call(t,e)}});var f_=O((Vve,A1)=>{"use strict";d();var{tokenChars:$c}=Fc();function pi(r,t,e){r[t]===void 0?r[t]=[e]:r[t].push(e)}function uQ(r){let t=Object.create(null),e=Object.create(null),i=!1,n=!1,o=!1,u,c,l=-1,h=-1,f=-1,v=0;for(;v<r.length;v++)if(h=r.charCodeAt(v),u===void 0)if(f===-1&&$c[h]===1)l===-1&&(l=v);else if(v!==0&&(h===32||h===9))f===-1&&l!==-1&&(f=v);else if(h===59||h===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${v}`);f===-1&&(f=v);let w=r.slice(l,f);h===44?(pi(t,w,e),e=Object.create(null)):u=w,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${v}`);else if(c===void 0)if(f===-1&&$c[h]===1)l===-1&&(l=v);else if(h===32||h===9)f===-1&&l!==-1&&(f=v);else if(h===59||h===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${v}`);f===-1&&(f=v),pi(e,r.slice(l,f),!0),h===44&&(pi(t,u,e),e=Object.create(null),u=void 0),l=f=-1}else if(h===61&&l!==-1&&f===-1)c=r.slice(l,v),l=f=-1;else throw new SyntaxError(`Unexpected character at index ${v}`);else if(n){if($c[h]!==1)throw new SyntaxError(`Unexpected character at index ${v}`);l===-1?l=v:i||(i=!0),n=!1}else if(o)if($c[h]===1)l===-1&&(l=v);else if(h===34&&l!==-1)o=!1,f=v;else if(h===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${v}`);else if(h===34&&r.charCodeAt(v-1)===61)o=!0;else if(f===-1&&$c[h]===1)l===-1&&(l=v);else if(l!==-1&&(h===32||h===9))f===-1&&(f=v);else if(h===59||h===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${v}`);f===-1&&(f=v);let w=r.slice(l,f);i&&(w=w.replace(/\\/g,""),i=!1),pi(e,c,w),h===44&&(pi(t,u,e),e=Object.create(null),u=void 0),c=void 0,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${v}`);if(l===-1||o||h===32||h===9)throw new SyntaxError("Unexpected end of input");f===-1&&(f=v);let b=r.slice(l,f);return u===void 0?pi(t,b,e):(c===void 0?pi(e,b,!0):i?pi(e,c,b.replace(/\\/g,"")):pi(e,c,b),pi(t,u,e)),t}function cQ(r){return Object.keys(r).map(t=>{let e=r[t];return Array.isArray(e)||(e=[e]),e.map(i=>[t].concat(Object.keys(i).map(n=>{let o=i[n];return Array.isArray(o)||(o=[o]),o.map(u=>u===!0?n:`${n}=${u}`).join("; ")})).join("; ")).join(", ")}).join(", ")}A1.exports={format:cQ,parse:uQ}});var b_=O((Jve,B1)=>{"use strict";d();var lQ=require("events"),dQ=require("https"),pQ=require("http"),L1=require("net"),hQ=require("tls"),{randomBytes:fQ,createHash:mQ}=require("crypto"),{Duplex:Gve,Readable:Zve}=require("stream"),{URL:m_}=require("url"),Nn=Nc(),vQ=l_(),gQ=p_(),{BINARY_TYPES:I1,EMPTY_BUFFER:Pm,GUID:yQ,kForOnEventAttribute:v_,kListener:bQ,kStatusCode:_Q,kWebSocket:Mt,NOOP:k1}=kn(),{EventTarget:{addEventListener:EQ,removeEventListener:wQ}}=P1(),{format:SQ,parse:OQ}=f_(),{toBuffer:xQ}=Lc(),TQ=30*1e3,R1=Symbol("kAborted"),g_=[8,13],Bi=["CONNECTING","OPEN","CLOSING","CLOSED"],CQ=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,nt=class r extends lQ{constructor(t,e,i){super(),this._binaryType=I1[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Pm,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=r.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,t!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,e===void 0?e=[]:Array.isArray(e)||(typeof e=="object"&&e!==null?(i=e,e=[]):e=[e]),N1(this,t,e,i)):(this._autoPong=i.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(t){I1.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,e,i){let n=new vQ({allowSynchronousEvents:i.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation});this._sender=new gQ(t,this._extensions,i.generateMask),this._receiver=n,this._socket=t,n[Mt]=this,t[Mt]=this,n.on("conclude",IQ),n.on("drain",MQ),n.on("error",LQ),n.on("message",kQ),n.on("ping",RQ),n.on("pong",NQ),t.setTimeout&&t.setTimeout(0),t.setNoDelay&&t.setNoDelay(),e.length>0&&t.unshift(e),t.on("close",D1),t.on("data",Im),t.on("end",q1),t.on("error",$1),this._readyState=r.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Nn.extensionName]&&this._extensions[Nn.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,e){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){lr(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===r.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=r.CLOSING,this._sender.close(t,e,!this._isServer,i=>{i||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),TQ)}}pause(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!0,this._socket.pause())}ping(t,e,i){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(i=t,t=e=void 0):typeof e=="function"&&(i=e,e=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==r.OPEN){y_(this,t,i);return}e===void 0&&(e=!this._isServer),this._sender.ping(t||Pm,e,i)}pong(t,e,i){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(i=t,t=e=void 0):typeof e=="function"&&(i=e,e=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==r.OPEN){y_(this,t,i);return}e===void 0&&(e=!this._isServer),this._sender.pong(t||Pm,e,i)}resume(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(t,e,i){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"&&(i=e,e={}),typeof t=="number"&&(t=t.toString()),this.readyState!==r.OPEN){y_(this,t,i);return}let n={binary:typeof t!="string",mask:!this._isServer,compress:!0,fin:!0,...e};this._extensions[Nn.extensionName]||(n.compress=!1),this._sender.send(t||Pm,n,i)}terminate(){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){lr(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=r.CLOSING,this._socket.destroy())}}};Object.defineProperty(nt,"CONNECTING",{enumerable:!0,value:Bi.indexOf("CONNECTING")});Object.defineProperty(nt.prototype,"CONNECTING",{enumerable:!0,value:Bi.indexOf("CONNECTING")});Object.defineProperty(nt,"OPEN",{enumerable:!0,value:Bi.indexOf("OPEN")});Object.defineProperty(nt.prototype,"OPEN",{enumerable:!0,value:Bi.indexOf("OPEN")});Object.defineProperty(nt,"CLOSING",{enumerable:!0,value:Bi.indexOf("CLOSING")});Object.defineProperty(nt.prototype,"CLOSING",{enumerable:!0,value:Bi.indexOf("CLOSING")});Object.defineProperty(nt,"CLOSED",{enumerable:!0,value:Bi.indexOf("CLOSED")});Object.defineProperty(nt.prototype,"CLOSED",{enumerable:!0,value:Bi.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(nt.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(nt.prototype,`on${r}`,{enumerable:!0,get(){for(let t of this.listeners(r))if(t[v_])return t[bQ];return null},set(t){for(let e of this.listeners(r))if(e[v_]){this.removeListener(r,e);break}typeof t=="function"&&this.addEventListener(r,t,{[v_]:!0})}})});nt.prototype.addEventListener=EQ;nt.prototype.removeEventListener=wQ;B1.exports=nt;function N1(r,t,e,i){let n={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:g_[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(r._autoPong=n.autoPong,!g_.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${g_.join(", ")})`);let o;if(t instanceof m_)o=t;else try{o=new m_(t)}catch{throw new SyntaxError(`Invalid URL: ${t}`)}o.protocol==="http:"?o.protocol="ws:":o.protocol==="https:"&&(o.protocol="wss:"),r._url=o.href;let u=o.protocol==="wss:",c=o.protocol==="ws+unix:",l;if(o.protocol!=="ws:"&&!u&&!c?l=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:c&&!o.pathname?l="The URL's pathname is empty":o.hash&&(l="The URL contains a fragment identifier"),l){let C=new SyntaxError(l);if(r._redirects===0)throw C;Am(r,C);return}let h=u?443:80,f=fQ(16).toString("base64"),v=u?dQ.request:pQ.request,b=new Set,w;if(n.createConnection=n.createConnection||(u?AQ:PQ),n.defaultPort=n.defaultPort||h,n.port=o.port||h,n.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,n.headers={...n.headers,"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket"},n.path=o.pathname+o.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(w=new Nn(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=SQ({[Nn.extensionName]:w.offer()})),e.length){for(let C of e){if(typeof C!="string"||!CQ.test(C)||b.has(C))throw new SyntaxError("An invalid or duplicated subprotocol was specified");b.add(C)}n.headers["Sec-WebSocket-Protocol"]=e.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(o.username||o.password)&&(n.auth=`${o.username}:${o.password}`),c){let C=n.path.split(":");n.socketPath=C[0],n.path=C[1]}let x;if(n.followRedirects){if(r._redirects===0){r._originalIpc=c,r._originalSecure=u,r._originalHostOrSocketPath=c?n.socketPath:o.host;let C=i&&i.headers;if(i={...i,headers:{}},C)for(let[I,A]of Object.entries(C))i.headers[I.toLowerCase()]=A}else if(r.listenerCount("redirect")===0){let C=c?r._originalIpc?n.socketPath===r._originalHostOrSocketPath:!1:r._originalIpc?!1:o.host===r._originalHostOrSocketPath;(!C||r._originalSecure&&!u)&&(delete n.headers.authorization,delete n.headers.cookie,C||delete n.headers.host,n.auth=void 0)}n.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),x=r._req=v(n),r._redirects&&r.emit("redirect",r.url,x)}else x=r._req=v(n);n.timeout&&x.on("timeout",()=>{lr(r,x,"Opening handshake has timed out")}),x.on("error",C=>{x===null||x[R1]||(x=r._req=null,Am(r,C))}),x.on("response",C=>{let I=C.headers.location,A=C.statusCode;if(I&&n.followRedirects&&A>=300&&A<400){if(++r._redirects>n.maxRedirects){lr(r,x,"Maximum redirects exceeded");return}x.abort();let j;try{j=new m_(I,t)}catch{let U=new SyntaxError(`Invalid URL: ${I}`);Am(r,U);return}N1(r,j,e,i)}else r.emit("unexpected-response",x,C)||lr(r,x,`Unexpected server response: ${C.statusCode}`)}),x.on("upgrade",(C,I,A)=>{if(r.emit("upgrade",C),r.readyState!==nt.CONNECTING)return;x=r._req=null;let j=C.headers.upgrade;if(j===void 0||j.toLowerCase()!=="websocket"){lr(r,I,"Invalid Upgrade header");return}let N=mQ("sha1").update(f+yQ).digest("base64");if(C.headers["sec-websocket-accept"]!==N){lr(r,I,"Invalid Sec-WebSocket-Accept header");return}let U=C.headers["sec-websocket-protocol"],ee;if(U!==void 0?b.size?b.has(U)||(ee="Server sent an invalid subprotocol"):ee="Server sent a subprotocol but none was requested":b.size&&(ee="Server sent no subprotocol"),ee){lr(r,I,ee);return}U&&(r._protocol=U);let $=C.headers["sec-websocket-extensions"];if($!==void 0){if(!w){lr(r,I,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let te;try{te=OQ($)}catch{lr(r,I,"Invalid Sec-WebSocket-Extensions header");return}let Te=Object.keys(te);if(Te.length!==1||Te[0]!==Nn.extensionName){lr(r,I,"Server indicated an extension that was not requested");return}try{w.accept(te[Nn.extensionName])}catch{lr(r,I,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[Nn.extensionName]=w}r.setSocket(I,A,{allowSynchronousEvents:n.allowSynchronousEvents,generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})}),n.finishRequest?n.finishRequest(x,r):x.end()}function Am(r,t){r._readyState=nt.CLOSING,r.emit("error",t),r.emitClose()}function PQ(r){return r.path=r.socketPath,L1.connect(r)}function AQ(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=L1.isIP(r.host)?"":r.host),hQ.connect(r)}function lr(r,t,e){r._readyState=nt.CLOSING;let i=new Error(e);Error.captureStackTrace(i,lr),t.setHeader?(t[R1]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(Am,r,i)):(t.destroy(i),t.once("error",r.emit.bind(r,"error")),t.once("close",r.emitClose.bind(r)))}function y_(r,t,e){if(t){let i=xQ(t).length;r._socket?r._sender._bufferedBytes+=i:r._bufferedAmount+=i}if(e){let i=new Error(`WebSocket is not open: readyState ${r.readyState} (${Bi[r.readyState]})`);process.nextTick(e,i)}}function IQ(r,t){let e=this[Mt];e._closeFrameReceived=!0,e._closeMessage=t,e._closeCode=r,e._socket[Mt]!==void 0&&(e._socket.removeListener("data",Im),process.nextTick(F1,e._socket),r===1005?e.close():e.close(r,t))}function MQ(){let r=this[Mt];r.isPaused||r._socket.resume()}function LQ(r){let t=this[Mt];t._socket[Mt]!==void 0&&(t._socket.removeListener("data",Im),process.nextTick(F1,t._socket),t.close(r[_Q])),t.emit("error",r)}function M1(){this[Mt].emitClose()}function kQ(r,t){this[Mt].emit("message",r,t)}function RQ(r){let t=this[Mt];t._autoPong&&t.pong(r,!this._isServer,k1),t.emit("ping",r)}function NQ(r){this[Mt].emit("pong",r)}function F1(r){r.resume()}function D1(){let r=this[Mt];this.removeListener("close",D1),this.removeListener("data",Im),this.removeListener("end",q1),r._readyState=nt.CLOSING;let t;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(t=r._socket.read())!==null&&r._receiver.write(t),r._receiver.end(),this[Mt]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",M1),r._receiver.on("finish",M1))}function Im(r){this[Mt]._receiver.write(r)||this.pause()}function q1(){let r=this[Mt];r._readyState=nt.CLOSING,r._receiver.end(),this.end()}function $1(){let r=this[Mt];this.removeListener("error",$1),this.on("error",k1),r&&(r._readyState=nt.CLOSING,this.destroy())}});var W1=O((Kve,j1)=>{"use strict";d();var{tokenChars:FQ}=Fc();function DQ(r){let t=new Set,e=-1,i=-1,n=0;for(n;n<r.length;n++){let u=r.charCodeAt(n);if(i===-1&&FQ[u]===1)e===-1&&(e=n);else if(n!==0&&(u===32||u===9))i===-1&&e!==-1&&(i=n);else if(u===44){if(e===-1)throw new SyntaxError(`Unexpected character at index ${n}`);i===-1&&(i=n);let c=r.slice(e,i);if(t.has(c))throw new SyntaxError(`The "${c}" subprotocol is duplicated`);t.add(c),e=i=-1}else throw new SyntaxError(`Unexpected character at index ${n}`)}if(e===-1||i!==-1)throw new SyntaxError("Unexpected end of input");let o=r.slice(e,n);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}j1.exports={parse:DQ}});var J1=O((ege,Z1)=>{"use strict";d();var qQ=require("events"),Mm=require("http"),{Duplex:Qve}=require("stream"),{createHash:$Q}=require("crypto"),U1=f_(),Ao=Nc(),BQ=W1(),jQ=b_(),{GUID:WQ,kWebSocket:UQ}=kn(),HQ=/^[+/0-9A-Za-z]{22}==$/,H1=0,V1=1,G1=2,__=class extends qQ{constructor(t,e){if(super(),t={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:jQ,...t},t.port==null&&!t.server&&!t.noServer||t.port!=null&&(t.server||t.noServer)||t.server&&t.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(t.port!=null?(this._server=Mm.createServer((i,n)=>{let o=Mm.STATUS_CODES[426];n.writeHead(426,{"Content-Length":o.length,"Content-Type":"text/plain"}),n.end(o)}),this._server.listen(t.port,t.host,t.backlog,e)):t.server&&(this._server=t.server),this._server){let i=this.emit.bind(this,"connection");this._removeListeners=VQ(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,o,u)=>{this.handleUpgrade(n,o,u,i)}})}t.perMessageDeflate===!0&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=t,this._state=H1}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(this._state===G1){t&&this.once("close",()=>{t(new Error("The server is not running"))}),process.nextTick(Bc,this);return}if(t&&this.once("close",t),this._state!==V1)if(this._state=V1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Bc,this):process.nextTick(Bc,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{Bc(this)})}}shouldHandle(t){if(this.options.path){let e=t.url.indexOf("?");if((e!==-1?t.url.slice(0,e):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,e,i,n){e.on("error",z1);let o=t.headers["sec-websocket-key"],u=t.headers.upgrade,c=+t.headers["sec-websocket-version"];if(t.method!=="GET"){Io(this,t,e,405,"Invalid HTTP method");return}if(u===void 0||u.toLowerCase()!=="websocket"){Io(this,t,e,400,"Invalid Upgrade header");return}if(o===void 0||!HQ.test(o)){Io(this,t,e,400,"Missing or invalid Sec-WebSocket-Key header");return}if(c!==8&&c!==13){Io(this,t,e,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(t)){jc(e,400);return}let l=t.headers["sec-websocket-protocol"],h=new Set;if(l!==void 0)try{h=BQ.parse(l)}catch{Io(this,t,e,400,"Invalid Sec-WebSocket-Protocol header");return}let f=t.headers["sec-websocket-extensions"],v={};if(this.options.perMessageDeflate&&f!==void 0){let b=new Ao(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let w=U1.parse(f);w[Ao.extensionName]&&(b.accept(w[Ao.extensionName]),v[Ao.extensionName]=b)}catch{Io(this,t,e,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let b={origin:t.headers[`${c===8?"sec-websocket-origin":"origin"}`],secure:!!(t.socket.authorized||t.socket.encrypted),req:t};if(this.options.verifyClient.length===2){this.options.verifyClient(b,(w,x,C,I)=>{if(!w)return jc(e,x||401,C,I);this.completeUpgrade(v,o,h,t,e,i,n)});return}if(!this.options.verifyClient(b))return jc(e,401)}this.completeUpgrade(v,o,h,t,e,i,n)}completeUpgrade(t,e,i,n,o,u,c){if(!o.readable||!o.writable)return o.destroy();if(o[UQ])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>H1)return jc(o,503);let h=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${$Q("sha1").update(e+WQ).digest("base64")}`],f=new this.options.WebSocket(null,void 0,this.options);if(i.size){let v=this.options.handleProtocols?this.options.handleProtocols(i,n):i.values().next().value;v&&(h.push(`Sec-WebSocket-Protocol: ${v}`),f._protocol=v)}if(t[Ao.extensionName]){let v=t[Ao.extensionName].params,b=U1.format({[Ao.extensionName]:[v]});h.push(`Sec-WebSocket-Extensions: ${b}`),f._extensions=t}this.emit("headers",h,n),o.write(h.concat(`\r
`).join(`\r
`)),o.removeListener("error",z1),f.setSocket(o,u,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Bc,this)})),c(f,n)}};Z1.exports=__;function VQ(r,t){for(let e of Object.keys(t))r.on(e,t[e]);return function(){for(let i of Object.keys(t))r.removeListener(i,t[i])}}function Bc(r){r._state=G1,r.emit("close")}function z1(){this.destroy()}function jc(r,t,e,i){e=e||Mm.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(e),...i},r.once("finish",r.destroy),r.end(`HTTP/1.1 ${t} ${Mm.STATUS_CODES[t]}\r
`+Object.keys(i).map(n=>`${n}: ${i[n]}`).join(`\r
`)+`\r
\r
`+e)}function Io(r,t,e,i,n){if(r.listenerCount("wsClientError")){let o=new Error(n);Error.captureStackTrace(o,Io),r.emit("wsClientError",o,e,t)}else jc(e,i,n)}});var w_=O((Uge,nI)=>{d();function tee(r){e.debug=e,e.default=e,e.coerce=l,e.disable=o,e.enable=n,e.enabled=u,e.humanize=nc(),e.destroy=h,Object.keys(r).forEach(f=>{e[f]=r[f]}),e.names=[],e.skips=[],e.formatters={};function t(f){let v=0;for(let b=0;b<f.length;b++)v=(v<<5)-v+f.charCodeAt(b),v|=0;return e.colors[Math.abs(v)%e.colors.length]}e.selectColor=t;function e(f){let v,b=null,w,x;function C(...I){if(!C.enabled)return;let A=C,j=Number(new Date),N=j-(v||j);A.diff=N,A.prev=v,A.curr=j,v=j,I[0]=e.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let U=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,($,te)=>{if($==="%%")return"%";U++;let Te=e.formatters[te];if(typeof Te=="function"){let Oe=I[U];$=Te.call(A,Oe),I.splice(U,1),U--}return $}),e.formatArgs.call(A,I),(A.log||e.log).apply(A,I)}return C.namespace=f,C.useColors=e.useColors(),C.color=e.selectColor(f),C.extend=i,C.destroy=e.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(w!==e.namespaces&&(w=e.namespaces,x=e.enabled(f)),x),set:I=>{b=I}}),typeof e.init=="function"&&e.init(C),C}function i(f,v){let b=e(this.namespace+(typeof v>"u"?":":v)+f);return b.log=this.log,b}function n(f){e.save(f),e.namespaces=f,e.names=[],e.skips=[];let v,b=(typeof f=="string"?f:"").split(/[\s,]+/),w=b.length;for(v=0;v<w;v++)b[v]&&(f=b[v].replace(/\*/g,".*?"),f[0]==="-"?e.skips.push(new RegExp("^"+f.slice(1)+"$")):e.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...e.names.map(c),...e.skips.map(c).map(v=>"-"+v)].join(",");return e.enable(""),f}function u(f){if(f[f.length-1]==="*")return!0;let v,b;for(v=0,b=e.skips.length;v<b;v++)if(e.skips[v].test(f))return!1;for(v=0,b=e.names.length;v<b;v++)if(e.names[v].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}nI.exports=tee});var oI=O((dr,Nm)=>{d();dr.formatArgs=iee;dr.save=nee;dr.load=oee;dr.useColors=ree;dr.storage=see();dr.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();dr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ree(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function iee(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Nm.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;r.splice(1,0,t,"color: inherit");let e=0,i=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(e++,n==="%c"&&(i=e))}),r.splice(i,0,t)}dr.log=console.debug||console.log||(()=>{});function nee(r){try{r?dr.storage.setItem("debug",r):dr.storage.removeItem("debug")}catch{}}function oee(){let r;try{r=dr.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=g.DEBUG),r}function see(){try{return localStorage}catch{}}Nm.exports=w_()(dr);var{formatters:aee}=Nm.exports;aee.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var aI=O((vt,Dm)=>{d();var uee=require("tty"),Fm=require("util");vt.init=mee;vt.log=pee;vt.formatArgs=lee;vt.save=hee;vt.load=fee;vt.useColors=cee;vt.destroy=Fm.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");vt.colors=[6,2,3,4,5,1];try{let r=oc();r&&(r.stderr||r).level>=2&&(vt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}vt.inspectOpts=Object.keys(g).filter(r=>/^debug_/i.test(r)).reduce((r,t)=>{let e=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,o)=>o.toUpperCase()),i=g[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),r[e]=i,r},{});function cee(){return"colors"in vt.inspectOpts?!!vt.inspectOpts.colors:uee.isatty(process.stderr.fd)}function lee(r){let{namespace:t,useColors:e}=this;if(e){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),o=`  ${n};1m${t} \x1B[0m`;r[0]=o+r[0].split(`
`).join(`
`+o),r.push(n+"m+"+Dm.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=dee()+t+" "+r[0]}function dee(){return vt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function pee(...r){return process.stderr.write(Fm.formatWithOptions(vt.inspectOpts,...r)+`
`)}function hee(r){r?g.DEBUG=r:delete g.DEBUG}function fee(){return g.DEBUG}function mee(r){r.inspectOpts={};let t=Object.keys(vt.inspectOpts);for(let e=0;e<t.length;e++)r.inspectOpts[t[e]]=vt.inspectOpts[t[e]]}Dm.exports=w_()(vt);var{formatters:sI}=Dm.exports;sI.o=function(r){return this.inspectOpts.colors=this.useColors,Fm.inspect(r,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};sI.O=function(r){return this.inspectOpts.colors=this.useColors,Fm.inspect(r,this.inspectOpts)}});var Hc=O((Gge,S_)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?S_.exports=oI():S_.exports=aI()});var T_=O((iye,fI)=>{d();function _ee(r){e.debug=e,e.default=e,e.coerce=l,e.disable=o,e.enable=n,e.enabled=u,e.humanize=nc(),e.destroy=h,Object.keys(r).forEach(f=>{e[f]=r[f]}),e.names=[],e.skips=[],e.formatters={};function t(f){let v=0;for(let b=0;b<f.length;b++)v=(v<<5)-v+f.charCodeAt(b),v|=0;return e.colors[Math.abs(v)%e.colors.length]}e.selectColor=t;function e(f){let v,b=null,w,x;function C(...I){if(!C.enabled)return;let A=C,j=Number(new Date),N=j-(v||j);A.diff=N,A.prev=v,A.curr=j,v=j,I[0]=e.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let U=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,($,te)=>{if($==="%%")return"%";U++;let Te=e.formatters[te];if(typeof Te=="function"){let Oe=I[U];$=Te.call(A,Oe),I.splice(U,1),U--}return $}),e.formatArgs.call(A,I),(A.log||e.log).apply(A,I)}return C.namespace=f,C.useColors=e.useColors(),C.color=e.selectColor(f),C.extend=i,C.destroy=e.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(w!==e.namespaces&&(w=e.namespaces,x=e.enabled(f)),x),set:I=>{b=I}}),typeof e.init=="function"&&e.init(C),C}function i(f,v){let b=e(this.namespace+(typeof v>"u"?":":v)+f);return b.log=this.log,b}function n(f){e.save(f),e.namespaces=f,e.names=[],e.skips=[];let v,b=(typeof f=="string"?f:"").split(/[\s,]+/),w=b.length;for(v=0;v<w;v++)b[v]&&(f=b[v].replace(/\*/g,".*?"),f[0]==="-"?e.skips.push(new RegExp("^"+f.slice(1)+"$")):e.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...e.names.map(c),...e.skips.map(c).map(v=>"-"+v)].join(",");return e.enable(""),f}function u(f){if(f[f.length-1]==="*")return!0;let v,b;for(v=0,b=e.skips.length;v<b;v++)if(e.skips[v].test(f))return!1;for(v=0,b=e.names.length;v<b;v++)if(e.names[v].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}fI.exports=_ee});var mI=O((pr,qm)=>{d();pr.formatArgs=wee;pr.save=See;pr.load=Oee;pr.useColors=Eee;pr.storage=xee();pr.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();pr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Eee(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function wee(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+qm.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;r.splice(1,0,t,"color: inherit");let e=0,i=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(e++,n==="%c"&&(i=e))}),r.splice(i,0,t)}pr.log=console.debug||console.log||(()=>{});function See(r){try{r?pr.storage.setItem("debug",r):pr.storage.removeItem("debug")}catch{}}function Oee(){let r;try{r=pr.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=g.DEBUG),r}function xee(){try{return localStorage}catch{}}qm.exports=T_()(pr);var{formatters:Tee}=qm.exports;Tee.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var gI=O((gt,Bm)=>{d();var Cee=require("tty"),$m=require("util");gt.init=Ree;gt.log=Mee;gt.formatArgs=Aee;gt.save=Lee;gt.load=kee;gt.useColors=Pee;gt.destroy=$m.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");gt.colors=[6,2,3,4,5,1];try{let r=oc();r&&(r.stderr||r).level>=2&&(gt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}gt.inspectOpts=Object.keys(g).filter(r=>/^debug_/i.test(r)).reduce((r,t)=>{let e=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,o)=>o.toUpperCase()),i=g[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),r[e]=i,r},{});function Pee(){return"colors"in gt.inspectOpts?!!gt.inspectOpts.colors:Cee.isatty(process.stderr.fd)}function Aee(r){let{namespace:t,useColors:e}=this;if(e){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),o=`  ${n};1m${t} \x1B[0m`;r[0]=o+r[0].split(`
`).join(`
`+o),r.push(n+"m+"+Bm.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Iee()+t+" "+r[0]}function Iee(){return gt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Mee(...r){return process.stderr.write($m.formatWithOptions(gt.inspectOpts,...r)+`
`)}function Lee(r){r?g.DEBUG=r:delete g.DEBUG}function kee(){return g.DEBUG}function Ree(r){r.inspectOpts={};let t=Object.keys(gt.inspectOpts);for(let e=0;e<t.length;e++)r.inspectOpts[t[e]]=gt.inspectOpts[t[e]]}Bm.exports=T_()(gt);var{formatters:vI}=Bm.exports;vI.o=function(r){return this.inspectOpts.colors=this.useColors,$m.inspect(r,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};vI.O=function(r){return this.inspectOpts.colors=this.useColors,$m.inspect(r,this.inspectOpts)}});var yI=O((aye,C_)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?C_.exports=mI():C_.exports=gI()});var WI=O((rl,W_)=>{d();(function(r,t){typeof rl=="object"&&typeof W_=="object"?W_.exports=t():typeof define=="function"&&define.amd?define([],t):typeof rl=="object"?rl.bowser=t():r.bowser=t()})(rl,function(){return function(r){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=r,e.c=t,e.d=function(i,n,o){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:o})},e.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(1&n&&(i=e(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var u in i)e.d(o,u,function(c){return i[c]}.bind(null,u));return o},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="",e(e.s=90)}({17:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i=e(18),n=function(){function o(){}return o.getFirstMatch=function(u,c){var l=c.match(u);return l&&l.length>0&&l[1]||""},o.getSecondMatch=function(u,c){var l=c.match(u);return l&&l.length>1&&l[2]||""},o.matchAndReturnConst=function(u,c,l){if(u.test(c))return l},o.getWindowsVersionName=function(u){switch(u){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},o.getMacOSVersionName=function(u){var c=u.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(c.push(0),c[0]===10)switch(c[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},o.getAndroidVersionName=function(u){var c=u.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(c.push(0),!(c[0]===1&&c[1]<5))return c[0]===1&&c[1]<6?"Cupcake":c[0]===1&&c[1]>=6?"Donut":c[0]===2&&c[1]<2?"Eclair":c[0]===2&&c[1]===2?"Froyo":c[0]===2&&c[1]>2?"Gingerbread":c[0]===3?"Honeycomb":c[0]===4&&c[1]<1?"Ice Cream Sandwich":c[0]===4&&c[1]<4?"Jelly Bean":c[0]===4&&c[1]>=4?"KitKat":c[0]===5?"Lollipop":c[0]===6?"Marshmallow":c[0]===7?"Nougat":c[0]===8?"Oreo":c[0]===9?"Pie":void 0},o.getVersionPrecision=function(u){return u.split(".").length},o.compareVersions=function(u,c,l){l===void 0&&(l=!1);var h=o.getVersionPrecision(u),f=o.getVersionPrecision(c),v=Math.max(h,f),b=0,w=o.map([u,c],function(x){var C=v-o.getVersionPrecision(x),I=x+new Array(C+1).join(".0");return o.map(I.split("."),function(A){return new Array(20-A.length).join("0")+A}).reverse()});for(l&&(b=v-Math.min(h,f)),v-=1;v>=b;){if(w[0][v]>w[1][v])return 1;if(w[0][v]===w[1][v]){if(v===b)return 0;v-=1}else if(w[0][v]<w[1][v])return-1}},o.map=function(u,c){var l,h=[];if(Array.prototype.map)return Array.prototype.map.call(u,c);for(l=0;l<u.length;l+=1)h.push(c(u[l]));return h},o.find=function(u,c){var l,h;if(Array.prototype.find)return Array.prototype.find.call(u,c);for(l=0,h=u.length;l<h;l+=1){var f=u[l];if(c(f,l))return f}},o.assign=function(u){for(var c,l,h=u,f=arguments.length,v=new Array(f>1?f-1:0),b=1;b<f;b++)v[b-1]=arguments[b];if(Object.assign)return Object.assign.apply(Object,[u].concat(v));var w=function(){var x=v[c];typeof x=="object"&&x!==null&&Object.keys(x).forEach(function(C){h[C]=x[C]})};for(c=0,l=v.length;c<l;c+=1)w();return u},o.getBrowserAlias=function(u){return i.BROWSER_ALIASES_MAP[u]},o.getBrowserTypeByAlias=function(u){return i.BROWSER_MAP[u]||""},o}();t.default=n,r.exports=t.default},18:function(r,t,e){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(91))&&i.__esModule?i:{default:i},o=e(18);function u(l,h){for(var f=0;f<h.length;f++){var v=h[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(l,v.key,v)}}var c=function(){function l(){}var h,f,v;return l.getParser=function(b,w){if(w===void 0&&(w=!1),typeof b!="string")throw new Error("UserAgent should be a string");return new n.default(b,w)},l.parse=function(b){return new n.default(b).getResult()},h=l,v=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(f=null)&&u(h.prototype,f),v&&u(h,v),l}();t.default=c,r.exports=t.default},91:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i=l(e(92)),n=l(e(93)),o=l(e(94)),u=l(e(95)),c=l(e(17));function l(f){return f&&f.__esModule?f:{default:f}}var h=function(){function f(b,w){if(w===void 0&&(w=!1),b==null||b==="")throw new Error("UserAgent parameter can't be empty");this._ua=b,this.parsedResult={},w!==!0&&this.parse()}var v=f.prototype;return v.getUA=function(){return this._ua},v.test=function(b){return b.test(this._ua)},v.parseBrowser=function(){var b=this;this.parsedResult.browser={};var w=c.default.find(i.default,function(x){if(typeof x.test=="function")return x.test(b);if(x.test instanceof Array)return x.test.some(function(C){return b.test(C)});throw new Error("Browser's test function is not valid")});return w&&(this.parsedResult.browser=w.describe(this.getUA())),this.parsedResult.browser},v.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},v.getBrowserName=function(b){return b?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},v.getBrowserVersion=function(){return this.getBrowser().version},v.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},v.parseOS=function(){var b=this;this.parsedResult.os={};var w=c.default.find(n.default,function(x){if(typeof x.test=="function")return x.test(b);if(x.test instanceof Array)return x.test.some(function(C){return b.test(C)});throw new Error("Browser's test function is not valid")});return w&&(this.parsedResult.os=w.describe(this.getUA())),this.parsedResult.os},v.getOSName=function(b){var w=this.getOS().name;return b?String(w).toLowerCase()||"":w||""},v.getOSVersion=function(){return this.getOS().version},v.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},v.getPlatformType=function(b){b===void 0&&(b=!1);var w=this.getPlatform().type;return b?String(w).toLowerCase()||"":w||""},v.parsePlatform=function(){var b=this;this.parsedResult.platform={};var w=c.default.find(o.default,function(x){if(typeof x.test=="function")return x.test(b);if(x.test instanceof Array)return x.test.some(function(C){return b.test(C)});throw new Error("Browser's test function is not valid")});return w&&(this.parsedResult.platform=w.describe(this.getUA())),this.parsedResult.platform},v.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},v.getEngineName=function(b){return b?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},v.parseEngine=function(){var b=this;this.parsedResult.engine={};var w=c.default.find(u.default,function(x){if(typeof x.test=="function")return x.test(b);if(x.test instanceof Array)return x.test.some(function(C){return b.test(C)});throw new Error("Browser's test function is not valid")});return w&&(this.parsedResult.engine=w.describe(this.getUA())),this.parsedResult.engine},v.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},v.getResult=function(){return c.default.assign({},this.parsedResult)},v.satisfies=function(b){var w=this,x={},C=0,I={},A=0;if(Object.keys(b).forEach(function(Oe){var tt=b[Oe];typeof tt=="string"?(I[Oe]=tt,A+=1):typeof tt=="object"&&(x[Oe]=tt,C+=1)}),C>0){var j=Object.keys(x),N=c.default.find(j,function(Oe){return w.isOS(Oe)});if(N){var U=this.satisfies(x[N]);if(U!==void 0)return U}var ee=c.default.find(j,function(Oe){return w.isPlatform(Oe)});if(ee){var $=this.satisfies(x[ee]);if($!==void 0)return $}}if(A>0){var te=Object.keys(I),Te=c.default.find(te,function(Oe){return w.isBrowser(Oe,!0)});if(Te!==void 0)return this.compareVersion(I[Te])}},v.isBrowser=function(b,w){w===void 0&&(w=!1);var x=this.getBrowserName().toLowerCase(),C=b.toLowerCase(),I=c.default.getBrowserTypeByAlias(C);return w&&I&&(C=I.toLowerCase()),C===x},v.compareVersion=function(b){var w=[0],x=b,C=!1,I=this.getBrowserVersion();if(typeof I=="string")return b[0]===">"||b[0]==="<"?(x=b.substr(1),b[1]==="="?(C=!0,x=b.substr(2)):w=[],b[0]===">"?w.push(1):w.push(-1)):b[0]==="="?x=b.substr(1):b[0]==="~"&&(C=!0,x=b.substr(1)),w.indexOf(c.default.compareVersions(I,x,C))>-1},v.isOS=function(b){return this.getOSName(!0)===String(b).toLowerCase()},v.isPlatform=function(b){return this.getPlatformType(!0)===String(b).toLowerCase()},v.isEngine=function(b){return this.getEngineName(!0)===String(b).toLowerCase()},v.is=function(b,w){return w===void 0&&(w=!1),this.isBrowser(b,w)||this.isOS(b)||this.isPlatform(b)},v.some=function(b){var w=this;return b===void 0&&(b=[]),b.some(function(x){return w.is(x)})},f}();t.default=h,r.exports=t.default},92:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(17))&&i.__esModule?i:{default:i},o=/version\/(\d+(\.?_?\d+)+)/i,u=[{test:[/googlebot/i],describe:function(c){var l={name:"Googlebot"},h=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/opera/i],describe:function(c){var l={name:"Opera"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/opr\/|opios/i],describe:function(c){var l={name:"Opera"},h=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/SamsungBrowser/i],describe:function(c){var l={name:"Samsung Internet for Android"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/Whale/i],describe:function(c){var l={name:"NAVER Whale Browser"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/MZBrowser/i],describe:function(c){var l={name:"MZ Browser"},h=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/focus/i],describe:function(c){var l={name:"Focus"},h=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/swing/i],describe:function(c){var l={name:"Swing"},h=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/coast/i],describe:function(c){var l={name:"Opera Coast"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(c){var l={name:"Opera Touch"},h=n.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/yabrowser/i],describe:function(c){var l={name:"Yandex Browser"},h=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/ucbrowser/i],describe:function(c){var l={name:"UC Browser"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/Maxthon|mxios/i],describe:function(c){var l={name:"Maxthon"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/epiphany/i],describe:function(c){var l={name:"Epiphany"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/puffin/i],describe:function(c){var l={name:"Puffin"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/sleipnir/i],describe:function(c){var l={name:"Sleipnir"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/k-meleon/i],describe:function(c){var l={name:"K-Meleon"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/micromessenger/i],describe:function(c){var l={name:"WeChat"},h=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/qqbrowser/i],describe:function(c){var l={name:/qqbrowserlite/i.test(c)?"QQ Browser Lite":"QQ Browser"},h=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/msie|trident/i],describe:function(c){var l={name:"Internet Explorer"},h=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/\sedg\//i],describe:function(c){var l={name:"Microsoft Edge"},h=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/edg([ea]|ios)/i],describe:function(c){var l={name:"Microsoft Edge"},h=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/vivaldi/i],describe:function(c){var l={name:"Vivaldi"},h=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/seamonkey/i],describe:function(c){var l={name:"SeaMonkey"},h=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/sailfish/i],describe:function(c){var l={name:"Sailfish"},h=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,c);return h&&(l.version=h),l}},{test:[/silk/i],describe:function(c){var l={name:"Amazon Silk"},h=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/phantom/i],describe:function(c){var l={name:"PhantomJS"},h=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/slimerjs/i],describe:function(c){var l={name:"SlimerJS"},h=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var l={name:"BlackBerry"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var l={name:"WebOS Browser"},h=n.default.getFirstMatch(o,c)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/bada/i],describe:function(c){var l={name:"Bada"},h=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/tizen/i],describe:function(c){var l={name:"Tizen"},h=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/qupzilla/i],describe:function(c){var l={name:"QupZilla"},h=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/firefox|iceweasel|fxios/i],describe:function(c){var l={name:"Firefox"},h=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/electron/i],describe:function(c){var l={name:"Electron"},h=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/MiuiBrowser/i],describe:function(c){var l={name:"Miui"},h=n.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/chromium/i],describe:function(c){var l={name:"Chromium"},h=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,c)||n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/chrome|crios|crmo/i],describe:function(c){var l={name:"Chrome"},h=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/GSA/i],describe:function(c){var l={name:"Google Search"},h=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:function(c){var l=!c.test(/like android/i),h=c.test(/android/i);return l&&h},describe:function(c){var l={name:"Android Browser"},h=n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/playstation 4/i],describe:function(c){var l={name:"PlayStation 4"},h=n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/safari|applewebkit/i],describe:function(c){var l={name:"Safari"},h=n.default.getFirstMatch(o,c);return h&&(l.version=h),l}},{test:[/.*/i],describe:function(c){var l=c.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(l,c),version:n.default.getSecondMatch(l,c)}}}];t.default=u,r.exports=t.default},93:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(17))&&i.__esModule?i:{default:i},o=e(18),u=[{test:[/Roku\/DVP/],describe:function(c){var l=n.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,c);return{name:o.OS_MAP.Roku,version:l}}},{test:[/windows phone/i],describe:function(c){var l=n.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.WindowsPhone,version:l}}},{test:[/windows /i],describe:function(c){var l=n.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,c),h=n.default.getWindowsVersionName(l);return{name:o.OS_MAP.Windows,version:l,versionName:h}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(c){var l={name:o.OS_MAP.iOS},h=n.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,c);return h&&(l.version=h),l}},{test:[/macintosh/i],describe:function(c){var l=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,c).replace(/[_\s]/g,"."),h=n.default.getMacOSVersionName(l),f={name:o.OS_MAP.MacOS,version:l};return h&&(f.versionName=h),f}},{test:[/(ipod|iphone|ipad)/i],describe:function(c){var l=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,c).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:l}}},{test:function(c){var l=!c.test(/like android/i),h=c.test(/android/i);return l&&h},describe:function(c){var l=n.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,c),h=n.default.getAndroidVersionName(l),f={name:o.OS_MAP.Android,version:l};return h&&(f.versionName=h),f}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var l=n.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,c),h={name:o.OS_MAP.WebOS};return l&&l.length&&(h.version=l),h}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var l=n.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,c)||n.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,c)||n.default.getFirstMatch(/\bbb(\d+)/i,c);return{name:o.OS_MAP.BlackBerry,version:l}}},{test:[/bada/i],describe:function(c){var l=n.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.Bada,version:l}}},{test:[/tizen/i],describe:function(c){var l=n.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.Tizen,version:l}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(c){var l=n.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,c);return{name:o.OS_MAP.PlayStation4,version:l}}}];t.default=u,r.exports=t.default},94:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(17))&&i.__esModule?i:{default:i},o=e(18),u=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(c){var l=n.default.getFirstMatch(/(can-l01)/i,c)&&"Nova",h={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return l&&(h.model=l),h}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(c){var l=c.test(/ipod|iphone/i),h=c.test(/like (ipod|iphone)/i);return l&&!h},describe:function(c){var l=n.default.getFirstMatch(/(ipod|iphone)/i,c);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:l}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName(!0)==="blackberry"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(c){return c.getBrowserName(!0)==="bada"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName()==="windows phone"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(c){var l=Number(String(c.getOSVersion()).split(".")[0]);return c.getOSName(!0)==="android"&&l>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(c){return c.getOSName(!0)==="android"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getOSName(!0)==="macos"},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(c){return c.getOSName(!0)==="windows"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="linux"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="playstation 4"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(c){return c.getOSName(!0)==="roku"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=u,r.exports=t.default},95:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(17))&&i.__esModule?i:{default:i},o=e(18),u=[{test:function(c){return c.getBrowserName(!0)==="microsoft edge"},describe:function(c){if(/\sedg\//i.test(c))return{name:o.ENGINE_MAP.Blink};var l=n.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,c);return{name:o.ENGINE_MAP.EdgeHTML,version:l}}},{test:[/trident/i],describe:function(c){var l={name:o.ENGINE_MAP.Trident},h=n.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:function(c){return c.test(/presto/i)},describe:function(c){var l={name:o.ENGINE_MAP.Presto},h=n.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:function(c){var l=c.test(/gecko/i),h=c.test(/like gecko/i);return l&&!h},describe:function(c){var l={name:o.ENGINE_MAP.Gecko},h=n.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(c){var l={name:o.ENGINE_MAP.WebKit},h=n.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,c);return h&&(l.version=h),l}}];t.default=u,r.exports=t.default}})})});var ZI={};py(ZI,{version:()=>zte});var zte,JI=GS(()=>{d();zte="6.4.3"});var KI=O((MEe,YI)=>{d();YI.exports={remoteConfig:{apiUrl:"https://dev.nodeapi.superviz.com",conferenceLayerUrl:"https://video-frame.superviz.com/lab/index.html"}}});var One={};py(One,{BrowserService:()=>nu,CamerasPosition:()=>nl,CanvasPin:()=>Da,CommentEvent:()=>rc,Comments:()=>Ra,ComponentLifeCycleEvent:()=>co,DeviceEvent:()=>Vd,FieldEvents:()=>iv,FormElements:()=>lu,FrameEvent:()=>Us,HTMLPin:()=>qa,LayoutMode:()=>il,LayoutPosition:()=>ou,MeetingConnectionStatus:()=>Vs,MeetingControlsEvent:()=>Hs,MeetingEvent:()=>Ws,MeetingState:()=>ec,MousePointers:()=>au,Observer:()=>Ie,ParticipantEvent:()=>tc,ParticipantType:()=>zs,PinMode:()=>Fa,Presence3DManager:()=>du,Realtime:()=>uu,RealtimeComponentEvent:()=>al,RealtimeComponentState:()=>sl,RealtimeEvent:()=>ni,StoreType:()=>st,VideoConference:()=>su,WhoIsOnline:()=>cu,WhoIsOnlineEvent:()=>ic,default:()=>Sne});module.exports=sB(One);d();d();var Ws=($=>($.MEETING_START="meeting.start",$.MEETING_LEAVE="meeting.leave",$.MEETING_PARTICIPANT_AMOUNT_UPDATE="meeting.amount-of-participants-update",$.MEETING_PARTICIPANT_LIST_UPDATE="meeting.participant-list-update",$.MEETING_PARTICIPANT_JOINED="meeting.participant-joined",$.MEETING_PARTICIPANT_LEFT="meeting.participant-left",$.MEETING_JOIN="meeting.join",$.MEETING_PARTICIPANT_PROPERTIES="meeting.participant-properties",$.MEETING_HOST_CHANGE="meeting.host-change",$.MEETING_HOST_AVAILABLE="meeting.host-available",$.MEETING_NO_HOST_AVAILABLE="meeting.no-host-available",$.MEETING_SAME_PARTICIPANT_ERROR="meeting.same-participant-error",$.MEETING_DEVICES_CHANGE="meeting.devices-change",$.MEETING_KICK_PARTICIPANTS="meeting.kick-all-participants",$.MEETING_STATE_UPDATE="meeting.state-update",$.MEETING_CONNECTION_STATUS_CHANGE="meeting.connection-status-change",$.MEETING_WAITING_FOR_HOST="meeting.waiting-for-host",$.MY_PARTICIPANT_UPDATED="my-participant.update",$.MY_PARTICIPANT_LEFT="my-participant.left",$.MY_PARTICIPANT_JOINED="my-participant.joined",$.MEETING_KICK_PARTICIPANT="meeting.kick-participant",$.DESTROY="destroy",$))(Ws||{}),Us=(l=>(l.FRAME_LOAD="frame.load",l.FRAME_DIMENSIONS_UPDATE="frame.dimensions-update",l.FRAME_PARENT_SIZE_UPDATE="frame.parent-window-size-update",l.FRAME_LOCALE_UPDATE="frame.locales-update",l.FRAME_AVATAR_LIST_UPDATE="frame.avatar-list-update",l.FRAME_COLOR_LIST_UPDATE="frame.color-list-update",l.FRAME_STYLES_UPDATE="frame.styles-update",l.FRAME_CALLBACKS_UPDATE="frame.callbacks-update",l))(Us||{}),Hs=(l=>(l.TOGGLE_MEETING_CHAT="meeting-controls.toggle-chat",l.TOGGLE_MEETING_SETUP="meeting-controls.toggle-setup",l.TOGGLE_MICROPHONE="meeting-controls.toggle-microphone",l.TOGGLE_CAM="meeting-controls.toggle-cam",l.TOGGLE_SCREENSHARE="meeting-controls.toggle-screenshare",l.TOGGLE_RECORDING="meeting-controls.toggle-recording",l.HANG_UP="hang-up",l.CALLBACK_CALLED="callback-called",l))(Hs||{}),ni=(w=>(w.REALTIME_PARTICIPANT_LIST_UPDATE="realtime.participant-list-update",w.REALTIME_HOST_CHANGE="realtime.host-change",w.REALTIME_GRID_MODE_CHANGE="realtime.grid-mode-change",w.REALTIME_WAIT_FOR_HOST="realtime.wait-for-host",w.REALTIME_AUTHENTICATION_FAILED="realtime.authentication-failed",w.REALTIME_GO_TO_PARTICIPANT="realtime.go-to-participant",w.REALTIME_GATHER="realtime.gather",w.REALTIME_FOLLOW_PARTICIPANT="realtime.follow-participant",w.REALTIME_LOCAL_FOLLOW_PARTICIPANT="realtime.local-follow-participant",w.REALTIME_SET_AVATAR="realtime.set-avatar",w.REALTIME_DRAWING_CHANGE="realtime.drawing-change",w.REALTIME_TRANSCRIPT_CHANGE="realtime.transcript-change",w.REALTIME_PRIVATE_MODE="realtime.private-mode",w))(ni||{});var ec=(f=>(f[f.MEETING_FAILED=-1]="MEETING_FAILED",f[f.MEETING_DISCONNECTED=0]="MEETING_DISCONNECTED",f[f.MEETING_INITIALIZING=1]="MEETING_INITIALIZING",f[f.MEETING_READY_TO_JOIN=2]="MEETING_READY_TO_JOIN",f[f.MEETING_CONNECTING=3]="MEETING_CONNECTING",f[f.MEETING_CONNECTED=4]="MEETING_CONNECTED",f[f.MEETING_RECONNECT=5]="MEETING_RECONNECT",f[f.FRAME_INITIALIZING=6]="FRAME_INITIALIZING",f[f.FRAME_INITIALIZED=7]="FRAME_INITIALIZED",f[f.FRAME_UNINITIALIZED=8]="FRAME_UNINITIALIZED",f))(ec||{}),tc=(c=>(c.JOINED="participant.joined",c.LOCAL_JOINED="participant.local-joined",c.LEFT="participant.left",c.LOCAL_LEFT="participant.local-left",c.LOCAL_UPDATED="participant.updated",c.LIST_UPDATED="participant.list-updated",c.SAME_ACCOUNT_ERROR="participant.same-account-error",c))(tc||{}),Vs=(c=>(c[c.NOT_AVAILABLE=0]="NOT_AVAILABLE",c[c.GOOD=1]="GOOD",c[c.BAD=2]="BAD",c[c.POOR=3]="POOR",c[c.DISCONNECTED=4]="DISCONNECTED",c[c.RECONNECTING=5]="RECONNECTING",c[c.LOST_CONNECTION=6]="LOST_CONNECTION",c))(Vs||{}),Vd=(c=>(c.NO_CAM="devices.no-cam",c.NO_DEVICES="devices.no-devices",c.DEVICES_BLOCKED="devices.blocked",c.DEVICES_CAM_BLOCKED="devices.cam-blocked",c.DEVICES_INITIALIZATION_ERROR="devices.inititalization-error",c.DEVICES_UNKNOWN_ERROR="devices.unknown-error",c.DEVICES_ALLOWED="devices.allowed",c))(Vd||{}),rc=(e=>(e.PIN_ACTIVE="pin-mode.active",e.PIN_INACTIVE="pin-mode.inactive",e))(rc||{}),co=(e=>(e.MOUNT="mount",e.UNMOUNT="unmount",e))(co||{}),ic=(l=>(l.START_FOLLOWING_PARTICIPANT="who-is-online.start-following-participant",l.STOP_FOLLOWING_PARTICIPANT="who-is-online.stop-following-participant",l.ENTER_PRIVATE_MODE="who-is-online.enter-private-mode",l.LEAVE_PRIVATE_MODE="who-is-online.leave-private-mode",l.GATHER_ALL="who-is-online.gather-all",l.GO_TO_PARTICIPANT="who-is-online.go-to-participant",l.START_FOLLOW_ME="who-is-online.start-follow-me",l.STOP_FOLLOW_ME="who-is-online.stop-follow-me",l))(ic||{});d();var zs=(i=>(i.HOST="host",i.GUEST="guest",i.AUDIENCE="audience",i))(zs||{});d();d();d();var st=(o=>(o.GLOBAL="global-store",o.COMMENTS="comments-store",o.WHO_IS_ONLINE="who-is-online-store",o.VIDEO="video-store",o.PRESENCE_3D="presence-3d-store",o))(st||{});d();d();var at=async(r,t,e,i={})=>{let n=await fetch(r,{method:t,headers:{"Content-Type":"application/json",...i},body:e?JSON.stringify(e):null});if(!n.ok)throw n;try{return await n.json()}catch{return n.ok}};d();var nO=we(gy()),be=class{constructor(t){this.debug=(0,nO.default)(t)}log(t,...e){this.debug(t,...e)}};d();d();var qO=we(Ey());var Ie=class{constructor(t={}){this.subscribe=t=>{this.callbacks.push(t)};this.unsubscribe=t=>{this.callbacks=this.callbacks.filter(e=>e!==t)};this.publish=(...t)=>{this.callbacks&&this.callbacks.forEach(e=>{this.callListener(e,t).catch(i=>{var n;(n=this.logger)==null||n.log("superviz-sdk:observer-helper:publish:error",`
            Failed to execute callback on publish value.
            Callback: ${e.name}
            Event: ${JSON.stringify(t)}
            Error: ${i}
          `)})})};this.reset=()=>{this.callbacks=[]};this.destroy=()=>{delete this.logger,delete this.callbacks};this.callListener=(t,e)=>new Promise((i,n)=>{try{let o=t(...e);i(o)}catch(o){n(o)}});let{logger:e,throttleTime:i}=t;this.logger=e||new be("@superviz/sdk/observer-helper"),this.throttle=i,this.callbacks=[],this.throttle&&(this.publish=(0,qO.default)(this.publish,this.throttle))}};var Pi=class{constructor(){this.observers={};this.subscribe=(t,e)=>{this.logger.log(`subscribed to ${t} event`),this.observers[t]||(this.observers[t]=new Ie({logger:this.logger})),this.observers[t].subscribe(e)};this.unsubscribe=(t,e)=>{if(this.logger.log(`unsubscribed from ${t} event`),!!this.observers[t]){if(!e){this.observers[t].destroy(),delete this.observers[t];return}this.observers[t].unsubscribe(e)}};this.publish=(t,e)=>{t in this.observers&&this.observers[t].publish(e)}}};d();d();d();var $O=we(po()),wy=class{setConfig(t){this.configuration=t}get(t,e){return this.configuration?(0,$O.get)(this.configuration,t,e):e}},X=new wy;var Ge=class{static createUrl(t,e,i={}){let n=new URL(e,t);return Object.keys(i).forEach(o=>n.searchParams.append(o,i[o])),n.toString()}static validateApiKey(t,e){let n=this.createUrl(t,"/user/checkapikey");return at(n,"POST",{apiKey:e})}static fetchConfig(t,e){let n=this.createUrl(t,"/immersive-config");return at(n,"POST",{apiKey:e})}static async fetchLimits(t,e){let n=this.createUrl(t,"/user/check_limits");return(await at(n,"GET","",{apikey:e})).usage}static async fetchWaterMark(t,e){let n=this.createUrl(t,"/user/watermark"),{message:o}=await at(n,"POST",{apiKey:e});return o}static async createAnnotations(t,e,i){let o=this.createUrl(t,"/annotations");return at(o,"POST",{...i},{apikey:e})}static async updateComment(t,e,i,n){let o=`/comments/${i}`,u=this.createUrl(t,o);return at(u,"PUT",{text:n},{apikey:e})}static async createComment(t,e,i){let o=this.createUrl(t,"/comments");return at(o,"POST",{...i},{apikey:e})}static async fetchAnnotation(t,e,i){let o=this.createUrl(t,"/annotations",{roomId:i.roomId,url:i.url});return at(o,"GET",void 0,{apikey:e})}static async resolveAnnotation(t,e,i){let n=`/annotations/resolve/${i}`,o=this.createUrl(t,n);return at(o,"POST",{},{apikey:e})}static async deleteComment(t,e,i){let n=`/comments/${i}`,o=this.createUrl(t,n);return at(o,"DELETE",{},{apikey:e})}static async deleteAnnotation(t,e,i){let n=`/annotations/${i}`,o=this.createUrl(t,n);return at(o,"DELETE",{},{apikey:e})}static async createOrUpdateParticipant(t){let e=X.get("apiUrl"),n=this.createUrl(e,"/participants");return at(n,"POST",{...t},{apikey:X.get("apiKey")})}static async sendActivity(t,e,i,n){let o="/activity",u=X.get("apiUrl"),c=X.get("roomId"),l=X.get("apiKey"),h=this.createUrl(u,o);return at(h,"POST",{groupId:e,groupName:i,meetingId:c,product:n,userId:t},{apikey:l})}static async fetchParticipantsByGroup(t){let e=`/groups/participants/${t}`,i=X.get("apiUrl"),n=this.createUrl(i,e,{take:1e4});return at(n,"GET",void 0,{apikey:X.get("apiKey")})}static async createMentions(t){let e="/mentions",i=X.get("apiUrl"),n=this.createUrl(i,e);return at(n,"POST",t,{apikey:X.get("apiKey")})}};d();d();d();d();function un(){return{set value(r){this.instance=r,setTimeout(()=>Object.freeze(this))},get value(){return this.instance}}}d();var Ri=we(Oo()),Db=class{constructor(t,e){this.subscriptions=new Map;this.setValue=t=>{this.state=t,this.subject.next(this.state)};this.subscribe=(t,e)=>{let i=this.subject.subscribe(e);if(this.subscriptions.has(t)){this.subscriptions.get(t).push(i);return}this.subscriptions.set(t,[i])};this.state=t,this.firstState=t,this.subject=e.pipe((0,Ri.distinctUntilChanged)(),(0,Ri.shareReplay)({bufferSize:1,refCount:!0}))}getValue(){return this.state}unsubscribe(t){var e;(e=this.subscriptions.get(t))==null||e.forEach(i=>i.unsubscribe()),this.subscriptions.delete(t)}destroy(){this.subscriptions.clear(),this.subject.complete(),this.restart()}restart(){this.state=this.firstState,this.subject=new Ri.BehaviorSubject(this.firstState).pipe((0,Ri.distinctUntilChanged)(),(0,Ri.shareReplay)({bufferSize:1,refCount:!0}))}expose(){let t=this.subscribe.bind(this),e=this.unsubscribe.bind(this),i=this.getValue.bind(this),n=this.setValue.bind(this);return{get value(){return i()},set value(o){n(o)},subscribe:t,unsubscribe:e}}};function ke(r){let t=new Ri.BehaviorSubject(r);return new Db(r,t)}var pA=un(),qb=class{constructor(){this.localParticipant=ke({});this.participants=ke({});this.group=ke(null);this.isDomainWhitelisted=ke(!0);this.hasJoinedRoom=ke(!1);if(pA.value)throw new Error("CommentsStore is a singleton. There can only be one instance of it.");pA.value=this}destroy(){this.localParticipant.destroy(),this.participants.destroy(),this.group.destroy(),this.isDomainWhitelisted.destroy(),this.hasJoinedRoom.destroy()}},xo=new qb,kK=xo.destroy.bind(xo),RK=xo.group.expose(),NK=xo.participants.expose(),FK=xo.localParticipant.expose(),DK=xo.isDomainWhitelisted.expose(),qK=xo.hasJoinedRoom.expose();function Oc(){return{localParticipant:FK,participants:NK,group:RK,isDomainWhitelisted:DK,hasJoinedRoom:qK,destroy:kK}}d();var hA=un(),$b=class{constructor(){this.hasJoined3D=ke(!1);this.participants=ke([]);if(hA.value)throw new Error("Presence3DStore is a singleton. There can only be one instance of it.");hA.value=this}destroy(){this.hasJoined3D.destroy(),this.participants.destroy()}},am=new $b,$K=am.destroy.bind(am),BK=am.hasJoined3D.expose(),jK=am.participants.expose();function fA(){return{hasJoined3D:BK,participants:jK,destroy:$K}}d();d();var um=(l=>(l[l.DISCONNECTED=0]="DISCONNECTED",l[l.INITIALIZING=1]="INITIALIZING",l[l.READY_TO_JOIN=2]="READY_TO_JOIN",l[l.CONNECTING=3]="CONNECTING",l[l.CONNECTED=4]="CONNECTED",l[l.JOINED=5]="JOINED",l[l.FAILED=-1]="FAILED",l[l.RETRYING=-2]="RETRYING",l))(um||{});var mA=un(),Bb=class{constructor(){this.meetingState=ke(0);this.gather=ke(!1);this.hostId=ke("");this.isGridModeEnabled=ke(!1);this.followParticipantId=ke("");this.drawing=ke(null);this.transcript=ke(null);if(mA.value)throw new Error("VideoStore is a singleton. There can only be one instance of it.");mA.value=this}destroy(){this.meetingState.destroy(),this.gather.destroy(),this.hostId.destroy(),this.isGridModeEnabled.destroy(),this.followParticipantId.destroy(),this.drawing.destroy(),this.transcript.destroy()}},Ni=new Bb,WK=Ni.destroy.bind(Ni),UK=Ni.meetingState.expose(),HK=Ni.gather.expose(),VK=Ni.hostId.expose(),zK=Ni.isGridModeEnabled.expose(),GK=Ni.followParticipantId.expose(),ZK=Ni.drawing.expose(),JK=Ni.transcript.expose();function vA(){return{meetingState:UK,gather:HK,destroy:WK,hostId:VK,isGridModeEnabled:zK,followParticipantId:GK,drawing:ZK,transcript:JK}}d();var gA=un(),jb=class{constructor(){this.disablePresenceControls=ke(!1);this.disableGoToParticipant=ke(!1);this.disableFollowParticipant=ke(!1);this.disablePrivateMode=ke(!1);this.disableGatherAll=ke(!1);this.disableFollowMe=ke(!1);this.participants=ke([]);this.extras=ke([]);this.joinedPresence=ke(void 0);this.everyoneFollowsMe=ke(!1);this.privateMode=ke(!1);this.following=ke(void 0);if(gA.value)throw new Error("WhoIsOnlineStore is a singleton. There can only be one instance of it.");gA.value=this}destroy(){this.disableGoToParticipant.destroy(),this.disablePresenceControls.destroy(),this.disableFollowParticipant.destroy(),this.disablePrivateMode.destroy(),this.disableGatherAll.destroy(),this.disableFollowMe.destroy(),this.participants.destroy(),this.extras.destroy(),this.joinedPresence.destroy(),this.everyoneFollowsMe.destroy(),this.privateMode.destroy(),this.following.destroy()}},Zt=new jb,YK=Zt.destroy.bind(Zt),KK=Zt.disablePresenceControls.expose(),XK=Zt.disableGoToParticipant.expose(),QK=Zt.disableFollowParticipant.expose(),eX=Zt.disablePrivateMode.expose(),tX=Zt.disableGatherAll.expose(),rX=Zt.disableFollowMe.expose(),iX=Zt.joinedPresence.expose(),nX=Zt.participants.expose(),oX=Zt.extras.expose(),sX=Zt.everyoneFollowsMe.expose(),aX=Zt.privateMode.expose(),uX=Zt.following.expose();function yA(){return{disablePresenceControls:KK,disableGoToParticipant:XK,disableFollowParticipant:QK,disablePrivateMode:eX,disableGatherAll:tX,disableFollowMe:rX,participants:nX,extras:oX,joinedPresence:iX,everyoneFollowsMe:sX,privateMode:aX,following:uX,destroy:YK}}var cX={"global-store":Oc,"who-is-online-store":yA,"video-store":vA,"presence-3d-store":fA};function lX(r,t,e){t.subscribe(this,()=>{e?e(t.value):this[r]=t.value,this.requestUpdate&&this.requestUpdate()}),this.unsubscribeFrom||(this.unsubscribeFrom=[]),this.unsubscribeFrom.push(t.unsubscribe)}function et(r){let t=cX[r](),e=lX.bind(this);return new Proxy(t,{get(n,o){return o==="destroy"?n.destroy:{subscribe(u){e(o,n[o],u)},subject:n[o],get value(){return this.subject.value},publish(u){this.subject.value=u}}}})}var It=class extends Pi{constructor(){super(...arguments);this.isAttached=!1;this.unsubscribeFrom=[];this.useStore=et.bind(this);this.attach=e=>{if(Object.values(e).includes(null)||Object.values(e).includes(void 0)){let l=`${this.name} @ attach - params are required`;throw this.logger.log(l),new Error(l)}let{config:i,eventBus:n,ioc:o}=e,{isDomainWhitelisted:u,hasJoinedRoom:c}=this.useStore("global-store");if(!u.value){let l=`Component ${this.name} can't be used because this website's domain is not whitelisted. Please add your domain in https://dashboard.superviz.com/developer`;this.logger.log(l);return}if(X.setConfig(i),this.eventBus=n,this.isAttached=!0,this.ioc=o,this.room=o.createRoom(this.name),!c.value){this.logger.log(`${this.name} @ attach - not joined yet`),setTimeout(()=>{this.logger.log(`${this.name} @ attach - retrying`),this.attach(e)},1e3);return}this.logger.log(`${this.name} @ attached`),this.start(),this.publish("mount")};this.detach=()=>{if(!this.isAttached){this.logger.log(`${this.name} @ detach - component is not attached`);return}this.logger.log("detached"),this.publish("unmount"),this.destroy(),this.room.disconnect(),this.room=void 0,this.unsubscribeFrom.forEach(e=>e(this)),Object.values(this.observers).forEach(e=>{e.reset(),e.destroy()}),this.observers=void 0,this.isAttached=!1}}};d();var Wb=(u=>(u.presence3dMatterport="presence",u.presence3dAutodesk="presence",u.presence3dThreejs="presence",u.realtime="presence",u.whoIsOnline="presence",u.formElements="presence",u))(Wb||{});d();var xc=(e=>(e.LEFT="left",e.RIGHT="right",e))(xc||{}),Ub=(n=>(n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n))(Ub||{});var Ra=class extends It{constructor(e,i){super();this.sidebarOpen=!1;this.layoutOptions={};this.openThreads=()=>{var e;this.sidebarOpen||((e=this.element)==null||e.setAttribute("open",""),this.sidebarOpen=!0,document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0})))};this.closeThreads=()=>{var e;this.sidebarOpen&&((e=this.element)==null||e.removeAttribute("open"),this.sidebarOpen=!1,document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0})))};this.togglePinActive=()=>{if(this.pinActive){this.disable();return}this.enable()};this.onPinFixed=e=>{this.coordinates=e};this.toggleAnnotationSidebar=()=>{this.element.toggleAttribute("open"),this.sidebarOpen=this.element.hasAttribute("open"),document.body.dispatchEvent(new CustomEvent("prepare-to-create-annotation",{detail:void 0,composed:!0,bubbles:!0})),document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0}))};this.onSelectAnnotation=e=>{this.sidebarOpen||this.toggleAnnotationSidebar()};this.positionFloatingButton=()=>{var l,h;this.button=document.createElement("superviz-comments-button");let e=(l=this.layoutOptions)==null?void 0:l.buttonLocation,i=(h=this.layoutOptions)==null?void 0:h.position;if(!e){document.body.appendChild(this.button),this.button.commentsPosition=i;return}let n="",o=Object.values(Ub),u=!1,c=!o.includes(e.toLocaleLowerCase());if(c){let f=window.document.body.querySelector(`#${e}`);f?(f.appendChild(this.button),n="position: relative"):(u=!0,e="top-left")}if(!c||u){document.body.appendChild(this.button);let[f,v]=e.split("-");n=`${f}: 20px; ${v}: 20px;`}this.button.positionStyles=n,this.button.commentsPosition=i};this.positionComments=()=>{var n;this.element=document.createElement("superviz-comments"),this.element.setAttribute("comments",JSON.stringify([])),this.element.side="left",this.element.offset=this.offset,document.body.appendChild(this.element);let e=(n=this.layoutOptions)==null?void 0:n.position;if(!e)return;let i=e.toUpperCase();xc[i]&&(this.element.side=xc[i])};this.createAnnotation=async({detail:e})=>{try{let{text:i,mentions:n}=e,{url:o}=this,u={...this.coordinates},c=await Ge.createAnnotations(X.get("apiUrl"),X.get("apiKey"),{roomId:X.get("roomId"),position:JSON.stringify(u),url:o,userId:this.localParticipantId}),l=await this.createComment(c.uuid,i,n);this.addAnnotation({...c,comments:[l]}),this.pinAdapter.removeAnnotationPin("temporary-pin"),document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:c.uuid,haltGoToPin:!0,newPin:!0},composed:!0,bubbles:!0}))}catch(i){this.logger.log("error when creating annotation",i)}};this.deleteAnnotation=async({detail:e})=>{try{let{uuid:i}=e;await Ge.deleteAnnotation(X.get("apiUrl"),X.get("apiKey"),i);let n=this.annotations.filter(o=>o.uuid!==i);this.updateAnnotationList(n),this.pinAdapter.removeAnnotationPin(i),this.element.updateAnnotations(this.annotations)}catch(i){this.logger.log("error when deleting annotation",i)}};this.updateComment=async({detail:e})=>{try{let{uuid:i,text:n,mentions:o}=e,u=await Ge.updateComment(X.get("apiUrl"),X.get("apiKey"),i,n);await Ge.createMentions({commentsId:u.uuid,participants:o.map(l=>({id:l.userId}))});let c=this.annotations.map(l=>Object.assign({},l,{comments:l.comments.map(h=>h.uuid===i?Object.assign({},h,{text:n,mentions:o}):h)}));this.updateAnnotationList(c)}catch(i){this.logger.log("error when updating comment",i)}};this.resolveAnnotation=async({detail:e})=>{try{let{uuid:i}=e,{resolved:n}=await Ge.resolveAnnotation(X.get("apiUrl"),X.get("apiKey"),i),o=this.annotations.map(u=>u.uuid===i?Object.assign({},u,{resolved:n}):u);if(this.updateAnnotationList(o),n){this.pinAdapter.removeAnnotationPin(i);return}this.pinAdapter.updateAnnotations(this.annotations)}catch(i){this.logger.log("error when resolve annotation",i)}};this.deleteComment=async({detail:e})=>{try{let{uuid:i,annotationId:n}=e;if(!i||!n)return;await Ge.deleteComment(X.get("apiUrl"),X.get("apiKey"),i);let o=this.annotations.find(c=>c.uuid===n);o.comments=o.comments.filter(c=>c.uuid!==i);let u=this.annotations.map(c=>c.uuid===n?o:c);this.element.updateAnnotations(u),this.updateAnnotationList(u)}catch(i){this.logger.log("error when deleting comment",i)}};this.onAnnotationListUpdate=e=>{let{data:i,clientId:n}=e;this.localParticipantId!==n&&(this.annotations=i,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations))};this.name="comments",this.logger=new be("@superviz/sdk/comments-component"),this.annotations=[],this.layoutOptions={buttonLocation:(i==null?void 0:i.buttonLocation)??"top-left",position:(i==null?void 0:i.position)??"left"},this.hideDefaultButton=(i==null?void 0:i.hideDefaultButton)??!1,this.setStyles(i==null?void 0:i.styles),this.offset=i==null?void 0:i.offset,setTimeout(()=>{var u;e.setCommentsMetadata(((u=this.layoutOptions)==null?void 0:u.position)??"left")}),this.pinAdapter=e;let{group:n,localParticipant:o}=this.useStore("global-store");n.subscribe(),o.subscribe(u=>{this.localParticipantId=u.id})}enable(){this.pinAdapter.setActive(!0),this.pinActive=!0,this.publish("pin-mode.active"),document.body.dispatchEvent(new CustomEvent("toggle-pin-active",{detail:{isActive:!0}}))}disable(){this.pinAdapter.setActive(!1),this.pinActive=!1,this.publish("pin-mode.inactive"),document.body.dispatchEvent(new CustomEvent("toggle-pin-active",{detail:{isActive:!1}}))}get url(){let e=new URL(this.clientUrl);return e.search="",e.toString()}start(){this.clientUrl=window.location.href,this.positionComments(),this.hideDefaultButton||this.positionFloatingButton(),this.fetchAnnotations(),this.waterMarkState(),this.participantsList(),this.addListeners(),this.pinAdapter.setPinsVisibility(!0)}destroy(){var e;this.logger.log("comments component @ destroy"),this.destroyListeners(),(e=this.button)==null||e.remove(),this.element.remove(),this.element=void 0,this.pinAdapter.destroy()}addListeners(){var e;(e=this.button)==null||e.addEventListener("toggle",this.togglePinActive),this.element.addEventListener("close-threads",this.closeThreads),document.body.addEventListener("create-annotation",this.createAnnotation),this.element.addEventListener("resolve-annotation",this.resolveAnnotation),this.element.addEventListener("delete-annotation",this.deleteAnnotation),this.element.addEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,i.mentions,!0)}),this.element.addEventListener("update-comment",this.updateComment),this.element.addEventListener("delete-comment",this.deleteComment),document.body.addEventListener("select-annotation",this.onSelectAnnotation),this.room.on("update-comments",this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.subscribe(this.onPinFixed)}destroyListeners(){var e;(e=this.button)==null||e.removeEventListener("toggle",this.togglePinActive),this.element.removeEventListener("close-threads",this.closeThreads),this.element.removeEventListener("resolve-annotation",this.resolveAnnotation),this.element.removeEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,i.mentions,!0)}),this.element.removeEventListener("update-comment",this.updateComment),this.element.removeEventListener("delete-comment",this.deleteComment),document.body.removeEventListener("select-annotation",this.onSelectAnnotation),document.body.removeEventListener("create-annotation",this.createAnnotation),this.room.off("update-comments",this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.unsubscribe(this.onPinFixed)}setStyles(e=""){if(!e)return;let i=document.createElement("style");i.textContent=e,i.id="superviz-comments-styles",document.head.appendChild(i)}async createComment(e,i,n=[],o=!1){try{let u=await Ge.createComment(X.get("apiUrl"),X.get("apiKey"),{annotationId:e,userId:this.localParticipantId,text:i});return await Ge.createMentions({commentsId:u.uuid,participants:n.map(c=>({id:c.userId,readed:0}))}),u.mentions=n,o&&this.addComment(e,u),u}catch(u){this.logger.log("error when creating comment",u)}}addAnnotation(e){let i=[e,...this.annotations];this.element.updateAnnotations(i),this.pinAdapter.updateAnnotations(i),this.updateAnnotationList(i)}updateAnnotationList(e){this.annotations=e,this.room.emit("update-comments",e)}addComment(e,i){let n=this.annotations.find(u=>u.uuid===e);n.comments.push(i);let o=this.annotations.map(u=>u.uuid===e?n:u);this.updateAnnotationList(o),this.element.updateAnnotations(o)}async fetchAnnotations(){try{let e=await Ge.fetchAnnotation(X.get("apiUrl"),X.get("apiKey"),{roomId:X.get("roomId"),url:this.url});this.annotations=e,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations)}catch(e){this.logger.log("error when fetching annotations",e)}}async waterMarkState(){try{let e=await Ge.fetchWaterMark(X.get("apiUrl"),X.get("apiKey"));this.element.waterMarkStatus(e)}catch(e){this.logger.log("error when fetching waterMark",e)}}async participantsList(){try{let i=(await Ge.fetchParticipantsByGroup(this.group.id)).data;this.pinAdapter.participantsList=i,this.element.participantsList=i}catch(e){this.logger.log("error when fetching participantsList",e)}}};d();d();var Fa=(e=>(e.ADD="add",e.SHOW="show",e))(Fa||{});var Da=class{constructor(t,e){this.isPinsVisible=!0;this.selectedPin=null;this.temporaryPinCoordinates=null;this.commentsSide="left";this.setCommentsMetadata=t=>{this.commentsSide=t};this.resetPins=t=>{t&&(t==null?void 0:t.key)!=="Escape"||(this.resetSelectedPin(),this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};this.animate=()=>{(this.isActive||this.isPinsVisible)&&(this.renderAnnotationsPins(),this.divWrapper=this.renderDivWrapper()),this.temporaryPinCoordinates&&this.renderTemporaryPin(),this.animateFrame=requestAnimationFrame(this.animate)};this.setMouseDownCoordinates=({x:t,y:e})=>{this.mouseDownCoordinates={x:t,y:e}};this.annotationSelected=({detail:{uuid:t,haltGoToPin:e,newPin:i}})=>{var u;if(!t)return;i&&this.pins.get(t).setAttribute("newPin","");let n=JSON.parse(((u=this.selectedPin)==null?void 0:u.getAttribute("annotation"))??"{}");if(this.resetPins(),(n==null?void 0:n.uuid)===t)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let o=this.pins.get(t);o&&(o.setAttribute("active",""),this.selectedPin=o,!e&&this.goToPin(t))};this.onClick=t=>{if(!this.isActive)return;let e=this.canvas.getBoundingClientRect(),{x:i,y:n}=this.mouseDownCoordinates,o=i-e.x,u=n-e.y,c=t.clientX-e.left,l=t.clientY-e.top;if(Math.hypot(c-o,l-u)>10)return;let b=this.canvas.getContext("2d").getTransform().inverse(),w=new DOMPoint(c,l-31).matrixTransform(b);this.onPinFixedObserver.publish({x:w.x,y:w.y,type:"canvas"}),this.resetSelectedPin(),this.temporaryPinCoordinates={x:w.x,y:w.y},this.renderTemporaryPin();let x=document.getElementById("superviz-temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,x.setAttribute("movedPosition",String(this.movedTemporaryPin)),!this.selectedPin&&document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onToggleAnnotationSidebar=({detail:t})=>{let{open:e}=t;e||(this.pins.forEach(i=>{i.removeAttribute("active")}),this.pins.has("temporary-pin")&&this.removeAnnotationPin("temporary-pin"))};this.hideTemporaryPin=t=>{var v;let e=t.target,i=e.contains(this.canvas),{x:n,y:o}=t,{left:u,top:c,right:l,bottom:h}=this.canvas.getBoundingClientRect(),f=n>u&&n<l&&o>c&&o<h;this.canvas.contains(e)||(v=this.pins.get("temporary-pin"))!=null&&v.contains(e)||i&&f||(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};if(this.logger=new be("@superviz/sdk/comments-component/canvas-pin-adapter"),this.canvas=document.getElementById(t),this.isActive=!1,this.pins=new Map,this.goToPinCallback=e==null?void 0:e.onGoToPin,!this.canvas){let i=`Canvas with id ${t} not found`;throw this.logger.log(i),new Error(i)}this.canvasSides=this.canvas.getBoundingClientRect(),document.body.style.position="relative",this.onPinFixedObserver=new Ie({logger:this.logger}),this.divWrapper=this.renderDivWrapper(),this.annotations=[],this.renderAnnotationsPins(),this.animateFrame=requestAnimationFrame(this.animate),document.body.addEventListener("select-annotation",this.annotationSelected),document.body.addEventListener("keyup",this.resetPins)}destroy(){this.isActive=!1,this.removeListeners(),this.removeAnnotationsPins(),this.pins=new Map,this.divWrapper.remove(),this.divWrapper=null,this.onPinFixedObserver.destroy(),this.onPinFixedObserver=null,this.canvas.style.cursor="default",this.annotations=[],cancelAnimationFrame(this.animateFrame),document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("keyup",this.resetPins)}setPinsVisibility(t){if(this.isPinsVisible=t,this.isPinsVisible){this.renderAnnotationsPins();return}this.removeAnnotationsPins()}setActive(t){if(this.isActive!==t){if(this.isActive=t,this.isActive){this.originalCanvasCursor=this.canvas.style.cursor,this.canvas.style.cursor='url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer',this.addListeners();return}this.resetPins(),this.removeListeners(),this.canvas.style.cursor=this.originalCanvasCursor}}updateAnnotations(t){this.logger.log("updateAnnotations",t),this.annotations=t,!(!this.isActive&&!this.isPinsVisible)&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}removeAnnotationPin(t){let e=this.pins.get(t);e&&(e.remove(),this.pins.delete(t),t!=="temporary-pin"&&(this.annotations=this.annotations.filter(i=>i.uuid!==t)))}renderTemporaryPin(){let t=document.getElementById("superviz-temporary-pin");t||(t=document.createElement("superviz-comments-annotation-pin"),t.id="superviz-temporary-pin",t.setAttribute("type","add"),t.setAttribute("showInput",""),t.setAttribute("containerSides",JSON.stringify(this.canvasSides)),t.setAttribute("commentsSide",this.commentsSide),t.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),t.setAttribute("annotation",JSON.stringify({})),t.setAttribute("participantsList",JSON.stringify(this.participants)),t.setAttributeNode(document.createAttribute("active")),this.divWrapper.appendChild(t));let{x:e,y:i}=this.temporaryPinCoordinates,o=this.canvas.getContext("2d").getTransform(),u=o.e,c=o.f,l=o.a,h=o.d,f=e*l+u,v=i*h+c;t.setAttribute("position",JSON.stringify({x:f,y:v})),this.pins.set("temporary-pin",t)}addListeners(){this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("mousedown",this.setMouseDownCoordinates),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}removeListeners(){this.canvas.removeEventListener("click",this.onClick),this.canvas.removeEventListener("mousedown",this.setMouseDownCoordinates),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}resetSelectedPin(){this.selectedPin&&(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}renderDivWrapper(){let t=this.canvas.getBoundingClientRect(),e=this.divWrapper;return e||(e=document.createElement("div"),e.id="superviz-canvas-wrapper",["","static"].includes(this.canvas.parentElement.style.position)&&(this.canvas.parentElement.style.position="relative")),e.style.position="absolute",e.style.top=`${this.canvas.offsetTop}px`,e.style.left=`${this.canvas.offsetLeft}px`,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.pointerEvents="none",e.style.overflow="hidden",document.getElementById("superviz-canvas-wrapper")||this.canvas.parentElement.appendChild(e),e}renderAnnotationsPins(){if((!this.annotations.length||this.canvas.style.display==="none")&&!this.pins.get("temporary-pin")){this.removeAnnotationsPins();return}this.annotations.forEach(t=>{if(t.resolved)return;let e=JSON.parse(t.position);if((e==null?void 0:e.type)!=="canvas")return;let{x:i,y:n}=e,u=this.canvas.getContext("2d").getTransform(),c=u.e,l=u.f,h=u.a,f=u.d,v=i*h+c,b=n*f+l;if(this.pins.has(t.uuid)){let x=this.pins.get(t.uuid);if(this.divWrapper.clientWidth>v&&this.divWrapper.clientHeight>b){x.setAttribute("style","opacity: 1"),this.pins.get(t.uuid).setAttribute("position",JSON.stringify({x:v,y:b}));return}x.setAttribute("style","opacity: 0");return}let w=document.createElement("superviz-comments-annotation-pin");w.setAttribute("type","show"),w.setAttribute("participantsList",JSON.stringify(this.participants)),w.setAttribute("annotation",JSON.stringify(t)),w.setAttribute("position",JSON.stringify({x:v,y:b})),w.id=t.uuid,this.divWrapper.appendChild(w),this.pins.set(t.uuid,w)})}removeAnnotationsPins(){this.pins.forEach(t=>{t.remove()}),this.pins.clear()}set participantsList(t){this.participants=t}goToPin(t){let e=this.annotations.find(w=>w.uuid===t);if(!e)return;let i=JSON.parse(e.position);if((i==null?void 0:i.type)!=="canvas")return;let n=this.canvas.getBoundingClientRect(),{width:o,height:u}=n,{x:c,y:l}=i,h=o/2,f=u/2,v=h-c,b=f-l;this.goToPinCallback&&this.goToPinCallback({x:v,y:b})}};d();var bA=we(po());var qa=class{constructor(t,e={}){this.isPinsVisible=!0;this.selectedPin=null;this.dataAttribute="data-superviz-id";this.commentsSide="left";this.temporaryPinCoordinates={};this.elementsWithDataId={};this.divWrappers=new Map;this.voidElementsWrappers=new Map;this.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","svg","rect","ellipse"];this.animate=()=>{this.voidElementsWrappers&&(this.updatePinsPositions(),this.animateFrame=requestAnimationFrame(this.animate))};this.setCommentsMetadata=t=>{this.commentsSide=t};this.hideTemporaryPin=t=>{var u;let e=t.target,i=this.divWrappers.get(this.temporaryPinCoordinates.elementId);if(!i)return;let n=i.contains(e),o=(u=this.pins.get("temporary-pin"))==null?void 0:u.contains(e);n||o||(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates={})};this.resetPins=t=>{t&&(t==null?void 0:t.key)!=="Escape"||(this.resetSelectedPin(),this.resetHoveredWrapper(),this.temporaryPinCoordinates.elementId&&(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates={}))};this.annotationSelected=({detail:{uuid:t,newPin:e}})=>{if(!t)return;e&&this.pins.get(t).setAttribute("newPin","");let i=this.annotations.find(u=>{var c;return u.uuid===((c=this.selectedPin)==null?void 0:c.id)});if(this.resetPins(),(i==null?void 0:i.uuid)===t)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let n=this.pins.get(t);if(!n)return;n.setAttribute("active",""),this.selectedPin=n;let o=this.annotations.find(u=>u.uuid===t);this.selectedPin.setAttribute("elementId",JSON.parse(o.position).elementId)};this.onClick=t=>{if(!this.isActive||t.target===this.pins.get("temporary-pin"))return;let e=t.target,i=t.currentTarget;if(e!==i&&this.pins.has(e.id))return;let n=i.getAttribute("data-wrapper-id"),o=i.getBoundingClientRect(),{x:u,y:c}=this.mouseDownCoordinates,l=t.clientX-o.left,h=t.clientY-o.top,f=u-o.x,v=c-o.y;if(Math.hypot(l-f,h-v)>10)return;let{width:w,height:x}=i.getBoundingClientRect(),C=32,I=i.getBoundingClientRect().width/i.offsetWidth||1;l=l*100/w,h=(h-C*I)*100/x,this.onPinFixedObserver.publish({x:l,y:h,type:"html",elementId:n}),this.resetSelectedPin(),this.temporaryPinCoordinates={...this.temporaryPinCoordinates,x:l,y:h},this.renderTemporaryPin(n);let A=this.pins.get("temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,A.setAttribute("movedPosition",String(this.movedTemporaryPin)),document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onMouseDown=({x:t,y:e})=>{this.mouseDownCoordinates={x:t,y:e}};this.handleMutationObserverChanges=t=>{t.forEach(e=>{var h;let{target:i,oldValue:n}=e,o=i.getAttribute(this.dataAttribute);if(!o&&!n||o===n)return;let u=this.dataAttributeValueFilters.some(f=>n.match(f));if(!o&&n&&!u){this.removeAnnotationPin("temporary-pin"),this.clearElement(n),((h=this.selectedPin)==null?void 0:h.getAttribute("elementId"))===n&&(document.body.dispatchEvent(new CustomEvent("unselect-annotation")),this.selectedPin=null);return}let l=this.dataAttributeValueFilters.some(f=>o.match(f));(n&&this.elementsWithDataId[n]||l)&&this.clearElement(n),!l&&(this.setElementReadyToPin(i,o),this.renderAnnotationsPins())})};this.onToggleAnnotationSidebar=({detail:t})=>{let{open:e}=t;e||(this.resetSelectedPin(),this.pins.has("temporary-pin")&&(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates.elementId=void 0))};this.onMouseEnter=t=>{var o;let e=t.target;if(this.hoveredWrapper=e,!((o=e.getAttribute("data-wrapper-type"))==null?void 0:o.includes("ellipse"))){this.hoveredWrapper.style.setProperty("outline","1px solid rgb(var(--sv-primary))");return}let n=e.querySelector("ellipse");n.setAttribute("stroke","rgb(var(--sv-primary))"),n.setAttribute("stroke-width","1")};this.onMouseLeave=t=>{var o;let e=t.target;if(this.hoveredWrapper=e,!((o=e.getAttribute("data-wrapper-type"))==null?void 0:o.includes("ellipse"))){this.hoveredWrapper.style.setProperty("outline","");return}let n=e.querySelector("ellipse");n.removeAttribute("stroke"),n.removeAttribute("stroke-width")};if(this.logger=new be("@superviz/sdk/comments-component/container-pin-adapter"),this.container=document.getElementById(t),!this.container){let o=`Element with id ${t} not found`;throw this.logger.log(o),new Error(o)}if(typeof e!="object")throw new Error("Second argument of the HTMLPin constructor must be an object");let{dataAttributeName:i,dataAttributeValueFilters:n}=e;if(i==="")throw new Error("dataAttributeName must be a non-empty string");if(i===null)throw new Error("dataAttributeName cannot be null");if(i!==void 0&&typeof i!="string")throw new Error("dataAttributeName must be a non-empty string");this.dataAttribute=i||this.dataAttribute,this.dataAttributeValueFilters=n||[],this.isActive=!1,this.prepareElements(),this.mutationObserver=new MutationObserver(this.handleMutationObserverChanges),this.observeContainer(),this.pins=new Map,this.onPinFixedObserver=new Ie({logger:this.logger}),this.annotations=[],document.body.addEventListener("select-annotation",this.annotationSelected),document.body.addEventListener("keyup",this.resetPins),this.voidElementsWrappers.size&&(this.animateFrame=requestAnimationFrame(this.animate))}destroy(){var t;this.logger.log("Destroying HTML Pin Adapter for Comments"),this.removeListeners(),this.removeObservers(),this.divWrappers.forEach(e=>e.remove()),this.divWrappers.clear(),this.pins.forEach(e=>e.remove()),this.pins.clear(),this.divWrappers=void 0,this.pins=void 0,this.elementsWithDataId=void 0,this.logger=void 0,this.onPinFixedObserver.destroy(),this.onPinFixedObserver=void 0,this.container=void 0,this.voidElementsWrappers.clear(),this.voidElementsWrappers=void 0,this.annotations=[],(t=this.svgWrappers)==null||t.remove(),this.svgWrappers=void 0,document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),cancelAnimationFrame(this.animateFrame)}addElementListeners(t){this.divWrappers.get(t).addEventListener("click",this.onClick,!0),this.divWrappers.get(t).addEventListener("mousedown",this.onMouseDown),this.divWrappers.get(t).addEventListener("mouseenter",this.onMouseEnter),this.divWrappers.get(t).addEventListener("mouseleave",this.onMouseLeave)}removeElementListeners(t){this.divWrappers.get(t).removeEventListener("click",this.onClick,!0),this.divWrappers.get(t).removeEventListener("mousedown",this.onMouseDown),this.divWrappers.get(t).removeEventListener("mouseenter",this.onMouseEnter),this.divWrappers.get(t).removeEventListener("mouseleave",this.onMouseLeave)}set participantsList(t){this.participants=t}removeObservers(){this.mutationObserver.disconnect(),this.mutationObserver=void 0}addListeners(){this.divWrappers.forEach((t,e)=>this.addElementListeners(e)),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}removeListeners(){this.divWrappers.forEach((t,e)=>this.removeElementListeners(e)),document.body.removeEventListener("keyup",this.resetPins),document.body.removeEventListener("click",this.hideTemporaryPin)}observeContainer(){this.mutationObserver.observe(this.container,{subtree:!0,attributes:!0,attributeFilter:[this.dataAttribute],attributeOldValue:!0})}prepareElements(){this.container.querySelectorAll(`[${this.dataAttribute}]`).forEach(e=>{let i=e.getAttribute(this.dataAttribute);this.dataAttributeValueFilters.some(o=>i.match(o))||this.setElementReadyToPin(e,i)})}addAllCursors(){this.divWrappers.forEach((t,e)=>{this.addCursor(t,e)})}removeAddCursor(){this.divWrappers.forEach((t,e)=>{let i=t,n=t.getAttribute("data-wrapper-type");if(n){let o=n.split("-")[1];i=this.divWrappers.get(e).querySelector(o)}i.style.setProperty("cursor","default"),i.style.setProperty("pointer-events","none")})}setPinsVisibility(t){this.isPinsVisible=t,this.isPinsVisible&&this.renderAnnotationsPins(),this.removeAnnotationsPins()}removeAnnotationPin(t){let e=this.pins.get(t);!e&&t==="temporary-pin"||(e&&(e.remove(),this.pins.delete(t)),t!=="temporary-pin"&&(this.annotations=this.annotations.filter(i=>i.uuid!==t)))}updateAnnotations(t){this.logger.log("updateAnnotations",t),this.annotations=t,this.isPinsVisible&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}setActive(t){if(this.isActive!==t){if(this.isActive=t,this.isActive){this.addListeners(),this.addAllCursors(),this.prepareElements();return}this.resetPins(),this.removeListeners(),this.removeAddCursor()}}renderTemporaryPin(t){var o;this.temporaryPinCoordinates.elementId||=t;let e=this.pins.get("temporary-pin");if(t&&t!==this.temporaryPinCoordinates.elementId&&(this.pins.get("temporary-pin").remove(),this.pins.delete("temporary-pin"),this.temporaryPinCoordinates.elementId=t,e=null),!e){let u=(o=this.elementsWithDataId[t])==null?void 0:o.getBoundingClientRect();e=document.createElement("superviz-comments-annotation-pin"),e.id="superviz-temporary-pin",e.setAttribute("type","add"),e.setAttribute("showInput",""),e.setAttribute("containerSides",JSON.stringify(u)),e.setAttribute("commentsSide",this.commentsSide),e.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),e.setAttribute("annotation",JSON.stringify({})),e.setAttribute("participantsList",JSON.stringify(this.participants)),e.setAttribute("keepPositionRatio",""),e.setAttributeNode(document.createAttribute("active")),this.addTemporaryPinToElement(t,e)}let{x:i,y:n}=this.temporaryPinCoordinates;e.setAttribute("position",JSON.stringify({x:i,y:n})),this.pins.set("temporary-pin",e)}renderAnnotationsPins(){if(!this.annotations.length){this.removeAnnotationsPins();return}this.annotations.forEach(t=>{if(t.resolved)return;let{x:e,y:i,elementId:n,type:o}=JSON.parse(t.position);if(o!=="html"||this.pins.has(t.uuid)||!this.elementsWithDataId[n])return;let c=this.divWrappers.get(n);if(!c)return;let l=this.createPin(t,e,i);c.appendChild(l),this.pins.set(t.uuid,l)})}updatePinsPositions(){this.voidElementsWrappers.forEach((t,e)=>{let i=JSON.stringify(t.getBoundingClientRect()),n=this.elementsWithDataId[e].getBoundingClientRect();this.elementsWithDataId[e].tagName.toLowerCase()==="ellipse"&&(n=this.elementsWithDataId[e].viewportElement.getBoundingClientRect()),!(0,bA.isEqual)(JSON.stringify(n),i)&&(t.style.setProperty("top",`${n.top}px`),t.style.setProperty("left",`${n.left}px`),t.style.setProperty("width",`${n.width}px`),t.style.setProperty("height",`${n.height}px`))})}clearElement(t){if(!this.elementsWithDataId[t])return;let i=this.divWrappers.get(t);if(i){let n=i.children,{length:o}=n;for(let u=0;u<o;++u){let c=n.item(u);this.pins.delete(c.id)}i.remove()}this.voidElementsWrappers.delete(t),this.removeElementListeners(t),this.divWrappers.delete(t),this.elementsWithDataId[t]=void 0,this.voidElementsWrappers.size||(cancelAnimationFrame(this.animateFrame),this.animateFrame=void 0)}resetSelectedPin(){this.selectedPin&&(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}resetHoveredWrapper(){this.hoveredWrapper&&this.onMouseLeave({target:this.hoveredWrapper})}removeAnnotationsPins(){this.pins.forEach(t=>{t.remove()}),this.pins.clear()}setElementReadyToPin(t,e){if(!this.elementsWithDataId[e]){if(this.elementsWithDataId[e]=t,!this.divWrappers.get(e)){let i=this.createWrapper(t,e);this.divWrappers.set(e,i)}!this.isActive||!this.isPinsVisible||(this.addCursor(this.divWrappers.get(e),e),this.addElementListeners(e))}}handleSvgElement(t,e){let i=t.viewportElement;if(i===void 0)return;if(t.tagName.toLowerCase()==="svg"){let A=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return A.setAttribute("height","100%"),A.setAttribute("width","100%"),A.style.setProperty("overflow","visible"),A.appendChild(e),t.appendChild(A),t.style.setProperty("overflow","visible"),e}let u=t.tagName.toLowerCase(),c=u==="ellipse",l=u==="rect";if(!c&&!l)return;let h=document.createElementNS("http://www.w3.org/2000/svg","svg"),f=document.createElementNS("http://www.w3.org/2000/svg",u),v,b,w,x,C,I;if(l){let A=t;v=A.getAttribute("x"),b=A.getAttribute("y"),w=A.getAttribute("width"),x=A.getAttribute("height"),C=A.getAttribute("rx"),I=A.getAttribute("ry"),f.setAttribute("fill","transparent"),f.setAttribute("stroke","transparent"),f.setAttribute("x","0"),f.setAttribute("y","0"),f.setAttribute("rx",C),f.setAttribute("ry",I)}if(c){let A=t.getAttribute("cx"),j=t.getAttribute("cy");C=t.getAttribute("rx"),I=t.getAttribute("ry"),v=Number(A)-Number(C),b=Number(j)-Number(I);let{width:N,height:U}=i.getBoundingClientRect();w=`${N}px`,x=`${U}px`,f.setAttribute("fill","transparent"),f.setAttribute("stroke","transparent"),f.setAttribute("cx",A),f.setAttribute("cy",j),f.setAttribute("rx",C),f.setAttribute("ry",I)}return f.setAttribute("height",x),f.setAttribute("width",w),h.setAttribute("height",x),h.setAttribute("width",w),h.appendChild(f),e.appendChild(h),t.style.setProperty("overflow","visible"),e.setAttribute("data-wrapper-type",`svg-${u}`),e}addTemporaryPinToElement(t,e){if(!this.elementsWithDataId[t])return;let n=this.divWrappers.get(t);n&&n.appendChild(e)}createPin(t,e,i){let n=document.createElement("superviz-comments-annotation-pin");return n.setAttribute("type","show"),n.setAttribute("annotation",JSON.stringify(t)),n.setAttribute("position",JSON.stringify({x:e,y:i})),n.setAttribute("keepPositionRatio",""),n.setAttribute("participantsList",JSON.stringify(this.participants)),n.id=t.uuid,n}addCursor(t,e){let i=t,n=t.getAttribute("data-wrapper-type");if(n){let o=n.split("-")[1];i=this.divWrappers.get(e).querySelector(o)}i.style.setProperty("cursor",'url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer'),i.style.setProperty("pointer-events","auto")}createWrapper(t,e){let i=`superviz-id-${e}`;if(this.divWrappers.get(e))return;let n=t.getBoundingClientRect(),o=document.createElement("div");o.setAttribute("data-wrapper-id",e),o.id=i,o.style.position="absolute",o.style.pointerEvents="none",o.style.transform="translateX(0) translateY(0) scale(1)",o.style.cursor="default",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.pointerEvents="none";let u=window.getComputedStyle(t).getPropertyValue("border-radius");if(o.style.borderRadius=u,!this.VOID_ELEMENTS.includes(this.elementsWithDataId[e].tagName.toLowerCase()))return this.elementsWithDataId[e].appendChild(o),this.setPositionNotStatic(this.elementsWithDataId[e]),o;o=this.handleSvgElement(t,o)??o,o.style.position="fixed",o.style.top=`${n.top}px`,o.style.left=`${n.left}px`,o.style.width=`${n.width}px`,o.style.height=`${n.height}px`;let c=this.elementsWithDataId[e].parentElement;return(!c||t.viewportElement)&&(c=document.body),this.setPositionNotStatic(c),c.appendChild(o),this.voidElementsWrappers.set(e,o),this.animateFrame||(this.animateFrame=requestAnimationFrame(this.animate)),o}setPositionNotStatic(t){let{position:e}=window.getComputedStyle(t);e==="static"&&t.style.setProperty("position","relative")}};d();d();d();d();d();var Tc=we(Oo());var Cc=class r{constructor(t,e,i){this.io=t;this.presence=e;this.roomId=i;this.presences=new Set;this.observers=new Map;this.onPresenceJoin=t=>{(t==null?void 0:t.roomId)===this.roomId&&(this.logger.log("presence room @ presence join",t),this.presences.add(t),this.observers.get("presence.joined-room").next({connectionId:t.connectionId,data:t.data,id:t.id,name:t.name,timestamp:t.timestamp}))};this.onPresenceLeave=t=>{(t==null?void 0:t.roomId)===this.roomId&&(this.logger.log("presence room @ presence leave",t),this.presences.delete(t),this.observers.get("presence.leave").next(t))};this.onPresenceUpdate=t=>{(t==null?void 0:t.roomId)===this.roomId&&(this.logger.log("presence room @ presence update",t),this.observers.get("presence.update").next({connectionId:t.connectionId,data:t.data,id:t.id,name:t.name,roomId:t==null?void 0:t.roomId,timestamp:t.timestamp}))};this.logger=new be("@superviz/sdk/socket-client/presence"),this.registerSubsjects(),this.subscribeToPresenceEvents()}static register(t,e,i){return new r(t,e,i)}get(t,e){let i=new Tc.Subject;i.subscribe({next:t,error:e});let n=o=>{let u=o.presences.map(c=>({connectionId:c.connectionId,data:c.data,id:c.id,name:c.name,timestamp:c.timestamp}));this.logger.log("presence room @ get",o),this.io.off("presence.get",n),i.next(u),i.complete()};this.io.on("presence.get",n),this.io.emit("presence.get",this.roomId)}update(t){let e={connectionId:this.io.id,data:t,id:this.presence.id,name:this.presence.name,timestamp:Date.now()};this.io.emit("presence.update",this.roomId,e),this.logger.log("presence room @ update",this.roomId,e)}destroy(){this.io.off("presence.joined-room",this.onPresenceJoin),this.io.off("presence.leave",this.onPresenceLeave),this.io.off("presence.update",this.onPresenceUpdate),this.observers.forEach(t=>t.unsubscribe()),this.observers.clear()}registerSubsjects(){this.observers.set("presence.joined-room",new Tc.Subject),this.observers.set("presence.leave",new Tc.Subject),this.observers.set("presence.update",new Tc.Subject)}on(t,e,i){this.observers.get(t).subscribe({error:i,next:e})}off(t){this.observers.get(t).unsubscribe()}subscribeToPresenceEvents(){this.io.on("presence.joined-room",this.onPresenceJoin),this.io.on("presence.leave",this.onPresenceLeave),this.io.on("presence.update",this.onPresenceUpdate)}};d();d();d();d();d();d();d();d();d();d();d();d();var Vr=Object.create(null);Vr.open="0";Vr.close="1";Vr.ping="2";Vr.pong="3";Vr.message="4";Vr.upgrade="5";Vr.noop="6";var Pc=Object.create(null);Object.keys(Vr).forEach(r=>{Pc[Vr[r]]=r});var Ac={type:"error",data:"parser error"};var Ic=({type:r,data:t},e,i)=>t instanceof ArrayBuffer||ArrayBuffer.isView(t)?i(e?t:"b"+_A(t,!0).toString("base64")):i(Vr[r]+(t||"")),_A=(r,t)=>Buffer.isBuffer(r)||r instanceof Uint8Array&&!t?r:r instanceof ArrayBuffer?Buffer.from(r):Buffer.from(r.buffer,r.byteOffset,r.byteLength),Hb;function EA(r,t){if(r.data instanceof ArrayBuffer||ArrayBuffer.isView(r.data))return t(_A(r.data,!1));Ic(r,!0,e=>{Hb||(Hb=new TextEncoder),t(Hb.encode(e))})}d();var Mc=(r,t)=>{if(typeof r!="string")return{type:"message",data:wA(r,t)};let e=r.charAt(0);if(e==="b"){let i=Buffer.from(r.substring(1),"base64");return{type:"message",data:wA(i,t)}}return Pc[e]?r.length>1?{type:Pc[e],data:r.substring(1)}:{type:Pc[e]}:Ac},wA=(r,t)=>{switch(t){case"arraybuffer":return r instanceof ArrayBuffer?r:Buffer.isBuffer(r)?r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength):r.buffer;case"nodebuffer":default:return Buffer.isBuffer(r)?r:Buffer.from(r)}};var SA="",OA=(r,t)=>{let e=r.length,i=new Array(e),n=0;r.forEach((o,u)=>{Ic(o,!1,c=>{i[u]=c,++n===e&&t(i.join(SA))})})},xA=(r,t)=>{let e=r.split(SA),i=[];for(let n=0;n<e.length;n++){let o=Mc(e[n],t);if(i.push(o),o.type==="error")break}return i};function TA(){return new TransformStream({transform(r,t){EA(r,e=>{let i=e.length,n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);let o=new DataView(n.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{n=new Uint8Array(9);let o=new DataView(n.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}r.data&&typeof r.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(e)})}})}var Vb;function cm(r){return r.reduce((t,e)=>t+e.length,0)}function lm(r,t){if(r[0].length===t)return r.shift();let e=new Uint8Array(t),i=0;for(let n=0;n<t;n++)e[n]=r[0][i++],i===r[0].length&&(r.shift(),i=0);return r.length&&i<r[0].length&&(r[0]=r[0].slice(i)),e}function CA(r,t){Vb||(Vb=new TextDecoder);let e=[],i=0,n=-1,o=!1;return new TransformStream({transform(u,c){for(e.push(u);;){if(i===0){if(cm(e)<1)break;let l=lm(e,1);o=(l[0]&128)===128,n=l[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(cm(e)<2)break;let l=lm(e,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(cm(e)<8)break;let l=lm(e,8),h=new DataView(l.buffer,l.byteOffset,l.length),f=h.getUint32(0);if(f>Math.pow(2,21)-1){c.enqueue(Ac);break}n=f*Math.pow(2,32)+h.getUint32(4),i=3}else{if(cm(e)<n)break;let l=lm(e,n);c.enqueue(Mc(o?l:Vb.decode(l),t)),i=0}if(n===0||n>r){c.enqueue(Ac);break}}}})}var zb=4;var FA=we(To(),1);d();d();var zr=global;function dm(r,...t){return t.reduce((e,i)=>(r.hasOwnProperty(i)&&(e[i]=r[i]),e),{})}var pX=zr.setTimeout,hX=zr.clearTimeout;function Fi(r,t){t.useNativeTimers?(r.setTimeoutFn=pX.bind(zr),r.clearTimeoutFn=hX.bind(zr)):(r.setTimeoutFn=zr.setTimeout.bind(zr),r.clearTimeoutFn=zr.clearTimeout.bind(zr))}var fX=1.33;function AA(r){return typeof r=="string"?mX(r):Math.ceil((r.byteLength||r.size)*fX)}function mX(r){let t=0,e=0;for(let i=0,n=r.length;i<n;i++)t=r.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}var DA=we($a(),1);d();function RA(r){let t="";for(let e in r)r.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t}function NA(r){let t={},e=r.split("&");for(let i=0,n=e.length;i<n;i++){let o=e[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}var MX=(0,DA.default)("engine.io-client:transport"),mm=class extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}},Di=class extends FA.Emitter{constructor(t){super(),this.writable=!1,Fi(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new mm(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"?this.write(t):MX("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=Mc(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let e=RA(t);return e.length?"?"+e:""}};var GA=we($a(),1);d();var jA="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Jb=64,LX={},qA=0,vm=0,$A;function BA(r){let t="";do t=jA[r%Jb]+t,r=Math.floor(r/Jb);while(r>0);return t}function gm(){let r=BA(+new Date);return r!==$A?(qA=0,$A=r):r+"."+BA(qA++)}for(;vm<Jb;vm++)LX[jA[vm]]=vm;d();var Xb=we(HA(),1),Qb=Xb.default||Xb;function VA(){return new Kb}function RX(r){let t=r.split("; "),e=t[0].indexOf("=");if(e===-1)return;let i=t[0].substring(0,e).trim();if(!i.length)return;let n=t[0].substring(e+1).trim();n.charCodeAt(0)===34&&(n=n.slice(1,-1));let o={name:i,value:n};for(let u=1;u<t.length;u++){let c=t[u].split("=");if(c.length!==2)continue;let l=c[0].trim(),h=c[1].trim();switch(l){case"Expires":o.expires=new Date(h);break;case"Max-Age":let f=new Date;f.setUTCSeconds(f.getUTCSeconds()+parseInt(h,10)),o.expires=f;break;default:}}return o}var Kb=class{constructor(){this.cookies=new Map}parseCookies(t){let e=t.getResponseHeader("set-cookie");e&&e.forEach(i=>{let n=RX(i);n&&this.cookies.set(n.name,n)})}addCookies(t){let e=[];this.cookies.forEach((i,n)=>{var o;((o=i.expires)===null||o===void 0?void 0:o.getTime())<Date.now()?this.cookies.delete(n):e.push(`${n}=${i.value}`)}),e.length&&(t.setDisableHeaderCheck(!0),t.setRequestHeader("cookie",e.join("; ")))}};var ZA=we(To(),1);var Jt=(0,GA.default)("engine.io-client:polling");function NX(){}var FX=function(){return new Qb({xdomain:!1}).responseType!=null}(),ym=class extends Di{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){let i=location.protocol==="https:",n=location.port;n||(n=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}let e=t&&t.forceBase64;this.supportsBinary=FX&&!e,this.opts.withCredentials&&(this.cookieJar=VA())}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";let e=()=>{Jt("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(Jt("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){Jt("pre-pause polling complete"),--i||e()})),this.writable||(Jt("we are currently writing - waiting to pause"),i++,this.once("drain",function(){Jt("pre-pause writing complete"),--i||e()}))}else e()}poll(){Jt("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){Jt("polling got data %s",t);let e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};xA(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this.poll():Jt('ignoring poll - transport state "%s"',this.readyState))}doClose(){let t=()=>{Jt("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(Jt("transport open - closing"),t()):(Jt("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,OA(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=gm()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Ln(this.uri(),t)}doWrite(t,e){let i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(n,o)=>{this.onError("xhr post error",n,o)})}doPoll(){Jt("xhr poll");let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}},Ln=class r extends ZA.Emitter{constructor(t,e){super(),Fi(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.data=e.data!==void 0?e.data:null,this.create()}create(){var t;let e=dm(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;let i=this.xhr=new Qb(e);try{Jt("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this.opts.cookieJar)===null||n===void 0||n.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},Jt("xhr data %s",this.data),i.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document<"u"&&(this.index=r.requestsCount++,r.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=NX,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete r.requests[this.index],this.xhr=null}}onLoad(){let t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Ln.requestsCount=0;Ln.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",zA);else if(typeof addEventListener=="function"){let r="onpagehide"in zr?"pagehide":"unload";addEventListener(r,zA,!1)}}function zA(){for(let r in Ln.requests)Ln.requests.hasOwnProperty(r)&&Ln.requests[r].abort()}d();d();d();var zQ=we(XA(),1),GQ=we(l_(),1),ZQ=we(p_(),1),Y1=we(b_(),1),JQ=we(J1(),1);var K1=Y1.default;var Wc=K1,Lm=!1,X1="nodebuffer",Mo=process.nextTick;var eI=we($a(),1);var YQ=(0,eI.default)("engine.io-client:websocket"),Q1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",km=class extends Di{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let t=this.uri(),e=this.opts.protocols,i=Q1?{}:dm(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Lm&&!Q1?e?new Wc(t,e):new Wc(t):new Wc(t,e,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let i=t[e],n=e===t.length-1;Ic(i,this.supportsBinary,o=>{let u={};Lm||(i.options&&(u.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof o=="string"?Buffer.byteLength(o):o.length)<this.opts.perMessageDeflate.threshold&&(u.compress=!1));try{Lm?this.ws.send(o):this.ws.send(o,u)}catch{YQ("websocket closed before onclose event")}n&&Mo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=gm()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!Wc}};d();var tI=we($a(),1),Uc=(0,tI.default)("engine.io-client:webtransport"),Rm=class extends Di{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{Uc("transport closed gracefully"),this.onClose()}).catch(t=>{Uc("transport closed due to %s",t),this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{let e=CA(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(e).getReader(),n=TA();n.readable.pipeTo(t.writable),this.writer=n.writable.getWriter();let o=()=>{i.read().then(({done:c,value:l})=>{if(c){Uc("session is closed");return}Uc("received chunk: %o",l),this.onPacket(l),o()}).catch(c=>{Uc("an error occurred while reading: %s",c)})};o();let u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this.writer.write(u).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let i=t[e],n=e===t.length-1;this.writer.write(i).then(()=>{n&&Mo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}};var E_={websocket:km,webtransport:Rm,polling:ym};d();var KQ=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,XQ=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Va(r){if(r.length>2e3)throw"URI too long";let t=r,e=r.indexOf("["),i=r.indexOf("]");e!=-1&&i!=-1&&(r=r.substring(0,e)+r.substring(e,i).replace(/:/g,";")+r.substring(i,r.length));let n=KQ.exec(r||""),o={},u=14;for(;u--;)o[XQ[u]]=n[u]||"";return e!=-1&&i!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=QQ(o,o.path),o.queryKey=eee(o,o.query),o}function QQ(r,t){let e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function eee(r,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,o){n&&(e[n]=o)}),e}var rI=we($a(),1),iI=we(To(),1);var Ye=(0,rI.default)("engine.io-client:socket"),Lo=class r extends iI.Emitter{constructor(t,e={}){super(),this.binaryType=X1,this.writeBuffer=[],t&&typeof t=="object"&&(e=t,t=null),t?(t=Va(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Va(e.host).host),Fi(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=NA(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){Ye('creating transport "%s"',t);let e=Object.assign({},this.opts.query);e.EIO=zb,e.transport=t,this.id&&(e.sid=this.id);let i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return Ye("options: %j",i),new E_[t](i)}open(){let t;if(this.opts.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch(e){Ye("error while creating transport: %s",e),this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){Ye("setting transport %s",t.name),this.transport&&(Ye("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(t){Ye('probing transport "%s"',t);let e=this.createTransport(t),i=!1;r.priorWebsocketSuccess=!1;let n=()=>{i||(Ye('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",v=>{if(!i)if(v.type==="pong"&&v.data==="probe"){if(Ye('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;r.priorWebsocketSuccess=e.name==="websocket",Ye('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(Ye("changing transport and sending upgrade packet"),f(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{Ye('probe transport "%s" failed',t);let b=new Error("probe error");b.transport=e.name,this.emitReserved("upgradeError",b)}}))};function o(){i||(i=!0,f(),e.close(),e=null)}let u=v=>{let b=new Error("probe error: "+v);b.transport=e.name,o(),Ye('probe transport "%s" failed because of error: %s',t,v),this.emitReserved("upgradeError",b)};function c(){u("transport closed")}function l(){u("socket closed")}function h(v){e&&v.name!==e.name&&(Ye('"%s" works - aborting "%s"',v.name,e.name),o())}let f=()=>{e.removeListener("open",n),e.removeListener("error",u),e.removeListener("close",c),this.off("close",l),this.off("upgrading",h)};e.once("open",n),e.once("error",u),e.once("close",c),this.once("close",l),this.once("upgrading",h),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onOpen(){if(Ye("socket open"),this.readyState="open",r.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){Ye("starting upgrade probes");let t=0,e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Ye('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}else Ye('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this.getWritablePackets();Ye("flushing %d packets in socket",t.length),this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){let n=this.writeBuffer[i].data;if(n&&(e+=AA(n)),i>0&&e>this.maxPayload)return Ye("only send %d out of %d packets",i,this.writeBuffer.length),this.writeBuffer.slice(0,i);e+=2}return Ye("payload size is %d (max: %d)",e,this.maxPayload),this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,n){if(typeof e=="function"&&(n=e,e=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;let o={type:t,data:e,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}close(){let t=()=>{this.onClose("forced close"),Ye("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){Ye("socket error %j",t),r.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(Ye('socket close with reason: "%s"',t),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){let e=[],i=0,n=t.length;for(;i<n;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}};Lo.protocol=zb;var Nge=Lo.protocol;var cI=we(Hc(),1),uI=(0,cI.default)("socket.io-client:url");function lI(r,t="",e){let i=r;e=e||typeof location<"u"&&location,r==null&&(r=e.protocol+"//"+e.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=e.protocol+r:r=e.host+r),/^(https?|wss?):\/\//.test(r)||(uI("protocol-less url %s",r),typeof e<"u"?r=e.protocol+"//"+r:r="https://"+r),uI("parse %s",r),i=Va(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(e&&e.port===i.port?"":":"+i.port),i}d();d();var L_={};py(L_,{Decoder:()=>I_,Encoder:()=>A_,PacketType:()=>Pe,protocol:()=>wI});d();var _I=we(To(),1);d();d();var vee=typeof ArrayBuffer=="function",gee=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,dI=Object.prototype.toString,yee=typeof Blob=="function"||typeof Blob<"u"&&dI.call(Blob)==="[object BlobConstructor]",bee=typeof File=="function"||typeof File<"u"&&dI.call(File)==="[object FileConstructor]";function zc(r){return vee&&(r instanceof ArrayBuffer||gee(r))||yee&&r instanceof Blob||bee&&r instanceof File}function Vc(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let e=0,i=r.length;e<i;e++)if(Vc(r[e]))return!0;return!1}if(zc(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Vc(r.toJSON(),!0);for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&Vc(r[e]))return!0;return!1}function pI(r){let t=[],e=r.data,i=r;return i.data=O_(e,t),i.attachments=t.length,{packet:i,buffers:t}}function O_(r,t){if(!r)return r;if(zc(r)){let e={_placeholder:!0,num:t.length};return t.push(r),e}else if(Array.isArray(r)){let e=new Array(r.length);for(let i=0;i<r.length;i++)e[i]=O_(r[i],t);return e}else if(typeof r=="object"&&!(r instanceof Date)){let e={};for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=O_(r[i],t));return e}return r}function hI(r,t){return r.data=x_(r.data,t),delete r.attachments,r}function x_(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=x_(r[e],t);else if(typeof r=="object")for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=x_(r[e],t));return r}var EI=we(yI(),1),P_=(0,EI.default)("socket.io-parser"),Nee=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],wI=5,Pe;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Pe||(Pe={}));var A_=class{constructor(t){this.replacer=t}encode(t){return P_("encoding packet %j",t),(t.type===Pe.EVENT||t.type===Pe.ACK)&&Vc(t)?this.encodeAsBinary({type:t.type===Pe.EVENT?Pe.BINARY_EVENT:Pe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Pe.BINARY_EVENT||t.type===Pe.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),P_("encoded %j as %s",t,e),e}encodeAsBinary(t){let e=pI(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}};function bI(r){return Object.prototype.toString.call(r)==="[object Object]"}var I_=class r extends _I.Emitter{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);let i=e.type===Pe.BINARY_EVENT;i||e.type===Pe.BINARY_ACK?(e.type=i?Pe.EVENT:Pe.ACK,this.reconstructor=new M_(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(zc(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,i={type:Number(t.charAt(0))};if(Pe[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Pe.BINARY_EVENT||i.type===Pe.BINARY_ACK){let o=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let u=t.substring(o,e);if(u!=Number(u)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(u)}if(t.charAt(e+1)==="/"){let o=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(o,e)}else i.nsp="/";let n=t.charAt(e+1);if(n!==""&&Number(n)==n){let o=e+1;for(;++e;){let u=t.charAt(e);if(u==null||Number(u)!=u){--e;break}if(e===t.length)break}i.id=Number(t.substring(o,e+1))}if(t.charAt(++e)){let o=this.tryParse(t.substr(e));if(r.isPayloadValid(i.type,o))i.data=o;else throw new Error("invalid payload")}return P_("decoded %s as %j",t,i),i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case Pe.CONNECT:return bI(e);case Pe.DISCONNECT:return e===void 0;case Pe.CONNECT_ERROR:return typeof e=="string"||bI(e);case Pe.EVENT:case Pe.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Nee.indexOf(e[0])===-1);case Pe.ACK:case Pe.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},M_=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=hI(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};d();function hr(r,t,e){return r.on(t,e),function(){r.off(t,e)}}var SI=we(To(),1),OI=we(Hc(),1),dt=(0,OI.default)("socket.io-client:socket"),Fee=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),za=class extends SI.Emitter{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[hr(t,"open",this.onopen.bind(this)),hr(t,"packet",this.onpacket.bind(this)),hr(t,"error",this.onerror.bind(this)),hr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Fee.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let i={type:Pe.EVENT,data:e};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let u=this.ids++;dt("emitting packet with ack id %d",u);let c=e.pop();this._registerAckCallback(u,c),i.id=u}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)?dt("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(t,e){var i;let n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=e;return}let o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&(dt("removing packet with ack id %d from the buffer",t),this.sendBuffer.splice(c,1));dt("event with ack id %d has timed out after %d ms",t,n),e.call(this,new Error("operation has timed out"))},n),u=(...c)=>{this.io.clearTimeoutFn(o),e.apply(this,c)};u.withError=!0,this.acks[t]=u}emitWithAck(t,...e){return new Promise((i,n)=>{let o=(u,c)=>u?n(u):i(c);o.withError=!0,e.push(o),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());let i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...o)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(dt("packet [%d] is discarded after %d tries",i.id,i.tryCount),this._queue.shift(),e&&e(n)):(dt("packet [%d] was successfully sent",i.id),this._queue.shift(),e&&e(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(dt("draining queue"),!this.connected||this._queue.length===0)return;let e=this._queue[0];if(e.pending&&!t){dt("packet [%d] has already been sent and is waiting for an ack",e.id);return}e.pending=!0,e.tryCount++,dt("sending packet [%d] (try n\xB0%d)",e.id,e.tryCount),this.flags=e.flags,this.emit.apply(this,e.args)}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){dt("transport is open - connecting"),typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Pe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){dt("close (%s)",t),this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){let i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Pe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Pe.EVENT:case Pe.BINARY_EVENT:this.onevent(t);break;case Pe.ACK:case Pe.BINARY_ACK:this.onack(t);break;case Pe.DISCONNECT:this.ondisconnect();break;case Pe.CONNECT_ERROR:this.destroy();let i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){let e=t.data||[];dt("emitting event %j",e),t.id!=null&&(dt("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let i of e)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,i=!1;return function(...n){i||(i=!0,dt("sending ack %j",n),e.packet({type:Pe.ACK,id:t,data:n}))}}onack(t){let e=this.acks[t.id];if(typeof e!="function"){dt("bad ack %s",t.id);return}delete this.acks[t.id],dt("calling ack %s with %j",t.id,t.data),e.withError&&t.data.unshift(null),e.apply(this,t.data)}onconnect(t,e){dt("socket connected with id %s",t),this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){dt("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(dt("performing disconnect (%s)",this.nsp),this.packet({type:Pe.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let i of e)i.apply(this,t.data)}}};d();function ko(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}ko.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*r);r=Math.floor(t*10)&1?r+e:r-e}return Math.min(r,this.max)|0};ko.prototype.reset=function(){this.attempts=0};ko.prototype.setMin=function(r){this.ms=r};ko.prototype.setMax=function(r){this.max=r};ko.prototype.setJitter=function(r){this.jitter=r};var xI=we(To(),1),TI=we(Hc(),1),Ct=(0,TI.default)("socket.io-client:manager"),Fn=class extends xI.Emitter{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Fi(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new ko({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let n=e.parser||L_;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(Ct("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;Ct("opening %s",this.uri),this.engine=new Lo(this.uri,this.opts);let e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;let n=hr(e,"open",function(){i.onopen(),t&&t()}),o=c=>{Ct("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},u=hr(e,"error",o);if(this._timeout!==!1){let c=this._timeout;Ct("connect attempt will timeout after %d",c);let l=this.setTimeoutFn(()=>{Ct("connect attempt timed out after %d",c),n(),o(new Error("timeout")),e.close()},c);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(u),this}connect(t){return this.open(t)}onopen(){Ct("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(hr(t,"ping",this.onping.bind(this)),hr(t,"data",this.ondata.bind(this)),hr(t,"error",this.onerror.bind(this)),hr(t,"close",this.onclose.bind(this)),hr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Mo(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){Ct("error",t),this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new za(this,t,e),this.nsps[t]=i),i}_destroy(t){let e=Object.keys(this.nsps);for(let i of e)if(this.nsps[i].active){Ct("socket %s is still active, skipping close",i);return}this._close()}_packet(t){Ct("writing packet %j",t);let e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){Ct("cleanup"),this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){Ct("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){Ct("closed due to %s",t),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)Ct("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();Ct("will wait %dms before reconnect attempt",e),this._reconnecting=!0;let i=this.setTimeoutFn(()=>{t.skipReconnect||(Ct("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(Ct("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):(Ct("reconnect success"),t.onreconnect())}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var PI=we(Hc(),1),CI=(0,PI.default)("socket.io-client"),Gc={};function k_(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};let e=lI(r,t.path||"/socket.io"),i=e.source,n=e.id,o=e.path,u=Gc[n]&&o in Gc[n].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||u,l;return c?(CI("ignoring socket cache for %s",i),l=new Fn(i,t)):(Gc[n]||(CI("new io instance for %s",i),Gc[n]=new Fn(i,t)),l=Gc[n]),e.query&&!t.query&&(t.query=e.queryKey),l.socket(e.path,t)}Object.assign(k_,{Manager:Fn,Socket:za,io:k_,connect:k_});d();var R_=we(Oo());var jm=class{constructor(t){this.socket=t;this.onConnect=()=>{this.logger.log("connection @ on connect","Connected to the socket"),this.changeState("CONNECTED")};this.onDisconnect=t=>{this.logger.log("connection @ on disconnect","Disconnected from the socket"),this.changeState("DISCONNECTED",t)};this.onConnectError=t=>{this.logger.log("connection @ on connect error","Connection error",t),this.changeState("CONNECTION_ERROR",t.message)};this.onConnectionError=t=>{this.logger.log("connection @ on connection error","Connection error",t),this.changeState("CONNECTION_ERROR",t.message)};this.onReconnect=()=>{this.logger.log("connection @ on reconnect","Reconnected to the socket"),this.changeState("CONNECTED")};this.onReconnectError=t=>{this.logger.log("connection @ on reconnect error","Reconnect error",t),this.changeState("RECONNECT_ERROR",t.message)};this.onReconnectFailed=()=>{this.logger.log("connection @ on reconnect failed","Failed to reconnect to the socket"),this.changeState("RECONNECT_ERROR")};this.onReconnecAttempt=t=>{this.logger.log("connection @ on reconnect attempt",`Reconnect attempt #${t}`),this.changeState("RECONNECTING",`Reconnect attempt #${t}`)};this.onCustomError=t=>{if(t.needsToDisconnect&&this.socket.disconnect(),t.level==="error"){console.error("[SuperViz - Error]","Type: ",t.errorType,"Message :",t.message);return}console.warn("[SuperViz - Warning]","Type: ",t.errorType,"Message :",t.message)};this.logger=new be("@superviz/sdk/socket-client/connection"),this.subscribeToManagerEvents(),this.stateObserver=new R_.Subject}on(t,e){this.stateObserver.closed&&(this.stateObserver=new R_.Subject),this.stateObserver.subscribe({next:t,error:e})}off(){this.stateObserver.closed||this.stateObserver.unsubscribe()}subscribeToManagerEvents(){this.socket.on("connect",this.onConnect),this.socket.on("disconnect",this.onDisconnect),this.socket.on("connect_error",this.onConnectError),this.socket.io.on("error",this.onConnectionError),this.socket.io.on("reconnect",this.onReconnect),this.socket.io.on("reconnect_attempt",this.onReconnecAttempt),this.socket.io.on("reconnect_error",this.onReconnectError),this.socket.io.on("reconnect_failed",this.onReconnectFailed),this.socket.on("socket-event.error",this.onCustomError)}changeState(t,e){this.state=t,!this.stateObserver.closed&&this.stateObserver.next({state:t,reason:e})}};d();var N_=we(Oo());var Zc=class r{constructor(t,e,i,n,o=100){this.io=t;this.user=e;this.roomId=i;this.apiKey=n;this.maxConnections=o;this.isJoined=!1;this.subscriptions=new Map;this.observers=new Map;this.onJoinedRoom=t=>{var e;this.roomId===((e=t==null?void 0:t.data)==null?void 0:e.name)&&(this.isJoined=!0,this.io.emit("room.joined",this.roomId,t.data),this.logger.log("room @ joined",t))};this.onHttpEvent=t=>{this.publishEventToClient(t.name,t)};this.logger=new be("@superviz/sdk/socket-client/room");let u={name:i,user:e,maxConnections:o};this.presence=Cc.register(t,e,i),this.io.emit("room.join",u),this.subscribeToRoomEvents()}static register(t,e,i,n,o){return new r(t,e,i,n,o)}on(t,e){this.logger.log("room @ on",t);let i=this.observers.get(t);i||(i=new N_.Subject,this.observers.set(t,i),this.io.on(t,n=>{this.publishEventToClient(t,n)})),this.subscriptions.set(e,i.subscribe(e))}off(t,e){var i;if(this.logger.log("room @ off",t),!e){this.observers.delete(t),this.io.off(t);return}(i=this.subscriptions.get(e))==null||i.unsubscribe()}emit(t,e){if(!this.isJoined){this.logger.log("Cannot emit event. Not joined to room");return}let i={name:t,roomId:this.roomId,presence:this.user,connectionId:this.io.id,data:e,timestamp:Date.now()};this.io.emit("room.update",this.roomId,i),this.logger.log("room @ emit",t,e)}history(t,e){let i=new N_.Subject;i.subscribe({next:t,error:e});let n=o=>{this.logger.log("room @ history",o),this.io.off("room.get",n),i.next(o),i.complete(),i.unsubscribe()};this.io.on("room.get",n),this.io.emit("room.get",this.roomId)}disconnect(){this.logger.log("room @ disconnect","Leaving room...",this.roomId),this.io.emit("room.leave",this.roomId),this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions.clear(),this.observers.forEach(t=>t.unsubscribe()),this.observers.clear(),this.presence.destroy()}publishEventToClient(t,e){let i=this.observers.get(t);!i||e.roomId!==this.roomId||i.next(e)}subscribeToRoomEvents(){this.io.on("room.joined",this.onJoinedRoom),this.io.on("room.error",t=>{this.logger.log("Error:",t.data)}),this.io.on(`http:${this.roomId}:${this.apiKey}`,this.onHttpEvent)}};var Jc=class{constructor(t,e,i){this.apiKey=t;this.environment=e;this.presence=i;this.manager=new Fn("https://io.superviz.com",{addTrailingSlash:!1,secure:!0,withCredentials:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5,extraHeaders:{"sv-api-key":this.apiKey}});let{origin:n}=window.location;this.socket=this.manager.socket(`/${e}`,{auth:{apiKey:this.apiKey,origin:n,envirioment:this.environment}}),this.connection=new jm(this.socket)}get state(){return this.connection.state}connect(t,e){return Zc.register(this.socket,this.presence,t,this.apiKey,e)}destroy(){this.socket.disconnect(),this.connection.off()}};d();d();var Me;(function(r){r.assertEqual=n=>n;function t(n){}r.assertIs=t;function e(n){throw new Error}r.assertNever=e,r.arrayToEnum=n=>{let o={};for(let u of n)o[u]=u;return o},r.getValidEnumValues=n=>{let o=r.objectKeys(n).filter(c=>typeof n[n[c]]!="number"),u={};for(let c of o)u[c]=n[c];return r.objectValues(u)},r.objectValues=n=>r.objectKeys(n).map(function(o){return n[o]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let o=[];for(let u in n)Object.prototype.hasOwnProperty.call(n,u)&&o.push(u);return o},r.find=(n,o)=>{for(let u of n)if(o(u))return u},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function i(n,o=" | "){return n.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}r.joinValues=i,r.jsonStringifyReplacer=(n,o)=>typeof o=="bigint"?o.toString():o})(Me||(Me={}));var D_;(function(r){r.mergeShapes=(t,e)=>({...t,...e})})(D_||(D_={}));var Z=Me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Dn=r=>{switch(typeof r){case"undefined":return Z.undefined;case"string":return Z.string;case"number":return isNaN(r)?Z.nan:Z.number;case"boolean":return Z.boolean;case"function":return Z.function;case"bigint":return Z.bigint;case"symbol":return Z.symbol;case"object":return Array.isArray(r)?Z.array:r===null?Z.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?Z.promise:typeof Map<"u"&&r instanceof Map?Z.map:typeof Set<"u"&&r instanceof Set?Z.set:typeof Date<"u"&&r instanceof Date?Z.date:Z.object;default:return Z.unknown}},W=Me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),qee=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),fr=class r extends Error{constructor(t){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};let e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){let e=t||function(o){return o.message},i={_errors:[]},n=o=>{for(let u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(n);else if(u.code==="invalid_return_type")n(u.returnTypeError);else if(u.code==="invalid_arguments")n(u.argumentsError);else if(u.path.length===0)i._errors.push(e(u));else{let c=i,l=0;for(;l<u.path.length;){let h=u.path[l];l===u.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(e(u))):c[h]=c[h]||{_errors:[]},c=c[h],l++}}};return n(this),i}static assert(t){if(!(t instanceof r))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){let e={},i=[];for(let n of this.issues)n.path.length>0?(e[n.path[0]]=e[n.path[0]]||[],e[n.path[0]].push(t(n))):i.push(t(n));return{formErrors:i,fieldErrors:e}}get formErrors(){return this.flatten()}};fr.create=r=>new fr(r);var Ja=(r,t)=>{let e;switch(r.code){case W.invalid_type:r.received===Z.undefined?e="Required":e=`Expected ${r.expected}, received ${r.received}`;break;case W.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(r.expected,Me.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:e=`Unrecognized key(s) in object: ${Me.joinValues(r.keys,", ")}`;break;case W.invalid_union:e="Invalid input";break;case W.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${Me.joinValues(r.options)}`;break;case W.invalid_enum_value:e=`Invalid enum value. Expected ${Me.joinValues(r.options)}, received '${r.received}'`;break;case W.invalid_arguments:e="Invalid function arguments";break;case W.invalid_return_type:e="Invalid function return type";break;case W.invalid_date:e="Invalid date";break;case W.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(e=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?e=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?e=`Invalid input: must end with "${r.validation.endsWith}"`:Me.assertNever(r.validation):r.validation!=="regex"?e=`Invalid ${r.validation}`:e="Invalid";break;case W.too_small:r.type==="array"?e=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?e=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?e=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?e=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:e="Invalid input";break;case W.too_big:r.type==="array"?e=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?e=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?e=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?e=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?e=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:e="Invalid input";break;case W.custom:e="Invalid input";break;case W.invalid_intersection_types:e="Intersection results could not be merged";break;case W.not_multiple_of:e=`Number must be a multiple of ${r.multipleOf}`;break;case W.not_finite:e="Number must be finite";break;default:e=t.defaultError,Me.assertNever(r)}return{message:e}},LI=Ja;function $ee(r){LI=r}function Wm(){return LI}var Um=r=>{let{data:t,path:e,errorMaps:i,issueData:n}=r,o=[...e,...n.path||[]],u={...n,path:o};if(n.message!==void 0)return{...n,path:o,message:n.message};let c="",l=i.filter(h=>!!h).slice().reverse();for(let h of l)c=h(u,{data:t,defaultError:c}).message;return{...n,path:o,message:c}},Bee=[];function z(r,t){let e=Wm(),i=Um({issueData:t,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,e,e===Ja?void 0:Ja].filter(n=>!!n)});r.common.issues.push(i)}var Lt=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){let i=[];for(let n of e){if(n.status==="aborted")return ce;n.status==="dirty"&&t.dirty(),i.push(n.value)}return{status:t.value,value:i}}static async mergeObjectAsync(t,e){let i=[];for(let n of e){let o=await n.key,u=await n.value;i.push({key:o,value:u})}return r.mergeObjectSync(t,i)}static mergeObjectSync(t,e){let i={};for(let n of e){let{key:o,value:u}=n;if(o.status==="aborted"||u.status==="aborted")return ce;o.status==="dirty"&&t.dirty(),u.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||n.alwaysSet)&&(i[o.value]=u.value)}return{status:t.value,value:i}}},ce=Object.freeze({status:"aborted"}),Za=r=>({status:"dirty",value:r}),qt=r=>({status:"valid",value:r}),q_=r=>r.status==="aborted",$_=r=>r.status==="dirty",Xc=r=>r.status==="valid",Qc=r=>typeof Promise<"u"&&r instanceof Promise;function Hm(r,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!i:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(r):i?i.value:t.get(r)}function kI(r,t,e,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(r,e):n?n.value=e:t.set(r,e),e}var Q;(function(r){r.errToObj=t=>typeof t=="string"?{message:t}:t||{},r.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Q||(Q={}));var Yc,Kc,Lr=class{constructor(t,e,i,n){this._cachedPath=[],this.parent=t,this.data=e,this._path=i,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},II=(r,t)=>{if(Xc(t))return{success:!0,data:t.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let e=new fr(r.common.issues);return this._error=e,this._error}}};function me(r){if(!r)return{};let{errorMap:t,invalid_type_error:e,required_error:i,description:n}=r;if(t&&(e||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(u,c)=>{var l,h;let{message:f}=r;return u.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(l=f??i)!==null&&l!==void 0?l:c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:(h=f??e)!==null&&h!==void 0?h:c.defaultError}},description:n}}var ve=class{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Dn(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:Dn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Lt,ctx:{common:t.parent.common,data:t.data,parsedType:Dn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let e=this._parse(t);if(Qc(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){let e=this._parse(t);return Promise.resolve(e)}parse(t,e){let i=this.safeParse(t,e);if(i.success)return i.data;throw i.error}safeParse(t,e){var i;let n={common:{issues:[],async:(i=e==null?void 0:e.async)!==null&&i!==void 0?i:!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Dn(t)},o=this._parseSync({data:t,path:n.path,parent:n});return II(n,o)}async parseAsync(t,e){let i=await this.safeParseAsync(t,e);if(i.success)return i.data;throw i.error}async safeParseAsync(t,e){let i={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Dn(t)},n=this._parse({data:t,path:i.path,parent:i}),o=await(Qc(n)?n:Promise.resolve(n));return II(i,o)}refine(t,e){let i=n=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(n):e;return this._refinement((n,o)=>{let u=t(n),c=()=>o.addIssue({code:W.custom,...i(n)});return typeof Promise<"u"&&u instanceof Promise?u.then(l=>l?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(t,e){return this._refinement((i,n)=>t(i)?!0:(n.addIssue(typeof e=="function"?e(i,n):e),!1))}_refinement(t){return new mr({schema:this,typeName:se.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Mr.create(this,this._def)}nullable(){return fi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ui.create(this,this._def)}promise(){return Bn.create(this,this._def)}or(t){return Bo.create([this,t],this._def)}and(t){return jo.create(this,t,this._def)}transform(t){return new mr({...me(this._def),schema:this,typeName:se.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let e=typeof t=="function"?t:()=>t;return new zo({...me(this._def),innerType:this,defaultValue:e,typeName:se.ZodDefault})}brand(){return new el({typeName:se.ZodBranded,type:this,...me(this._def)})}catch(t){let e=typeof t=="function"?t:()=>t;return new Go({...me(this._def),innerType:this,catchValue:e,typeName:se.ZodCatch})}describe(t){let e=this.constructor;return new e({...this._def,description:t})}pipe(t){return tl.create(this,t)}readonly(){return Zo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},jee=/^c[^\s-]{8,}$/i,Wee=/^[0-9a-z]+$/,Uee=/^[0-9A-HJKMNP-TV-Z]{26}$/,Hee=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vee=/^[a-z0-9_-]{21}$/i,zee=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Gee=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Zee="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",F_,Jee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Yee=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Kee=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,RI="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Xee=new RegExp(`^${RI}$`);function NI(r){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?t=`${t}\\.\\d{${r.precision}}`:r.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Qee(r){return new RegExp(`^${NI(r)}$`)}function FI(r){let t=`${RI}T${NI(r)}`,e=[];return e.push(r.local?"Z?":"Z"),r.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function ete(r,t){return!!((t==="v4"||!t)&&Jee.test(r)||(t==="v6"||!t)&&Yee.test(r))}var qn=class r extends ve{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Z.string){let o=this._getOrReturnCtx(t);return z(o,{code:W.invalid_type,expected:Z.string,received:o.parsedType}),ce}let i=new Lt,n;for(let o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(n=this._getOrReturnCtx(t,n),z(n,{code:W.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if(o.kind==="max")t.data.length>o.value&&(n=this._getOrReturnCtx(t,n),z(n,{code:W.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if(o.kind==="length"){let u=t.data.length>o.value,c=t.data.length<o.value;(u||c)&&(n=this._getOrReturnCtx(t,n),u?z(n,{code:W.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&z(n,{code:W.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),i.dirty())}else if(o.kind==="email")Gee.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"email",code:W.invalid_string,message:o.message}),i.dirty());else if(o.kind==="emoji")F_||(F_=new RegExp(Zee,"u")),F_.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"emoji",code:W.invalid_string,message:o.message}),i.dirty());else if(o.kind==="uuid")Hee.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"uuid",code:W.invalid_string,message:o.message}),i.dirty());else if(o.kind==="nanoid")Vee.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"nanoid",code:W.invalid_string,message:o.message}),i.dirty());else if(o.kind==="cuid")jee.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"cuid",code:W.invalid_string,message:o.message}),i.dirty());else if(o.kind==="cuid2")Wee.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"cuid2",code:W.invalid_string,message:o.message}),i.dirty());else if(o.kind==="ulid")Uee.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"ulid",code:W.invalid_string,message:o.message}),i.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),z(n,{validation:"url",code:W.invalid_string,message:o.message}),i.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"regex",code:W.invalid_string,message:o.message}),i.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(n=this._getOrReturnCtx(t,n),z(n,{code:W.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),i.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(n=this._getOrReturnCtx(t,n),z(n,{code:W.invalid_string,validation:{startsWith:o.value},message:o.message}),i.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(n=this._getOrReturnCtx(t,n),z(n,{code:W.invalid_string,validation:{endsWith:o.value},message:o.message}),i.dirty()):o.kind==="datetime"?FI(o).test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{code:W.invalid_string,validation:"datetime",message:o.message}),i.dirty()):o.kind==="date"?Xee.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{code:W.invalid_string,validation:"date",message:o.message}),i.dirty()):o.kind==="time"?Qee(o).test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{code:W.invalid_string,validation:"time",message:o.message}),i.dirty()):o.kind==="duration"?zee.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"duration",code:W.invalid_string,message:o.message}),i.dirty()):o.kind==="ip"?ete(t.data,o.version)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"ip",code:W.invalid_string,message:o.message}),i.dirty()):o.kind==="base64"?Kee.test(t.data)||(n=this._getOrReturnCtx(t,n),z(n,{validation:"base64",code:W.invalid_string,message:o.message}),i.dirty()):Me.assertNever(o);return{status:i.value,value:t.data}}_regex(t,e,i){return this.refinement(n=>t.test(n),{validation:e,code:W.invalid_string,...Q.errToObj(i)})}_addCheck(t){return new r({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Q.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Q.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Q.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Q.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Q.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Q.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Q.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Q.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Q.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Q.errToObj(t)})}datetime(t){var e,i;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(e=t==null?void 0:t.offset)!==null&&e!==void 0?e:!1,local:(i=t==null?void 0:t.local)!==null&&i!==void 0?i:!1,...Q.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Q.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Q.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...Q.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:e==null?void 0:e.position,...Q.errToObj(e==null?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...Q.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...Q.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...Q.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...Q.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...Q.errToObj(e)})}nonempty(t){return this.min(1,Q.errToObj(t))}trim(){return new r({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}};qn.create=r=>{var t;return new qn({checks:[],typeName:se.ZodString,coerce:(t=r==null?void 0:r.coerce)!==null&&t!==void 0?t:!1,...me(r)})};function tte(r,t){let e=(r.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=e>i?e:i,o=parseInt(r.toFixed(n).replace(".","")),u=parseInt(t.toFixed(n).replace(".",""));return o%u/Math.pow(10,n)}var Ro=class r extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Z.number){let o=this._getOrReturnCtx(t);return z(o,{code:W.invalid_type,expected:Z.number,received:o.parsedType}),ce}let i,n=new Lt;for(let o of this._def.checks)o.kind==="int"?Me.isInteger(t.data)||(i=this._getOrReturnCtx(t,i),z(i,{code:W.invalid_type,expected:"integer",received:"float",message:o.message}),n.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(i=this._getOrReturnCtx(t,i),z(i,{code:W.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(i=this._getOrReturnCtx(t,i),z(i,{code:W.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="multipleOf"?tte(t.data,o.value)!==0&&(i=this._getOrReturnCtx(t,i),z(i,{code:W.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(i=this._getOrReturnCtx(t,i),z(i,{code:W.not_finite,message:o.message}),n.dirty()):Me.assertNever(o);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,Q.toString(e))}gt(t,e){return this.setLimit("min",t,!1,Q.toString(e))}lte(t,e){return this.setLimit("max",t,!0,Q.toString(e))}lt(t,e){return this.setLimit("max",t,!1,Q.toString(e))}setLimit(t,e,i,n){return new r({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:i,message:Q.toString(n)}]})}_addCheck(t){return new r({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Q.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Q.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Q.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Q.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Q.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:Q.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:Q.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Q.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Q.toString(t)})}get minValue(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Me.isInteger(t.value))}get isFinite(){let t=null,e=null;for(let i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(e===null||i.value>e)&&(e=i.value):i.kind==="max"&&(t===null||i.value<t)&&(t=i.value)}return Number.isFinite(e)&&Number.isFinite(t)}};Ro.create=r=>new Ro({checks:[],typeName:se.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...me(r)});var No=class r extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==Z.bigint){let o=this._getOrReturnCtx(t);return z(o,{code:W.invalid_type,expected:Z.bigint,received:o.parsedType}),ce}let i,n=new Lt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(i=this._getOrReturnCtx(t,i),z(i,{code:W.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(i=this._getOrReturnCtx(t,i),z(i,{code:W.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(i=this._getOrReturnCtx(t,i),z(i,{code:W.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):Me.assertNever(o);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,Q.toString(e))}gt(t,e){return this.setLimit("min",t,!1,Q.toString(e))}lte(t,e){return this.setLimit("max",t,!0,Q.toString(e))}lt(t,e){return this.setLimit("max",t,!1,Q.toString(e))}setLimit(t,e,i,n){return new r({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:i,message:Q.toString(n)}]})}_addCheck(t){return new r({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Q.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Q.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Q.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Q.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:Q.toString(e)})}get minValue(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}};No.create=r=>{var t;return new No({checks:[],typeName:se.ZodBigInt,coerce:(t=r==null?void 0:r.coerce)!==null&&t!==void 0?t:!1,...me(r)})};var Fo=class extends ve{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Z.boolean){let i=this._getOrReturnCtx(t);return z(i,{code:W.invalid_type,expected:Z.boolean,received:i.parsedType}),ce}return qt(t.data)}};Fo.create=r=>new Fo({typeName:se.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...me(r)});var Do=class r extends ve{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Z.date){let o=this._getOrReturnCtx(t);return z(o,{code:W.invalid_type,expected:Z.date,received:o.parsedType}),ce}if(isNaN(t.data.getTime())){let o=this._getOrReturnCtx(t);return z(o,{code:W.invalid_date}),ce}let i=new Lt,n;for(let o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(n=this._getOrReturnCtx(t,n),z(n,{code:W.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),i.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(n=this._getOrReturnCtx(t,n),z(n,{code:W.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),i.dirty()):Me.assertNever(o);return{status:i.value,value:new Date(t.data.getTime())}}_addCheck(t){return new r({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:Q.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:Q.toString(e)})}get minDate(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}};Do.create=r=>new Do({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:se.ZodDate,...me(r)});var Ya=class extends ve{_parse(t){if(this._getType(t)!==Z.symbol){let i=this._getOrReturnCtx(t);return z(i,{code:W.invalid_type,expected:Z.symbol,received:i.parsedType}),ce}return qt(t.data)}};Ya.create=r=>new Ya({typeName:se.ZodSymbol,...me(r)});var qo=class extends ve{_parse(t){if(this._getType(t)!==Z.undefined){let i=this._getOrReturnCtx(t);return z(i,{code:W.invalid_type,expected:Z.undefined,received:i.parsedType}),ce}return qt(t.data)}};qo.create=r=>new qo({typeName:se.ZodUndefined,...me(r)});var $o=class extends ve{_parse(t){if(this._getType(t)!==Z.null){let i=this._getOrReturnCtx(t);return z(i,{code:W.invalid_type,expected:Z.null,received:i.parsedType}),ce}return qt(t.data)}};$o.create=r=>new $o({typeName:se.ZodNull,...me(r)});var $n=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(t){return qt(t.data)}};$n.create=r=>new $n({typeName:se.ZodAny,...me(r)});var Wi=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(t){return qt(t.data)}};Wi.create=r=>new Wi({typeName:se.ZodUnknown,...me(r)});var Zr=class extends ve{_parse(t){let e=this._getOrReturnCtx(t);return z(e,{code:W.invalid_type,expected:Z.never,received:e.parsedType}),ce}};Zr.create=r=>new Zr({typeName:se.ZodNever,...me(r)});var Ka=class extends ve{_parse(t){if(this._getType(t)!==Z.undefined){let i=this._getOrReturnCtx(t);return z(i,{code:W.invalid_type,expected:Z.void,received:i.parsedType}),ce}return qt(t.data)}};Ka.create=r=>new Ka({typeName:se.ZodVoid,...me(r)});var Ui=class r extends ve{_parse(t){let{ctx:e,status:i}=this._processInputParams(t),n=this._def;if(e.parsedType!==Z.array)return z(e,{code:W.invalid_type,expected:Z.array,received:e.parsedType}),ce;if(n.exactLength!==null){let u=e.data.length>n.exactLength.value,c=e.data.length<n.exactLength.value;(u||c)&&(z(e,{code:u?W.too_big:W.too_small,minimum:c?n.exactLength.value:void 0,maximum:u?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),i.dirty())}if(n.minLength!==null&&e.data.length<n.minLength.value&&(z(e,{code:W.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),i.dirty()),n.maxLength!==null&&e.data.length>n.maxLength.value&&(z(e,{code:W.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),i.dirty()),e.common.async)return Promise.all([...e.data].map((u,c)=>n.type._parseAsync(new Lr(e,u,e.path,c)))).then(u=>Lt.mergeArray(i,u));let o=[...e.data].map((u,c)=>n.type._parseSync(new Lr(e,u,e.path,c)));return Lt.mergeArray(i,o)}get element(){return this._def.type}min(t,e){return new r({...this._def,minLength:{value:t,message:Q.toString(e)}})}max(t,e){return new r({...this._def,maxLength:{value:t,message:Q.toString(e)}})}length(t,e){return new r({...this._def,exactLength:{value:t,message:Q.toString(e)}})}nonempty(t){return this.min(1,t)}};Ui.create=(r,t)=>new Ui({type:r,minLength:null,maxLength:null,exactLength:null,typeName:se.ZodArray,...me(t)});function Ga(r){if(r instanceof Yt){let t={};for(let e in r.shape){let i=r.shape[e];t[e]=Mr.create(Ga(i))}return new Yt({...r._def,shape:()=>t})}else return r instanceof Ui?new Ui({...r._def,type:Ga(r.element)}):r instanceof Mr?Mr.create(Ga(r.unwrap())):r instanceof fi?fi.create(Ga(r.unwrap())):r instanceof hi?hi.create(r.items.map(t=>Ga(t))):r}var Yt=class r extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),e=Me.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==Z.object){let h=this._getOrReturnCtx(t);return z(h,{code:W.invalid_type,expected:Z.object,received:h.parsedType}),ce}let{status:i,ctx:n}=this._processInputParams(t),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof Zr&&this._def.unknownKeys==="strip"))for(let h in n.data)u.includes(h)||c.push(h);let l=[];for(let h of u){let f=o[h],v=n.data[h];l.push({key:{status:"valid",value:h},value:f._parse(new Lr(n,v,n.path,h)),alwaysSet:h in n.data})}if(this._def.catchall instanceof Zr){let h=this._def.unknownKeys;if(h==="passthrough")for(let f of c)l.push({key:{status:"valid",value:f},value:{status:"valid",value:n.data[f]}});else if(h==="strict")c.length>0&&(z(n,{code:W.unrecognized_keys,keys:c}),i.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let h=this._def.catchall;for(let f of c){let v=n.data[f];l.push({key:{status:"valid",value:f},value:h._parse(new Lr(n,v,n.path,f)),alwaysSet:f in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let h=[];for(let f of l){let v=await f.key,b=await f.value;h.push({key:v,value:b,alwaysSet:f.alwaysSet})}return h}).then(h=>Lt.mergeObjectSync(i,h)):Lt.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(t){return Q.errToObj,new r({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(e,i)=>{var n,o,u,c;let l=(u=(o=(n=this._def).errorMap)===null||o===void 0?void 0:o.call(n,e,i).message)!==null&&u!==void 0?u:i.defaultError;return e.code==="unrecognized_keys"?{message:(c=Q.errToObj(t).message)!==null&&c!==void 0?c:l}:{message:l}}}:{}})}strip(){return new r({...this._def,unknownKeys:"strip"})}passthrough(){return new r({...this._def,unknownKeys:"passthrough"})}extend(t){return new r({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new r({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:se.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new r({...this._def,catchall:t})}pick(t){let e={};return Me.objectKeys(t).forEach(i=>{t[i]&&this.shape[i]&&(e[i]=this.shape[i])}),new r({...this._def,shape:()=>e})}omit(t){let e={};return Me.objectKeys(this.shape).forEach(i=>{t[i]||(e[i]=this.shape[i])}),new r({...this._def,shape:()=>e})}deepPartial(){return Ga(this)}partial(t){let e={};return Me.objectKeys(this.shape).forEach(i=>{let n=this.shape[i];t&&!t[i]?e[i]=n:e[i]=n.optional()}),new r({...this._def,shape:()=>e})}required(t){let e={};return Me.objectKeys(this.shape).forEach(i=>{if(t&&!t[i])e[i]=this.shape[i];else{let o=this.shape[i];for(;o instanceof Mr;)o=o._def.innerType;e[i]=o}}),new r({...this._def,shape:()=>e})}keyof(){return DI(Me.objectKeys(this.shape))}};Yt.create=(r,t)=>new Yt({shape:()=>r,unknownKeys:"strip",catchall:Zr.create(),typeName:se.ZodObject,...me(t)});Yt.strictCreate=(r,t)=>new Yt({shape:()=>r,unknownKeys:"strict",catchall:Zr.create(),typeName:se.ZodObject,...me(t)});Yt.lazycreate=(r,t)=>new Yt({shape:r,unknownKeys:"strip",catchall:Zr.create(),typeName:se.ZodObject,...me(t)});var Bo=class extends ve{_parse(t){let{ctx:e}=this._processInputParams(t),i=this._def.options;function n(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return e.common.issues.push(...c.ctx.common.issues),c.result;let u=o.map(c=>new fr(c.ctx.common.issues));return z(e,{code:W.invalid_union,unionErrors:u}),ce}if(e.common.async)return Promise.all(i.map(async o=>{let u={...e,common:{...e.common,issues:[]},parent:null};return{result:await o._parseAsync({data:e.data,path:e.path,parent:u}),ctx:u}})).then(n);{let o,u=[];for(let l of i){let h={...e,common:{...e.common,issues:[]},parent:null},f=l._parseSync({data:e.data,path:e.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:h}),h.common.issues.length&&u.push(h.common.issues)}if(o)return e.common.issues.push(...o.ctx.common.issues),o.result;let c=u.map(l=>new fr(l));return z(e,{code:W.invalid_union,unionErrors:c}),ce}}get options(){return this._def.options}};Bo.create=(r,t)=>new Bo({options:r,typeName:se.ZodUnion,...me(t)});var ji=r=>r instanceof Wo?ji(r.schema):r instanceof mr?ji(r.innerType()):r instanceof Uo?[r.value]:r instanceof Ho?r.options:r instanceof Vo?Me.objectValues(r.enum):r instanceof zo?ji(r._def.innerType):r instanceof qo?[void 0]:r instanceof $o?[null]:r instanceof Mr?[void 0,...ji(r.unwrap())]:r instanceof fi?[null,...ji(r.unwrap())]:r instanceof el||r instanceof Zo?ji(r.unwrap()):r instanceof Go?ji(r._def.innerType):[],Vm=class r extends ve{_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==Z.object)return z(e,{code:W.invalid_type,expected:Z.object,received:e.parsedType}),ce;let i=this.discriminator,n=e.data[i],o=this.optionsMap.get(n);return o?e.common.async?o._parseAsync({data:e.data,path:e.path,parent:e}):o._parseSync({data:e.data,path:e.path,parent:e}):(z(e,{code:W.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),ce)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,i){let n=new Map;for(let o of e){let u=ji(o.shape[t]);if(!u.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let c of u){if(n.has(c))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(c)}`);n.set(c,o)}}return new r({typeName:se.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:n,...me(i)})}};function B_(r,t){let e=Dn(r),i=Dn(t);if(r===t)return{valid:!0,data:r};if(e===Z.object&&i===Z.object){let n=Me.objectKeys(t),o=Me.objectKeys(r).filter(c=>n.indexOf(c)!==-1),u={...r,...t};for(let c of o){let l=B_(r[c],t[c]);if(!l.valid)return{valid:!1};u[c]=l.data}return{valid:!0,data:u}}else if(e===Z.array&&i===Z.array){if(r.length!==t.length)return{valid:!1};let n=[];for(let o=0;o<r.length;o++){let u=r[o],c=t[o],l=B_(u,c);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return e===Z.date&&i===Z.date&&+r==+t?{valid:!0,data:r}:{valid:!1}}var jo=class extends ve{_parse(t){let{status:e,ctx:i}=this._processInputParams(t),n=(o,u)=>{if(q_(o)||q_(u))return ce;let c=B_(o.value,u.value);return c.valid?(($_(o)||$_(u))&&e.dirty(),{status:e.value,value:c.data}):(z(i,{code:W.invalid_intersection_types}),ce)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([o,u])=>n(o,u)):n(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}};jo.create=(r,t,e)=>new jo({left:r,right:t,typeName:se.ZodIntersection,...me(e)});var hi=class r extends ve{_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==Z.array)return z(i,{code:W.invalid_type,expected:Z.array,received:i.parsedType}),ce;if(i.data.length<this._def.items.length)return z(i,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ce;!this._def.rest&&i.data.length>this._def.items.length&&(z(i,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());let o=[...i.data].map((u,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new Lr(i,u,i.path,c)):null}).filter(u=>!!u);return i.common.async?Promise.all(o).then(u=>Lt.mergeArray(e,u)):Lt.mergeArray(e,o)}get items(){return this._def.items}rest(t){return new r({...this._def,rest:t})}};hi.create=(r,t)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hi({items:r,typeName:se.ZodTuple,rest:null,...me(t)})};var zm=class r extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==Z.object)return z(i,{code:W.invalid_type,expected:Z.object,received:i.parsedType}),ce;let n=[],o=this._def.keyType,u=this._def.valueType;for(let c in i.data)n.push({key:o._parse(new Lr(i,c,i.path,c)),value:u._parse(new Lr(i,i.data[c],i.path,c)),alwaysSet:c in i.data});return i.common.async?Lt.mergeObjectAsync(e,n):Lt.mergeObjectSync(e,n)}get element(){return this._def.valueType}static create(t,e,i){return e instanceof ve?new r({keyType:t,valueType:e,typeName:se.ZodRecord,...me(i)}):new r({keyType:qn.create(),valueType:t,typeName:se.ZodRecord,...me(e)})}},Xa=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==Z.map)return z(i,{code:W.invalid_type,expected:Z.map,received:i.parsedType}),ce;let n=this._def.keyType,o=this._def.valueType,u=[...i.data.entries()].map(([c,l],h)=>({key:n._parse(new Lr(i,c,i.path,[h,"key"])),value:o._parse(new Lr(i,l,i.path,[h,"value"]))}));if(i.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of u){let h=await l.key,f=await l.value;if(h.status==="aborted"||f.status==="aborted")return ce;(h.status==="dirty"||f.status==="dirty")&&e.dirty(),c.set(h.value,f.value)}return{status:e.value,value:c}})}else{let c=new Map;for(let l of u){let h=l.key,f=l.value;if(h.status==="aborted"||f.status==="aborted")return ce;(h.status==="dirty"||f.status==="dirty")&&e.dirty(),c.set(h.value,f.value)}return{status:e.value,value:c}}}};Xa.create=(r,t,e)=>new Xa({valueType:t,keyType:r,typeName:se.ZodMap,...me(e)});var Qa=class r extends ve{_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==Z.set)return z(i,{code:W.invalid_type,expected:Z.set,received:i.parsedType}),ce;let n=this._def;n.minSize!==null&&i.data.size<n.minSize.value&&(z(i,{code:W.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),e.dirty()),n.maxSize!==null&&i.data.size>n.maxSize.value&&(z(i,{code:W.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),e.dirty());let o=this._def.valueType;function u(l){let h=new Set;for(let f of l){if(f.status==="aborted")return ce;f.status==="dirty"&&e.dirty(),h.add(f.value)}return{status:e.value,value:h}}let c=[...i.data.values()].map((l,h)=>o._parse(new Lr(i,l,i.path,h)));return i.common.async?Promise.all(c).then(l=>u(l)):u(c)}min(t,e){return new r({...this._def,minSize:{value:t,message:Q.toString(e)}})}max(t,e){return new r({...this._def,maxSize:{value:t,message:Q.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}};Qa.create=(r,t)=>new Qa({valueType:r,minSize:null,maxSize:null,typeName:se.ZodSet,...me(t)});var Gm=class r extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==Z.function)return z(e,{code:W.invalid_type,expected:Z.function,received:e.parsedType}),ce;function i(c,l){return Um({data:c,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Wm(),Ja].filter(h=>!!h),issueData:{code:W.invalid_arguments,argumentsError:l}})}function n(c,l){return Um({data:c,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Wm(),Ja].filter(h=>!!h),issueData:{code:W.invalid_return_type,returnTypeError:l}})}let o={errorMap:e.common.contextualErrorMap},u=e.data;if(this._def.returns instanceof Bn){let c=this;return qt(async function(...l){let h=new fr([]),f=await c._def.args.parseAsync(l,o).catch(w=>{throw h.addIssue(i(l,w)),h}),v=await Reflect.apply(u,this,f);return await c._def.returns._def.type.parseAsync(v,o).catch(w=>{throw h.addIssue(n(v,w)),h})})}else{let c=this;return qt(function(...l){let h=c._def.args.safeParse(l,o);if(!h.success)throw new fr([i(l,h.error)]);let f=Reflect.apply(u,this,h.data),v=c._def.returns.safeParse(f,o);if(!v.success)throw new fr([n(f,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new r({...this._def,args:hi.create(t).rest(Wi.create())})}returns(t){return new r({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,i){return new r({args:t||hi.create([]).rest(Wi.create()),returns:e||Wi.create(),typeName:se.ZodFunction,...me(i)})}},Wo=class extends ve{get schema(){return this._def.getter()}_parse(t){let{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};Wo.create=(r,t)=>new Wo({getter:r,typeName:se.ZodLazy,...me(t)});var Uo=class extends ve{_parse(t){if(t.data!==this._def.value){let e=this._getOrReturnCtx(t);return z(e,{received:e.data,code:W.invalid_literal,expected:this._def.value}),ce}return{status:"valid",value:t.data}}get value(){return this._def.value}};Uo.create=(r,t)=>new Uo({value:r,typeName:se.ZodLiteral,...me(t)});function DI(r,t){return new Ho({values:r,typeName:se.ZodEnum,...me(t)})}var Ho=class r extends ve{constructor(){super(...arguments),Yc.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let e=this._getOrReturnCtx(t),i=this._def.values;return z(e,{expected:Me.joinValues(i),received:e.parsedType,code:W.invalid_type}),ce}if(Hm(this,Yc,"f")||kI(this,Yc,new Set(this._def.values),"f"),!Hm(this,Yc,"f").has(t.data)){let e=this._getOrReturnCtx(t),i=this._def.values;return z(e,{received:e.data,code:W.invalid_enum_value,options:i}),ce}return qt(t.data)}get options(){return this._def.values}get enum(){let t={};for(let e of this._def.values)t[e]=e;return t}get Values(){let t={};for(let e of this._def.values)t[e]=e;return t}get Enum(){let t={};for(let e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return r.create(t,{...this._def,...e})}exclude(t,e=this._def){return r.create(this.options.filter(i=>!t.includes(i)),{...this._def,...e})}};Yc=new WeakMap;Ho.create=DI;var Vo=class extends ve{constructor(){super(...arguments),Kc.set(this,void 0)}_parse(t){let e=Me.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(t);if(i.parsedType!==Z.string&&i.parsedType!==Z.number){let n=Me.objectValues(e);return z(i,{expected:Me.joinValues(n),received:i.parsedType,code:W.invalid_type}),ce}if(Hm(this,Kc,"f")||kI(this,Kc,new Set(Me.getValidEnumValues(this._def.values)),"f"),!Hm(this,Kc,"f").has(t.data)){let n=Me.objectValues(e);return z(i,{received:i.data,code:W.invalid_enum_value,options:n}),ce}return qt(t.data)}get enum(){return this._def.values}};Kc=new WeakMap;Vo.create=(r,t)=>new Vo({values:r,typeName:se.ZodNativeEnum,...me(t)});var Bn=class extends ve{unwrap(){return this._def.type}_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==Z.promise&&e.common.async===!1)return z(e,{code:W.invalid_type,expected:Z.promise,received:e.parsedType}),ce;let i=e.parsedType===Z.promise?e.data:Promise.resolve(e.data);return qt(i.then(n=>this._def.type.parseAsync(n,{path:e.path,errorMap:e.common.contextualErrorMap})))}};Bn.create=(r,t)=>new Bn({type:r,typeName:se.ZodPromise,...me(t)});var mr=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===se.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:e,ctx:i}=this._processInputParams(t),n=this._def.effect||null,o={addIssue:u=>{z(i,u),u.fatal?e.abort():e.dirty()},get path(){return i.path}};if(o.addIssue=o.addIssue.bind(o),n.type==="preprocess"){let u=n.transform(i.data,o);if(i.common.async)return Promise.resolve(u).then(async c=>{if(e.value==="aborted")return ce;let l=await this._def.schema._parseAsync({data:c,path:i.path,parent:i});return l.status==="aborted"?ce:l.status==="dirty"||e.value==="dirty"?Za(l.value):l});{if(e.value==="aborted")return ce;let c=this._def.schema._parseSync({data:u,path:i.path,parent:i});return c.status==="aborted"?ce:c.status==="dirty"||e.value==="dirty"?Za(c.value):c}}if(n.type==="refinement"){let u=c=>{let l=n.refinement(c,o);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(i.common.async===!1){let c=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return c.status==="aborted"?ce:(c.status==="dirty"&&e.dirty(),u(c.value),{status:e.value,value:c.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(c=>c.status==="aborted"?ce:(c.status==="dirty"&&e.dirty(),u(c.value).then(()=>({status:e.value,value:c.value}))))}if(n.type==="transform")if(i.common.async===!1){let u=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Xc(u))return u;let c=n.transform(u.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:c}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(u=>Xc(u)?Promise.resolve(n.transform(u.value,o)).then(c=>({status:e.value,value:c})):u);Me.assertNever(n)}};mr.create=(r,t,e)=>new mr({schema:r,typeName:se.ZodEffects,effect:t,...me(e)});mr.createWithPreprocess=(r,t,e)=>new mr({schema:t,effect:{type:"preprocess",transform:r},typeName:se.ZodEffects,...me(e)});var Mr=class extends ve{_parse(t){return this._getType(t)===Z.undefined?qt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Mr.create=(r,t)=>new Mr({innerType:r,typeName:se.ZodOptional,...me(t)});var fi=class extends ve{_parse(t){return this._getType(t)===Z.null?qt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};fi.create=(r,t)=>new fi({innerType:r,typeName:se.ZodNullable,...me(t)});var zo=class extends ve{_parse(t){let{ctx:e}=this._processInputParams(t),i=e.data;return e.parsedType===Z.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};zo.create=(r,t)=>new zo({innerType:r,typeName:se.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...me(t)});var Go=class extends ve{_parse(t){let{ctx:e}=this._processInputParams(t),i={...e,common:{...e.common,issues:[]}},n=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Qc(n)?n.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new fr(i.common.issues)},input:i.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new fr(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}};Go.create=(r,t)=>new Go({innerType:r,typeName:se.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...me(t)});var eu=class extends ve{_parse(t){if(this._getType(t)!==Z.nan){let i=this._getOrReturnCtx(t);return z(i,{code:W.invalid_type,expected:Z.nan,received:i.parsedType}),ce}return{status:"valid",value:t.data}}};eu.create=r=>new eu({typeName:se.ZodNaN,...me(r)});var rte=Symbol("zod_brand"),el=class extends ve{_parse(t){let{ctx:e}=this._processInputParams(t),i=e.data;return this._def.type._parse({data:i,path:e.path,parent:e})}unwrap(){return this._def.type}},tl=class r extends ve{_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?ce:o.status==="dirty"?(e.dirty(),Za(o.value)):this._def.out._parseAsync({data:o.value,path:i.path,parent:i})})();{let n=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return n.status==="aborted"?ce:n.status==="dirty"?(e.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:i.path,parent:i})}}static create(t,e){return new r({in:t,out:e,typeName:se.ZodPipeline})}},Zo=class extends ve{_parse(t){let e=this._def.innerType._parse(t),i=n=>(Xc(n)&&(n.value=Object.freeze(n.value)),n);return Qc(e)?e.then(n=>i(n)):i(e)}unwrap(){return this._def.innerType}};Zo.create=(r,t)=>new Zo({innerType:r,typeName:se.ZodReadonly,...me(t)});function qI(r,t={},e){return r?$n.create().superRefine((i,n)=>{var o,u;if(!r(i)){let c=typeof t=="function"?t(i):typeof t=="string"?{message:t}:t,l=(u=(o=c.fatal)!==null&&o!==void 0?o:e)!==null&&u!==void 0?u:!0,h=typeof c=="string"?{message:c}:c;n.addIssue({code:"custom",...h,fatal:l})}}):$n.create()}var ite={object:Yt.lazycreate},se;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(se||(se={}));var nte=(r,t={message:`Input not instance of ${r.name}`})=>qI(e=>e instanceof r,t),$I=qn.create,BI=Ro.create,ote=eu.create,ste=No.create,jI=Fo.create,ate=Do.create,ute=Ya.create,cte=qo.create,lte=$o.create,dte=$n.create,pte=Wi.create,hte=Zr.create,fte=Ka.create,mte=Ui.create,vte=Yt.create,gte=Yt.strictCreate,yte=Bo.create,bte=Vm.create,_te=jo.create,Ete=hi.create,wte=zm.create,Ste=Xa.create,Ote=Qa.create,xte=Gm.create,Tte=Wo.create,Cte=Uo.create,Pte=Ho.create,Ate=Vo.create,Ite=Bn.create,MI=mr.create,Mte=Mr.create,Lte=fi.create,kte=mr.createWithPreprocess,Rte=tl.create,Nte=()=>$I().optional(),Fte=()=>BI().optional(),Dte=()=>jI().optional(),qte={string:r=>qn.create({...r,coerce:!0}),number:r=>Ro.create({...r,coerce:!0}),boolean:r=>Fo.create({...r,coerce:!0}),bigint:r=>No.create({...r,coerce:!0}),date:r=>Do.create({...r,coerce:!0})},$te=ce,mi=Object.freeze({__proto__:null,defaultErrorMap:Ja,setErrorMap:$ee,getErrorMap:Wm,makeIssue:Um,EMPTY_PATH:Bee,addIssueToContext:z,ParseStatus:Lt,INVALID:ce,DIRTY:Za,OK:qt,isAborted:q_,isDirty:$_,isValid:Xc,isAsync:Qc,get util(){return Me},get objectUtil(){return D_},ZodParsedType:Z,getParsedType:Dn,ZodType:ve,datetimeRegex:FI,ZodString:qn,ZodNumber:Ro,ZodBigInt:No,ZodBoolean:Fo,ZodDate:Do,ZodSymbol:Ya,ZodUndefined:qo,ZodNull:$o,ZodAny:$n,ZodUnknown:Wi,ZodNever:Zr,ZodVoid:Ka,ZodArray:Ui,ZodObject:Yt,ZodUnion:Bo,ZodDiscriminatedUnion:Vm,ZodIntersection:jo,ZodTuple:hi,ZodRecord:zm,ZodMap:Xa,ZodSet:Qa,ZodFunction:Gm,ZodLazy:Wo,ZodLiteral:Uo,ZodEnum:Ho,ZodNativeEnum:Vo,ZodPromise:Bn,ZodEffects:mr,ZodTransformer:mr,ZodOptional:Mr,ZodNullable:fi,ZodDefault:zo,ZodCatch:Go,ZodNaN:eu,BRAND:rte,ZodBranded:el,ZodPipeline:tl,ZodReadonly:Zo,custom:qI,Schema:ve,ZodSchema:ve,late:ite,get ZodFirstPartyTypeKind(){return se},coerce:qte,any:dte,array:mte,bigint:ste,boolean:jI,date:ate,discriminatedUnion:bte,effect:MI,enum:Pte,function:xte,instanceof:nte,intersection:_te,lazy:Tte,literal:Cte,map:Ste,nan:ote,nativeEnum:Ate,never:hte,null:lte,nullable:Lte,number:BI,object:vte,oboolean:Dte,onumber:Fte,optional:Mte,ostring:Nte,pipeline:Rte,preprocess:kte,promise:Ite,record:wte,set:Ote,strictObject:gte,string:$I,symbol:ute,transformer:MI,tuple:Ete,undefined:cte,union:yte,unknown:pte,void:fte,NEVER:$te,ZodIssueCode:W,quotelessJson:qee,ZodError:fr});var ebe=mi.object({name:mi.string(),user:mi.object({id:mi.string(),name:mi.string()}),maxConnections:mi.union([mi.number(),mi.literal("unlimited"),mi.undefined()])});d();var j_=(A=>(A[A.turquoise=0]="turquoise",A[A.orange=1]="orange",A[A.blue=2]="blue",A[A.pink=3]="pink",A[A.purple=4]="purple",A[A.green=5]="green",A[A.red=6]="red",A[A.bluedark=7]="bluedark",A[A.pinklight=8]="pinklight",A[A.purplelight=9]="purplelight",A[A.greenlight=10]="greenlight",A[A.orangelight=11]="orangelight",A[A.bluelight=12]="bluelight",A[A.redlight=13]="redlight",A[A.brown=14]="brown",A[A.yellow=15]="yellow",A[A.gray=16]="gray",A))(j_||{}),ru=[1,3,4,6,7,14,16],iu=(r=>(r[r["#31E0B0"]=0]="#31E0B0",r[r["#FF5E10"]=1]="#FF5E10",r[r["#00ABF7"]=2]="#00ABF7",r[r["#FF00BB"]=3]="#FF00BB",r[r["#9C29FF"]=4]="#9C29FF",r[r["#6FDD00"]=5]="#6FDD00",r[r["#E30000"]=6]="#E30000",r[r["#304AFF"]=7]="#304AFF",r[r["#FF89C4"]=8]="#FF89C4",r[r["#D597FF"]=9]="#D597FF",r[r["#C6EC5C"]=10]="#C6EC5C",r[r["#FFA115"]=11]="#FFA115",r[r["#75DEFE"]=12]="#75DEFE",r[r["#FAA291"]=13]="#FAA291",r[r["#BB813F"]=14]="#BB813F",r[r["#FFEF33"]=15]="#FFEF33",r[r["#878291"]=16]="#878291",r))(iu||{});d();var vi=we(WI()),nu=class{constructor(){this.browser=vi.default.getParser(navigator.userAgent)}get clientStats(){return this.browser.getResult()}get isFirefox(){return this.browser.isBrowser(vi.default.BROWSER_MAP.firefox)}get isSafari(){return this.browser.isBrowser(vi.default.BROWSER_MAP.safari)}get isChrome(){return this.browser.isBrowser(vi.default.BROWSER_MAP.chrome)}get isIE(){return this.browser.isBrowser(vi.default.BROWSER_MAP.ie)}get isEdge(){return this.browser.isBrowser(vi.default.BROWSER_MAP.edge)}get isMobileDevice(){return(this.browser.is(vi.default.PLATFORMS_MAP.mobile)||this.browser.is(vi.default.PLATFORMS_MAP.tablet))&&!navigator.userAgent.match(/iPad/i)}get isTabletDevice(){return this.browser.is(vi.default.PLATFORMS_MAP.tablet)}get isAndroid(){return this.isMobileDevice&&!!navigator.userAgent.match(/Android/i)}get isIpad(){return!!navigator.userAgent.match(/iPad/i)}get isIphone(){return this.isMobileDevice&&!!navigator.userAgent.match(/iPhone/i)}get isAppleMobileDevice(){return this.isIpad||this.isIphone}};d();var Zm=class{constructor(){this.updateMeetingConnectionStatus=t=>{this.oldConnectionStatus=this.connectionStatus,this.connectionStatus=t,this.connectionStatusObserver.publish(t),this.logger.log("CONNECTION STATUS CHANGE",t)};this.onUpdateBrowserOnlineStatus=t=>{let{type:e}=t;if(e==="online"){this.updateMeetingConnectionStatus(1);return}this.updateMeetingConnectionStatus(4)};this.logger=new be("@superviz/sdk/connection-service"),this.connectionStatus=0,this.connectionStatusObserver=new Ie({logger:this.logger})}addListeners(){window.addEventListener("online",this.onUpdateBrowserOnlineStatus),window.addEventListener("offline",this.onUpdateBrowserOnlineStatus)}removeListeners(){window.removeEventListener("online",this.onUpdateBrowserOnlineStatus),window.removeEventListener("offline",this.onUpdateBrowserOnlineStatus)}};d();d();var Jm=class{constructor(t,e,i){this.myParticipant={};this.localRoomProperties=null;this.drawingData=null;this.state=0;this.MESSAGE_SIZE_LIMIT=6e4;this.useStore=et.bind(this);this.join=()=>{this.room.presence.on("presence.leave",this.onParticipantLeave),this.room.presence.on("presence.joined-room",this.onPresenceEnter),this.enableSync&&(this.room.on("update",this.updateLocalRoomState),this.drawingRoom.presence.on("presence.update",this.updateDrawing))};this.updateMyProperties=t=>{let e=t??{};this.isMessageTooBig(e)||this.left||!this.enableSync||this.isSyncFrozen||(e.avatar===void 0&&delete e.avatar,this.myParticipant={...this.myParticipant,...e},this.room.presence.update(this.myParticipant),this.logger.log("REALTIME","updating my properties",this.myParticipant))};this.isMessageTooBig=(t,e=this.MESSAGE_SIZE_LIMIT)=>{let i=JSON.stringify(t);return new TextEncoder().encode(i).length>e?(this.logger.log("Message too long, the message limit size is 60kb."),!0):!1};this.updateRoomProperties=t=>{if(this.isMessageTooBig(t)||this.isSyncFrozen||this.left)return;let e={...this.localRoomProperties,...t};this.localRoomProperties=e,this.room.emit("update",e)};this.updateDrawingProperties=t=>{this.isMessageTooBig(t)||this.isSyncFrozen||this.left||(this.drawingData={...this.drawingData,...t},this.drawingRoom.presence.update(this.drawingData))};this.setHost=t=>{this.updateRoomProperties({hostClientId:t})};this.setKickParticipant=t=>{if(!t)return;let{participants:e}=et("global-store"),i=e.value[t];this.updateRoomProperties({kickParticipant:i})};this.initializeRoomProperties=()=>{let t={isGridModeEnabled:!1,hostClientId:null,followParticipantId:null,gather:!1,transcript:"transcript.stop",kickParticipant:null};this.localRoomProperties=t,this.updateRoomProperties(t)};this.onParticipantLeave=t=>{var i;t.id===this.myParticipant.id&&(this.left=!0),t.id===((i=this.localRoomProperties)==null?void 0:i.followParticipantId)&&this.setFollowParticipant()};this.start=async()=>{this.started||(this.started=!0,this.room.isJoined||(this.logger.log("room state service - not joined room yet"),setTimeout(()=>{this.logger.log("room state service - retrying"),this.start()},2e3)),this.localRoomProperties=await this.fetchRoomProperties(),this.localRoomProperties?this.updateLocalRoomState({data:this.localRoomProperties}):this.initializeRoomProperties(),this.publishStateUpdate(4),this.logger.log("REALTIME","Joined realtime room"))};this.onPresenceEnter=()=>{this.updateMyProperties()};this.updateLocalRoomState=async({data:t})=>{this.logger.log("REALTIME","Room update received",t),this.localRoomProperties=Object.assign({},this.localRoomProperties,t);let{followParticipantId:e,gather:i,hostId:n,isGridModeEnabled:o,transcript:u}=this.useStore("video-store");e.publish(t.followParticipantId),i.publish(t.gather),n.publish(t.hostClientId),o.publish(t.isGridModeEnabled),u.publish(t.transcript),t.kickParticipant&&t.kickParticipant.id===this.myParticipant.id&&(this.updateRoomProperties({kickParticipant:null}),this.kickParticipantObserver.publish(this.myParticipant.id))};this.updateDrawing=t=>{if(t.id===this.myParticipant.id)return;let{drawing:e}=this.useStore("video-store");e.publish(t.data)};this.freezeSync=t=>{if(this.isSyncFrozen=t,t){this.destroy();return}this.join()};this.room=t,this.drawingRoom=e,this.logger=i,this.kickParticipantObserver=new Ie({logger:this.logger});let{localParticipant:n,participants:o}=this.useStore("global-store");n.subscribe(u=>{this.enableSync=u.type!=="audience",this.myParticipant={...this.myParticipant,...u}}),o.subscribe(),this.join()}setGridMode(t){this.updateRoomProperties({isGridModeEnabled:t})}setDrawing(t){this.updateDrawingProperties(t)}setTranscript(t){this.updateRoomProperties({transcript:t})}async fetchRoomProperties(){if(await new Promise(o=>{this.room.presence.get(u=>{u||o(0),o(u.length)})})<=1)return null;let e=await new Promise((o,u)=>{this.room.history(c=>{c||u(c),c.events.length||o(null);let l=c.events.pop();o(l)})}),i=1e3*60*60,n=(e==null?void 0:e.timestamp)<Date.now()-i;return!(e!=null&&e.data)||n?null:e.data}publishStateUpdate(t){if(this.state===t)return;this.state=t,this.logger.log("REALTIME",`Realtime state did change. New state: ${um[this.state]}`);let{meetingState:e}=this.useStore("video-store");e.publish(this.state)}setFollowParticipant(t){this.updateRoomProperties({followParticipantId:t})}setGather(t){this.updateRoomProperties({gather:t})}destroy(){this.room.presence.off("presence.leave"),this.room.presence.off("presence.joined-room"),this.room.off("update",this.updateLocalRoomState)}};d();d();var Ym=class{build(t,e,i,n={},o={}){let u=document.querySelector(`#${t}`),c=new URL(e);if(this.wrapperId||this.element)throw new Error("Tried to initialize two frames with the same FrameBricklayer instance");this.element=document.createElement("iframe"),Object.entries(n).forEach(([l,h])=>{c.searchParams.set(l,h)}),Object.entries(o).forEach(([l,h])=>{this.element.setAttribute(l,h)}),this.element.src=c.toString(),this.element.id=i,u.appendChild(this.element),this.wrapperId=t}destroy(){if(!this.wrapperId)throw new Error("Tried to destroy a frame before it was initialized");let t=document.querySelector(`#${this.wrapperId}`);t&&t.querySelector(`#${this.element.id}`)&&t.removeChild(this.element),this.wrapperId=null,this.element=null}};d();var Km=class{constructor(t){this.observers={};this.sourceBlockList=["vue-devtools-proxy","vue-devtools-backend"];this.originBlockList=["https://sketchfab.com"];this.publish=(t,e={})=>{this.logger.log("MessageBridge","Posting message to frame",t,e),this.contentWindow.postMessage({type:t,data:e},this.allowedOrigins)};this.listen=(t,e)=>{this.observers[t]||(this.observers[t]=new Ie({logger:this.logger})),this.observers[t].subscribe(e)};this.onReceiveMessage=t=>{let{type:e,data:i,source:n}=t.data;if(this.sourceBlockList.includes(n)||this.originBlockList.includes(t.origin))return;let o=!!e,u=!this.domains.length||this.domains.includes(t.origin),c=this.observers.hasOwnProperty(e);if(this.logger.log("MessageBridge",`Message received -
        TYPE: ${t.type}
        ORIGIN: ${t.origin}
        DATA: ${JSON.stringify(t.data)} `),!o||!u||!c){this.logger.log("MessageBridge","Message discarded");return}this.observers[e].publish(i)};let{contentWindow:e,domains:i=[],allowedOrigins:n="*",sourceBlockList:o=[],logger:u}=t;if(this.logger=u,this.domains=i,this.allowedOrigins=n,this.sourceBlockList.push(...o),typeof window>"u")throw new Error("MessageBridge: window is undefined");this.contentWindow=e,window.addEventListener("message",this.onReceiveMessage)}destroy(){Object.entries(this.observers).forEach(([t,e])=>{e.reset(),delete this.observers[t]}),window.removeEventListener("message",this.onReceiveMessage),delete this.logger,delete this.allowedOrigins,delete this.contentWindow,delete this.domains,delete this.observers,delete this.sourceBlockList}};d();var ou=(i=>(i.RIGHT="right",i.CENTER="center",i.LEFT="left",i))(ou||{}),il=(e=>(e.GRID="grid",e.LIST="list",e))(il||{}),nl=(n=>(n.RIGHT="right",n.LEFT="left",n.TOP="top",n.BOTTOM="bottom",n))(nl||{});var UI="sv-video-frame",ol=class{constructor(t){this.logger=new be("@superviz/sdk/video-conference-manager");this.frameStateObserver=new Ie({logger:this.logger});this.frameSizeObserver=new Ie({logger:this.logger});this.waitingForHostObserver=new Ie({logger:this.logger});this.realtimeEventsObserver=new Ie({logger:this.logger});this.sameAccountErrorObserver=new Ie({logger:this.logger});this.devicesObserver=new Ie({logger:this.logger});this.meetingStateObserver=new Ie({logger:this.logger});this.meetingConnectionObserver=new Ie({logger:this.logger});this.participantJoinedObserver=new Ie({logger:this.logger});this.participantLeftObserver=new Ie({logger:this.logger});this.participantListObserver=new Ie({logger:this.logger});this.frameState=0;this.layoutModalsAndCamerasConfig=(t,e)=>{let i=t,n=e,o=["left","right","bottom","top"].includes(n),u=["left","right","center"].includes(i);return o||(n="right"),u||(i="right"),this.browserService.isMobileDevice?(n="bottom",{layoutPosition:i,camerasPosition:n}):(i==="left"&&n==="right"&&(i="right"),i==="right"&&n==="left"&&(i="left"),{layoutPosition:i,camerasPosition:n})};this.onFrameLoad=()=>{this.messageBridge=new Km({logger:this.logger,contentWindow:this.bricklayer.element.contentWindow}),this.addMessagesListeners(),this.updateFrameState(2),this.updateFrameLocale(),this.updateMeetingAvatars(),this.onWindowResize(),this.setCustomColors(),this.setCallbacks()};this.setFrameOffset=t=>{let e=t??{};["top","bottom","left","right"].forEach(i=>{Object.keys(e).includes(i)||(e[i]=0)}),this.frameOffset=e};this.setCustomColors=()=>{this.customColors&&this.messageBridge.publish("frame.color-list-update",this.customColors),this.styles&&this.messageBridge.publish("frame.styles-update",this.styles)};this.setCallbacks=()=>{if(!this.callbacks)return;let t={onToggleMicrophone:!!this.callbacks.onToggleMicrophone,onToggleCam:!!this.callbacks.onToggleCam,onToggleRecording:!!this.callbacks.onToggleRecording,onToggleChat:!!this.callbacks.onToggleChat,onToggleScreenShare:!!this.callbacks.onToggleScreenShare,onClickHangup:!!this.callbacks.onClickHangup,onToggleMeetingSetup:!!this.callbacks.onToggleMeetingSetup};this.messageBridge.listen("callback-called",e=>{var i,n;(n=(i=this.callbacks)[e])==null||n.call(i)}),this.messageBridge.publish("frame.callbacks-update",JSON.stringify(t))};this.setFrameStyle=t=>{let e=document.createElement("style"),{bottom:i,left:n,right:o,top:u}=this.frameOffset;if(e.innerHTML=`
      :root {
        --superviz-offset-top: ${u}px;
        --superviz-offset-right: ${o}px;
        --superviz-offset-left: ${n}px;
        --superviz-offset-bottom: ${i}px;
      }     
    `,document.head.appendChild(e),this.browserService.isMobileDevice){this.bricklayer.element.classList.add("sv-video-frame--bottom");return}this.bricklayer.element.classList.add(`sv-video-frame--${t}`)};this.onFrameDimensionsUpdate=({width:t,height:e})=>{let i=document.getElementById(UI),{bottom:n,right:o,left:u,top:c}=this.frameOffset,l=this.isWaterMarkEnabled?40:0,h=`${t}px`,f=`${e+l}px`;(t>=window.innerWidth||this.isHorizontalCameraEnabled)&&(h=`calc(100% - ${o}px - ${u}px)`),e>=window.innerHeight&&(f=`calc(100% - ${c}px - ${n}px)`),i.style.width=h,i.style.height=f,this.frameSizeObserver.publish({width:i.offsetWidth,height:i.offsetHeight})};this.onWindowResize=()=>{let{top:t,bottom:e,right:i,left:n}=this.frameOffset,{innerHeight:o,innerWidth:u}=window,c=o-t-e,l=u-i-n;this.messageBridge&&this.messageBridge.publish("frame.parent-window-size-update",{height:c,width:l})};this.updateFrameLocale=()=>{var o,u;if(!this.frameLocale||!((o=this.frameLocale)!=null&&o.language)&&((u=this.frameLocale)!=null&&u.locales))return;let{language:t,locales:e}=this.frameLocale,n=["en",...e.map(c=>c==null?void 0:c.language)];if(t&&!n.includes(t))throw new Error("The default language is not available in the language listing.");this.messageBridge.publish("frame.locales-update",this.frameLocale)};this.updateMeetingAvatars=()=>{this.messageBridge.publish("frame.avatar-list-update",this.meetingAvatars)};this.onParticipantJoined=t=>{this.participantJoinedObserver.publish(t)};this.onParticipantLeft=t=>{this.participantLeftObserver.publish(t)};this.onMeetingHostChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.host-change",data:t})};this.onMeetingKickParticipant=t=>{this.realtimeEventsObserver.publish({event:"meeting.kick-participant",data:t})};this.onFollowParticipantDidChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.follow-participant",data:t})};this.onGoToDidChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.go-to-participant",data:t})};this.onGather=()=>{this.realtimeEventsObserver.publish({event:"realtime.gather",data:!0})};this.onGridModeChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.grid-mode-change",data:t})};this.onDrawingChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.drawing-change",data:t})};this.onTranscriptChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.transcript-change",data:t})};this.onSameAccountError=t=>{this.sameAccountErrorObserver.publish(t)};this.onDevicesChange=t=>{this.devicesObserver.publish(t)};this.meetingStateUpdate=t=>{this.meetingStateObserver.publish(t)};this.onConnectionStatusChange=t=>{this.meetingConnectionObserver.publish(t)};this.onWaitingForHostDidChange=t=>{this.waitingForHostObserver.publish(t)};this.onParticipantListUpdate=t=>{this.participantListObserver.publish(t)};let{language:e,canUseCams:i,canUseChat:n,canUseScreenshare:o,canUseDefaultAvatars:u,canUseFollow:c,canUseGoTo:l,canUseGather:h,canShowAudienceList:f,canUseDefaultToolbar:v,canUseRecording:b,browserService:w,offset:x,locales:C,avatars:I,customColors:A,styles:j,waterMark:N,layoutPosition:U,camerasPosition:ee,skipMeetingSettings:$,devices:te,layoutMode:Te,collaborationMode:Oe,callbacks:tt}=t;this.browserService=w;let yr=this.layoutModalsAndCamerasConfig(U,ee),ot=document.createElement("div");this.frameConfig={apiKey:X.get("apiKey"),apiUrl:X.get("apiUrl"),ablyKey:X.get("ablyKey"),debug:X.get("debug"),roomId:X.get("roomId"),limits:X.get("limits"),collaborationMode:Oe,canUseFollow:c,canUseGoTo:l,canUseCams:i,canUseChat:n,canUseGather:h,canUseScreenshare:o,canUseDefaultAvatars:u,canUseRecording:b,canShowAudienceList:f,camerasPosition:yr.camerasPosition??"right",canUseDefaultToolbar:v,devices:{audioInput:(te==null?void 0:te.audioInput)??!0,audioOutput:(te==null?void 0:te.audioOutput)??!0,videoInput:(te==null?void 0:te.videoInput)??!0},waterMark:N,layoutMode:Te,skipMeetingSettings:$,layoutPosition:yr.layoutPosition,transcriptLangs:X.get("features.transcriptLangs")},this.customColors=A,this.callbacks=tt,this.styles=j,ot.classList.add("sv_video_wrapper"),ot.id="sv-video-wrapper",document.body.appendChild(ot),this.updateFrameState(1),this.bricklayer=new Ym,this.bricklayer.build(ot.id,X.get("conferenceLayerUrl"),UI,void 0,{allow:"camera *;microphone *; display-capture *;"}),this.setFrameOffset(x),this.setFrameStyle(yr.camerasPosition),this.bricklayer.element.addEventListener("load",this.onFrameLoad),this.frameLocale={language:e,locales:C},this.meetingAvatars=I,window.addEventListener("resize",this.onWindowResize),window.addEventListener("orientationchange",this.onWindowResize)}get isWaterMarkEnabled(){return this.browserService.isMobileDevice?!1:this.frameConfig.waterMark}get isHorizontalCameraEnabled(){return this.browserService.isMobileDevice?!1:["top","bottom"].includes(this.frameConfig.camerasPosition)}addMessagesListeners(){this.messageBridge.listen("meeting.waiting-for-host",this.onWaitingForHostDidChange),this.messageBridge.listen("meeting.participant-joined",this.onParticipantJoined),this.messageBridge.listen("meeting.participant-list-update",this.onParticipantListUpdate),this.messageBridge.listen("meeting.participant-left",this.onParticipantLeft),this.messageBridge.listen("meeting.host-change",this.onMeetingHostChange),this.messageBridge.listen("meeting.kick-participant",this.onMeetingKickParticipant),this.messageBridge.listen("meeting.same-participant-error",this.onSameAccountError),this.messageBridge.listen("meeting.state-update",this.meetingStateUpdate),this.messageBridge.listen("meeting.connection-status-change",this.onConnectionStatusChange),this.messageBridge.listen("meeting.devices-change",this.onDevicesChange),this.messageBridge.listen("realtime.grid-mode-change",this.onGridModeChange),this.messageBridge.listen("realtime.drawing-change",this.onDrawingChange),this.messageBridge.listen("realtime.transcript-change",this.onTranscriptChange),this.messageBridge.listen("frame.dimensions-update",this.onFrameDimensionsUpdate),this.messageBridge.listen("realtime.follow-participant",this.onFollowParticipantDidChange),this.messageBridge.listen("realtime.go-to-participant",this.onGoToDidChange),this.messageBridge.listen("realtime.gather",this.onGather)}updateFrameState(t){t!==this.frameState&&(this.frameState=t,this.frameStateObserver.publish(this.frameState));let e={1:6,2:7,0:8};this.meetingStateUpdate(e[t])}start(t){this.messageBridge.publish("meeting.start",{...t,config:this.frameConfig})}leave(){this.messageBridge.publish("meeting.leave"),this.destroy()}destroy(){var t,e,i,n,o,u,c,l,h,f;(t=this.messageBridge)==null||t.destroy(),(e=this.bricklayer)==null||e.destroy(),(i=this.frameSizeObserver)==null||i.destroy(),(n=this.realtimeEventsObserver)==null||n.destroy(),(o=this.sameAccountErrorObserver)==null||o.destroy(),(u=this.devicesObserver)==null||u.destroy(),(c=this.meetingStateObserver)==null||c.destroy(),(l=this.meetingConnectionObserver)==null||l.destroy(),(h=this.participantJoinedObserver)==null||h.destroy(),(f=this.participantLeftObserver)==null||f.destroy(),this.bricklayer=null,this.frameState=null,window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("orientationchange",this.onWindowResize)}publishMessageToFrame(t,e){this.messageBridge&&this.messageBridge.publish(t,e)}};var jte=1e3*60,jn=null,su=class extends It{constructor(e){super();this.participantsOnMeeting=[];this.kickParticipantsOnHostLeave=!1;this.startVideo=()=>{var e,i,n,o,u,c,l,h,f,v,b,w,x,C,I,A,j,N,U,ee,$,te,Te,Oe,tt,yr,ot,Kn,Xn,Xt;this.videoConfig={language:(e=this.params)==null?void 0:e.language,canUseRecording:!!((i=this.params)!=null&&i.enableRecording),canShowAudienceList:((n=this.params)==null?void 0:n.showAudienceList)??!0,canUseChat:!((o=this.params)!=null&&o.chatOff),canUseCams:!((u=this.params)!=null&&u.camsOff),canUseScreenshare:!((c=this.params)!=null&&c.screenshareOff),canUseDefaultAvatars:!!((l=this.params)!=null&&l.defaultAvatars)&&!((f=(h=this.localParticipant)==null?void 0:h.avatar)!=null&&f.model3DUrl),canUseGather:!!((v=this.params)!=null&&v.enableGather),canUseFollow:!!((b=this.params)!=null&&b.enableFollow),canUseGoTo:!!((w=this.params)!=null&&w.enableGoTo),canUseDefaultToolbar:((x=this.params)==null?void 0:x.defaultToolbar)??!0,camerasPosition:(I=(C=this.params)==null?void 0:C.collaborationMode)==null?void 0:I.position,devices:(A=this.params)==null?void 0:A.devices,skipMeetingSettings:(j=this.params)==null?void 0:j.skipMeetingSettings,browserService:this.browserService,offset:(N=this.params)==null?void 0:N.offset,locales:((U=this.params)==null?void 0:U.locales)??[],avatars:((ee=this.params)==null?void 0:ee.avatars)??[],customColors:X.get("colors"),waterMark:X.get("waterMark"),styles:($=this.params)==null?void 0:$.styles,collaborationMode:((Te=(te=this.params)==null?void 0:te.collaborationMode)==null?void 0:Te.enabled)??!0,layoutPosition:((tt=(Oe=this.params)==null?void 0:Oe.collaborationMode)==null?void 0:tt.enabled)===!1?"center":((ot=(yr=this.params)==null?void 0:yr.collaborationMode)==null?void 0:ot.modalPosition)??"center",layoutMode:((Xn=(Kn=this.params)==null?void 0:Kn.collaborationMode)==null?void 0:Xn.initialView)??"list",callbacks:(Xt=this.params)==null?void 0:Xt.callbacks},this.logger.log("video conference @ start video",this.videoConfig),this.videoManager=new ol(this.videoConfig),this.subscribeToVideoEvents()};this.subscribeToVideoEvents=()=>{this.logger.log("video conference @ subscribe to video events"),this.videoManager.meetingConnectionObserver.subscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.subscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.subscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.subscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.subscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.subscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.subscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.subscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.subscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.subscribe(this.onSameAccountError),this.videoManager.devicesObserver.subscribe(this.onDevicesChange)};this.unsubscribeFromVideoEvents=()=>{this.videoManager&&(this.logger.log("video conference @ unsubscribe from video events"),this.videoManager.meetingConnectionObserver.unsubscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.unsubscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.unsubscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.unsubscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.unsubscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.unsubscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.unsubscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.unsubscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.unsubscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.unsubscribe(this.onSameAccountError),this.videoManager.devicesObserver.unsubscribe(this.onDevicesChange))};this.suscribeToRealtimeEvents=()=>{this.logger.log("video conference @ subscribe to realtime events"),this.room.presence.on("presence.update",this.onParticipantUpdateOnRealtime),this.room.presence.on("presence.joined-room",this.onParticipantJoinedOnRealtime),this.room.presence.on("presence.leave",this.onParticipantLeftOnRealtime)};this.unsubscribeFromRealtimeEvents=()=>{var e;this.logger.log("video conference @ unsubscribe from realtime events"),this.room.presence.off("presence.update"),this.room.presence.off("presence.leave"),this.room.presence.off("presence.joined-room"),(e=this.roomState)==null||e.kickParticipantObserver.unsubscribe(this.onKickLocalParticipant)};this.subscribeToStoreUpdates=()=>{let{localParticipant:e,group:i,participants:n}=this.useStore("global-store");n.subscribe(v=>{let b=Object.values(v);this.onRealtimeParticipantsDidChange(b)});let{drawing:o,hostId:u,isGridModeEnabled:c,transcript:l,followParticipantId:h,gather:f}=this.useStore("video-store");e.subscribe(v=>{this.localParticipant=v}),o.subscribe(this.setDrawing),u.subscribe(this.setHost),c.subscribe(this.setGridMode),l.subscribe(this.setTranscript),h.subscribe(this.setFollowParticipant),f.subscribe(this.setGather),i.subscribe()};this.createParticipantFromPresence=e=>{var i;return{id:e.id,color:((i=e.data.slot)==null?void 0:i.color)||iu[16],avatar:e.data.avatar,type:e.data.type,name:e.data.name,isHost:e.data.isHost}};this.onFrameSizeDidChange=e=>{this.publish("frame.dimensions-update",e)};this.onWaitingForHost=e=>{this.publish("meeting.waiting-for-host",e)};this.onConnectionStatusChange=e=>{this.logger.log("video conference @ on connection status change",e);let i=[2,4,3,6];i.includes(e)&&this.roomState.freezeSync(!0),i.includes(this.connectionService.oldConnectionStatus)&&!i.includes(e)&&this.roomState.freezeSync(!1),this.publish("meeting.connection-status-change",e)};this.onMeetingStateChange=e=>{this.logger.log("video conference @ on meeting state change",e),this.publish("meeting.state-update",e);let{localParticipant:i}=this.useStore("global-store");i.publish(i.value)};this.onSameAccountError=e=>{this.publish("meeting.same-participant-error",e),this.detach()};this.onDevicesChange=e=>{this.publish("meeting.devices-change",e)};this.onFrameStateChange=e=>{this.logger.log("video conference @ on frame state change",e),e===2&&(this.roomState=new Jm(this.room,this.drawingRoom,this.logger),this.roomState.kickParticipantObserver.subscribe(this.onKickLocalParticipant),this.roomState.start(),this.params.userType!=="guest"&&(this.localParticipant=Object.assign(this.localParticipant,{type:this.params.userType}),this.roomState.updateMyProperties({...this.localParticipant})),this.videoManager.start({group:this.group,participant:this.localParticipant,roomId:X.get("roomId")}),this.publish("meeting.start"))};this.onRealtimeEventFromFrame=({event:e,data:i})=>{this.logger.log("video conference @ on realtime event from frame",e,i);let n={"realtime.host-change":o=>this.roomState.setHost(o),"realtime.gather":o=>this.roomState.setGather(o),"realtime.grid-mode-change":o=>this.roomState.setGridMode(o),"realtime.drawing-change":o=>{this.roomState.setDrawing(o)},"realtime.follow-participant":o=>{this.roomState.setFollowParticipant(o)},"meeting.kick-participant":o=>{this.roomState.setKickParticipant(o)},"realtime.transcript-change":o=>{this.roomState.setTranscript(o)},"realtime.go-to-participant":o=>{this.eventBus.publish("realtime.go-to-participant",o)}}[e](i);this.publish(e,i)};this.onParticipantJoined=e=>{var i;if(this.logger.log("video conference @ on participant joined",e),this.publish("meeting.participant-joined",e),this.publish("my-participant.joined",e),this.kickParticipantsOnHostLeave=!((i=this.params)!=null&&i.allowGuests),this.videoConfig.canUseDefaultAvatars){this.roomState.updateMyProperties({avatar:e.avatar,name:e.name,type:e.type});return}this.roomState.updateMyProperties({name:e.name,type:e.type})};this.onParticipantLeft=e=>{var o,u;this.logger.log("video conference @ on participant left",this.localParticipant);let{localParticipant:i,participants:n}=this.useStore("global-store");i.publish({...i.value,activeComponents:(o=i.value.activeComponents)==null?void 0:o.filter(c=>c!=="videoConference")}),n.publish({...n.value,[this.localParticipant.id]:{...i.value,activeComponents:(u=i.value.activeComponents)==null?void 0:u.filter(c=>c!=="videoConference")}}),this.connectionService.removeListeners(),this.publish("destroy"),this.publish("my-participant.left",this.localParticipant),this.unsubscribeFromVideoEvents(),this.videoManager.leave(),this.videoManager=void 0,this.connectionService=void 0,this.detach()};this.onParticipantListUpdate=e=>{this.logger.log("video conference @ on participant list update",e);let i=Object.values(e).map(n=>{var o;return{id:n.id,color:((o=n.slot)==null?void 0:o.colorName)||"gray",avatar:n.avatar,name:n.name,type:n.type,isHost:n.isHost??!1,slot:n.slot}});this.publish("meeting.participant-list-update",i),this.participantsOnMeeting.length!==i.length&&this.publish("meeting.amount-of-participants-update",i.length),this.participantsOnMeeting=i,this.validateIfInTheRoomHasHost()};this.onKickLocalParticipant=()=>{this.logger.log("video conference @ on kick local participant"),this.publish("meeting.kick-participant",this.localParticipant),this.detach()};this.setDrawing=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.drawing-change",e)};this.setHost=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.host-change",e),this.onHostParticipantDidChange(e)};this.setGridMode=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.grid-mode-change",e)};this.setTranscript=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.transcript-change",e)};this.setFollowParticipant=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.follow-participant",e),this.eventBus.publish("realtime.follow-participant",e)};this.setGather=e=>{if(!this.videoManager||!e)return;let{hostId:i,gather:n}=this.useStore("video-store");if(n.publish(!1),i.value!==this.localParticipant.id){this.eventBus.publish("realtime.go-to-participant",i.value);return}this.videoManager.publishMessageToFrame("realtime.gather",e)};this.onRealtimeParticipantsDidChange=e=>{var n;this.logger.log("video conference @ on participants did change",e);let i=e.map(o=>{var u;return{timestamp:o.timestamp,participantId:o.id,color:((u=o.slot)==null?void 0:u.colorName)??"gray",name:o.name,isHost:o.isHost??!1,avatar:o.avatar,type:o.type,slot:o.slot}});(n=this.videoManager)==null||n.publishMessageToFrame("realtime.participant-list-update",i)};this.onHostParticipantDidChange=e=>{var u,c;this.logger.log("video conference @ on host participant did change",e),(u=this.videoManager)==null||u.publishMessageToFrame("realtime.host-change",e);let{participants:i}=this.useStore("global-store"),n=Object.values(i.value).find(l=>l.id===e),o=n?{id:n.id,color:((c=n.slot)==null?void 0:c.color)||iu[16],avatar:n.avatar,type:n.type,name:n.name,isHost:n.id===e}:null;jn&&o&&(this.logger.log("video conference @ on host participant did change - clear kick all participants timeout"),clearTimeout(jn),jn=null),this.publish("meeting.host-change",o)};this.onHostAvailabilityChange=e=>{if(this.logger.log("launcher service @ onHostAvailabilityChange"),e){this.publish("meeting.host-available");return}this.publish("meeting.no-host-available")};this.onParticipantJoinedOnRealtime=e=>{this.logger.log("video conference @ on participant joined on realtime",e),this.publish("meeting.participant-joined",this.createParticipantFromPresence(e)),e.id===this.localParticipant.id&&this.room.presence.update(this.localParticipant)};this.onParticipantLeftOnRealtime=e=>{this.logger.log("video conference @ on participant left on realtime",e),this.publish("meeting.participant-left",this.createParticipantFromPresence(e))};this.onParticipantUpdateOnRealtime=e=>{this.logger.log("video conference @ on participant update on realtime",e);let{localParticipant:i,participants:n}=this.useStore("global-store");e.data.id===this.localParticipant.id&&(this.publish("my-participant.update",this.createParticipantFromPresence(e)),i.publish({...i.value,...e.data,type:this.params.userType})),n.publish({...n.value,[e.data.id]:{...i.value,...e.data}})};this.validateIfInTheRoomHasHost=()=>{var l,h;if(!this.roomState)return;let{hostId:e}=this.useStore("video-store"),{participants:i}=this.useStore("global-store"),n=Object.values(i.value),o=n.filter(f=>f.type==="host"&&this.participantsOnMeeting.some(v=>v.id===f.id));!o.length&&this.kickParticipantsOnHostLeave&&((l=this.localParticipant)==null?void 0:l.type)!=="host"&&!jn&&(this.logger.log("video conference @ validate if in the room has host - init kick all participants timeout"),jn=setTimeout(()=>{this.logger.log("video conference @ validate if in the room has host - kick all participants"),this.onKickLocalParticipant()},jte)),o.length&&jn&&(this.logger.log("video conference @ validade if in the room has host - clear kick all participants timeout"),clearTimeout(jn),jn=null),this.onHostAvailabilityChange(!!o.length);let u=n.find(f=>(f==null?void 0:f.id)===(e==null?void 0:e.value));if(!o.length||u)return;let c=o.reduce((f,v)=>(this.logger.log("video conference @ validate if in the room has host - reducing participants",{previous:f,current:v}),!f||(v==null?void 0:v.id)===e.value?v:(v==null?void 0:v.timestamp)>f.timestamp?f:v),null);this.room.presence.update({...this.localParticipant,isHost:c.id===this.localParticipant.id}),!(!c||c.id!==((h=this.localParticipant)==null?void 0:h.id))&&(this.logger.log("video conference @ validate if in the room has host - set host",c),e.publish(c.id),this.roomState.setHost(c.id))};this.params={...e,userType:(e==null?void 0:e.participantType)??(e==null?void 0:e.userType)??"guest"},this.name="videoConference",this.logger=new be("@superviz/sdk/videoConference"),this.browserService=new nu,this.connectionService=new Zm,this.connectionService.addListeners(),this.connectionService.connectionStatusObserver.subscribe(this.onConnectionStatusChange)}toggleMeetingSetup(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-setup")}toggleMicrophone(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-microphone")}toggleCam(){var e;(e=this.videoManager)==null||e.publishMessageToFrame("meeting-controls.toggle-cam")}toggleScreenShare(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-screenshare")}toggleChat(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-chat")}toggleRecording(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-recording")}hangUp(){var e;(e=this.videoManager)==null||e.publishMessageToFrame("hang-up")}start(){this.logger.log("video conference @ start"),this.drawingRoom=this.ioc.createRoom("drawing"),this.subscribeToStoreUpdates(),this.suscribeToRealtimeEvents(),this.startVideo()}destroy(){var i,n,o;this.logger.log("video conference @ destroy");let{destroy:e}=this.useStore("video-store");e(),(i=this.roomState)==null||i.destroy(),this.kickParticipantsOnHostLeave=!1,this.publish("destroy"),this.unsubscribeFromRealtimeEvents(),this.unsubscribeFromVideoEvents(),(n=this.videoManager)==null||n.leave(),(o=this.connectionService)==null||o.removeListeners()}};d();d();var HI=we(po());var Xm=class extends It{constructor(e,i){var o;super();this.camera={x:0,y:0,screen:{width:0,height:0},scale:1};this.subscribeToRealtimeEvents=()=>{this.logger.log("presence-mouse component @ subscribe to realtime events"),this.room.presence.on("presence.joined-room",this.onPresenceJoinedRoom),this.room.presence.on("presence.leave",this.onPresenceLeftRoom),this.room.presence.on("presence.update",this.onPresenceUpdate)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("presence-mouse component @ unsubscribe from realtime events"),this.room.presence.off("presence.joined-room"),this.room.presence.off("presence.leave"),this.room.presence.off("presence.update")};this.setParticipantPrivate=e=>{this.isPrivate=e,this.room.presence.update({visible:!e})};this.onPresenceJoinedRoom=e=>{e.id===this.localParticipant.id&&this.room.presence.update(this.localParticipant)};this.onPresenceLeftRoom=e=>{this.removePresenceMouseParticipant(e.id)};this.onPresenceUpdate=e=>{if(this.following&&this.presences.get(this.following)&&this.goToMouse(this.following),e.id===this.localParticipant.id)return;let i=e.data;if(this.following&&i.id!==this.following&&this.presences.has(i.id)){this.removePresenceMouseParticipant(i.id);return}this.presences.set(i.id,i)};this.animate=()=>{this.getCamera(),this.renderDivWrapper(),this.updateParticipantsMouses(),requestAnimationFrame(this.animate)};this.goToMouse=e=>{let i=this.presences.get(e);if(!(i!=null&&i.camera))return;let n=i.camera.x,o=i.camera.y,u=this.divWrapper.clientHeight/i.camera.screen.height,c=Math.min(u,1),l=this.divWrapper.clientWidth/i.camera.screen.width,h=Math.min(l,1);this.goToMouseCallback&&this.goToMouseCallback({x:n,y:o,scaleX:c,scaleY:h})};this.onMyParticipantMouseMove=(0,HI.throttle)(e=>{let i=this.canvas.getContext("2d"),n=this.canvas.getBoundingClientRect(),o=e.x-n.left,u=e.y-n.top,l=(i==null?void 0:i.getTransform()).inverse(),h=new DOMPoint(o,u).matrixTransform(l),f={x:h.x,y:h.y};this.room.presence.update({...this.localParticipant,...f,visible:!this.isPrivate,camera:this.camera})},30);this.onMyParticipantMouseOut=e=>{let{x:i,y:n,width:o,height:u}=this.canvas.getBoundingClientRect();e.x>0&&e.y>0&&e.x<i+o&&e.y<n+u||this.room.presence.update({visible:!1})};this.updateParticipantsMouses=()=>{this.presences.forEach(e=>{if(!(e!=null&&e.visible)||this.following&&this.following!==e.id){this.removePresenceMouseParticipant(e.id);return}this.renderPresenceMouses(e)})};this.getCamera=()=>{var c;let e=(c=this.canvas)==null?void 0:c.getContext("2d"),i=e==null?void 0:e.getTransform(),n=i==null?void 0:i.e,o=i==null?void 0:i.f,u=i==null?void 0:i.a;this.camera={screen:{width:this.divWrapper.clientHeight,height:this.divWrapper.clientWidth},x:n,y:o,scale:u}};this.renderPresenceMouses=e=>{let n=document.getElementById(`mouse-${e.id}`);n||(n=this.createMouseElement(e));let o=document.getElementById(`mouse-${e.id}`),u=document.getElementById(`mouse-${e.id}`);if(!o||!u)return;let c=o.getElementsByClassName("mouse-user-name")[0],l=u.getElementsByClassName("pointer-mouse")[0];l&&(l.style.backgroundImage=`url(https://production.cdn.superviz.com/static/pointers-v2/${e.slot.index}.svg)`),c&&(c.style.color=e.slot.textColor,c.style.backgroundColor=e.slot.color,c.innerHTML=e.name);let{x:h,y:f}=e,v=this.canvas.getContext("2d"),b=v==null?void 0:v.getTransform(),w=b==null?void 0:b.e,x=b==null?void 0:b.f,C=b.a,I=b.d,A=h*C+w,j=f*I+x,N=this.divWrapper.clientWidth>A&&this.divWrapper.clientHeight>j&&e.visible;n.style.opacity=N?"1":"0",n.style.left=`${A}px`,n.style.top=`${j}px`};this.followMouse=e=>{this.following=e,this.goToMouse(e)};if(this.name="presence",this.logger=new be("@superviz/sdk/presence"),this.canvas=document.getElementById(e),this.presences=new Map,!this.canvas){let u=`Canvas with id ${e} not found`;throw this.logger.log(u),new Error(u)}this.divWrapper=this.renderDivWrapper(),this.animateFrame=requestAnimationFrame(this.animate),this.goToMouseCallback=(o=i==null?void 0:i.callbacks)==null?void 0:o.onGoToPresence;let{localParticipant:n}=this.useStore("global-store");n.subscribe(),this.getCamera()}start(){this.logger.log("presence-mouse component @ start"),this.canvas.addEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.addEventListener("mouseout",this.onMyParticipantMouseOut),this.eventBus.subscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.subscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.subscribe("realtime.private-mode",this.setParticipantPrivate),this.subscribeToRealtimeEvents()}destroy(){this.logger.log("presence-mouse component @ destroy"),this.eventBus.unsubscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.unsubscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.unsubscribe("realtime.private-mode",this.setParticipantPrivate),this.unsubscribeFromRealtimeEvents(),cancelAnimationFrame(this.animateFrame),this.canvas.removeEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.removeEventListener("mouseout",this.onMyParticipantMouseOut),this.divWrapper.remove()}renderDivWrapper(){let e=this.canvas.getBoundingClientRect(),i=document.getElementById("superviz-presence-mouse-wrapper");return i||(i=document.createElement("div"),i.id="superviz-presence-mouse-wrapper",this.canvas.parentElement.style.position="relative",this.canvas.parentElement.appendChild(i)),i.style.position="fixed",i.style.top=`${e.top}px`,i.style.left=`${e.left}px`,i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.pointerEvents="none",i.style.overflow="hidden",i.style.zIndex="2",i}removePresenceMouseParticipant(e){let i=document.getElementById(`mouse-${e}`);i&&(i.remove(),this.presences.delete(e))}createMouseElement(e){let i=document.createElement("div");i.setAttribute("id",`mouse-${e.id}`),i.setAttribute("class","mouse-follower");let n=document.createElement("div");n.setAttribute("class","pointer-mouse");let o=document.createElement("div");return o.setAttribute("class","mouse-user-name"),o.innerHTML=e.name,i.appendChild(n),i.appendChild(o),i.style.left="0px",i.style.top="0px",this.divWrapper.appendChild(i),i}transform(e){console.warn("[SuperViz] - transform method not available when container is a canvas element.")}};d();var VI=we(po()),rv=we(Oo());d();var Qm=(x=>(x.AREA="area",x.BASE="base",x.BR="br",x.COL="col",x.EMBED="embed",x.HR="hr",x.IMG="img",x.INPUT="input",x.LINK="link",x.META="meta",x.PARAM="param",x.SOURCE="source",x.TRACK="track",x.WBR="wbr",x))(Qm||{}),ev=(i=>(i.RECT="rect",i.ELLIPSE="ellipse",i.SVG="svg",i))(ev||{});var tv=class extends It{constructor(e,i){var o;super();this.presences=new Map;this.mouses=new Map;this.transformation={translate:{x:0,y:0},scale:1};this.onMyParticipantMouseMove=e=>{if(this.isPrivate)return;let i=e.currentTarget,{left:n,top:o}=i.getBoundingClientRect(),u=(e.x-n-this.transformation.translate.x)/this.transformation.scale,c=(e.y-o-this.transformation.translate.y)/this.transformation.scale;this.room.presence.update({...this.localParticipant,x:u,y:c,visible:!0,camera:this.camera})};this.onMyParticipantMouseLeave=e=>{let{left:i,top:n,right:o,bottom:u}=this.container.getBoundingClientRect(),c=e.x>i&&e.y>n&&e.x<o&&e.y<u,l=e.x>0&&e.y>0&&e.x<window.innerWidth&&e.y<window.innerHeight;c&&l||this.room.presence.update({visible:!1})};this.goToMouse=e=>{let i=this.mouses.get(e),n=this.presences.get(e);if(n){if(this.goToPresenceCallback){let o=this.camera.screen.width/n.camera.screen.width,u=this.camera.screen.height/n.camera.screen.height,c=n.camera.x*o,l=n.camera.y*u,h=n.camera.scale*o,f=n.camera.scale*u;this.goToPresenceCallback({x:c,y:l,scaleX:h,scaleY:f});return}i&&i.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}};this.followMouse=e=>{this.userBeingFollowedId=e,this.goToMouse(e)};this.setParticipantPrivate=e=>{this.isPrivate=e,this.room.presence.update({visible:!e})};this.onPresenceJoinedRoom=e=>{e.id===this.localParticipant.id&&this.room.presence.update(this.localParticipant)};this.onPresenceLeftRoom=e=>{this.removePresenceMouseParticipant(e.id)};this.onPresenceUpdate=e=>{if(e.id===this.localParticipant.id)return;let i=e.data;if(this.userBeingFollowedId&&i.id!==this.userBeingFollowedId&&this.presences.has(i.id)){this.removePresenceMouseParticipant(i.id);return}this.presences.set(i.id,i),this.animate(),this.updateParticipantsMouses()};this.animate=()=>{Qm[this.containerTagname]&&this.updateVoidElementWrapper(),ev[this.containerTagname]&&this.updateSVGElementWrapper(),this.animationFrame=requestAnimationFrame(this.animate)};this.updateParticipantsMouses=e=>{if(this.presences.forEach(n=>{if(n.id!==this.localParticipant.id){if(!(n!=null&&n.visible)){this.removePresenceMouseParticipant(n.id);return}this.renderPresenceMouses(n)}}),e)return;this.presences.has(this.userBeingFollowedId)&&this.goToMouse(this.userBeingFollowedId)};this.renderPresenceMouses=e=>{if(e.id===this.localParticipant.id)return;let i=document.getElementById(`mouse-${e.id}`);if(i||(i=this.createMouseElement(e)),!i)return;let n=i.getElementsByClassName("mouse-user-name")[0],o=i.getElementsByClassName("pointer-mouse")[0];o&&(o.style.backgroundImage=`url(https://production.cdn.superviz.com/static/pointers-v2/${e.slot.index}.svg)`),n&&(n.style.color=e.slot.textColor,n.style.backgroundColor=e.slot.color,n.innerHTML=e.name);let{x:u,y:c}=e,{translate:{x:l,y:h},scale:f}=this.transformation;i.style.left=`${l+u*f}px`,i.style.top=`${h+c*f}px`};this.renderVoidElementWrapper=()=>{let e=document.createElement("div"),{width:i,height:n,left:o,top:u}=this.container.getBoundingClientRect();e.style.position="absolute",e.style.width=`${i}px`,e.style.height=`${n}px`,e.style.top=`${u}px`,e.style.left=`${o}px`,e.style.overflow="visible",e.style.pointerEvents="none",this.container.parentElement.appendChild(e),this.wrapper=e};this.renderSVGElementWrapper=()=>{let e=this.containerTagname.toLowerCase();if(e==="svg"){this.createSVGWrapper();return}if(e==="rect"){this.createRectWrapper();return}e==="ellipse"&&this.createEllipseWrapper()};if(this.container=document.getElementById(e),this.logger=new be("@superviz/sdk/presence"),!this.container){let u=`Element with id ${e} not found`;throw this.logger.log(u),new Error(u)}this.camera={x:0,y:0,scale:1,screen:{width:this.container.clientWidth,height:this.container.clientHeight}},this.name="presence";let{localParticipant:n}=this.useStore("global-store");n.subscribe(),this.containerTagname=this.container.tagName.toUpperCase(),this.goToPresenceCallback=(o=i==null?void 0:i.callbacks)==null?void 0:o.onGoToPresence}start(){this.logger.log("presence-mouse component @ start"),this.renderWrapper(),this.addListeners(),this.subscribeToRealtimeEvents(),this.eventBus.subscribe("realtime.private-mode",this.setParticipantPrivate),this.animationFrame=requestAnimationFrame(this.animate),this.eventBus.subscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.subscribe("realtime.local-follow-participant",this.followMouse)}destroy(){cancelAnimationFrame(this.animationFrame),this.logger.log("presence-mouse component @ destroy"),this.removeListeners(),this.wrapper.remove(),this.presences.clear(),this.presences=void 0,this.container=void 0,this.wrapper=void 0,this.unsubscribeFromRealtimeEvents(),this.eventBus.unsubscribe("realtime.private-mode",this.setParticipantPrivate),this.eventBus.unsubscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.unsubscribe("realtime.local-follow-participant",this.followMouse),this.logger=void 0}subscribeToRealtimeEvents(){this.logger.log("presence-mouse component @ subscribe to realtime events"),this.room.presence.on("presence.joined-room",this.onPresenceJoinedRoom),this.room.presence.on("presence.leave",this.onPresenceLeftRoom),this.room.presence.on("presence.update",this.onPresenceUpdate)}unsubscribeFromRealtimeEvents(){this.logger.log("presence-mouse component @ unsubscribe from realtime events"),this.room.presence.off("presence.joined-room"),this.room.presence.off("presence.leave"),this.room.presence.off("presence.update")}addListeners(){this.pointerMoveObserver=(0,rv.fromEvent)(this.container,"pointermove").pipe((0,rv.throttleTime)(30)).subscribe(this.onMyParticipantMouseMove),this.container.addEventListener("pointerleave",this.onMyParticipantMouseLeave)}removeListeners(){var e;(e=this.pointerMoveObserver)==null||e.unsubscribe(),this.container.removeEventListener("pointerleave",this.onMyParticipantMouseLeave)}setPositionNotStatic(){let{position:e}=window.getComputedStyle(this.container);e==="static"&&this.container.style.setProperty("position","relative")}createMouseElement(e){if(!this.wrapper)return;let i=document.createElement("div");i.setAttribute("id",`mouse-${e.id}`),i.setAttribute("class","mouse-follower");let n=document.createElement("div");n.setAttribute("class","pointer-mouse");let o=document.createElement("div");return o.setAttribute("class","mouse-user-name"),o.innerHTML=e.name,i.appendChild(n),i.appendChild(o),i.style.left="0px",i.style.top="0px",this.wrapper.appendChild(i),this.mouses.set(e.id,i),i}updateSVGPosition(){let e=this.container.parentElement.getBoundingClientRect(),i=this.container.getBoundingClientRect(),n=i.left-e.left,o=i.top-e.top,{width:u,height:c}=this.container.getBoundingClientRect();this.wrapper.style.setProperty("width",`${u}px`),this.wrapper.style.setProperty("height",`${c}px`),this.wrapper.style.setProperty("top",`${o}px`),this.wrapper.style.setProperty("left",`${n}px`)}createSVGWrapper(){let e=document.createElement("div"),i=this.container.parentElement.getBoundingClientRect(),n=this.container.getBoundingClientRect(),o=n.left-i.left,u=n.top-i.top,{width:c,height:l}=this.container.getBoundingClientRect();e.style.position="fixed",e.style.width=`${c}px`,e.style.height=`${l}px`,e.style.top=`${u}px`,e.style.left=`${o}px`,e.style.overflow="visible",e.style.pointerEvents="none",e.id="superviz-svg-wrapper",this.container.parentElement.appendChild(e),this.wrapper=e}createRectWrapper(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=document.createElement("div"),o=this.container.getAttribute("width"),u=this.container.getAttribute("height"),c=this.container.getAttribute("rx"),l=this.container.getAttribute("ry");i.setAttribute("fill","transparent"),i.setAttribute("stroke","transparent"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("rx",c),i.setAttribute("ry",l),i.setAttribute("height",u),i.setAttribute("width",o),e.setAttribute("height",u),e.setAttribute("width",o),e.appendChild(i),n.appendChild(e);let h=this.container.getBoundingClientRect();n.style.position="fixed",n.style.top=`${h.top}px`,n.style.left=`${h.left}px`,n.style.width=`${h.width}px`,n.style.height=`${h.height}px`,n.style.overflow="visible",n.style.pointerEvents="none",n.id="superviz-rect-wrapper";let f=this.container.viewportElement;for(;f.viewportElement;)f=f.viewportElement;f.parentElement.appendChild(n),this.wrapper=n}createEllipseWrapper(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),n=document.createElement("div"),o=this.container.getAttribute("cx"),u=this.container.getAttribute("cy"),c=this.container.getAttribute("rx"),l=this.container.getAttribute("ry"),h=Number(o)-Number(c),f=Number(u)-Number(l),v=String(2*Number(o)),b=String(2*Number(u));i.setAttribute("fill","transparent"),i.setAttribute("stroke","transparent"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("rx",c),i.setAttribute("ry",l),i.setAttribute("cx",`${Number(o)-h}`),i.setAttribute("cy",`${Number(u)-f}`),i.setAttribute("height",b),i.setAttribute("width",v),e.setAttribute("height",b),e.setAttribute("width",v),e.appendChild(i),n.appendChild(e);let w=this.container.getBoundingClientRect();n.style.position="fixed",n.style.top=`${w.top}px`,n.style.left=`${w.left}px`,n.style.width=`${w.width}px`,n.style.height=`${w.height}px`,n.style.overflow="visible",n.style.pointerEvents="none",n.id="superviz-ellipse-wrapper";let x=this.container.viewportElement;for(;x.viewportElement;)x=x.viewportElement;x.parentElement.appendChild(n),this.wrapper=n}transform(e){var i,n;this.transformation=e,this.camera={x:e.translate.x,y:e.translate.y,scale:e.scale,screen:{width:((i=this.wrapper)==null?void 0:i.clientWidth)||1,height:((n=this.wrapper)==null?void 0:n.clientHeight)||1}},this.updateParticipantsMouses(!0)}updateVoidElementWrapper(){let e=this.container.getBoundingClientRect(),i=this.wrapper.getBoundingClientRect(),n=this.container;if((0,VI.isEqual)(e,i))return;let o=n.offsetLeft,u=n.offsetTop;this.wrapper.style.setProperty("width",`${e.width}px`),this.wrapper.style.setProperty("height",`${e.height}px`),this.wrapper.style.setProperty("top",`${u}px`),this.wrapper.style.setProperty("left",`${o}px`),this.wrapper.id="superviz-void-wrapper"}updateSVGElementWrapper(){let{left:e,top:i,width:n,height:o}=this.container.getBoundingClientRect(),{left:u,top:c,width:l,height:h}=this.wrapper.getBoundingClientRect();if(!(e===u&&i===c&&n===l&&o===h)){if(this.containerTagname.toLowerCase()==="svg"){this.updateSVGPosition();return}this.wrapper.style.setProperty("width",`${n}px`),this.wrapper.style.setProperty("height",`${o}px`),this.wrapper.style.setProperty("top",`${i}px`),this.wrapper.style.setProperty("left",`${e}px`)}}renderWrapper(){if(!this.wrapper){if(Qm[this.containerTagname]){this.renderVoidElementWrapper();return}if(ev[this.containerTagname]){this.renderSVGElementWrapper();return}this.renderElementWrapper()}}removePresenceMouseParticipant(e){let i=document.getElementById(`mouse-${e}`);i&&(i.remove(),this.presences.delete(e),this.mouses.delete(e))}renderElementWrapper(){let e=document.createElement("div");e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.overflow="visible",e.style.pointerEvents="none",this.setPositionNotStatic(),this.container.appendChild(e),this.wrapper=e}};var au=class{constructor(t,e){let i=document.getElementById(t);if(!i)throw new Error(`[Superviz] Container with id ${t} not found`);return i.tagName.toLowerCase()==="canvas"?new Xm(t,e):new tv(t,e)}transform(t){}};d();d();var zI=we(Ey());d();var sl=(e=>(e.STARTED="STARTED",e.STOPPED="STOPPED",e))(sl||{});var al=(t=>(t.REALTIME_STATE_CHANGED="realtime-component.state-changed",t))(al||{});var ul=class extends Pi{constructor(e,i,n){super();this.state="DISCONNECTED";this.callbacksToSubscribeWhenJoined=[];this.publish=(0,zI.default)((e,i)=>{if(Object.values(co).includes(e)){this.publishEventToClient(e,i);return}if(this.state!=="CONNECTED"){let n=`Realtime channel ${this.name} is not started yet. You can't publish event ${e} before start`;this.logger.log(n),console.warn(`[SuperViz] ${n}`);return}this.channel.emit(`message:${this.name}`,{name:e,payload:i})},30);this.subscribe=(e,i)=>{if(this.state!=="CONNECTED"){this.callbacksToSubscribeWhenJoined.push({event:e,callback:i});return}this.observers[e]||(this.observers[e]=new Ie),this.observers[e].subscribe(i)};this.unsubscribe=(e,i)=>{this.observers[e]&&this.observers[e].unsubscribe(i)};this.fetchHistory=async e=>{if(this.state!=="CONNECTED"){let n="Realtime component is not started yet. You can't retrieve history before start";return this.logger.log(n),console.warn(`[SuperViz] ${n}`),null}return await new Promise((n,o)=>{let u=c=>{var h;(h=c.events)!=null&&h.length||n(null);let l=c.events.reduce((f,v)=>{var b;return f[v.data.name]||(f[v.data.name]=[]),f[v.data.name].push({data:v.data.payload,connectionId:v.connectionId,name:v.data.name,participantId:(b=v.presence)==null?void 0:b.id,timestamp:v.timestamp}),f},{});e&&!l[e]&&o(new Error(`Event ${e} not found in the history`)),e&&n(l[e]),n(l)};this.channel.history(u)})};this.publishEventToClient=(e,i)=>{this.logger.log("realtime channel @ publishEventToClient",{event:e,data:i}),this.observers[e]&&this.observers[e].publish(i)};this.name=e,this.ioc=i,this.logger=new be("@superviz/sdk/realtime-channel"),this.channel=this.ioc.createRoom(`realtime:${this.name}`),this.localParticipant=n,this.subscribeToRealtimeEvents(),this.logger.log("started")}async disconnect(){if(this.state==="DISCONNECTED"){this.logger.log("Realtime channel is already disconnected");return}this.logger.log("destroyed"),this.changeState("DISCONNECTED"),this.channel.disconnect()}changeState(e){this.logger.log("realtime component @ changeState - state changed",e),this.state=e,this.publishEventToClient("realtime-channel.state-changed",this.state)}subscribeToRealtimeEvents(){this.channel.presence.on("presence.joined-room",e=>{e.id===this.localParticipant.id&&(this.changeState("CONNECTED"),this.callbacksToSubscribeWhenJoined.forEach(({event:i,callback:n})=>{this.subscribe(i,n)}),this.logger.log("joined room"),this.changeState("CONNECTED"))}),this.channel.on(`message:${this.name}`,e=>{var i;this.logger.log("message received",e),this.publishEventToClient(e.data.name,{data:e.data.payload,participantId:((i=e==null?void 0:e.presence)==null?void 0:i.id)||null,name:e.data.name,timestamp:e.timestamp,connectionId:e.connectionId})})}};var uu=class extends It{constructor(){super();this.state="STOPPED";this.channels=new Map;this.callbacksToSubscribeWhenJoined=[];this.subscribe=(e,i)=>{var n;if(!this.channel){this.callbacksToSubscribeWhenJoined.push({event:e,callback:i});return}(n=this.channel)==null||n.subscribe(e,i)};this.publish=(e,i)=>{var n;(n=this.channel)==null||n.publish(e,i)};this.unsubscribe=(e,i)=>{var n;(n=this.channel)==null||n.unsubscribe(e,i)};this.name="realtime",this.logger=new be("@superviz/sdk/realtime-component");let{localParticipant:e}=this.useStore("global-store");e.subscribe()}connect(e){if(this.state!=="STARTED"){let n="[SuperViz] Realtime component is not started yet. You can't connect to a channel before start";this.logger.log(n),console.warn(n);return}let i=this.channels.get(e);return i||(i=new ul(e,this.ioc,this.localParticipant),this.channels.set(e,i),i)}start(){this.logger.log("started"),this.channel=new ul("default",this.ioc,this.localParticipant),this.channel.subscribe("realtime-channel.state-changed",e=>{e==="CONNECTED"&&(this.callbacksToSubscribeWhenJoined.forEach(({event:i,callback:n})=>{this.channel.subscribe(i,n)}),this.changeState("STARTED"),this.callbacksToSubscribeWhenJoined=[],this.channel.unsubscribe("realtime-channel.state-changed"),this.channels.set("default",this.channel))})}destroy(){this.logger.log("destroyed"),this.changeState("STOPPED"),this.disconnectFromAllChannels()}disconnectFromAllChannels(){this.channels.forEach(e=>e.disconnect())}changeState(e){var i;this.logger.log("realtime component @ changeState - state changed",e),this.state=e,(i=this.channel)==null||i.publishEventToClient("realtime-component.state-changed",this.state)}};d();d();var U_=(n=>(n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n))(U_||{});var cu=class extends It{constructor(e){super();this.onParticipantListUpdate=e=>{if(this.localParticipantId===void 0||this.localParticipantId==="")return;if(!this.initialized){this.initialized=!0,this.initializeList();return}let i={...e.data,tooltip:this.getTooltipData(e.data),controls:this.getControls(e.data)},{participants:n,extras:o}=this.useStore("who-is-online-store");if(n.value.some(({id:h})=>h===e.data.id)){this.updateParticipant(i);return}if(o.value.some(({id:h})=>h===e.data.id)){this.updateExtra(i);return}if(n.value.length<4){n.publish([...n.value,i]);return}o.publish([...o.value,i])};this.onParticipantLeave=e=>{let{participants:i,extras:n}=this.useStore("who-is-online-store");if(i.value.findIndex(c=>c.id===e.id)===-1){let c=n.value.filter(l=>l.id!==e.id);n.publish(c);return}let u=i.value.filter(c=>c.id!==e.id);if(n.value.length){u.push(n.value[0]);let c=n.value.slice(1);n.publish(c)}i.publish(u)};this.updateParticipant=e=>{let{participants:i,extras:n}=this.useStore("who-is-online-store");if(e.isPrivate&&e.id!==this.localParticipantId){let u=i.value.filter(({id:l})=>l!==e.id),c=n.value.splice(0,1);i.publish([...u,...c]),n.publish([...n.value]);return}let o=i.value.map(u=>u.id===e.id?e:u);i.publish(o)};this.updateExtra=e=>{let{extras:i}=this.useStore("who-is-online-store");if(e.isPrivate&&e.id!==this.localParticipantId){let o=i.value.filter(({id:u})=>u!==e.id);i.publish(o);return}let n=i.value.map(o=>o.id===e.id?e:o);i.publish(n)};this.subscribeToLocalParticipantUpdates=e=>{if(!e.slot)return;this.localParticipantId=e.id;let{privateMode:i,joinedPresence:n}=this.useStore("who-is-online-store"),o=this.isInPresence(e.activeComponents);n.publish(o);let u=this.getParticipant(e);this.room.presence.update({...u,isPrivate:i.value})};this.goToMousePointer=e=>{var n,o;let i=((n=e.presence)==null?void 0:n.id)??((o=e.detail)==null?void 0:o.id);i!==this.localParticipantId&&(this.eventBus.publish("realtime.go-to-participant",i),this.publish("who-is-online.go-to-participant",i))};this.followMousePointer=({detail:e})=>{this.eventBus.publish("realtime.local-follow-participant",e.id),this.following&&this.publish("who-is-online.start-following-participant",this.following),this.following||this.publish("who-is-online.stop-following-participant"),e.source==="extras"&&this.highlightParticipantBeingFollowed(),this.updateParticipantsControls(e.id)};this.setPrivate=({detail:{isPrivate:e,id:i}})=>{let{privateMode:n,participants:o}=this.useStore("who-is-online-store"),u=o.value.find(c=>c.id===i);n.publish(e),this.eventBus.publish("realtime.private-mode",e),this.room.presence.update({...u,isPrivate:e}),e&&this.publish("who-is-online.enter-private-mode"),e||this.publish("who-is-online.leave-private-mode")};this.setFollow=e=>{let{id:i}=e.presence;if(i===this.localParticipantId)return;let{data:n}=e,{following:o}=this.useStore("who-is-online-store");o.publish(n),this.followMousePointer({detail:{id:n}})};this.follow=({detail:e})=>{let{everyoneFollowsMe:i}=this.useStore("who-is-online-store");i.publish(!!(e!=null&&e.id)),this.room.emit("who-is-online.start-follow-me",e==null?void 0:e.id),this.following&&this.publish("who-is-online.start-follow-me",this.following),this.following||this.publish("who-is-online.stop-follow-me"),this.updateParticipantsControls(e==null?void 0:e.id)};this.stopFollowing=e=>{var n;if(e.id!==((n=this.following)==null?void 0:n.id))return;let{following:i}=this.useStore("who-is-online-store");i.publish(void 0),this.eventBus.publish("realtime.local-follow-participant",void 0),this.publish("who-is-online.stop-following-participant")};this.gather=e=>{this.room.emit("who-is-online.gather-all",e.detail.id),this.publish("who-is-online.gather-all",e.detail.id)};this.onJoinedRoom=e=>{if(e.id!==this.localParticipantId)return;let{localParticipant:i}=this.useStore("global-store");i.subscribe(this.subscribeToLocalParticipantUpdates)};this.name="whoIsOnline",this.logger=new be("@superviz/sdk/who-is-online-component");let{disablePresenceControls:i,disableGoToParticipant:n,disableFollowParticipant:o,disablePrivateMode:u,disableGatherAll:c,disableFollowMe:l,following:h}=this.useStore("who-is-online-store");if(h.subscribe(),typeof e!="object"){this.position=e??"top-right";return}typeof e=="object"&&(this.position=e.position??"top-right",this.setStyles(e.styles),i.publish(e.disablePresenceControls),n.publish(e.disableGoToParticipant),o.publish(e.disableFollowParticipant),u.publish(e.disablePrivateMode),c.publish(e.disableGatherAll),l.publish(e.disableFollowMe))}start(){let{localParticipant:e}=this.useStore("global-store");this.localParticipantId=e.value.id,this.subscribeToRealtimeEvents(),this.positionWhoIsOnline(),this.addListeners()}destroy(){this.unsubscribeFromRealtimeEvents(),this.removeListeners(),this.element.remove(),this.element=null;let{destroy:e}=this.useStore("who-is-online-store");e()}addListeners(){this.element.addEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.addEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.addEventListener("realtime.private-mode",this.setPrivate),this.element.addEventListener("realtime.follow-participant",this.follow),this.element.addEventListener("realtime.gather",this.gather)}removeListeners(){this.element.removeEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.removeEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.removeEventListener("realtime.private-mode",this.setPrivate),this.element.removeEventListener("realtime.follow-participant",this.follow),this.element.removeEventListener("realtime.gather",this.gather)}subscribeToRealtimeEvents(){this.room.presence.on("presence.update",this.onParticipantListUpdate),this.room.presence.on("presence.leave",this.onParticipantLeave),this.room.presence.on("presence.leave",this.stopFollowing),this.room.presence.on("presence.joined-room",this.onJoinedRoom),this.room.on("who-is-online.gather-all",this.goToMousePointer),this.room.on("who-is-online.start-follow-me",this.setFollow)}unsubscribeFromRealtimeEvents(){this.room.presence.off("presence.update"),this.room.presence.off("presence.leave"),this.room.presence.off("presence.joined-room"),this.room.off("who-is-online.gather-all",this.goToMousePointer),this.room.off("who-is-online.start-follow-me",this.setFollow)}initializeList(){let{participants:e,extras:i}=this.useStore("who-is-online-store");this.room.presence.get(n=>{let o=n.filter(h=>h.data.id&&h.data.avatar).map(({data:h})=>{let f=this.getTooltipData(h),v=this.getControls(h);return{...h,tooltip:f,controls:v,isLocalParticipant:h.id===this.localParticipantId}});if(!o.length)return;let u=o.findIndex(h=>h.id===this.localParticipantId),c=o.splice(u,1)[0],l=o.splice(0,3);e.publish([c,...l]),i.publish(o)})}setStyles(e=""){if(!e)return;let i=document.createElement("style");i.textContent=e,i.id="superviz-who-is-online-styles",document.head.appendChild(i)}positionWhoIsOnline(){if(this.element=document.createElement("superviz-who-is-online"),Object.values(U_).includes(this.position.toLowerCase())){document.body.appendChild(this.element);let[n,o]=this.position.split("-");this.element.position=`${n}: 20px; ${o}: 40px;`;return}let i=document.getElementById(this.position);if(!i){this.element.position="top: 20px; right: 40px;",document.body.appendChild(this.element);return}i.appendChild(this.element),this.element.position="position: relative;"}getParticipant(e){let{avatar:i,activeComponents:n,id:o,name:u,slot:{index:c,color:l}}=e,h=this.shouldDisableDropdown({activeComponents:n,participantId:o}),f=this.getAvatar({avatar:i,color:l,name:u,slotIndex:c});return{id:o,name:u,avatar:f,disableDropdown:h,activeComponents:n,isPrivate:!1}}shouldDisableDropdown({activeComponents:e,participantId:i}){let{joinedPresence:{value:n},disablePresenceControls:{value:o},disableFollowMe:{value:u},disableFollowParticipant:{value:c},disableGoToParticipant:{value:l},disableGatherAll:{value:h},disablePrivateMode:{value:f}}=this.useStore("who-is-online-store");return n===!1||o===!0||i===this.localParticipantId&&u&&f&&h||i!==this.localParticipantId&&c&&l?!0:!(e!=null&&e.some(v=>v.toLowerCase().includes("presence")))}getTooltipData(e){let{name:i,disableDropdown:n,id:o}=e,u=o===this.localParticipantId,c={name:i};return u&&(c.name+=" (You)"),!n&&!u&&(c.info="Click to follow"),c}getAvatar({avatar:e,color:i,name:n,slotIndex:o}){var l;let u=e==null?void 0:e.imageUrl,c=((l=n==null?void 0:n.at(0))==null?void 0:l.toUpperCase())??"A";return{imageUrl:u,firstLetter:c,color:i,slotIndex:o}}getControls(e){let{disablePresenceControls:i}=this.useStore("who-is-online-store"),{disableDropdown:n,id:o}=e;return i.value||n?[]:o===this.localParticipantId?this.getLocalParticipantControls():this.getOtherParticipantsControls(o)}getOtherParticipantsControls(e){var c;let{disableGoToParticipant:i,disableFollowParticipant:n,following:o}=this.useStore("who-is-online-store"),u=[];if(i.value||u.push({label:"go to",icon:"place"}),!n.value){let l=((c=o.value)==null?void 0:c.id)===e,h=l?"unfollow":"follow",f=l?"send-off":"send";u.push({label:h,icon:f})}return u}getLocalParticipantControls(){let{disableFollowMe:{value:e},disableGatherAll:{value:i},disablePrivateMode:{value:n},everyoneFollowsMe:{value:o},privateMode:{value:u}}=this.useStore("who-is-online-store"),c=[];if(i||c.push({label:"gather all",icon:"gather"}),!e){let l=o?"send-off":"send",h=o?"stop followers":"everyone follows me";c.push({label:h,icon:l})}if(!n){let l=u?"eye_inative":"eye",h=u?"leave private mode":"private mode";c.push({label:h,icon:l})}return c}updateParticipantsControls(e){let{participants:i}=this.useStore("who-is-online-store"),n=i.value.map(o=>{if(e&&o.id!==e)return o;let{id:u}=o,c=this.getControls(o);return{...o,controls:c}});i.publish(n)}highlightParticipantBeingFollowed(){let{extras:e,participants:i,following:{value:n}}=this.useStore("who-is-online-store"),o=i.value[0],u=e.value.findIndex(h=>h.id===n.id),c=e.value.splice(u,1)[0];i.value.unshift(o),i.value[1]=c;let l=i.value.pop();e.value.push(l),e.publish(e.value),i.publish(i.value)}isInPresence(e){return e==null?void 0:e.some(i=>i.includes("presence"))}};d();d();var iv=(n=>(n.BLUR="field.blur",n.FOCUS="field.focus",n.CONTENT_CHANGE="field.content-change",n.INTERACTION="field.interaction",n))(iv||{});var lu=class extends It{constructor(e={}){super();this.fields={};this.fieldsOriginalOutline={};this.focusList={};this.enabledOutlineFields={};this.enabledRealtimeSyncFields={};this.flags={};this.allowedTagNames=["input","textarea"];this.allowedInputTypes=["text","email","date","color","datetime-local","month","number","password","range","search","tel","time","url","week","checkbox","radio"];this.throwError={onInvalidFieldsProp:e=>{throw new Error(`"Fields" property must be either a string or an array of strings. Received type: ${e}`)},onFieldNotFound:e=>{throw new Error(`You must pass the id of an existing element. Element with id ${e} not found`)},onInvalidTagName:e=>{throw new Error(`You can't register an element with tag ${e}. Only the tags "${this.allowedTagNames.join(", ")}" are allowed`)},onInvalidInputType:e=>{throw new Error(`You can't register an input element of type ${e}. Only the types "${this.allowedInputTypes.join(", ")}" are allowed`)},onDeregisterInvalidField:e=>{throw new Error(`You can't deregister field of id ${e}. No field was registered with id ${e} `)}};this.sync=e=>{var c,l;let i=this.fields[e],n=this.hasCheckedProperty(i),u={value:n?i.checked:i.value,color:this.localParticipant.slot.color,fieldId:e,showOutline:this.canUpdateColor(e),syncContent:this.canSyncContent(e),attribute:n?"checked":"value"};(c=this.room)==null||c.emit("field.content-change"+e,u),(l=this.room)==null||l.emit("field.interaction"+e,u)};this.handleInput=e=>{var u,c,l,h;let i=e.target;(c=this.room)==null||c.emit("field.interaction"+i.id,{fieldId:i.id,color:(u=this.localParticipant.slot)==null?void 0:u.color});let n=this.canSyncContent(i.id);if(!n)return;let o={value:i.value,color:(l=this.localParticipant.slot)==null?void 0:l.color,fieldId:i.id,showOutline:this.canUpdateColor(i.id),syncContent:n,attribute:"value"};(h=this.room)==null||h.emit("field.content-change"+i.id,o)};this.handleChange=e=>{var u;let i=e.target;if(!this.canSyncContent(i.id))return;let o={fieldId:i.id,value:i.checked,color:this.localParticipant.slot.color,showOutline:this.canUpdateColor(i.id),syncContent:this.canSyncContent(i.id),attribute:"checked"};(u=this.room)==null||u.emit("field.content-change"+i.id,o)};this.handleFocus=e=>{var o;let i=e.target,n={color:this.localParticipant.slot.color,fieldId:i.id};(o=this.room)==null||o.emit("field.focus"+i.id,n)};this.handleBlur=e=>{var o;let i=e.target,n={fieldId:i.id};(o=this.room)==null||o.emit("field.blur"+i.id,n)};this.removeFieldColor=({presence:e,data:{fieldId:i}})=>{var n;((n=this.focusList[i])==null?void 0:n.id)!==e.id||!this.fields[i]||(this.fields[i].style.outline=this.fieldsOriginalOutline[i]??"",delete this.fieldsOriginalOutline[i],delete this.focusList[i])};this.updateFieldColor=({presence:e,data:{color:i,fieldId:n},timestamp:o})=>{let u=this.focusList[n]??{},c=!u.id,l=e.id===this.localParticipant.id;if(c&&l){this.focusList[n]={id:e.id,color:i,firstInteraction:o,lastInteraction:o};return}if(u.id===e.id){this.focusList[n].lastInteraction=o;return}let f=o-u.lastInteraction>=3e3,v=o-u.firstInteraction>=1e4;if(!(f||v||c))return;this.focusList[n]={id:e.id,color:i,firstInteraction:o,lastInteraction:o};let w=l?this.fieldsOriginalOutline[n]:`1px solid ${i}`;this.fields[n].style.outline=w};this.updateFieldContent=({presence:e,data:{value:i,fieldId:n,color:o,showOutline:u,syncContent:c,attribute:l},timestamp:h,...f})=>{this.publish("field.content-change",{value:i,fieldId:n,attribute:l,userId:e.id,userName:e.name,timestamp:h}),c&&this.canSyncContent(n)&&e.id!==this.localParticipant.id&&(this.fields[n][l]=i),u&&this.canUpdateColor(n)&&this.updateFieldColor({presence:e,data:{color:o,fieldId:n},timestamp:h,...f})};this.publishTypedEvent=({presence:e,data:{fieldId:i,color:n}})=>{this.publish("field.interaction",{fieldId:i,userId:e.id,userName:e.name,color:n})};this.canSyncContent=e=>!this.flags.disableRealtimeSync&&this.enabledRealtimeSyncFields[e]!==!1||!!this.enabledRealtimeSyncFields[e];this.name="formElements",this.logger=new be("@superviz/sdk/presence-input-component");let{fields:i,...n}=e;if(this.flags=n??{},typeof i=="string"){this.validateField(i),this.fields[i]=null;return}if(Array.isArray(i)){i.forEach(o=>{this.validateField(o),this.fields[o]=null});return}i!==void 0&&this.throwError.onInvalidFieldsProp(typeof i)}enableOutline(e){let i=this.fields[e];i&&(this.enabledOutlineFields[e]=!0,this.fieldsOriginalOutline[e]=i.style.outline,i.addEventListener("focus",this.handleFocus),i.addEventListener("blur",this.handleBlur),this.room.on("field.focus"+e,this.updateFieldColor),this.room.on("field.blur"+e,this.removeFieldColor))}disableOutline(e){var n;let i=this.fields[e];i&&(this.enabledOutlineFields[e]=!1,i.style.outline=this.fieldsOriginalOutline[e]??"",i.removeEventListener("focus",this.handleFocus),i.removeEventListener("blur",this.handleBlur),this.room.off("field.focus"+e,this.updateFieldColor),this.room.off("field.blur"+e,this.removeFieldColor),(n=this.room)==null||n.emit("field.blur"+e,{fieldId:e}))}enableRealtimeSync(e){this.enabledRealtimeSyncFields[e]=!0}disableRealtimeSync(e){this.enabledRealtimeSyncFields[e]=!1}registerField(e){this.validateField(e);let i=document.getElementById(e);this.fields[e]=i,this.addListenersToField(i),this.addRealtimeListenersToField(e),this.fieldsOriginalOutline[e]=i.style.outline}deregisterField(e){var i;this.fields[e]||this.throwError.onDeregisterInvalidField(e),this.removeListenersFromField(this.fields[e]),this.removeRealtimeListenersFromField(e),this.fields[e].style.outline=this.fieldsOriginalOutline[e],this.fields[e]=void 0,delete this.enabledOutlineFields[e],delete this.enabledRealtimeSyncFields[e],delete this.fieldsOriginalOutline[e],delete this.focusList[e],(i=this.room)==null||i.emit("field.blur"+e,{fieldId:e})}start(){let{localParticipant:e}=this.useStore("global-store");e.subscribe(),Object.entries(this.fields).forEach(([i])=>{this.registerField(i)})}destroy(){this.restoreOutlines(),this.deregisterAllFields(),this.fieldsOriginalOutline=void 0,this.focusList=void 0}addListenersToField(e){let{type:i}=e;this.hasCheckedProperty(e)?e.addEventListener("change",this.handleChange):e.addEventListener("input",this.handleInput),!this.flags.disableOutline&&(e.addEventListener("focus",this.handleFocus),e.addEventListener("blur",this.handleBlur))}addRealtimeListenersToField(e){this.room&&(this.room.on("field.content-change"+e,this.updateFieldContent),this.room.on("field.interaction"+e,this.publishTypedEvent),!this.flags.disableOutline&&(this.room.on("field.focus"+e,this.updateFieldColor),this.room.on("field.blur"+e,this.removeFieldColor)))}removeListenersFromField(e){this.hasCheckedProperty(e)?e.removeEventListener("change",this.handleChange):e.removeEventListener("input",this.handleInput),!this.flags.disableOutline&&(e.removeEventListener("focus",this.handleFocus),e.removeEventListener("blur",this.handleBlur))}removeRealtimeListenersFromField(e){this.room&&(this.room.off("field.content-change"+e,this.updateFieldContent),this.room.off("field.interaction"+e,this.publishTypedEvent),!this.flags.disableOutline&&(this.room.off("field.focus"+e,this.updateFieldColor),this.room.off("field.blur"+e,this.removeFieldColor)))}deregisterAllFields(){Object.keys(this.fields).forEach(e=>{this.deregisterField(e)}),this.fields=void 0}validateField(e){this.validateFieldId(e);let i=document.getElementById(e);this.validateFieldTagName(i),this.validateFieldType(i)}validateFieldTagName(e){let i=e.tagName.toLowerCase();this.allowedTagNames.includes(i)||(this.logger.log("invalid element tagname"),this.throwError.onInvalidTagName(i))}validateFieldType(e){if(e.tagName.toLowerCase()!=="input")return;let i=e.getAttribute("type"),n=this.allowedInputTypes.includes(i);i&&!n&&(this.logger.log("invalid input type"),this.throwError.onInvalidInputType(i))}validateFieldId(e){document.getElementById(e)||this.throwError.onFieldNotFound(e)}restoreOutlines(){Object.entries(this.fields).forEach(([e])=>{this.fields[e].style.outline=this.fieldsOriginalOutline[e]})}hasCheckedProperty(e){let i=e.tagName.toLowerCase(),n=e.getAttribute("type");return i==="input"&&(n==="radio"||n==="checkbox")}canUpdateColor(e){return!this.flags.disableOutline&&this.enabledOutlineFields[e]!==!1||this.enabledOutlineFields[e]}};d();var G_=we(gy());d();var H_=(A=>(A.svPrimary="sv-primary",A.svPrimary900="sv-primary-900",A.svPrimary200="sv-primary-200",A.svSecondary="sv-secondary",A.svGray="sv-gray",A.svSuccess="sv-success",A.svDanger="sv-danger",A.svBlack="sv-black",A.svWhite="sv-white",A.svGray100="sv-gray-100",A.svGray200="sv-gray-200",A.svGray300="sv-gray-300",A.svGray400="sv-gray-400",A.svGray500="sv-gray-500",A.svGray600="sv-gray-600",A.svGray700="sv-gray-700",A.svGray800="sv-gray-800",A))(H_||{});d();d();async function Vte(r,t){try{return await Ge.validateApiKey(r,t)===!0}catch(e){if(e.status===404)return!1;throw new Error("Unable to validate API key")}}var GI=Vte;d();var Jo=class{static async getRemoteConfig(t="prod"){let{version:e}=await Promise.resolve().then(()=>(JI(),ZI));if(t==="local")return(await Promise.resolve().then(()=>we(KI()))).default.remoteConfig;let i={version:e,environment:t},n=this.createUrl(i);return at(n,"GET",null)}static async getFeatures(t){return at(`${this.REMOTE_CONFIG_BASE_URL}/features/${t}`,"GET",void 0)}static createUrl({version:t,environment:e}){return`${this.REMOTE_CONFIG_BASE_URL}/sdk/${t}?env=${e}`}};Jo.REMOTE_CONFIG_BASE_URL="https://remote-config.superviz.com";d();var V_=we(po());d();var cl=class{constructor(){this.observers=new Map;this.subscribe=(t,e)=>{this.logger.log("event bus service @ subscribe",{event:t,callback:e}),this.observers.has(t)||this.observers.set(t,new Ie),this.observers.get(t).subscribe(e)};this.unsubscribe=(t,e)=>{this.logger.log("event bus service @ unsubscribe",{event:t,callback:e}),this.observers.has(t)&&(this.observers.get(t).reset(),this.observers.delete(t))};this.publish=(t,e)=>{this.logger.log("event bus service @ publish",{event:t,data:e}),this.observers.has(t)&&this.observers.get(t).publish(e)};this.destroy=()=>{this.logger.log("event bus service @ destroy"),this.observers.forEach(t=>{t.reset(),t.destroy()}),this.observers.clear()};this.logger=new be("@superviz/sdk/event-bus"),this.logger.log("event bus created")}};d();var XI=we(Oo());d();var nv=class{constructor(t){this.participant=t;this.stateSubject=new XI.Subject;this.handleConnectionState=t=>{if(["DISCONNECTED","RECONNECT_ERROR"].includes(t.state)&&!["io client disconnect","Unauthorized connection"].includes(t.reason)&&this.forceReconnect(),t.reason==="Unauthorized connection"){console.error("[Superviz] Unauthorized connection. Please check your API key and if your domain is white listed."),this.state={state:"DISCONNECTED",reason:"Unauthorized connection"},this.stateSubject.next("AUTH_ERROR");return}this.state=t,this.stateSubject.next(t.state)};this.createClient()}destroy(){this.client.destroy()}subscribeToDefaultEvents(){this.client.connection.on(this.handleConnectionState)}forceReconnect(){var t;(t=this.client)==null||t.destroy(),this.client=null,this.createClient()}createClient(){let t=X.get("environment");t=["dev","prod"].includes(t)?t:"dev",this.client=new Jc(X.get("apiKey"),t,{id:this.participant.id,name:this.participant.name}),this.subscribeToDefaultEvents()}createRoom(t){let e=X.get("roomId");return this.client.connect(`${e}:${t}`)}};d();var ll=class{static checkComponentLimit(t){let e=Wb[t]??t,i=X.get("limits");return(i==null?void 0:i[e])??!1}};d();var QI=we(po());d();var Jte=1e3,du=class{constructor(t,e){this.participants3DObservers=[];this.initializeParticipantsList=()=>{this.room.presence.get(t=>{t.forEach(e=>{this.unthrottledUpdatePresence3D(e.data)})})};this.onLocalParticipantJoined=t=>{if(!t.slot){setTimeout(()=>{this.onLocalParticipantJoined(this.localParticipant)},2e3);return}if(!this.room.isJoined){setTimeout(()=>{this.onLocalParticipantJoined(t)},2e3);return}let{hasJoined3D:e}=this.useStore("presence-3d-store");e.publish(!0),this.room.emit("participant-joined",t),this.room.presence.update(t),this.initializeParticipantsList()};this.subscribeToRoomEvents=()=>{this.room.on("participant-joined",this.onJoinedRoom),this.room.presence.on("presence.leave",this.onLeaveRoom),this.room.presence.on("presence.update",this.onParticipantUpdate),this.room.presence.on("presence.joined-room",this.onJoinedPresence)};this.unsubscribeFromRoomEvents=()=>{this.room.off("participant-joined",this.onJoinedRoom),this.room.presence.off("presence.leave"),this.room.presence.off("presence.update"),this.room.presence.off("presence.joined-room")};this.onJoinedRoom=t=>{let{participants:e}=this.useStore("presence-3d-store"),i=e.value.find(n=>n.id===t.data.id);e.publish([...e.value.filter(n=>n.id!==t.data.id),{...i,...t.data}])};this.onLeaveRoom=t=>{if(t.id===this.localParticipant.id){this.unsubscribeFromRoomEvents(),this.useStore("presence-3d-store").destroy();return}let{participants:e}=this.useStore("presence-3d-store"),i=e.value.filter(n=>n.id!==t.id);e.publish(i)};this.unthrottledUpdatePresence3D=t=>{if(!t||!t.id)return;let{participants:e,hasJoined3D:i}=this.useStore("presence-3d-store"),n={...e.value.find(o=>o.id===t.id),...t};e.publish([...e.value.filter(o=>o.id!==t.id),n]),!(!i.value||n.id!==this.localParticipant.id)&&this.room.presence.update(n)};this.onJoinedPresence=t=>{t.id===this.localParticipant.id&&(this.logger.log("participant joined 3D room",t.id),this.onLocalParticipantJoined(this.localParticipant))};this.updatePresence3D=(0,QI.throttle)(t=>{this.unthrottledUpdatePresence3D(t)},Jte);this.onParticipantUpdate=t=>{if(t.id===this.localParticipant.id)return;let{participants:e}=this.useStore("presence-3d-store"),i={...e.value.filter(o=>o.id===t.id)[0],...t.data},n=e.value.map(o=>o.id===t.id?i:o);e.publish(n),this.participants3DObservers[t.id]&&this.participants3DObservers[t.id].publish(i)};this.setParticipantData=t=>{this.updatePresence3D(t)};this.room=t,this.logger=new be("@superviz/sdk/presence3D-manager"),this.useStore=e,this.subscribeToRoomEvents();let{localParticipant:i}=this.useStore("global-store");i.subscribe(n=>{var o,u;this.localParticipant&&(this.localParticipant.name!==n.name||((o=this.localParticipant.avatar)==null?void 0:o.model3DUrl)!==((u=n.avatar)==null?void 0:u.model3DUrl))&&this.unthrottledUpdatePresence3D({...n}),this.localParticipant=n})}subscribeToUpdates(t,e){this.participants3DObservers[t]||(this.participants3DObservers[t]=new Ie({logger:this.logger})),this.participants3DObservers[t].subscribe(e)}unsubscribeFromUpdates(t,e){this.participants3DObservers[t]&&this.participants3DObservers[t].unsubscribe(e)}get getParticipants(){return this.useStore("presence-3d-store").participants.value}};d();var ov=class{constructor(t){this.onPresenceUpdate=async t=>{var n,o;let{localParticipant:e,participants:i}=et("global-store");if(!(!t.data.slot||!((n=e.value)!=null&&n.slot))){if(t.id===e.value.id){e.publish({...e.value,slot:t.data.slot}),this.slotIndex=t.data.slot.index;return}if(((o=t.data.slot)==null?void 0:o.index)===this.slotIndex){this.slotIndex=null,e.publish({...e.value,slot:null});let u=await this.assignSlot();console.debug(`[SuperViz] - Slot reassigned to ${e.value.id}, slot: ${u.colorName}`)}}};this.room=t,this.room.presence.on("presence.update",this.onPresenceUpdate)}async assignSlot(){let t=Array.from({length:16},(o,u)=>u),e=Math.floor(Math.random()*16),{localParticipant:i,participants:n}=et("global-store");try{await new Promise((c,l)=>{this.room.presence.get(h=>{if((!h||!h.length)&&c(!0),h.length>=17){t=[],l(new Error("[SuperViz] - No more slots available"));return}h.forEach(f=>{f.id!==i.value.id&&(t=t.filter(v=>{var b,w;return v!==((w=(b=f.data)==null?void 0:b.slot)==null?void 0:w.index)}))}),c(!0)})}),!t.includes(e)&&(e=t.shift());let u={index:e,color:iu[e],textColor:ru.includes(e)?"#fff":"#000",colorName:j_[e],timestamp:Date.now()};return this.slotIndex=e,i.publish({...i.value,slot:u}),n.publish({...n.value,[i.value.id]:{...n.value[i.value.id],slot:u}}),this.room.presence.update({slot:u}),u}catch(o){return console.error(o),null}}};d();var z_=class extends Pi{constructor({participant:e,group:i}){super();this.isDestroyed=!1;this.activeComponents=[];this.componentsToAttachAfterJoin=[];this.activeComponentsInstances=[];this.eventBus=new cl;this.timestamp=0;this.useStore=et.bind(this);this.addComponent=e=>{if(!this.canAddComponent(e))return;let{hasJoinedRoom:i,localParticipant:n,group:o}=et("global-store");if(!i.value){this.logger.log("launcher service @ addComponent - not joined yet"),this.componentsToAttachAfterJoin.push(e);return}e.attach({ioc:this.ioc,config:X.configuration,eventBus:this.eventBus,useStore:et,Presence3DManagerService:du}),this.activeComponents.push(e.name),this.activeComponentsInstances.push(e),n.publish({...n.value,activeComponents:this.activeComponents}),Ge.sendActivity(n.value.id,o.value.id,o.value.name,e.name)};this.attachComponentsAfterJoin=()=>{this.logger.log("launcher service @ attachComponentsAfterJoin"),this.componentsToAttachAfterJoin.forEach(e=>{this.logger.log("launcher service @ attachComponentsAfterJoin - attaching component",e.name),this.addComponent(e)}),this.componentsToAttachAfterJoin=[]};this.removeComponent=e=>{if(!this.activeComponents.includes(e.name)){let n=`Component ${e.name} is not initialized yet.`;this.logger.log(n),console.error(n);return}e.detach(),this.activeComponentsInstances=this.activeComponentsInstances.filter(n=>n.name!==e.name);let{localParticipant:i}=this.useStore("global-store");this.activeComponents.splice(this.activeComponents.indexOf(e.name),1),i.publish({...i.value,activeComponents:this.activeComponents})};this.destroy=()=>{var e,i,n,o;this.logger.log("launcher service @ destroy"),this.activeComponentsInstances.forEach(u=>{this.logger.log("launcher service @ destroy - removing component",u.name),this.removeComponent(u)}),this.activeComponents=[],this.activeComponentsInstances=[],Oc().destroy(),this.eventBus.destroy(),this.eventBus=void 0,(e=this.room)==null||e.presence.off("presence.joined-room"),(i=this.room)==null||i.presence.off("presence.leave"),(n=this.room)==null||n.presence.off("presence.update"),(o=this.ioc)==null||o.destroy(),this.isDestroyed=!0,window.SUPERVIZ=void 0};this.canAddComponent=e=>{var c;let i=X.get(`features.${e.name}`),n=ll.checkComponentLimit(e.name),o=(c=this.activeComponents)==null?void 0:c.includes(e.name),u=[{isValid:i,message:`Component ${e.name} is not enabled in the room`},{isValid:!this.isDestroyed,message:"Component can not be added because the superviz room is destroyed. Initialize a new room to add and use components."},{isValid:!o,message:`Component ${e.name} is already active. Please remove it first`},{isValid:n,message:`You reached the limit usage of ${e.name}`}];for(let l=0;l<u.length;l++){let{isValid:h,message:f}=u[l];if(!h)return this.logger.log(f),console.error(f),!1}return!0};this.onAuthentication=e=>{e||(this.destroy(),console.error("Room can't be initialized because this website's domain is not whitelisted. If you are the developer, please add your domain in https://dashboard.superviz.com/developer"))};this.onLocalParticipantUpdate=e=>{this.activeComponents=e.activeComponents||[],this.activeComponents.length&&(this.activeComponentsInstances=this.activeComponentsInstances.filter(i=>this.activeComponents.includes(i.name)))};this.onParticipantListUpdate=e=>{this.logger.log("launcher service @ onParticipantListUpdate",e);let{localParticipant:i}=et("global-store"),n=Object.values(e).filter(o=>o.id===i.value.id).map(o=>{var u;return{...o,color:(u=o.slot)==null?void 0:u.color}})[0];!n||(0,V_.isEqual)(i.value,n)||(i.publish({...i.value,...n}),this.activeComponentsInstances=this.activeComponentsInstances.filter(o=>n.activeComponents?this.activeComponents.includes(o.name):!0))};this.onParticipantJoined=e=>{let{localParticipant:i}=et("global-store");e.id===i.value.id&&(this.logger.log("launcher service @ onParticipantJoined - local participant joined"),this.attachComponentsAfterJoin())};this.onSameAccount=()=>{this.publish("participant.same-account-error"),this.destroy()};this.startIOC=()=>{this.logger.log("launcher service @ startIOC");let{participants:e,localParticipant:i}=et("global-store");this.ioc.stateSubject.subscribe(o=>{o==="AUTH_ERROR"&&this.onAuthentication(!1)}),this.room.presence.get(o=>{let u={};o.forEach(c=>{u[c.id]={...c.data,name:c.name,id:c.id,timestamp:c.timestamp}}),u[i.value.id]={...u[i.value.id],...i.value},e.publish(u)}),this.room.presence.on("presence.joined-room",this.onParticipantJoinedIOC),this.room.presence.on("presence.leave",this.onParticipantLeaveIOC),this.room.presence.on("presence.update",this.onParticipantUpdatedIOC);let{hasJoinedRoom:n}=et("global-store");n.publish(!0)};this.onParticipantJoinedIOC=async e=>{let{localParticipant:i}=et("global-store");if(e.id!==i.value.id)return;await new ov(this.room).assignSlot(),this.timestamp=e.timestamp,this.room.presence.update(i.value),this.logger.log("launcher service @ onParticipantJoined - local participant joined"),this.onParticipantJoined(e),this.publish("participant.local-joined",i.value),this.publish("participant.joined",i.value)};this.onParticipantLeaveIOC=e=>{let{participants:i,localParticipant:n}=et("global-store"),o={...i.value};delete o[e.id],i.publish(o),e.id===n.value.id&&(this.logger.log("launcher service @ onParticipantLeave - local participant left"),this.publish("participant.local-left",e.data)),this.logger.log("launcher service @ onParticipantLeave - participant left",e.data),this.publish("participant.left",e.data)};this.onParticipantUpdatedIOC=e=>{let{localParticipant:i}=et("global-store");if(i.value&&e.id===i.value.id&&!(0,V_.isEqual)(i.value,e.data)){if(e.data.timestamp===this.timestamp){this.timestamp=0;return}i.publish({...e.data,...i.value,timestamp:e.timestamp}),this.timestamp=e.timestamp,this.room.presence.update(i.value),this.publish("participant.updated",e.data),this.logger.log("Publishing ParticipantEvent.UPDATED",e.data)}let{participants:n}=et("global-store");n.value[e.id]||this.publish("participant.joined",e.data);let o={...n.value};o[e.id]={...e.data,...n.value[e.id],timestamp:e.timestamp},n.publish(o);let u=Object.values(n.value);this.logger.log("Publishing ParticipantEvent.LIST_UPDATED",n.value),this.publish("participant.list-updated",u)};this.logger=new be("@superviz/sdk/launcher");let{localParticipant:n,participants:o,group:u,isDomainWhitelisted:c}=this.useStore("global-store");n.publish({...e}),o.subscribe(this.onParticipantListUpdate),c.subscribe(this.onAuthentication),n.subscribe(this.onLocalParticipantUpdate),u.publish(i),this.ioc=new nv(n.value),this.room=this.ioc.createRoom("launcher"),this.eventBus=new cl,this.logger.log("launcher created"),this.startIOC()}},eM=r=>{if(window.SUPERVIZ)return console.warn("[SUPERVIZ] Room already initialized"),{destroy:window.SUPERVIZ.destroy,subscribe:window.SUPERVIZ.subscribe,unsubscribe:window.SUPERVIZ.unsubscribe,addComponent:window.SUPERVIZ.addComponent,removeComponent:window.SUPERVIZ.removeComponent};let t=new z_(r);return window.SUPERVIZ=t,{destroy:t.destroy,subscribe:t.subscribe,unsubscribe:t.unsubscribe,addComponent:t.addComponent,removeComponent:t.removeComponent}};var Yte=({group:r,participant:t,roomId:e,customColors:i})=>{if(i&&Kte(i),!r||!r.name||!r.id)throw new Error("Group fields is required");if(!t||!t.id||!t.name)throw new Error("Participant name and id is required");if(!e)throw new Error("Room id is required")},Kte=r=>{Object.entries(r).forEach(([t,e])=>{if(!Object.values(H_).includes(t))throw new Error(`Color ${t} is not a valid color variable name. Please check the documentation for more information.`);if(!/^(\d{1,3}\s){2}\d{1,3}$/.test(e))throw new Error(`Color ${t} is not a valid color variable value. Please check the documentation for more information.`)})},Xte=r=>{r&&Object.entries(r).forEach(([t,e])=>{let i=e.replace(/\s/g,", ");document.documentElement.style.setProperty(`--${t}`,i)})},Qte=async(r,t)=>{var x;if(!(r&&r.trim()))throw new Error("API key is required");if(!t)throw new Error("Options is required");Yte(t),t.debug?G_.debug.enable("*"):G_.debug.disable();let[{apiUrl:i,conferenceLayerUrl:n},o]=await Promise.all([Jo.getRemoteConfig(t.environment),Jo.getFeatures(r)]);if(!await GI(i,r))throw new Error("Failed to validate API key");let[c,l,h]=await Promise.all([Ge.fetchConfig(i,r),Ge.fetchLimits(i,r),Ge.fetchWaterMark(i,r)]).catch(()=>{throw new Error("Failed to load configuration from server")});if(!c||!c.ablyKey)throw new Error("Failed to load configuration from server");let{ablyKey:f}=c,{participant:v,roomId:b,customColors:w}=t;return X.setConfig({apiUrl:i,ablyKey:f,apiKey:r,conferenceLayerUrl:n,environment:t.environment??"prod",roomId:b,debug:t.debug,limits:l,waterMark:h,colors:t.customColors,features:o}),Xte(t.customColors),Ge.createOrUpdateParticipant({name:v.name,participantId:v.id,avatar:(x=v.avatar)==null?void 0:x.imageUrl}),eM(t)},Z_=Qte;d();d();d();d();d();d();var tM=class{get shadowRoot(){return this.__host.__shadowRoot}constructor(t){this.ariaAtomic="",this.ariaAutoComplete="",this.ariaBraileLabel="",this.ariaBraileRoleDescription="",this.ariaBusy="",this.ariaChecked="",this.ariaColCount="",this.ariaColIndex="",this.ariaColSpan="",this.ariaCurrent="",this.ariaDescription="",this.ariaDisabled="",this.ariaExpanded="",this.ariaHasPopup="",this.ariaHidden="",this.ariaInvalid="",this.ariaKeyShortcuts="",this.ariaLabel="",this.ariaLevel="",this.ariaLive="",this.ariaModal="",this.ariaMultiLine="",this.ariaMultiSelectable="",this.ariaOrientation="",this.ariaPlaceholder="",this.ariaPosInSet="",this.ariaPressed="",this.ariaReadOnly="",this.ariaRequired="",this.ariaRoleDescription="",this.ariaRowCount="",this.ariaRowIndex="",this.ariaRowSpan="",this.ariaSelected="",this.ariaSetSize="",this.ariaSort="",this.ariaValueMax="",this.ariaValueMin="",this.ariaValueNow="",this.ariaValueText="",this.role="",this.form=null,this.labels=[],this.states=new Set,this.validationMessage="",this.validity={},this.willValidate=!0,this.__host=t}checkValidity(){return console.warn("`ElementInternals.checkValidity()` was called on the server.This method always returns true."),!0}reportValidity(){return!0}setFormValue(){}setValidity(){}};var rM=new WeakMap,dl=r=>{let t=rM.get(r);return t===void 0&&rM.set(r,t=new Map),t},ere=class{constructor(){this.__shadowRootMode=null,this.__shadowRoot=null,this.__internals=null}get attributes(){return Array.from(dl(this)).map(([t,e])=>({name:t,value:e}))}get shadowRoot(){return this.__shadowRootMode==="closed"?null:this.__shadowRoot}setAttribute(t,e){dl(this).set(t,String(e))}removeAttribute(t){dl(this).delete(t)}toggleAttribute(t,e){if(this.hasAttribute(t)){if(e===void 0||!e)return this.removeAttribute(t),!1}else return e===void 0||e?(this.setAttribute(t,""),!0):!1;return!0}hasAttribute(t){return dl(this).has(t)}attachShadow(t){let e={host:this};return this.__shadowRootMode=t.mode,t&&t.mode==="open"&&(this.__shadowRoot=e),e}attachInternals(){if(this.__internals!==null)throw new Error("Failed to execute 'attachInternals' on 'HTMLElement': ElementInternals for the specified element was already attached.");let t=new tM(this);return this.__internals=t,t}getAttribute(t){return dl(this).get(t)??null}};var tre=class extends ere{},iM=tre;var rre=class{constructor(){this.__definitions=new Map}define(t,e){if(this.__definitions.has(t))if(g.NODE_ENV==="development")console.warn(`'CustomElementRegistry' already has "${t}" defined. This may have been caused by live reload or hot module replacement in which case it can be safely ignored.
Make sure to test your application with a production build as repeat registrations will throw in production.`);else throw new Error(`Failed to execute 'define' on 'CustomElementRegistry': the name "${t}" has already been used with this registry`);this.__definitions.set(t,{ctor:e,observedAttributes:e.observedAttributes??[]})}get(t){let e=this.__definitions.get(t);return e==null?void 0:e.ctor}},ire=rre;var nM=new ire;d();var pl=globalThis,av=pl.ShadowRoot&&(pl.ShadyCSS===void 0||pl.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,sM=Symbol(),oM=new WeakMap,sv=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==sM)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(av&&t===void 0){let i=e!==void 0&&e.length===1;i&&(t=oM.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&oM.set(e,t))}return t}toString(){return this.cssText}},aM=r=>new sv(typeof r=="string"?r:r+"",void 0,sM);var J_=(r,t)=>{if(av)r.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let e of t){let i=document.createElement("style"),n=pl.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=e.cssText,r.appendChild(i)}},uv=av||pl.CSSStyleSheet===void 0?r=>r:r=>r instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return aM(e)})(r):r;var{is:nre,defineProperty:ore,getOwnPropertyDescriptor:sre,getOwnPropertyNames:are,getOwnPropertySymbols:ure,getPrototypeOf:cre}=Object,fl=globalThis;fl.customElements??=nM;var uM=fl.trustedTypes,lre=uM?uM.emptyScript:"",Y_=fl.reactiveElementPolyfillSupport,hl=(r,t)=>r,cv={toAttribute(r,t){switch(t){case Boolean:r=r?lre:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,t){let e=r;switch(t){case Boolean:e=r!==null;break;case Number:e=r===null?null:Number(r);break;case Object:case Array:try{e=JSON.parse(r)}catch{e=null}}return e}},K_=(r,t)=>!nre(r,t),cM={attribute:!0,type:String,converter:cv,reflect:!1,hasChanged:K_};Symbol.metadata??=Symbol("metadata"),fl.litPropertyMetadata??=new WeakMap;var Yo=class extends(globalThis.HTMLElement??iM){static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=cM){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){let i=Symbol(),n=this.getPropertyDescriptor(t,i,e);n!==void 0&&ore(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){let{get:n,set:o}=sre(this.prototype,t)??{get(){return this[e]},set(u){this[e]=u}};return{get(){return n==null?void 0:n.call(this)},set(u){let c=n==null?void 0:n.call(this);o.call(this,u),this.requestUpdate(t,c,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??cM}static _$Ei(){if(this.hasOwnProperty(hl("elementProperties")))return;let t=cre(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(hl("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(hl("properties"))){let e=this.properties,i=[...are(e),...ure(e)];for(let n of i)this.createProperty(n,e[n])}let t=this[Symbol.metadata];if(t!==null){let e=litPropertyMetadata.get(t);if(e!==void 0)for(let[i,n]of e)this.elementProperties.set(i,n)}this._$Eh=new Map;for(let[e,i]of this.elementProperties){let n=this._$Eu(e,i);n!==void 0&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t)){let i=new Set(t.flat(1/0).reverse());for(let n of i)e.unshift(uv(n))}else t!==void 0&&e.push(uv(t));return e}static _$Eu(t,e){let i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(e=>e(this))}addController(t){var e;(this._$EO??=new Set).add(t),this.renderRoot!==void 0&&this.isConnected&&((e=t.hostConnected)==null||e.call(t))}removeController(t){var e;(e=this._$EO)==null||e.delete(t)}_$E_(){let t=new Map,e=this.constructor.elementProperties;for(let i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){let t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return J_(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(e=>{var i;return(i=e.hostConnected)==null?void 0:i.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(e=>{var i;return(i=e.hostDisconnected)==null?void 0:i.call(e)})}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){var o;let i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(n!==void 0&&i.reflect===!0){let u=(((o=i.converter)==null?void 0:o.toAttribute)!==void 0?i.converter:cv).toAttribute(e,i.type);this._$Em=t,u==null?this.removeAttribute(n):this.setAttribute(n,u),this._$Em=null}}_$AK(t,e){var o;let i=this.constructor,n=i._$Eh.get(t);if(n!==void 0&&this._$Em!==n){let u=i.getPropertyOptions(n),c=typeof u.converter=="function"?{fromAttribute:u.converter}:((o=u.converter)==null?void 0:o.fromAttribute)!==void 0?u.converter:cv;this._$Em=n,this[n]=c.fromAttribute(e,u.type),this._$Em=null}}requestUpdate(t,e,i){if(t!==void 0){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??K_)(this[t],e))return;this.P(t,e,i)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,e,i){this._$AL.has(t)||this._$AL.set(t,e),i.reflect===!0&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}let t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[o,u]of this._$Ep)this[o]=u;this._$Ep=void 0}let n=this.constructor.elementProperties;if(n.size>0)for(let[o,u]of n)u.wrapped!==!0||this._$AL.has(o)||this[o]===void 0||this.P(o,this[o],u)}let t=!1,e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),(i=this._$EO)==null||i.forEach(n=>{var o;return(o=n.hostUpdate)==null?void 0:o.call(n)}),this.update(e)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(e)}willUpdate(t){}_$AE(t){var e;(e=this._$EO)==null||e.forEach(i=>{var n;return(n=i.hostUpdated)==null?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach(e=>this._$EC(e,this[e])),this._$EU()}updated(t){}firstUpdated(t){}};Yo.elementStyles=[],Yo.shadowRootOptions={mode:"open"},Yo[hl("elementProperties")]=new Map,Yo[hl("finalized")]=new Map,Y_==null||Y_({ReactiveElement:Yo}),(fl.reactiveElementVersions??=[]).push("2.0.4");d();var vv=globalThis,lv=vv.trustedTypes,lM=lv?lv.createPolicy("lit-html",{createHTML:r=>r}):void 0,e0="$lit$",Hi=`lit$${Math.random().toFixed(9).slice(2)}$`,t0="?"+Hi,dre=`<${t0}>`,Qo=vv.document===void 0?{createTreeWalker:()=>({})}:document,vl=()=>Qo.createComment(""),gl=r=>r===null||typeof r!="object"&&typeof r!="function",vM=Array.isArray,gM=r=>vM(r)||typeof(r==null?void 0:r[Symbol.iterator])=="function",X_=`[ 	
\f\r]`,ml=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,dM=/-->/g,pM=/>/g,Ko=RegExp(`>|${X_}(?:([^\\s"'>=/]+)(${X_}*=${X_}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),hM=/'/g,fM=/"/g,yM=/^(?:script|style|textarea|title)$/i,bM=r=>(t,...e)=>({_$litType$:r,strings:t,values:e}),B=bM(1),pSe=bM(2),Jr=Symbol.for("lit-noChange"),yt=Symbol.for("lit-nothing"),mM=new WeakMap,Xo=Qo.createTreeWalker(Qo,129);function _M(r,t){if(!Array.isArray(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return lM!==void 0?lM.createHTML(t):t}var EM=(r,t)=>{let e=r.length-1,i=[],n,o=t===2?"<svg>":"",u=ml;for(let c=0;c<e;c++){let l=r[c],h,f,v=-1,b=0;for(;b<l.length&&(u.lastIndex=b,f=u.exec(l),f!==null);)b=u.lastIndex,u===ml?f[1]==="!--"?u=dM:f[1]!==void 0?u=pM:f[2]!==void 0?(yM.test(f[2])&&(n=RegExp("</"+f[2],"g")),u=Ko):f[3]!==void 0&&(u=Ko):u===Ko?f[0]===">"?(u=n??ml,v=-1):f[1]===void 0?v=-2:(v=u.lastIndex-f[2].length,h=f[1],u=f[3]===void 0?Ko:f[3]==='"'?fM:hM):u===fM||u===hM?u=Ko:u===dM||u===pM?u=ml:(u=Ko,n=void 0);let w=u===Ko&&r[c+1].startsWith("/>")?" ":"";o+=u===ml?l+dre:v>=0?(i.push(h),l.slice(0,v)+e0+l.slice(v)+Hi+w):l+Hi+(v===-2?c:w)}return[_M(r,o+(r[e]||"<?>")+(t===2?"</svg>":"")),i]},yl=class r{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let o=0,u=0,c=t.length-1,l=this.parts,[h,f]=EM(t,e);if(this.el=r.createElement(h,i),Xo.currentNode=this.el.content,e===2){let v=this.el.content.firstChild;v.replaceWith(...v.childNodes)}for(;(n=Xo.nextNode())!==null&&l.length<c;){if(n.nodeType===1){if(n.hasAttributes())for(let v of n.getAttributeNames())if(v.endsWith(e0)){let b=f[u++],w=n.getAttribute(v).split(Hi),x=/([.?@])?(.*)/.exec(b);l.push({type:1,index:o,name:x[2],strings:w,ctor:x[1]==="."?pv:x[1]==="?"?hv:x[1]==="@"?fv:ts}),n.removeAttribute(v)}else v.startsWith(Hi)&&(l.push({type:6,index:o}),n.removeAttribute(v));if(yM.test(n.tagName)){let v=n.textContent.split(Hi),b=v.length-1;if(b>0){n.textContent=lv?lv.emptyScript:"";for(let w=0;w<b;w++)n.append(v[w],vl()),Xo.nextNode(),l.push({type:2,index:++o});n.append(v[b],vl())}}}else if(n.nodeType===8)if(n.data===t0)l.push({type:2,index:o});else{let v=-1;for(;(v=n.data.indexOf(Hi,v+1))!==-1;)l.push({type:7,index:o}),v+=Hi.length-1}o++}}static createElement(t,e){let i=Qo.createElement("template");return i.innerHTML=t,i}};function es(r,t,e=r,i){var u,c;if(t===Jr)return t;let n=i!==void 0?(u=e._$Co)==null?void 0:u[i]:e._$Cl,o=gl(t)?void 0:t._$litDirective$;return(n==null?void 0:n.constructor)!==o&&((c=n==null?void 0:n._$AO)==null||c.call(n,!1),o===void 0?n=void 0:(n=new o(r),n._$AT(r,e,i)),i!==void 0?(e._$Co??=[])[i]=n:e._$Cl=n),n!==void 0&&(t=es(r,n._$AS(r,t.values),n,i)),t}var dv=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){let{el:{content:e},parts:i}=this._$AD,n=((t==null?void 0:t.creationScope)??Qo).importNode(e,!0);Xo.currentNode=n;let o=Xo.nextNode(),u=0,c=0,l=i[0];for(;l!==void 0;){if(u===l.index){let h;l.type===2?h=new pu(o,o.nextSibling,this,t):l.type===1?h=new l.ctor(o,l.name,l.strings,this,t):l.type===6&&(h=new mv(o,this,t)),this._$AV.push(h),l=i[++c]}u!==(l==null?void 0:l.index)&&(o=Xo.nextNode(),u++)}return Xo.currentNode=Qo,n}p(t){let e=0;for(let i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}},pu=class r{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,e,i,n){this.type=2,this._$AH=yt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return e!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=es(this,t,e),gl(t)?t===yt||t==null||t===""?(this._$AH!==yt&&this._$AR(),this._$AH=yt):t!==this._$AH&&t!==Jr&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):gM(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==yt&&gl(this._$AH)?this._$AA.nextSibling.data=t:this.T(Qo.createTextNode(t)),this._$AH=t}$(t){var o;let{values:e,_$litType$:i}=t,n=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=yl.createElement(_M(i.h,i.h[0]),this.options)),i);if(((o=this._$AH)==null?void 0:o._$AD)===n)this._$AH.p(e);else{let u=new dv(n,this),c=u.u(this.options);u.p(e),this.T(c),this._$AH=u}}_$AC(t){let e=mM.get(t.strings);return e===void 0&&mM.set(t.strings,e=new yl(t)),e}k(t){vM(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,i,n=0;for(let o of t)n===e.length?e.push(i=new r(this.S(vl()),this.S(vl()),this,this.options)):i=e[n],i._$AI(o),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,e);t&&t!==this._$AB;){let n=t.nextSibling;t.remove(),t=n}}setConnected(t){var e;this._$AM===void 0&&(this._$Cv=t,(e=this._$AP)==null||e.call(this,t))}},ts=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,n,o){this.type=1,this._$AH=yt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=o,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=yt}_$AI(t,e=this,i,n){let o=this.strings,u=!1;if(o===void 0)t=es(this,t,e,0),u=!gl(t)||t!==this._$AH&&t!==Jr,u&&(this._$AH=t);else{let c=t,l,h;for(t=o[0],l=0;l<o.length-1;l++)h=es(this,c[i+l],e,l),h===Jr&&(h=this._$AH[l]),u||=!gl(h)||h!==this._$AH[l],h===yt?t=yt:t!==yt&&(t+=(h??"")+o[l+1]),this._$AH[l]=h}u&&!n&&this.j(t)}j(t){t===yt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},pv=class extends ts{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===yt?void 0:t}},hv=class extends ts{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==yt)}},fv=class extends ts{constructor(t,e,i,n,o){super(t,e,i,n,o),this.type=5}_$AI(t,e=this){if((t=es(this,t,e,0)??yt)===Jr)return;let i=this._$AH,n=t===yt&&i!==yt||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,o=t!==yt&&(i===yt||n);n&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e;typeof this._$AH=="function"?this._$AH.call(((e=this.options)==null?void 0:e.host)??this.element,t):this._$AH.handleEvent(t)}},mv=class{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){es(this,t)}},wM={P:e0,A:Hi,C:t0,M:1,L:EM,R:dv,D:gM,V:es,I:pu,H:ts,N:hv,U:fv,B:pv,F:mv},Q_=vv.litHtmlPolyfillSupport;Q_==null||Q_(yl,pu),(vv.litHtmlVersions??=[]).push("3.1.4");var SM=(r,t,e)=>{let i=(e==null?void 0:e.renderBefore)??t,n=i._$litPart$;if(n===void 0){let o=(e==null?void 0:e.renderBefore)??null;i._$litPart$=n=new pu(t.insertBefore(vl(),o),o,void 0,e??{})}return n._$AI(r),n};d();d();d();d();var OM=class{get shadowRoot(){return this.__host.__shadowRoot}constructor(t){this.ariaAtomic="",this.ariaAutoComplete="",this.ariaBraileLabel="",this.ariaBraileRoleDescription="",this.ariaBusy="",this.ariaChecked="",this.ariaColCount="",this.ariaColIndex="",this.ariaColSpan="",this.ariaCurrent="",this.ariaDescription="",this.ariaDisabled="",this.ariaExpanded="",this.ariaHasPopup="",this.ariaHidden="",this.ariaInvalid="",this.ariaKeyShortcuts="",this.ariaLabel="",this.ariaLevel="",this.ariaLive="",this.ariaModal="",this.ariaMultiLine="",this.ariaMultiSelectable="",this.ariaOrientation="",this.ariaPlaceholder="",this.ariaPosInSet="",this.ariaPressed="",this.ariaReadOnly="",this.ariaRequired="",this.ariaRoleDescription="",this.ariaRowCount="",this.ariaRowIndex="",this.ariaRowSpan="",this.ariaSelected="",this.ariaSetSize="",this.ariaSort="",this.ariaValueMax="",this.ariaValueMin="",this.ariaValueNow="",this.ariaValueText="",this.role="",this.form=null,this.labels=[],this.states=new Set,this.validationMessage="",this.validity={},this.willValidate=!0,this.__host=t}checkValidity(){return console.warn("`ElementInternals.checkValidity()` was called on the server.This method always returns true."),!0}reportValidity(){return!0}setFormValue(){}setValidity(){}};var xM=new WeakMap,bl=r=>{let t=xM.get(r);return t===void 0&&xM.set(r,t=new Map),t},pre=class{constructor(){this.__shadowRootMode=null,this.__shadowRoot=null,this.__internals=null}get attributes(){return Array.from(bl(this)).map(([t,e])=>({name:t,value:e}))}get shadowRoot(){return this.__shadowRootMode==="closed"?null:this.__shadowRoot}setAttribute(t,e){bl(this).set(t,String(e))}removeAttribute(t){bl(this).delete(t)}toggleAttribute(t,e){if(this.hasAttribute(t)){if(e===void 0||!e)return this.removeAttribute(t),!1}else return e===void 0||e?(this.setAttribute(t,""),!0):!1;return!0}hasAttribute(t){return bl(this).has(t)}attachShadow(t){let e={host:this};return this.__shadowRootMode=t.mode,t&&t.mode==="open"&&(this.__shadowRoot=e),e}attachInternals(){if(this.__internals!==null)throw new Error("Failed to execute 'attachInternals' on 'HTMLElement': ElementInternals for the specified element was already attached.");let t=new OM(this);return this.__internals=t,t}getAttribute(t){return bl(this).get(t)??null}};var hre=class extends pre{},TM=hre;var fre=class{constructor(){this.__definitions=new Map}define(t,e){if(this.__definitions.has(t))if(g.NODE_ENV==="development")console.warn(`'CustomElementRegistry' already has "${t}" defined. This may have been caused by live reload or hot module replacement in which case it can be safely ignored.
Make sure to test your application with a production build as repeat registrations will throw in production.`);else throw new Error(`Failed to execute 'define' on 'CustomElementRegistry': the name "${t}" has already been used with this registry`);this.__definitions.set(t,{ctor:e,observedAttributes:e.observedAttributes??[]})}get(t){let e=this.__definitions.get(t);return e==null?void 0:e.ctor}},mre=fre;var CM=new mre;d();var _l=globalThis,gv=_l.ShadowRoot&&(_l.ShadyCSS===void 0||_l.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r0=Symbol(),PM=new WeakMap,El=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==r0)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(gv&&t===void 0){let i=e!==void 0&&e.length===1;i&&(t=PM.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&PM.set(e,t))}return t}toString(){return this.cssText}},AM=r=>new El(typeof r=="string"?r:r+"",void 0,r0),ae=(r,...t)=>{let e=r.length===1?r[0]:t.reduce((i,n,o)=>i+(u=>{if(u._$cssResult$===!0)return u.cssText;if(typeof u=="number")return u;throw Error("Value passed to 'css' function must be a 'css' function result: "+u+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+r[o+1],r[0]);return new El(e,r,r0)},i0=(r,t)=>{if(gv)r.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let e of t){let i=document.createElement("style"),n=_l.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=e.cssText,r.appendChild(i)}},yv=gv||_l.CSSStyleSheet===void 0?r=>r:r=>r instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return AM(e)})(r):r;var{is:vre,defineProperty:gre,getOwnPropertyDescriptor:yre,getOwnPropertyNames:bre,getOwnPropertySymbols:_re,getPrototypeOf:Ere}=Object,Sl=globalThis;Sl.customElements??=CM;var IM=Sl.trustedTypes,wre=IM?IM.emptyScript:"",n0=Sl.reactiveElementPolyfillSupport,wl=(r,t)=>r,o0={toAttribute(r,t){switch(t){case Boolean:r=r?wre:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,t){let e=r;switch(t){case Boolean:e=r!==null;break;case Number:e=r===null?null:Number(r);break;case Object:case Array:try{e=JSON.parse(r)}catch{e=null}}return e}},LM=(r,t)=>!vre(r,t),MM={attribute:!0,type:String,converter:o0,reflect:!1,hasChanged:LM};Symbol.metadata??=Symbol("metadata"),Sl.litPropertyMetadata??=new WeakMap;var Vi=class extends(globalThis.HTMLElement??TM){static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=MM){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){let i=Symbol(),n=this.getPropertyDescriptor(t,i,e);n!==void 0&&gre(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){let{get:n,set:o}=yre(this.prototype,t)??{get(){return this[e]},set(u){this[e]=u}};return{get(){return n==null?void 0:n.call(this)},set(u){let c=n==null?void 0:n.call(this);o.call(this,u),this.requestUpdate(t,c,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??MM}static _$Ei(){if(this.hasOwnProperty(wl("elementProperties")))return;let t=Ere(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(wl("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(wl("properties"))){let e=this.properties,i=[...bre(e),..._re(e)];for(let n of i)this.createProperty(n,e[n])}let t=this[Symbol.metadata];if(t!==null){let e=litPropertyMetadata.get(t);if(e!==void 0)for(let[i,n]of e)this.elementProperties.set(i,n)}this._$Eh=new Map;for(let[e,i]of this.elementProperties){let n=this._$Eu(e,i);n!==void 0&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t)){let i=new Set(t.flat(1/0).reverse());for(let n of i)e.unshift(yv(n))}else t!==void 0&&e.push(yv(t));return e}static _$Eu(t,e){let i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(e=>e(this))}addController(t){var e;(this._$EO??=new Set).add(t),this.renderRoot!==void 0&&this.isConnected&&((e=t.hostConnected)==null||e.call(t))}removeController(t){var e;(e=this._$EO)==null||e.delete(t)}_$E_(){let t=new Map,e=this.constructor.elementProperties;for(let i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){let t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return i0(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(e=>{var i;return(i=e.hostConnected)==null?void 0:i.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(e=>{var i;return(i=e.hostDisconnected)==null?void 0:i.call(e)})}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){var o;let i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(n!==void 0&&i.reflect===!0){let u=(((o=i.converter)==null?void 0:o.toAttribute)!==void 0?i.converter:o0).toAttribute(e,i.type);this._$Em=t,u==null?this.removeAttribute(n):this.setAttribute(n,u),this._$Em=null}}_$AK(t,e){var o;let i=this.constructor,n=i._$Eh.get(t);if(n!==void 0&&this._$Em!==n){let u=i.getPropertyOptions(n),c=typeof u.converter=="function"?{fromAttribute:u.converter}:((o=u.converter)==null?void 0:o.fromAttribute)!==void 0?u.converter:o0;this._$Em=n,this[n]=c.fromAttribute(e,u.type),this._$Em=null}}requestUpdate(t,e,i){if(t!==void 0){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??LM)(this[t],e))return;this.P(t,e,i)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,e,i){this._$AL.has(t)||this._$AL.set(t,e),i.reflect===!0&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}let t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[o,u]of this._$Ep)this[o]=u;this._$Ep=void 0}let n=this.constructor.elementProperties;if(n.size>0)for(let[o,u]of n)u.wrapped!==!0||this._$AL.has(o)||this[o]===void 0||this.P(o,this[o],u)}let t=!1,e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),(i=this._$EO)==null||i.forEach(n=>{var o;return(o=n.hostUpdate)==null?void 0:o.call(n)}),this.update(e)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(e)}willUpdate(t){}_$AE(t){var e;(e=this._$EO)==null||e.forEach(i=>{var n;return(n=i.hostUpdated)==null?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach(e=>this._$EC(e,this[e])),this._$EU()}updated(t){}firstUpdated(t){}};Vi.elementStyles=[],Vi.shadowRootOptions={mode:"open"},Vi[wl("elementProperties")]=new Map,Vi[wl("finalized")]=new Map,n0==null||n0({ReactiveElement:Vi}),(Sl.reactiveElementVersions??=[]).push("2.0.4");var ue=class extends Vi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=SM(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Jr}},kM;ue._$litElement$=!0,ue.finalized=!0,(kM=globalThis.litElementHydrateSupport)==null||kM.call(globalThis,{LitElement:ue});var s0=globalThis.litElementPolyfillSupport;s0==null||s0({LitElement:ue});(globalThis.litElementVersions??=[]).push("4.0.6");d();d();d();var ge=r=>(t,e)=>{e!==void 0?e.addInitializer(()=>{customElements.define(r,t)}):customElements.define(r,t)};d();d();d();d();d();d();d();d();d();var rs=class extends ue{render(){return B` <div>Hello from SuperViz, ${this.name}</div> `}};rs.properties={name:{type:String}},rs.styles=ae`
    div {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: black;
      color: white;
    }
  `,rs=he([ge("superviz-hello-world")],rs);d();d();d();d();var a0=ae`
  * {
    --sv-primary: 98, 16, 204;
    --sv-primary-900: 56, 7, 136;
    --sv-primary-200: 193, 161, 234;
    --sv-secondary: 193, 251, 223;
    --sv-gray: 126, 122, 136;
    --sv-success: 12, 185, 71;
    --sv-danger: 229, 65, 30;
    --sv-black: 19, 18, 21;
    --sv-white: 255, 255, 255;
    --sv-gray-100: 250, 250, 252;
    --sv-gray-200: 233, 229, 239;
    --sv-gray-300: 201, 196, 209;
    --sv-gray-400: 174, 169, 184;
    --sv-gray-500: 126, 122, 136;
    --sv-gray-600: 87, 83, 95;
    --sv-gray-700: 57, 54, 62;
    --sv-gray-800: 38, 36, 42;
  }

  .sv-gray-200 {
    color: rgb(var(--sv-gray-200));
  }

  .sv-gray-400 {
    color: rgb(var(--sv-gray-400));
  }

  .sv-gray-500 {
    color: rgb(var(--sv-gray-500));
  }

  .sv-gray-600 {
    color: rgb(var(--sv-gray-600));
  }

  .sv-gray-700 {
    color: rgb(var(--sv-gray-700));
  }
`;d();var u0=ae`
  .text {
    font-family: Roboto;
    font-size: 12px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px;
  }

  .text-bold {
    font-weight: 700;
  }

  .text-big {
    font-size: 14px;
  }

  .text-small {
    font-size: 10px;
  }
`;d();var c0=ae`
  .sv-hr {
    width: 100%;
    height: 1px;
    background: rgb(var(--sv-gray-200));
    padding: 0px;
    margin: 0px;
    position: relative;
  }
`;d();var l0=ae`
  .icon-button {
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(0, 0, 0, 0);
    border: 0px;
    width: 32px;
    height: 32px;
  }

  .icon-button > superviz-icon {
    display: flex !important;
  }

  .icon-button--xsmall {
    width: 18px;
    height: 18px;
  }

  .icon-button--small {
    width: 24px;
    height: 24px;
  }

  .icon-button--medium {
    width: 32px;
    height: 32px;
  }

  .icon-button--large {
    width: 40px;
    height: 40px;
  }

  .icon-button--clickable {
    cursor: pointer;
    border-radius: 100%;
  }

  .icon-button--clickable:hover:not(.icon-button--no-hover) {
    background: rgb(var(--sv-gray-300));
    transition: 0.25s background-color ease-in;
  }
  
  .icon-button--clickable:focus:not(.icon-button--no-hover) {
    transition: 0.25s background-color ease-in;
    background: rgb(var(--sv-gray-300));
  }
`;var _e=r=>{class t extends r{constructor(){super(...arguments);this.unsubscribeFrom=[];this.useStore=et.bind(this)}connectedCallback(){setTimeout(()=>{var c,l;let n=document.getElementById("superviz-style"),o=this.createCustomColors(),u=document.createElement("style");u.innerHTML=(n==null?void 0:n.innerHTML)||"",(c=this.shadowRoot)==null||c.appendChild(u),o&&((l=this.shadowRoot)==null||l.appendChild(o))}),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribeFrom.forEach(n=>n(this))}createCustomColors(){if(!X.get("colors"))return;let n=document.createElement("style"),o=Object.entries(X.get("colors")).map(([u,c])=>`--${u}: ${c} !important;`).join(" ");return n.innerHTML=`
      * {
        ${o}
      }
    `,n}emitEvent(n,o,u={composed:!0,bubbles:!0}){let c=new CustomEvent(n,{detail:o,...u});this.dispatchEvent(c)}}return t.styles=[a0,u0,c0,l0,r.styles??[]],t};d();var d0=(o=>(o[o.xs=14]="xs",o[o.sm=18]="sm",o[o.md=24]="md",o[o.lg=36]="lg",o[o.xl=44]="xl",o))(d0||{});var RM=_e(ue),Sre=[RM.styles],is=class extends RM{constructor(){super(),this.name="",this.size="md"}get iconSize(){return d0[this.size]}render(){return this.color||="black",B`
      <i
        class="sv-icon sv-icon-${this.name}_${this.suffix??this.size} ${this.color}"
        style="font-size: ${this.iconSize}px"
      ></i>
    `}};is.properties={name:{type:String},size:{type:String},color:{type:String},suffix:{type:String}},is.styles=[Sre,ae`
      div {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: black;
        color: white;
      }

      i,
      i.black {
        color: rgba(var(--sv-gray-600));
      }

      i.white {
        color: white;
      }
    `],is=he([ge("superviz-icon")],is);d();d();d();d();var _v={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ev=r=>(...t)=>({_$litDirective$:r,values:t}),hu=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};var le=Ev(class extends hu{constructor(r){var t;if(super(r),r.type!==_v.ATTRIBUTE||r.name!=="class"||((t=r.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(r){return" "+Object.keys(r).filter(t=>r[t]).join(" ")+" "}update(r,[t]){var i,n;if(this.st===void 0){this.st=new Set,r.strings!==void 0&&(this.nt=new Set(r.strings.join(" ").split(/\s/).filter(o=>o!=="")));for(let o in t)t[o]&&!((i=this.nt)!=null&&i.has(o))&&this.st.add(o);return this.render(t)}let e=r.element.classList;for(let o of this.st)o in t||(e.remove(o),this.st.delete(o));for(let o in t){let u=!!t[o];u===this.st.has(o)||(n=this.nt)!=null&&n.has(o)||(u?(e.add(o),this.st.add(o)):(e.remove(o),this.st.delete(o)))}return Jr}});d();function je(r){let t=document.getElementById(`superviz-${r}-styles`);if(!t)return;let e=new CSSStyleSheet;e.replaceSync(t.textContent),this.shadowRoot.adoptedStyleSheets=[...this.shadowRoot.adoptedStyleSheets,e]}d();var NM=ae`
  .dropdown {
    position: relative;
    z-index: 100;
  }

  .dropdown-content {
    display: flex;
  }

  .select-clicked {
    border: 2px #26489a solid;
  }

  .dropdown-list {
    position: relative;
    z-index: 101;
  }

  .header {
    display: grid;
    grid-template-rows: 1fr 1px;
    align-items: center;
    padding: 0 10px;
    min-height: 42px;
    font-size: 16px;
    color: rgb(var(--sv-gray-600));
  }

  .menu {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    opacity: 0;
    display: none;
    background: #fff;
    padding: 0;
    z-index: 1;
    transition: 0.2s;
    border-radius: 3px;
  }

  .items {
    list-style: none;
    padding: 0;
    color: #9fa5b5;
    margin: 0;
  }

  .text.username {
    font-size: 14px;
    text-align: left;

    display: inline-block;
    vertical-align: middle;
    line-height: normal;
    padding: 8px 0;
  }

  .items li {
    color: rgb(var(--sv-gray-600));
    text-transform: uppercase;
    padding: 0 10px;
    cursor: pointer;
    min-width: 103px;
    min-height: 32px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 5px;
    height: 42px;
  }

  .sv-icon {
    width: 40px;
    height: 40px;
    background-color: red;
  }

  .active {
    background: rgb(var(--sv-gray-200));
  }

  .items li:hover {
    background: rgb(var(--sv-gray-200));
  }

  .menu-open {
    display: block;
    opacity: 1;
    position: fixed;
  }

  .sv-hr {
    width: 100%;
    height: 1px;
    background: rgb(var(--sv-gray-300));
    padding: 0px;
    margin: 0px;
    justify-self: flex-end;
  }

  .option-label {
    white-space: nowrap;
    line-height: 1;
  }

  .who-is-online__controls__item__icon {
    line-height: 1;
  }

  .who-is-online__controls__item {
    align-items: center;
  }

  @media (max-width: 780px) {
    .menu--top-left,
    .menu--top-center,
    .menu--top-right {
      bottom: 36px;
    }
  }
`;var FM=_e(ue),Ore=[FM.styles,NM],ns=class extends FM{constructor(){super();this.menu=void 0;this.onClickOutDropdown=e=>{if(e.stopPropagation(),!this.open)return;let i=e.composedPath(),n=this.shadowRoot.querySelector(".dropdown-content"),o=this.shadowRoot.querySelector(".dropdown-list"),c=this.shadowRoot.querySelector('slot[name="dropdown"]').assignedElements()[0],l=i.includes(n),h=i.includes(o),f=i.includes(c);l||h||f||this.close()};this.close=()=>{this.open=!1,this.emitEvent("close",{bubbles:!1,composed:!1})};this.callbackSelected=({label:e})=>{this.open=!1,this.emitEvent("selected",{...this.returnData,label:e},{bubbles:!1,composed:!0})};this.adjustPosition=()=>{if(!this.open){cancelAnimationFrame(this.animationFrame);return}this.setHorizontalPosition(),this.setPositionVertical(),this.animationFrame=requestAnimationFrame(this.adjustPosition)};this.tooltip=()=>{if(!this.canShowTooltip)return"";let e=this.lastParticipant?"tooltip-top":"tooltip-bottom";return B` <superviz-tooltip
      tooltipData=${JSON.stringify(this.tooltipData)}
      ?shiftTooltipLeft=${this.shiftTooltipLeft}
      tooltipVerticalPosition=${e}
      classesPrefix="${this.tooltipPrefix}__tooltip"
      parentComponent=${this.parentComponent}
    ></superviz-tooltip>`};this.showTooltip=!1,this.returnData={}}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{this.menu=this.shadowRoot.querySelector(".menu"),je.call(this,[this.parentComponent])})}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this.onClickOutDropdown);let e=this.shadowRoot.querySelector(".dropdown");e==null||e.removeEventListener("mouseenter",()=>{this.showTooltip=!0}),e==null||e.removeEventListener("mouseleave",()=>{this.showTooltip=!1})}updated(e){if(e.has("open")){if(this.emitEvent("toggle-dropdown-state",{open:this.open,font:this.name},{bubbles:!1,composed:!1}),this.open){document.addEventListener("click",this.onClickOutDropdown),this.animationFrame=requestAnimationFrame(this.adjustPosition);return}document.removeEventListener("click",this.onClickOutDropdown)}}setHorizontalPosition(){let e=this.shadowRoot.querySelector('slot[name="dropdown"]'),{left:i,right:n,width:o}=e.parentElement.getBoundingClientRect(),{width:u}=this.menu.getBoundingClientRect(),c=i-(u-o)/2<0,l=n+(u-o)/2>window.innerWidth;if(this.shiftTooltipLeft){this.menu.style.left=`${i+8}px`,this.menu.style.right="",this.menu.style.transform="translate(0, 0)";return}if(!c&&!l){this.menu.style.left=`${i}px`,this.menu.style.right="",this.menu.style.transform=`translate(calc(-50% + ${o/2}px), 0)`;return}if(!c){this.menu.style.left="",this.menu.style.right=`${window.innerWidth-n}px`,this.menu.style.transform="translate(0, 0)";return}l||(this.menu.style.right="",this.menu.style.left=`${n-o}px`,this.menu.style.transform="translate(0, 0)")}setPositionVertical(){let e=this.shadowRoot.querySelector('slot[name="dropdown"]'),{top:i,bottom:n}=e.parentElement.getBoundingClientRect(),{height:o}=this.menu.getBoundingClientRect(),u=this.shiftTooltipLeft?-2:8;if(!(n+o+u>window.innerHeight)){this.menu.style.bottom="",this.menu.style.top=`${n+u}px`;return}this.menu.style.top="auto",this.menu.style.bottom=`${window.innerHeight-i+u}px`}get renderHeader(){return this.name?B` <div class="header ${this.getClass("header")}">
      <span class="text username ${this.getClass("title")}">${this.name}</span>
      <span class="sv-hr ${this.getClass("divisor")}"></span>
    </div>`:B``}toggle(){this.disabled||(this.open=!this.open,this.emitEvent("open",{open:this.open}))}getIcon(e){if(e)return B`
      <span class=${this.getClass("item__icon")}>
        <superviz-icon name="${e}" size="sm"></superviz-icon>
      </span>
    `}getLabel(e){return B`<span class="option-label ${this.getClass("item__label")}">${e}</span>`}get listOptions(){return this.options.map(({label:e,icon:i,active:n})=>{let o={text:!0,[this.getClass("item")]:!0,"text-bold":!0,active:n};return B`<li @click=${()=>this.callbackSelected({label:e})} class=${le(o)}>
        ${this.getIcon(i)} ${this.getLabel(e)}
      </li>`})}getClass(e){return`${this.classesPrefix}__${e}`}render(){let e={menu:!0,"menu-open":this.open,"menu-left":this.align==="left","menu-right":this.align==="right","who-is-online-dropdown":this.name};return B`
      <div class="dropdown">
        <div class="dropdown-content" @click=${this.toggle}>
          <slot name="dropdown"></slot>
        </div>
        ${this.tooltip()}
      </div>
      <div class="dropdown-list">
        <div class=${le(e)}>
          ${this.renderHeader}
          <ul class="${this.getClass("items")} items">
            ${this.listOptions}
          </ul>
        </div>
      </div>
    `}};ns.styles=Ore,ns.properties={open:{type:Boolean},disabled:{type:Boolean},align:{type:String},options:{type:Array},icons:{type:Array},name:{type:String},tooltipData:{type:Object},showTooltip:{type:Boolean},dropdown:{type:Object},canShowTooltip:{type:Boolean},drodpdownSizes:{type:Object},shiftTooltipLeft:{type:Boolean},lastParticipant:{type:Boolean},classesPrefix:{type:String},parentComponent:{type:String},tooltipPrefix:{type:String},returnData:{type:Object}},ns=he([ge("superviz-dropdown")],ns);d();d();var DM=ae`
  .superviz-who-is-online__tooltip {
    --host-height: 0px;
    --host-width: 0px;
    --vertical-offset: 12px;

    background-color: rgb(var(--sv-gray-600));
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-items: center;
    position: fixed;
    opacity: 0;
    border-radius: 2px;
    cursor: default;
    visibility: hidden;
    transition: opacity 0.2s ease-in-out display 0s;
    z-index: 100;
    overflow-x: clip;
  }

  .superviz-who-is-online__tooltip-arrow {
    width: 13px;
    height: 13px;
    position: absolute;
    background-color: rgb(var(--sv-gray-600));
    transform: rotate(45deg);
    border-top-left-radius: 1px;
    border-bottom-right-radius: 1px;
  }

  .show-tooltip {
    opacity: 1;
    visibility: visible;
  }

  .tooltip-name,
  .tooltip-action {
    margin: 0;
    font-family: roboto;
    white-space: nowrap;
    text-align: center;
    line-height: 1.2;
  }

  .tooltip-name {
    color: white;
    font-size: 14px;
  }

  .tooltip-action {
    color: rgb(var(--sv-gray-400));
    font-size: 12px;
  }

  .tooltip-top {
    bottom: calc(var(--host-height) + var(--vertical-offset));
  }

  .tooltip-bottom {
    bottom: auto;
  }

  .tooltip-center {
    right: auto;
  }

  .tooltip-bottom .superviz-who-is-online__tooltip-arrow {
    top: -6.5px;
  }

  .tooltip-top .superviz-who-is-online__tooltip-arrow {
    bottom: -6.5px;
  }

  .tooltip-center .superviz-who-is-online__tooltip-arrow {
    left: 0;
    margin-left: 50%;
    translate: -50% 0;
  }

  .tooltip-left .superviz-who-is-online__tooltip-arrow {
    translate: 50% 0;
    border-radius: 0;
    right: 0;
  }

  .tooltip-right .superviz-who-is-online__tooltip-arrow {
    translate: -50% 0;
    border-radius: 0;
    left: 0;
  }

  .shift-left {
    --vertical-offset: 2px;
  }
`;d();var qM=_e(ue),xre=[qM.styles,DM],os=class extends qM{constructor(){super();this.positionFixedTooltip=()=>{var C,I,A,j,N;if(!this.canAnimate||!this.parentElement){this.hide();return}this.adjustTooltipPosition();let{bottom:e,left:i,width:n,right:o,top:u}=this.parentElement.getBoundingClientRect(),{width:c}=this.tooltip.getBoundingClientRect(),l="auto",h="auto",f="auto",v="auto",b="",w=window.innerWidth>780,x=w?14:12;this.tooltipHorizontalPosition.includes("right")&&(f=`${i+n/2}px`),this.tooltipHorizontalPosition.includes("left")&&(v=`${window.innerWidth-(o-n/2)}px`),this.tooltipHorizontalPosition.includes("center")&&(f=`${i}px`,b=`translateX(-${(c-n)/2}px)`),this.tooltipVerticalPosition.includes("bottom")&&(l=`${e+x}px`,x=-10),this.tooltipVerticalPosition.includes("top")&&(h=`${window.innerHeight-(u-x)}px`,x=10),this.shiftTooltipLeft&&(b=`translate(-${(c-(w?18:10)-42)/2}px, ${x}px)`),(C=this.tooltip)==null||C.style.setProperty("top",l),(I=this.tooltip)==null||I.style.setProperty("left",f),(A=this.tooltip)==null||A.style.setProperty("right",v),(j=this.tooltip)==null||j.style.setProperty("bottom",h),(N=this.tooltip)==null||N.style.setProperty("transform",b),this.animationFrame=window.requestAnimationFrame(this.positionFixedTooltip)};this.hide=()=>{this.canAnimate=!1,this.showTooltip=!1,window.cancelAnimationFrame(this.animationFrame)};this.show=()=>{this.canAnimate=!0,this.showTooltip=!0,this.positionFixedTooltip()};this.adjustTooltipVerticalPosition=()=>{let{bottom:e,top:i,width:n}=this.tooltip.getBoundingClientRect(),o=window.innerHeight;if(this.tooltipVerticalPosition.includes("top")&&i<0){this.tooltipVerticalPosition=this.tooltipVerticalPosition.replace("top","bottom");return}this.tooltipVerticalPosition.includes("bottom")&&e>o&&(this.tooltipVerticalPosition=this.tooltipVerticalPosition.replace("bottom","top"))};this.adjustTooltipHorizontalPosition=()=>{let{left:e,right:i,width:n}=this.tooltip.getBoundingClientRect(),o=window.innerWidth,{left:u,width:c,right:l}=this.parentElement.getBoundingClientRect(),h=u+c/2-n/2>0,f=n/2+l-c/2<o;if(h&&f){this.tooltipHorizontalPosition=this.tooltipHorizontalPosition.replace(/left|right/,"center");return}if(e<0){this.tooltipHorizontalPosition=this.tooltipHorizontalPosition.replace("center","right");return}i>o&&(this.tooltipHorizontalPosition=this.tooltipHorizontalPosition.replace("center","left"))};this.adjustTooltipPosition=()=>{if(!this.parentElement){this.hide();return}this.tooltip||(this.tooltip=this.shadowRoot.querySelector(".superviz-who-is-online__tooltip")),this.adjustTooltipVerticalPosition(),this.adjustTooltipHorizontalPosition()};this.tooltipVerticalPosition="tooltip-bottom",this.tooltipHorizontalPosition="tooltip-center",this.showTooltip=!1,this.parentSizes={height:0,width:0}}firstUpdated(e){let{parentElement:i}=this;i==null||i.addEventListener("mouseenter",this.show),i==null||i.addEventListener("mouseleave",this.hide),this.adjustTooltipPosition(),je.call(this,this.parentComponent)}disconnectedCallback(){super.disconnectedCallback();let{parentElement:e}=this;e==null||e.removeEventListener("mouseenter",this.show),e==null||e.removeEventListener("mouseleave",this.hide)}updated(e){if(e.has("showTooltip")&&this.showTooltip){let{parentElement:i}=this;if(!i)return;let{height:n,width:o}=i.getBoundingClientRect();(this.parentSizes.height!==n||this.parentSizes.width!==o)&&(this.parentSizes={height:n,width:o})}}getClass(e){return e?`${this.classesPrefix}__${e}`:this.classesPrefix}renderTooltip(){var o,u,c,l,h;let e=this.tooltipVerticalPosition,i=this.tooltipHorizontalPosition,n={"superviz-who-is-online__tooltip":!0,[this.getClass("")]:!0,[e]:!0,[i]:!0,"tooltip-extras":this.tooltipOnLeft,"show-tooltip":this.showTooltip,"shift-left":this.shiftTooltipLeft};return B`<div
      class=${le(n)}
      style="--host-height: ${(o=this.parentSizes)==null?void 0:o.height}px; --host-width: ${(u=this.parentSizes)==null?void 0:u.width}px;"
    >
      <p class="tooltip-name ${this.getClass("title")}">${(c=this.tooltipData)==null?void 0:c.name}</p>
      ${(l=this.tooltipData)!=null&&l.info?B`<p class="tooltip-action ${this.getClass("action")}">${(h=this.tooltipData)==null?void 0:h.info}</p>`:""}
      <div class="superviz-who-is-online__tooltip-arrow ${this.getClass("")}"></div>
    </div>`}render(){return B`${this.renderTooltip()}`}};os.styles=xre,os.properties={tooltipData:{type:Object},tooltipOnLeft:{type:Boolean},showTooltip:{type:Boolean},tooltip:{type:Object},tooltipVerticalPosition:{type:String},tooltipHorizontalPosition:{type:String},parentSizes:{type:Object},shiftTooltipLeft:{type:Boolean},classesPrefix:{type:String},parentComponent:{type:String}},os=he([ge("superviz-tooltip")],os);d();d();d();var wv=ae`
  .modal--overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(var(--sv-gray-400), 0.8);

    z-index: 999;
  }

  .modal--container {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: transparent;

    z-index: 1000;
  }

  .modal--container > .modal {
    background: #fff;
    min-width: 370px;
    min-height: 150px;
    border-radius: 6px;
  }

  .modal--container > .modal > .modal--header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 16px;
    background: rgb(var(--sv-gray-200));
    border-radius: 6px 6px 0 0;
  }

  .modal--container > .modal > .modal--header > .text {
    display: flex;
    align-items: center;
  }

  .modal--container > .modal > .modal--header > .close {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: rgb(var(--sv-gray-600));
    cursor: pointer;
  }

  .modal--container > .modal > .modal--body {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px 24px 0 24px;
  }

  .modal--container > .modal > .modal--body > .modal--body-content {
    padding: 8px 0;
    text-align: center;
  }

  .modal--container > .modal > .modal--footer {
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 24px;
    padding: 24px;
  }

  .btn {
    width: 150px;
    height: 40px;
    text-transform: uppercase;
  }

  .btn--confirm {
    background: rgb(var(--sv-primary));
    border-radius: 4px;
    border: 1px solid rgb(var(--sv-primary));
    color: #fff;
    cursor: pointer;
  }

  .btn--cancel {
    background: transparent;
    border-radius: 4px;
    border: 1px solid rgb(var(--sv-gray-400));
    color: rgb(var(--sv-gray-400));
    cursor: pointer;
  }
`;var $M=_e(ue),Tre=[$M.styles,wv],fu=class extends $M{constructor(){super(...arguments);this.getContainer=()=>window.document.querySelector("superviz-modal-container");this.createContainer=e=>{this.modal=document.createElement("superviz-modal-container"),this.modal.setOptions(e)};this.createModal=({detail:e})=>{this.createContainer(e),window.document.body.appendChild(this.modal)};this.destroyModal=()=>{var e;this.modal=void 0,(e=this.getContainer())==null||e.remove()}}firstUpdated(){window.document.body.addEventListener("superviz-modal--open",this.createModal),window.document.body.addEventListener("superviz-modal--close",this.destroyModal)}disconnectedCallback(){this.destroyModal(),window.document.body.removeEventListener("superviz-modal--open",this.createModal),window.document.body.removeEventListener("superviz-modal--close",this.destroyModal)}};fu.styles=Tre,fu=he([ge("superviz-modal")],fu);d();var BM=_e(ue),Cre=[BM.styles,wv],mu=class extends BM{constructor(){super(...arguments);this.closeModal=()=>{window.document.body.dispatchEvent(new CustomEvent("superviz-modal--close",{bubbles:!0,composed:!0}))};this.confirmModal=()=>{window.document.body.dispatchEvent(new CustomEvent("superviz-modal--confirm",{bubbles:!0,composed:!0}))}}setOptions(e){this.options=e}render(){let e=()=>B`
        <div class="modal--header">
          <span class="text text-bold sv-gray-600">${this.options.title}</span>
          <div class="close" @click=${this.closeModal}>
            <superviz-icon name="close" size="md"></superviz-icon>
          </div>
        </div>
      `,i=()=>B`
        <div class="modal--body">
          <div class="modal--body-content">${this.options.body}</div>
        </div>
      `,n=()=>{if(this.options.footer)return B` <div class="modal--footer">${this.options.footer}</div> `;let o=this.options.confirmLabel||"OK",u=this.options.cancelLabel||"Cancel";return this.options.confirm&&this.options.cancel?B`
          <div class="modal--footer">
            <button class="text text-bold btn btn--cancel" @click=${this.closeModal}>
              ${u}
            </button>
            <button class="text text-bold btn btn--confirm" @click=${this.confirmModal}>
              ${o}
            </button>
          </div>
        `:B`
        <div class="modal--footer">
          <button class="text text-bold btn btn--confirm" @click=${this.confirmModal}>
            ${o}
          </button>
        </div>
      `};return B`
      <div class="modal--overlay"></div>
      <div class="modal--container">
        <div class="modal">${e()} ${i()} ${n()}</div>
      </div>
    `}};mu.styles=Cre,mu=he([ge("superviz-modal-container")],mu);d();d();d();d();var p0=ae`
  .superviz-comments {
    --offset-left: 10px;
    --offset-right: 10px;
    --offset-top: 10px;
    --offset-bottom: 10px;

    display: flex;
    flex-direction: column;
    width: 320px;
    position: fixed;
    color: rgb(var(--sv-gray-700));
    background: rgb(var(--sv-white));
    top: 0px;
    bottom: 0;
    box-shadow: -2px 0 4px 0 rgba(0, 0, 0, 0.1);
    z-index: 100;
    overflow: hidden;
    transition: right 0.3s ease-out;
  }

  .header {
    width: 100%;
  }

  .content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
  }

  .toggle {
    display: flex;
    position: fixed;
    width: 100px;
    color: rgb(var(--sv-gray-700));
    background: rgb(var(--sv-white));
    top: 0;
    right: 0;
    bottom: 0;
  }

  .threads-on-left-side {
    left: var(--offset-left);
    top: var(--offset-top);
    bottom: var(--offset-bottom);
    border-radius: 8px;
  }

  .threads-on-right-side {
    right: var(--offset-right);
    top: var(--offset-top);
    bottom: var(--offset-bottom);
    border-radius: 8px;
  }

  #superviz-comments.threads-on-right-side.hide-at-right {
    right: -330px;
  }

  #superviz-comments.threads-on-left-side.hide-at-left {
    left: -330px;
  }

  .hide-at-right,
  .hide-at-left {
    animation: keep-opacity 0.3s ease-out;
    opacity: 0;
    visibility: hidden;
  }

  @keyframes keep-opacity {
    0%,
    99% {
      visibility: visible;
      opacity: 1;
    }

    100% {
      visibility: hidden;
      opacity: 0;
    }
  }
`;d();var h0=ae`
  .comments__topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: rgb(var(--sv-gray-200));
    height: 50px;
  }

  .comments__topbar__title {
    margin: 0 16px;
    color: rgb(var(--sv-gray-600));
  }

  .comments__topbar__close-threads {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: 0.15s;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    box-sizing: border-box;
    margin-right: 8px;
    padding-right: 2px;
  }

  .comments__topbar__close-threads:hover {
    background: rgb(var(--sv-gray-300));
  }
`;d();var f0=ae`
  .reply {
    padding-left: 24px !important;
  }

  .comments__comment-item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    padding: 8px;
    gap: 4px;
  }

  .comments__comment-item__header {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    width: 100%;
    align-items: center;
    color: rgb(var(--sv-gray-500));
  }

  .comments__comment-item__actions {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .comments__comment-item__actions superviz-dropdown,
  .comments__comment-item__icons {
    width: 25px;
    height: 25px;
    border-radius: 50%;
  }

  .comments__comment-item__metadata {
    display: flex;
    width: 100%;
    gap: 8px;
    align-items: center;
  }

  .comments__comment-item__avatar-container {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    overflow: hidden;
    background-color: rgb(var(--sv-gray-300));
    border: 1px solid rgb(var(--sv-gray-500));
    color: #fff;

    display: flex;
    align-items: center;
    justify-content: center;
  }

  .comments__comment-item__avatar-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 50%;
  }

  .comments__comment-item__content {
    width: 100%;
    word-wrap: break-word;
  }

  .line-clamp {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .comments__comment-item__content__body {
    color: rgb(var(--sv-gray-700));
    position: relative;
    display: grid;
    grid-template-rows: 0px auto;
  }

  .comments__comment-item__content__body.editing-annotation {
    grid-template-rows: auto 0px;
  }

  .hidden {
    display: none;
  }

  .mentioned {
    display: inline-block;
  }

  .annotation-content {
    transition: opacity 0ms;
    opacity: 1;
    overflow: hidden;
  }

  .editing {
    transition: opacity 400ms;
    overflow: hidden;
    opacity: 0;
    pointer-events: none;
  }

  .comments__input--editable {
    transform: translateY(0);
    opacity: 1;
    overflow: hidden;
  }

  .hide-edit-input {
    transition: opacity 500ms, transform 0 linear 300ms;
    opacity: 0;
    pointer-events: none;
    width: 100%;
  }
`;d();var m0=ae`
  .comments {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 288px;
  }

  .hidden {
    display: none;
  }
`;d();var v0=ae`
  .comments__input {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    background: rgb(var(--sv-white));
    border-radius: 4px;
    border: 1px solid rgb(var(--sv-gray-300));
    position: relative;
    min-height: 40px;
    box-sizing: border-box;
  }

  .comments__input:focus-within {
    border: 1px solid rgb(var(--sv-gray-500));
  }

  .comments__input__textarea {
    border: 0px;
    text-align: left;
    border-radius: 4px;
    outline: none;
    font-size: 14px;
    color: rgb(var(--sv-gray-700));
    font-family: Roboto;
    white-space: pre-wrap;
    word-wrap: break-word;
    resize: none;
    line-height: 1.15rem;
    max-height: 5rem;
    appearance: none;
    height: 40px;
    width: 100%;
    box-sizing: border-box;

    padding-top: 7px;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
    border-right: 11px solid transparent;
    border-left: 11px solid transparent;
  }

  .fixed-width {
    width: 288px;
  }

  .comments__input__textarea:invalid {
    border-top: 15px solid transparent;
  }

  .comments__input__textarea::placeholder {
    color: rgb(var(--sv-gray-400));
    font-size: 14px;
    line-height: 14px;
  }

  .comments__input__options {
    display: flex;
    justify-content: space-between;
    box-sizing: border-box;
    overflow: hidden;
    height: 0;
    transition: 0.25s;
    border-radius: 0 0 4px 4px;
  }

  .active-textarea {
    height: 40px;
    padding: 4px 8px;
  }

  .sv-hr {
    border: none;
    width: 100%;
    opacity: 0;
    transition: 0.25s opacity linear, 0.25s visibility;
    visibility: hidden;
    height: 0;
    position: absolute;
  }

  .comments__input__divisor {
    border-top: 1px solid rgb(var(--sv-gray-300));
    opacity: 1;
    position: relative;
    visibility: visible;
  }

  .comment-actions {
    position: absolute;
    left: 8px;
    bottom: 3px;
    opacity: 0;
    transition: 0.25s opacity linear, 0.25s visibility;
    visibility: hidden;
  }

  .active-textarea > .comment-actions {
    opacity: 1;
    visibility: visible;
  }

  .mention:hover {
    background-color: rgb(var(--sv-gray-200));
  }

  .comments__input__button {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 100%;
    width: 32px;
    height: 32px;
    border: 0px;
  }

  .comments__input__send-button {
    background: rgb(var(--sv-primary));
    color: rgba(var(--sv-white), 1);
  }

  .align-send-btn > superviz-icon {
    cursor: pointer;
  }

  .comments__input__button:disabled {
    background: rgb(var(--sv-gray-200));
    color: rgb(var(--sv-gray-600));
  }

  .comment-input-options {
    display: flex;
    gap: 4px;
    position: absolute;
    right: 8px;
    bottom: 4px;
  }

  .comments__input__textarea:focus,
  .comments__input__textarea.active-textarea {
    border-radius: 4px 4px 0 0;
  }

  .comments__input__textarea:focus::placeholder {
    color: transparent;
  }
`;d();var g0=ae`
  .comments__thread:hover:not(.comments__thread--selected) {
    background-color: rgba(var(--sv-gray-200), 0.3);
  }

  .avatars-comments {
    display: flex;
    position: absolute;
    bottom: 8px;
    padding: 0 8px;
    opacity: 1;
    transition: opacity 0.3s linear;
  }

  .avatars-comments.invisible {
    opacity: 0;
  }

  .avatar-container {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
  }

  .avatar {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    overflow: hidden;
    background-color: rgb(var(--sv-gray-300));
    border: 1px solid rgb(var(--sv-gray-500));
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .avatar img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 50%;
  }

  .avatar:not(:first-child) {
    margin-left: -6px;
  }

  .comments__thread--selected div:last-child {
    margin-inline: 8px;
  }

  .comments-container {
    display: flex;
    overflow: hidden;
    flex-direction: column;
  }

  .comments-container-wrapper {
    display: grid;
    grid-template-rows: 0fr;
    opacity: 0;
    overflow: hidden;
    transition: grid-template-rows 0.3s linear, opacity 0.3s linear;
  }

  .comments-container-wrapper.show {
    grid-template-rows: 1fr;
    opacity: 1;
  }

  .comments--expand {
    display: flex;
  }

  .comment-avatar--expand {
    display: block;
  }

  .hidden {
    overflow: hidden;
    opacity: 0;
  }

  .comments__thread {
    grid-row: 1 / span 2;
    padding: 8px;
    position: relative;
    cursor: pointer;
    transition: padding-bottom 0.3s linear, opacity 0.3s linear;
  }

  .extra-space-bottom {
    padding-bottom: 35px;
  }

  .comments__thread--selected {
    background-color: rgba(var(--sv-gray-200), 0.5);
    padding-bottom: 16px;
  }

  .hide-input {
    display: none;
  }

  .wrapper {
    margin-inline: 0;
    display: grid;
    grid-template-rows: 0fr;
    opacity: 0;
    width: 100%;
    transition: grid-template-rows 0.3s linear, opacity 0.3s linear;
  }

  .show-wrapper {
    grid-template-rows: 1fr;
    opacity: 1;
  }

  .comments__complete-annotation {
    position: relative;
    width: 100%;
  }

  .comments__hide-complete-annotation {
    min-height: 0;
    opacity: 0;
    animation: hide-annotation 10s linear;
  }

  @keyframes hide-annotation {
    0%,
    95% {
      min-height: 43px;
      opacity: 1;
    }

    100% {
      opacity: 0;
      min-height: 0;
    }
  }

  .comments__resolved-annotation-message {
    position: absolute;
    width: 100%;
    top: 0;
  }
`;d();var y0=ae`
  .comments__annotation-resolved {
    background: rgba(var(--sv-gray-200), 0.5);
    height: 26px;
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid rgb(var(--sv-gray-200));
  }
`;d();var b0=ae`
  .preload {
    animation-duration: 0s !important;
  }

  .comments__annotation-pin,
  .comments__annotation-pin__avatar {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    pointer-events: auto;
    z-index: 10;
    transform-origin: bottom left;
  }

  .comments__annotation-pin:hover {
    transform: scale(1.2);
    animation: growing-spring 0.3s linear;
  }

  .comments__annotation-pin:not(:hover) {
    animation: shrinking-spring 0.3s linear;
  }

  .comments__annotation-pin--add {
    transform: scale(1) !important;
    animation: none !important;
  }

  .comments__annotation-pin {
    position: absolute;

    width: 32px;
    height: 32px;

    background-color: rgb(var(--sv-white));
    border-radius: 50%;
    border-bottom-left-radius: 2px;

    border: 2px solid rgb(var(--sv-white));
    box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.35);
    transition: border-color 0.2s ease-in-out opacity 0.2s ease-in-out;
    padding: 2px;
    box-sizing: border-box;
    cursor: pointer;
  }

  .comments__annotation-pin:hover,
  .comments__annotation-pin:focus,
  .comments__annotation-pin--active {
    border-color: rgb(var(--sv-primary));
  }

  .comments__cursor-pointer,
  .comments__cursor-pointer .comments__annotation-pin__avatar {
    pointer-events: none;
  }

  .comments__annotation-pin__avatar {
    width: 100%;
    height: 100%;

    background-color: rgb(var(--sv-gray-400));
    border-radius: 50%;

    color: rgb(var(--sv-white));
  }

  .comments__annotation-pin__avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: contain;
  }

  .comments__annotation-pin__avatar--add {
    color: rgb(var(--sv-gray-700));
    background-color: rgb(var(--sv-white));
  }

  .floating-input {
    position: absolute;
    top: -2px;
    opacity: 0;
  }

  .left .floating-input {
    right: auto;
    left: 0;
    transform: translateX(calc(-100% - 7px));
    opacity: 1;
  }

  .right .floating-input {
    left: auto;
    right: 0;
    transform: translateX(calc(100% + 7px));
    opacity: 1;
  }

  .comments__annotation-pin-wrapper {
    transform-origin: center;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    position: absolute;
  }

  .comments__annotation-pin-wrapper--new {
    animation: bounce 0.5s linear !important;
  }

  .comments__annotation-pin-wrapper--new .comments__annotation-pin__avatar {
    transform-origin: center;
    animation: avatar-bounce 0.5s linear !important;
  }

  @keyframes avatar-bounce {
    0%,
    40% {
      transform: scale(1);
    }

    48% {
      transform: scale(0.8);
    }

    55%,
    92% {
      transform: scale(1);
    }

    96% {
      transform: scale(0.9);
    }

    100% {
      transform: scale(1);
    }
  }
  @keyframes bounce {
    0% {
      transform: scale(1);
    }

    20% {
      transform: scale(1.3);
    }

    40%,
    55% {
      transform: scale(1);
    }

    75% {
      transform: scale(1.15);
    }

    92%,
    100% {
      transform: scale(1);
    }
  }

  @keyframes growing-spring {
    0% {
      transform: scale(1);
    }

    25% {
      transform: scale(1.3);
    }

    50% {
      transform: scale(1.2);
    }

    75% {
      transform: scale(1.25);
    }

    100% {
      transform: scale(1.2);
    }
  }

  @keyframes shrinking-spring {
    0% {
      transform: scale(1.2);
    }

    33% {
      transform: scale(1);
    }

    66% {
      transform: scale(1.1);
    }

    100% {
      transform: scale(1);
    }
  }
`;d();var _0=ae`
  .comments__filter-container {
    display: flex;
    width: 100%;
    justify-content: flex-start;
    align-items: center;
  }

  .comments__filter {
    white-space: nowrap;
    padding: 12px;
    cursor: pointer;
    color: rgb(var(--sv-gray-500));
  }

  .content {
    display: flex;
    justify-content: space-between;
    flex-direction: row;
    align-items: center;
    gap: 6px;
  }

  .comments__filter__toggle-button {
    display: flex;
    flex-direction: row;
    gap: 4px;
  }

  .comments__filter__icon {
    margin-top: -2px;
  }
`;d();var E0=ae`
  .comments__floating-button {
    position: fixed;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    display: flex;
    align-items: center;
    gap: 4px;
    border: none;
    background-color: rgba(var(--sv-white));
    box-shadow: 2px 2px 15px 0px rgba(0, 0, 0, 0.2);
    color: rgb(var(--sv-gray-600));
    cursor: pointer;
    overflow: hidden;
    padding-left: 10px;
    z-index: 99;
    transition: width 300ms linear, border-radius 300ms linear;
  }

  .comments__floating-button:hover,
  .comments__floating-button.is-active {
    background-color: rgb(var(--sv-gray-400));
    color: rgba(var(--sv-white));
  }

  .comments-floating-button-hovered {
    transition: width 300ms linear 300ms, border-radius 300ms linear 300ms;
  }

  .comments__floating-button__text {
    text-align: left;
    overflow: hidden;
    position: relative;
    margin: 0;
    line-height: 1;
    right: 0px;
  }

  .not-hovered {
    animation-duration: 0s !important;
    transition-duration: 0s !important;
  }

  .hide-button {
    display: none !important;
  }

  .is-inactive:hover {
    width: 110px;
    border-radius: 30px;
  }

  .is-active:hover {
    width: 92px;
    border-radius: 30px;
    animation: decrease-width 600ms linear;
  }

  .textInactive.cancel {
    position: absolute;
    bottom: -30px;
    animation: drop-cancel-text 600ms linear;
    right: auto;
  }

  .textInactive.comment {
    position: absolute;
    top: 0;
    animation: drop-comment-text 600ms linear;
  }

  .textActive.comment {
    position: absolute;
    top: -30px;
    animation: rise-comment-text 600ms linear;
    right: auto;
  }

  .textActive.cancel {
    position: absolute;
    bottom: 0;
    animation: rise-cancel-text 600ms linear;
  }

  .comments__floating-button .comments__floating-button-text-box {
    width: 0;
  }

  .comments__floating-button.is-inactive:hover .comments__floating-button-text-box {
    width: 61.45px;
  }

  .comments__floating-button.is-active:hover .comments__floating-button-text-box {
    width: 43.0833px;
  }

  .comments__floating-button-text-box {
    position: relative;
    height: 14px;
    overflow-x: clip;
    transition: width 300ms linear;
  }

  .comments__floating-button__icon {
    position: relative;
  }

  .cross {
    position: absolute;
    top: 9px;
    left: 5.3px;
    transform: translateY(-50%);
    transform-origin: center;
    transition: transform 300ms linear 300ms;
  }

  rect {
    fill: rgba(var(--sv-gray-600));
  }

  .comments__floating-button:hover rect,
  .is-active rect {
    fill: rgba(var(--sv-white));
  }

  .cross-bar-1 {
    transform-origin: center;
    transform: rotate(0deg);
  }

  .cross-bar-2 {
    transform-origin: center;
    transform: rotate(90deg);
  }

  .is-active .cross {
    transform: translateY(-50%) rotate(45deg);
  }

  @keyframes rise-cancel-text {
    0%,
    50% {
      opacity: 0;
      bottom: -35px;
    }

    75% {
      opacity: 0;
    }

    100% {
      opacity: 1;
      bottom: 0px;
    }
  }

  @keyframes rise-comment-text {
    0% {
      opacity: 1;
      top: 0px;
    }

    35% {
      opacity: 0;
    }

    50%,
    100% {
      opacity: 0;
      top: -35px;
    }
  }

  @keyframes drop-cancel-text {
    0% {
      opacity: 1;
      bottom: 0px;
    }

    35% {
      opacity: 0;
    }

    50%,
    100% {
      opacity: 0;
      bottom: -30px;
    }
  }

  @keyframes drop-comment-text {
    0%,
    50% {
      opacity: 0;
      top: -30px;
    }

    75% {
      opacity: 0;
    }

    100% {
      opacity: 1;
      top: 0px;
    }
  }
`;d();var w0=ae`
.footer {
  bottom: 5px;
  position: absolute;
  right: 5px;
  font-family: Roboto,sans-serif;
  font-size: 10px;
  line-height: 15px;
  letter-spacing: normal;
}

.link {
  text-decoration: none;
  color: rgb(var(--sv-gray-500));
}

.powered-by {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  width: 140px;
  &--vertical {
    justify-content: flex-end;
  }
  &--horizontal {
    justify-content: center;
  }
}
`;d();var S0=ae`
  #mention-list {
    position: fixed;
    z-index: 1;
    max-height: 200px;
    overflow-y: auto;
    overflow-x: hidden;
    background-color: white;
    display: none;
    width: 216px;
    text-align: -webkit-center;
    border-radius: 2px;
    box-shadow: 2px 2px 8px 0px rgba(0, 0, 0, 0.3);
    padding-top: 4px;
    padding-bottom: 4px;
    /* Stiling scroll WebKit (Firefox) */
    scrollbar-width: 6px; /* Firefox */
    scrollbar-color: #888; /* Firefox */
    /* Style scroll WebKit (Chrome, Safari, Edge) */
    &::-webkit-scrollbar {
      width: 6px;
    }
    &::-webkit-scrollbar-thumb {
      background-color: #888;
    }
  }

  .mention-item {
    cursor: pointer;
    align-items: center;
    display: flex;
    height: 48px;
    width: 208px;
    margin-left: 4px;
    margin-right: 4px;
  }

  .mention-item:hover {
    background: rgb(var(--sv-gray-200));
  }

  .avatar {
    width: 32px;
    height: 32px;
    object-fit: contain;
    border-radius: 32%;
    margin-right: 14px;
    margin-left: 12px;
  }

  .default-avatar {
    width: 32px;
    height: 32px;
    margin-right: 14px;
    margin-left: 12px;
    border-radius: 50%;
    overflow: hidden;
    background-color: rgb(var(--sv-gray-300));
    border: 1px solid rgb(var(--sv-gray-500));
    color: #fff;

    display: flex;
    align-items: center;
    justify-content: center;
  }

  .avatar-type {
    font-family: Roboto;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px;
    color: rgb(var(--sv-gray-600));
  }
`;d();var O0;function x0(r){let t=r.querySelector("#superviz-comments");if(t&&!O0){let e={childList:!0,attributes:!0,characterData:!0,subtree:!0};O0=new MutationObserver(i=>{i.forEach(n=>{n.removedNodes.length&&n.removedNodes.forEach(o=>{o.id==="poweredby-footer"&&Pre(r)})})}),O0.observe(t,e)}}function Pre(r){let t=document.createElement("div");t.id="poweredby-footer",t.className="footer";let e=document.createElement("div");e.className="powered-by powered-by--horizontal";let i=document.createElement("a");i.href="https://superviz.com/",i.target="_blank",i.className="link";let n=document.createElement("div");n.textContent="Powered by";let o=document.createElement("img");o.width=48,o.height=8.86,o.src="https://production.cdn.superviz.com/static/superviz-gray-logo.svg",e.appendChild(i),i.appendChild(n),n.appendChild(o),t.appendChild(e);let u=r.getElementById("superviz-comments");u&&u.appendChild(t),x0(r)}var jM=_e(ue),Are=[jM.styles,p0,w0],ss=class extends jM{constructor(){super(),this.annotations=[],this.annotationFilter="All comments",this.waterMarkState=!1,this.participantsList=[],this.side="left"}firstUpdated(t){super.firstUpdated(t),this.updateComplete.then(()=>{je.call(this,["comments"])})}updated(t){super.updated(t),this.updateComplete.then(()=>{this.waterMarkState&&x0(this.shadowRoot),t.has("offset")&&this.applyOffset()})}participantsListed(t){this.participantsList=t}updateAnnotations(t){this.annotations=t}close(){this.emitEvent("close-threads",{})}waterMarkStatus(t){this.waterMarkState=t}setFilter({detail:t}){let{filter:{label:e}}=t;this.annotationFilter=e}getOffset(t){return t==null||t<0?"10px":`${t}px`}applyOffset(){let t=this.shadowRoot.querySelector(".superviz-comments");if(!t)return;let{left:e,right:i,top:n,bottom:o}=this.offset;t.style.setProperty("--offset-top",this.getOffset(n)),t.style.setProperty("--offset-bottom",this.getOffset(o)),t.style.setProperty("--offset-right",this.getOffset(i)),t.style.setProperty("--offset-left",this.getOffset(e))}get poweredBy(){return this.waterMarkState?B` <div id="poweredby-footer" class="footer">
      <div class="powered-by powered-by--horizontal">
        <a href="https://superviz.com/" target="_blank" class="link">
          <div class="">
            Powered by
            <img
              width="48px"
              height="8.86px"
              src="https://production.cdn.superviz.com/static/superviz-gray-logo.svg"
            />
          </div>
        </a>
      </div>
    </div>`:B``}render(){let t={"superviz-comments":!0,"threads-on-left-side":this.side==="left","threads-on-right-side":this.side==="right","hide-at-right":this.side==="right"&&!this.open,"hide-at-left":this.side==="left"&&!this.open};return B`
      <div id="superviz-comments" class=${le(t)}>
        <div class="header">
          <superviz-comments-topbar
            @close-threads=${this.close}
            side=${this.side.split(":")[0]}
          ></superviz-comments-topbar>
        </div>
        <superviz-comments-annotation-filter
          filter=${this.annotationFilter}
          @select=${this.setFilter}
        >
        </superviz-comments-annotation-filter>
        <superviz-comments-content
          annotations=${JSON.stringify(this.annotations)}
          annotationFilter=${this.annotationFilter}
          participantsList=${JSON.stringify(this.participantsList)}
          class="content"
        ></superviz-comments-content>
        ${this.poweredBy}
      </div>
    `}};ss.styles=Are,ss.properties={open:{type:Boolean},annotations:{type:Object},annotationFilter:{type:String},waterMarkState:{type:Boolean},side:{type:String},participantsList:{type:Object},offset:{type:Object}},ss=he([ge("superviz-comments")],ss);d();d();var Ire=_e(ue),Mre=[Ire.styles,h0],as=class extends _e(ue){firstUpdated(t){super.firstUpdated(t),this.updateComplete.then(()=>{je.call(this,["comments"])})}close(){this.dispatchEvent(new CustomEvent("close-threads"))}render(){return B`
      <div class="comments__topbar">
        <span class="text text-bold comments__topbar__title">COMMENTS</span>
        <span @click=${this.close} class="comments__topbar__close-threads">
          <superviz-icon name=${this.side}></superviz-icon>
        </span>
      </div>
    `}};as.styles=Mre,as.properties={side:{type:String}},as=he([ge("superviz-comments-topbar")],as);d();d();d();d();var{I:Lre}=wM;var WM=()=>document.createComment(""),vu=(r,t,e)=>{var o;let i=r._$AA.parentNode,n=t===void 0?r._$AB:t._$AA;if(e===void 0){let u=i.insertBefore(WM(),n),c=i.insertBefore(WM(),n);e=new Lre(u,c,r,r.options)}else{let u=e._$AB.nextSibling,c=e._$AM,l=c!==r;if(l){let h;(o=e._$AQ)==null||o.call(e,r),e._$AM=r,e._$AP!==void 0&&(h=r._$AU)!==c._$AU&&e._$AP(h)}if(u!==n||l){let h=e._$AA;for(;h!==u;){let f=h.nextSibling;i.insertBefore(h,n),h=f}}}return e},Wn=(r,t,e=r)=>(r._$AI(t,e),r),kre={},UM=(r,t=kre)=>r._$AH=t,HM=r=>r._$AH,Ov=r=>{var i;(i=r._$AP)==null||i.call(r,!1,!0);let t=r._$AA,e=r._$AB.nextSibling;for(;t!==e;){let n=t.nextSibling;t.remove(),t=n}};var VM=(r,t,e)=>{let i=new Map;for(let n=t;n<=e;n++)i.set(r[n],n);return i},Un=Ev(class extends hu{constructor(r){if(super(r),r.type!==_v.CHILD)throw Error("repeat() can only be used in text expressions")}dt(r,t,e){let i;e===void 0?e=t:t!==void 0&&(i=t);let n=[],o=[],u=0;for(let c of r)n[u]=i?i(c,u):u,o[u]=e(c,u),u++;return{values:o,keys:n}}render(r,t,e){return this.dt(r,t,e).values}update(r,[t,e,i]){let n=HM(r),{values:o,keys:u}=this.dt(t,e,i);if(!Array.isArray(n))return this.ut=u,o;let c=this.ut??=[],l=[],h,f,v=0,b=n.length-1,w=0,x=o.length-1;for(;v<=b&&w<=x;)if(n[v]===null)v++;else if(n[b]===null)b--;else if(c[v]===u[w])l[w]=Wn(n[v],o[w]),v++,w++;else if(c[b]===u[x])l[x]=Wn(n[b],o[x]),b--,x--;else if(c[v]===u[x])l[x]=Wn(n[v],o[x]),vu(r,l[x+1],n[v]),v++,x--;else if(c[b]===u[w])l[w]=Wn(n[b],o[w]),vu(r,n[v],n[b]),b--,w++;else if(h===void 0&&(h=VM(u,w,x),f=VM(c,v,b)),h.has(c[v]))if(h.has(c[b])){let C=f.get(u[w]),I=C!==void 0?n[C]:null;if(I===null){let A=vu(r,n[v]);Wn(A,o[w]),l[w]=A}else l[w]=Wn(I,o[w]),vu(r,n[v],I),n[C]=null;w++}else Ov(n[b]),b--;else Ov(n[v]),v++;for(;w<=x;){let C=vu(r,l[x+1]);Wn(C,o[w]),l[w++]=C}for(;v<=b;){let C=n[v++];C!==null&&Ov(C)}return this.ut=u,UM(r,l),Jr}});var zM=_e(ue),Rre=[zM.styles,m0],us=class extends zM{constructor(){super();this.unselectAnnotation=()=>{this.selectedAnnotation=null};this.unselectAnnotationEsc=e=>{e&&(e==null?void 0:e.key)!=="Escape"||(this.selectedAnnotation=null)};this.selectAnnotation=({detail:e})=>{let{uuid:i}=e;if(this.selectedAnnotation===i){this.selectedAnnotation=null;return}this.selectedAnnotation=i};this.checkLastAnnotation=e=>{var o,u;let i=this.annotations.filter(c=>c.resolved),n=this.annotations.filter(c=>!c.resolved);return this.annotationFilter==="All comments"?e===((o=i[i.length-1])==null?void 0:o.uuid):e===((u=n[n.length-1])==null?void 0:u.uuid)};this.annotations=[],this.participantsList=[]}updated(e){super.updated(e),this.updateComplete.then(()=>{let i=this.shadowRoot.querySelector(`[uuid='${this.selectedAnnotation}']`);if(!i)return;let n=this.lastCommentId===this.selectedAnnotation,o=n?0:-150,u=i.getClientRects()[0];u&&(this.scrollBy(0,u.y+o),n&&setTimeout(()=>{this.scrollBy(0,u.y+o)},200))})}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("select-annotation",this.selectAnnotation),window.document.body.addEventListener("keyup",this.unselectAnnotationEsc),window.document.body.addEventListener("unselect-annotation",this.unselectAnnotation)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("select-annotation",this.selectAnnotation),window.document.body.removeEventListener("keyup",this.unselectAnnotationEsc),window.document.body.removeEventListener("unselect-annotation",this.unselectAnnotation)}render(){return B` ${Un(this.annotations.filter(e=>{var i;return(i=e.comments)==null?void 0:i.length}),e=>e.uuid,e=>B`
        <superviz-comments-annotation-item
          annotation=${JSON.stringify(e)}
          selected="${this.selectedAnnotation}"
          annotationFilter=${this.annotationFilter}
          uuid=${e.uuid}
          ?resolved=${e.resolved}
          isLastComment=${this.checkLastAnnotation(e.uuid)}
          participantsList=${JSON.stringify(this.participantsList)}
        >
        </superviz-comments-annotation-item>
      `)}`}};us.styles=Rre,us.properties={annotations:{type:Object},selectedAnnotation:{type:String},annotationFilter:{type:String},participantsList:{type:Object}},us=he([ge("superviz-comments-content")],us);d();d();d();d();d();var zi=class extends Error{},xv=class extends zi{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}},Tv=class extends zi{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}},Cv=class extends zi{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}},Yr=class extends zi{},gu=class extends zi{constructor(t){super(`Invalid unit ${t}`)}},ut=class extends zi{},Kr=class extends zi{constructor(){super("Zone is an abstract class")}};d();d();d();var V="numeric",Xr="short",vr="long",Hn={year:V,month:V,day:V},Ol={year:V,month:Xr,day:V},T0={year:V,month:Xr,day:V,weekday:Xr},xl={year:V,month:vr,day:V},Tl={year:V,month:vr,day:V,weekday:vr},Cl={hour:V,minute:V},Pl={hour:V,minute:V,second:V},Al={hour:V,minute:V,second:V,timeZoneName:Xr},Il={hour:V,minute:V,second:V,timeZoneName:vr},Ml={hour:V,minute:V,hourCycle:"h23"},Ll={hour:V,minute:V,second:V,hourCycle:"h23"},kl={hour:V,minute:V,second:V,hourCycle:"h23",timeZoneName:Xr},Rl={hour:V,minute:V,second:V,hourCycle:"h23",timeZoneName:vr},Nl={year:V,month:V,day:V,hour:V,minute:V},Fl={year:V,month:V,day:V,hour:V,minute:V,second:V},Dl={year:V,month:Xr,day:V,hour:V,minute:V},ql={year:V,month:Xr,day:V,hour:V,minute:V,second:V},C0={year:V,month:Xr,day:V,weekday:Xr,hour:V,minute:V},$l={year:V,month:vr,day:V,hour:V,minute:V,timeZoneName:Xr},Bl={year:V,month:vr,day:V,hour:V,minute:V,second:V,timeZoneName:Xr},jl={year:V,month:vr,day:V,weekday:vr,hour:V,minute:V,timeZoneName:vr},Wl={year:V,month:vr,day:V,weekday:vr,hour:V,minute:V,second:V,timeZoneName:vr};d();d();d();d();var Kt=class{get type(){throw new Kr}get name(){throw new Kr}get ianaName(){return this.name}get isUniversal(){throw new Kr}offsetName(t,e){throw new Kr}formatOffset(t,e){throw new Kr}offset(t){throw new Kr}equals(t){throw new Kr}get isValid(){throw new Kr}};var P0=null,Vn=class r extends Kt{static get instance(){return P0===null&&(P0=new r),P0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:e,locale:i}){return Av(t,e,i)}formatOffset(t,e){return zn(this.offset(t),e)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}};d();var Mv={};function Nre(r){return Mv[r]||(Mv[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Mv[r]}var Fre={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Dre(r,t){let e=r.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(e),[,n,o,u,c,l,h,f]=i;return[u,n,o,c,l,h,f]}function qre(r,t){let e=r.formatToParts(t),i=[];for(let n=0;n<e.length;n++){let{type:o,value:u}=e[n],c=Fre[o];o==="era"?i[c]=u:ie(c)||(i[c]=parseInt(u,10))}return i}var Iv={},kt=class r extends Kt{static create(t){return Iv[t]||(Iv[t]=new r(t)),Iv[t]}static resetCache(){Iv={},Mv={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=r.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:e,locale:i}){return Av(t,e,i,this.name)}formatOffset(t,e){return zn(this.offset(t),e)}offset(t){let e=new Date(t);if(isNaN(e))return NaN;let i=Nre(this.name),[n,o,u,c,l,h,f]=i.formatToParts?qre(i,e):Dre(i,e);c==="BC"&&(n=-Math.abs(n)+1);let b=yu({year:n,month:o,day:u,hour:l===24?0:l,minute:h,second:f,millisecond:0}),w=+e,x=w%1e3;return w-=x>=0?x:1e3+x,(b-w)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}};d();var GM={};function $re(r,t={}){let e=JSON.stringify([r,t]),i=GM[e];return i||(i=new Intl.ListFormat(r,t),GM[e]=i),i}var A0={};function I0(r,t={}){let e=JSON.stringify([r,t]),i=A0[e];return i||(i=new Intl.DateTimeFormat(r,t),A0[e]=i),i}var M0={};function Bre(r,t={}){let e=JSON.stringify([r,t]),i=M0[e];return i||(i=new Intl.NumberFormat(r,t),M0[e]=i),i}var L0={};function jre(r,t={}){let{base:e,...i}=t,n=JSON.stringify([r,i]),o=L0[n];return o||(o=new Intl.RelativeTimeFormat(r,t),L0[n]=o),o}var Ul=null;function Wre(){return Ul||(Ul=new Intl.DateTimeFormat().resolvedOptions().locale,Ul)}var ZM={};function Ure(r){let t=ZM[r];if(!t){let e=new Intl.Locale(r);t="getWeekInfo"in e?e.getWeekInfo():e.weekInfo,ZM[r]=t}return t}function Hre(r){let t=r.indexOf("-x-");t!==-1&&(r=r.substring(0,t));let e=r.indexOf("-u-");if(e===-1)return[r];{let i,n;try{i=I0(r).resolvedOptions(),n=r}catch{let l=r.substring(0,e);i=I0(l).resolvedOptions(),n=l}let{numberingSystem:o,calendar:u}=i;return[n,o,u]}}function Vre(r,t,e){return(e||t)&&(r.includes("-u-")||(r+="-u"),e&&(r+=`-ca-${e}`),t&&(r+=`-nu-${t}`)),r}function zre(r){let t=[];for(let e=1;e<=12;e++){let i=De.utc(2009,e,1);t.push(r(i))}return t}function Gre(r){let t=[];for(let e=1;e<=7;e++){let i=De.utc(2016,11,13+e);t.push(r(i))}return t}function Lv(r,t,e,i){let n=r.listingMode();return n==="error"?null:n==="en"?e(t):i(t)}function Zre(r){return r.numberingSystem&&r.numberingSystem!=="latn"?!1:r.numberingSystem==="latn"||!r.locale||r.locale.startsWith("en")||new Intl.DateTimeFormat(r.intl).resolvedOptions().numberingSystem==="latn"}var k0=class{constructor(t,e,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;let{padTo:n,floor:o,...u}=i;if(!e||Object.keys(u).length>0){let c={useGrouping:!1,...i};i.padTo>0&&(c.minimumIntegerDigits=i.padTo),this.inf=Bre(t,c)}}format(t){if(this.inf){let e=this.floor?Math.floor(t):t;return this.inf.format(e)}else{let e=this.floor?Math.floor(t):bu(t,3);return Ke(e,this.padTo)}}},R0=class{constructor(t,e,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){let u=-1*(t.offset/60),c=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;t.offset!==0&&kt.create(c).valid?(n=c,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);let o={...this.opts};o.timeZone=o.timeZone||n,this.dtf=I0(e,o)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(e=>{if(e.type==="timeZoneName"){let i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:i}}else return e}):t}resolvedOptions(){return this.dtf.resolvedOptions()}},N0=class{constructor(t,e,i){this.opts={style:"long",...i},!e&&kv()&&(this.rtf=jre(t,i))}format(t,e){return this.rtf?this.rtf.format(t,e):JM(e,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]}},Jre={firstDay:1,minimalDays:4,weekend:[6,7]},qe=class r{static fromOpts(t){return r.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,e,i,n,o=!1){let u=t||Re.defaultLocale,c=u||(o?"en-US":Wre()),l=e||Re.defaultNumberingSystem,h=i||Re.defaultOutputCalendar,f=Hl(n)||Re.defaultWeekSettings;return new r(c,l,h,f,u)}static resetCache(){Ul=null,A0={},M0={},L0={}}static fromObject({locale:t,numberingSystem:e,outputCalendar:i,weekSettings:n}={}){return r.create(t,e,i,n)}constructor(t,e,i,n,o){let[u,c,l]=Hre(t);this.locale=u,this.numberingSystem=e||c||null,this.outputCalendar=i||l||null,this.weekSettings=n,this.intl=Vre(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Zre(this)),this.fastNumbersCached}listingMode(){let t=this.isEnglish(),e=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&e?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:r.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Hl(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,e=!1){return Lv(this,t,F0,()=>{let i=e?{month:t,day:"numeric"}:{month:t},n=e?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=zre(o=>this.extract(o,i,"month"))),this.monthsCache[n][t]})}weekdays(t,e=!1){return Lv(this,t,D0,()=>{let i=e?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=e?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=Gre(o=>this.extract(o,i,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return Lv(this,void 0,()=>q0,()=>{if(!this.meridiemCache){let t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[De.utc(2016,11,13,9),De.utc(2016,11,13,19)].map(e=>this.extract(e,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Lv(this,t,$0,()=>{let e={era:t};return this.eraCache[t]||(this.eraCache[t]=[De.utc(-40,1,1),De.utc(2017,1,1)].map(i=>this.extract(i,e,"era"))),this.eraCache[t]})}extract(t,e,i){let n=this.dtFormatter(t,e),o=n.formatToParts(),u=o.find(c=>c.type.toLowerCase()===i);return u?u.value:null}numberFormatter(t={}){return new k0(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,e={}){return new R0(t,this.intl,e)}relFormatter(t={}){return new N0(this.intl,this.isEnglish(),t)}listFormatter(t={}){return $re(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Rv()?Ure(this.locale):Jre}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}};d();d();var j0=null,bt=class r extends Kt{static get utcInstance(){return j0===null&&(j0=new r(0)),j0}static instance(t){return t===0?r.utcInstance:new r(t)}static parseSpecifier(t){if(t){let e=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new r(cs(e[1],e[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${zn(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${zn(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,e){return zn(this.fixed,e)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}};d();var _u=class extends Kt{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function Qr(r,t){let e;if(ie(r)||r===null)return t;if(r instanceof Kt)return r;if(YM(r)){let i=r.toLowerCase();return i==="default"?t:i==="local"||i==="system"?Vn.instance:i==="utc"||i==="gmt"?bt.utcInstance:bt.parseSpecifier(i)||kt.create(r)}else return gi(r)?bt.instance(r):typeof r=="object"&&"offset"in r&&typeof r.offset=="function"?r:new _u(r)}var KM=()=>Date.now(),XM="system",QM=null,eL=null,tL=null,rL=60,iL,nL=null,Re=class{static get now(){return KM}static set now(t){KM=t}static set defaultZone(t){XM=t}static get defaultZone(){return Qr(XM,Vn.instance)}static get defaultLocale(){return QM}static set defaultLocale(t){QM=t}static get defaultNumberingSystem(){return eL}static set defaultNumberingSystem(t){eL=t}static get defaultOutputCalendar(){return tL}static set defaultOutputCalendar(t){tL=t}static get defaultWeekSettings(){return nL}static set defaultWeekSettings(t){nL=Hl(t)}static get twoDigitCutoffYear(){return rL}static set twoDigitCutoffYear(t){rL=t%100}static get throwOnInvalid(){return iL}static set throwOnInvalid(t){iL=t}static resetCaches(){qe.resetCache(),kt.resetCache()}};d();d();var _t=class{constructor(t,e){this.reason=t,this.explanation=e}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var oL=[0,31,59,90,120,151,181,212,243,273,304,334],sL=[0,31,60,91,121,152,182,213,244,274,305,335];function kr(r,t){return new _t("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${r}, which is invalid`)}function Nv(r,t,e){let i=new Date(Date.UTC(r,t-1,e));r<100&&r>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);let n=i.getUTCDay();return n===0?7:n}function aL(r,t,e){return e+(ds(r)?sL:oL)[t-1]}function uL(r,t){let e=ds(r)?sL:oL,i=e.findIndex(o=>o<t),n=t-e[i];return{month:i+1,day:n}}function Fv(r,t){return(r-t+7)%7+1}function Vl(r,t=4,e=1){let{year:i,month:n,day:o}=r,u=aL(i,n,o),c=Fv(Nv(i,n,o),e),l=Math.floor((u-c+14-t)/7),h;return l<1?(h=i-1,l=ls(h,t,e)):l>ls(i,t,e)?(h=i+1,l=1):h=i,{weekYear:h,weekNumber:l,weekday:c,...Gl(r)}}function W0(r,t=4,e=1){let{weekYear:i,weekNumber:n,weekday:o}=r,u=Fv(Nv(i,1,t),e),c=Gn(i),l=n*7+o-u-7+t,h;l<1?(h=i-1,l+=Gn(h)):l>c?(h=i+1,l-=Gn(i)):h=i;let{month:f,day:v}=uL(h,l);return{year:h,month:f,day:v,...Gl(r)}}function Dv(r){let{year:t,month:e,day:i}=r,n=aL(t,e,i);return{year:t,ordinal:n,...Gl(r)}}function U0(r){let{year:t,ordinal:e}=r,{month:i,day:n}=uL(t,e);return{year:t,month:i,day:n,...Gl(r)}}function H0(r,t){if(!ie(r.localWeekday)||!ie(r.localWeekNumber)||!ie(r.localWeekYear)){if(!ie(r.weekday)||!ie(r.weekNumber)||!ie(r.weekYear))throw new Yr("Cannot mix locale-based week fields with ISO-based week fields");return ie(r.localWeekday)||(r.weekday=r.localWeekday),ie(r.localWeekNumber)||(r.weekNumber=r.localWeekNumber),ie(r.localWeekYear)||(r.weekYear=r.localWeekYear),delete r.localWeekday,delete r.localWeekNumber,delete r.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function cL(r,t=4,e=1){let i=zl(r.weekYear),n=gr(r.weekNumber,1,ls(r.weekYear,t,e)),o=gr(r.weekday,1,7);return i?n?o?!1:kr("weekday",r.weekday):kr("week",r.weekNumber):kr("weekYear",r.weekYear)}function lL(r){let t=zl(r.year),e=gr(r.ordinal,1,Gn(r.year));return t?e?!1:kr("ordinal",r.ordinal):kr("year",r.year)}function V0(r){let t=zl(r.year),e=gr(r.month,1,12),i=gr(r.day,1,Eu(r.year,r.month));return t?e?i?!1:kr("day",r.day):kr("month",r.month):kr("year",r.year)}function z0(r){let{hour:t,minute:e,second:i,millisecond:n}=r,o=gr(t,0,23)||t===24&&e===0&&i===0&&n===0,u=gr(e,0,59),c=gr(i,0,59),l=gr(n,0,999);return o?u?c?l?!1:kr("millisecond",n):kr("second",i):kr("minute",e):kr("hour",t)}function ie(r){return typeof r>"u"}function gi(r){return typeof r=="number"}function zl(r){return typeof r=="number"&&r%1===0}function YM(r){return typeof r=="string"}function pL(r){return Object.prototype.toString.call(r)==="[object Date]"}function kv(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Rv(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function hL(r){return Array.isArray(r)?r:[r]}function G0(r,t,e){if(r.length!==0)return r.reduce((i,n)=>{let o=[t(n),n];return i&&e(i[0],o[0])===i[0]?i:o},null)[1]}function fL(r,t){return t.reduce((e,i)=>(e[i]=r[i],e),{})}function Zn(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function Hl(r){if(r==null)return null;if(typeof r!="object")throw new ut("Week settings must be an object");if(!gr(r.firstDay,1,7)||!gr(r.minimalDays,1,7)||!Array.isArray(r.weekend)||r.weekend.some(t=>!gr(t,1,7)))throw new ut("Invalid week settings");return{firstDay:r.firstDay,minimalDays:r.minimalDays,weekend:Array.from(r.weekend)}}function gr(r,t,e){return zl(r)&&r>=t&&r<=e}function Yre(r,t){return r-t*Math.floor(r/t)}function Ke(r,t=2){let e=r<0,i;return e?i="-"+(""+-r).padStart(t,"0"):i=(""+r).padStart(t,"0"),i}function Gi(r){if(!(ie(r)||r===null||r===""))return parseInt(r,10)}function Jn(r){if(!(ie(r)||r===null||r===""))return parseFloat(r)}function Zl(r){if(!(ie(r)||r===null||r==="")){let t=parseFloat("0."+r)*1e3;return Math.floor(t)}}function bu(r,t,e=!1){let i=10**t;return(e?Math.trunc:Math.round)(r*i)/i}function ds(r){return r%4===0&&(r%100!==0||r%400===0)}function Gn(r){return ds(r)?366:365}function Eu(r,t){let e=Yre(t-1,12)+1,i=r+(t-e)/12;return e===2?ds(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][e-1]}function yu(r){let t=Date.UTC(r.year,r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond);return r.year<100&&r.year>=0&&(t=new Date(t),t.setUTCFullYear(r.year,r.month-1,r.day)),+t}function dL(r,t,e){return-Fv(Nv(r,1,t),e)+t-1}function ls(r,t=4,e=1){let i=dL(r,t,e),n=dL(r+1,t,e);return(Gn(r)-i+n)/7}function Jl(r){return r>99?r:r>Re.twoDigitCutoffYear?1900+r:2e3+r}function Av(r,t,e,i=null){let n=new Date(r),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(o.timeZone=i);let u={timeZoneName:t,...o},c=new Intl.DateTimeFormat(e,u).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return c?c.value:null}function cs(r,t){let e=parseInt(r,10);Number.isNaN(e)&&(e=0);let i=parseInt(t,10)||0,n=e<0||Object.is(e,-0)?-i:i;return e*60+n}function Z0(r){let t=Number(r);if(typeof r=="boolean"||r===""||Number.isNaN(t))throw new ut(`Invalid unit value ${r}`);return t}function wu(r,t){let e={};for(let i in r)if(Zn(r,i)){let n=r[i];if(n==null)continue;e[t(i)]=Z0(n)}return e}function zn(r,t){let e=Math.trunc(Math.abs(r/60)),i=Math.trunc(Math.abs(r%60)),n=r>=0?"+":"-";switch(t){case"short":return`${n}${Ke(e,2)}:${Ke(i,2)}`;case"narrow":return`${n}${e}${i>0?`:${i}`:""}`;case"techie":return`${n}${Ke(e,2)}${Ke(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Gl(r){return fL(r,["hour","minute","second","millisecond"])}var Kre=["January","February","March","April","May","June","July","August","September","October","November","December"],J0=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Xre=["J","F","M","A","M","J","J","A","S","O","N","D"];function F0(r){switch(r){case"narrow":return[...Xre];case"short":return[...J0];case"long":return[...Kre];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Y0=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],K0=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Qre=["M","T","W","T","F","S","S"];function D0(r){switch(r){case"narrow":return[...Qre];case"short":return[...K0];case"long":return[...Y0];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var q0=["AM","PM"],eie=["Before Christ","Anno Domini"],tie=["BC","AD"],rie=["B","A"];function $0(r){switch(r){case"narrow":return[...rie];case"short":return[...tie];case"long":return[...eie];default:return null}}function mL(r){return q0[r.hour<12?0:1]}function vL(r,t){return D0(t)[r.weekday-1]}function gL(r,t){return F0(t)[r.month-1]}function yL(r,t){return $0(t)[r.year<0?0:1]}function JM(r,t,e="always",i=!1){let n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(r)===-1;if(e==="auto"&&o){let v=r==="days";switch(t){case 1:return v?"tomorrow":`next ${n[r][0]}`;case-1:return v?"yesterday":`last ${n[r][0]}`;case 0:return v?"today":`this ${n[r][0]}`;default:}}let u=Object.is(t,-0)||t<0,c=Math.abs(t),l=c===1,h=n[r],f=i?l?h[1]:h[2]||h[1]:l?n[r][0]:r;return u?`${c} ${f} ago`:`in ${c} ${f}`}function bL(r,t){let e="";for(let i of r)i.literal?e+=i.val:e+=t(i.val);return e}var iie={D:Hn,DD:Ol,DDD:xl,DDDD:Tl,t:Cl,tt:Pl,ttt:Al,tttt:Il,T:Ml,TT:Ll,TTT:kl,TTTT:Rl,f:Nl,ff:Dl,fff:$l,ffff:jl,F:Fl,FF:ql,FFF:Bl,FFFF:Wl},Et=class r{static create(t,e={}){return new r(t,e)}static parseFormat(t){let e=null,i="",n=!1,o=[];for(let u=0;u<t.length;u++){let c=t.charAt(u);c==="'"?(i.length>0&&o.push({literal:n||/^\s+$/.test(i),val:i}),e=null,i="",n=!n):n||c===e?i+=c:(i.length>0&&o.push({literal:/^\s+$/.test(i),val:i}),i=c,e=c)}return i.length>0&&o.push({literal:n||/^\s+$/.test(i),val:i}),o}static macroTokenToFormatOpts(t){return iie[t]}constructor(t,e){this.opts=e,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,e){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...e}).format()}dtFormatter(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e})}formatDateTime(t,e){return this.dtFormatter(t,e).format()}formatDateTimeParts(t,e){return this.dtFormatter(t,e).formatToParts()}formatInterval(t,e){return this.dtFormatter(t.start,e).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,e){return this.dtFormatter(t,e).resolvedOptions()}num(t,e=0){if(this.opts.forceSimple)return Ke(t,e);let i={...this.opts};return e>0&&(i.padTo=e),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,e){let i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(w,x)=>this.loc.extract(t,w,x),u=w=>t.isOffsetFixed&&t.offset===0&&w.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,w.format):"",c=()=>i?mL(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(w,x)=>i?gL(t,w):o(x?{month:w}:{month:w,day:"numeric"},"month"),h=(w,x)=>i?vL(t,w):o(x?{weekday:w}:{weekday:w,month:"long",day:"numeric"},"weekday"),f=w=>{let x=r.macroTokenToFormatOpts(w);return x?this.formatWithSystemDefault(t,x):w},v=w=>i?yL(t,w):o({era:w},"era"),b=w=>{switch(w){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return c();case"d":return n?o({day:"numeric"},"day"):this.num(t.day);case"dd":return n?o({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return n?o({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?o({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?o({month:"numeric"},"month"):this.num(t.month);case"MM":return n?o({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?o({year:"numeric"},"year"):this.num(t.year);case"yy":return n?o({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?o({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?o({year:"numeric"},"year"):this.num(t.year,6);case"G":return v("short");case"GG":return v("long");case"GGGGG":return v("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return f(w)}};return bL(r.parseFormat(e),b)}formatDurationFromString(t,e){let i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>h=>{let f=i(h);return f?this.num(l.get(f),h.length):h},o=r.parseFormat(e),u=o.reduce((l,{literal:h,val:f})=>h?l:l.concat(f),[]),c=t.shiftTo(...u.map(i).filter(l=>l));return bL(o,n(c))}};d();var EL=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ou(...r){let t=r.reduce((e,i)=>e+i.source,"");return RegExp(`^${t}$`)}function xu(...r){return t=>r.reduce(([e,i,n],o)=>{let[u,c,l]=o(t,n);return[{...e,...u},c||i,l]},[{},null,1]).slice(0,2)}function Tu(r,...t){if(r==null)return[null,null];for(let[e,i]of t){let n=e.exec(r);if(n)return i(n)}return[null,null]}function wL(...r){return(t,e)=>{let i={},n;for(n=0;n<r.length;n++)i[r[n]]=Gi(t[e+n]);return[i,null,e+n]}}var SL=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,nie=`(?:${SL.source}?(?:\\[(${EL.source})\\])?)?`,X0=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,OL=RegExp(`${X0.source}${nie}`),Q0=RegExp(`(?:T${OL.source})?`),oie=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,sie=/(\d{4})-?W(\d\d)(?:-?(\d))?/,aie=/(\d{4})-?(\d{3})/,uie=wL("weekYear","weekNumber","weekDay"),cie=wL("year","ordinal"),lie=/(\d{4})-(\d\d)-(\d\d)/,xL=RegExp(`${X0.source} ?(?:${SL.source}|(${EL.source}))?`),die=RegExp(`(?: ${xL.source})?`);function Su(r,t,e){let i=r[t];return ie(i)?e:Gi(i)}function pie(r,t){return[{year:Su(r,t),month:Su(r,t+1,1),day:Su(r,t+2,1)},null,t+3]}function Cu(r,t){return[{hours:Su(r,t,0),minutes:Su(r,t+1,0),seconds:Su(r,t+2,0),milliseconds:Zl(r[t+3])},null,t+4]}function Yl(r,t){let e=!r[t]&&!r[t+1],i=cs(r[t+1],r[t+2]),n=e?null:bt.instance(i);return[{},n,t+3]}function Kl(r,t){let e=r[t]?kt.create(r[t]):null;return[{},e,t+1]}var hie=RegExp(`^T?${X0.source}$`),fie=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function mie(r){let[t,e,i,n,o,u,c,l,h]=r,f=t[0]==="-",v=l&&l[0]==="-",b=(w,x=!1)=>w!==void 0&&(x||w&&f)?-w:w;return[{years:b(Jn(e)),months:b(Jn(i)),weeks:b(Jn(n)),days:b(Jn(o)),hours:b(Jn(u)),minutes:b(Jn(c)),seconds:b(Jn(l),l==="-0"),milliseconds:b(Zl(h),v)}]}var vie={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function eE(r,t,e,i,n,o,u){let c={year:t.length===2?Jl(Gi(t)):Gi(t),month:J0.indexOf(e)+1,day:Gi(i),hour:Gi(n),minute:Gi(o)};return u&&(c.second=Gi(u)),r&&(c.weekday=r.length>3?Y0.indexOf(r)+1:K0.indexOf(r)+1),c}var gie=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function yie(r){let[,t,e,i,n,o,u,c,l,h,f,v]=r,b=eE(t,n,i,e,o,u,c),w;return l?w=vie[l]:h?w=0:w=cs(f,v),[b,new bt(w)]}function bie(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var _ie=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Eie=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,wie=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function _L(r){let[,t,e,i,n,o,u,c]=r;return[eE(t,n,i,e,o,u,c),bt.utcInstance]}function Sie(r){let[,t,e,i,n,o,u,c]=r;return[eE(t,c,e,i,n,o,u),bt.utcInstance]}var Oie=Ou(oie,Q0),xie=Ou(sie,Q0),Tie=Ou(aie,Q0),Cie=Ou(OL),TL=xu(pie,Cu,Yl,Kl),Pie=xu(uie,Cu,Yl,Kl),Aie=xu(cie,Cu,Yl,Kl),Iie=xu(Cu,Yl,Kl);function CL(r){return Tu(r,[Oie,TL],[xie,Pie],[Tie,Aie],[Cie,Iie])}function PL(r){return Tu(bie(r),[gie,yie])}function AL(r){return Tu(r,[_ie,_L],[Eie,_L],[wie,Sie])}function IL(r){return Tu(r,[fie,mie])}var Mie=xu(Cu);function ML(r){return Tu(r,[hie,Mie])}var Lie=Ou(lie,die),kie=Ou(xL),Rie=xu(Cu,Yl,Kl);function LL(r){return Tu(r,[Lie,TL],[kie,Rie])}var kL="Invalid Duration",NL={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Nie={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...NL},Rr=146097/400,Pu=146097/4800,Fie={years:{quarters:4,months:12,weeks:Rr/7,days:Rr,hours:Rr*24,minutes:Rr*24*60,seconds:Rr*24*60*60,milliseconds:Rr*24*60*60*1e3},quarters:{months:3,weeks:Rr/28,days:Rr/4,hours:Rr*24/4,minutes:Rr*24*60/4,seconds:Rr*24*60*60/4,milliseconds:Rr*24*60*60*1e3/4},months:{weeks:Pu/7,days:Pu,hours:Pu*24,minutes:Pu*24*60,seconds:Pu*24*60*60,milliseconds:Pu*24*60*60*1e3},...NL},ps=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Die=ps.slice(0).reverse();function Yn(r,t,e=!1){let i={values:e?t.values:{...r.values,...t.values||{}},loc:r.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||r.conversionAccuracy,matrix:t.matrix||r.matrix};return new Xe(i)}function FL(r,t){let e=t.milliseconds??0;for(let i of Die.slice(1))t[i]&&(e+=t[i]*r[i].milliseconds);return e}function RL(r,t){let e=FL(r,t)<0?-1:1;ps.reduceRight((i,n)=>{if(ie(t[n]))return i;if(i){let o=t[i]*e,u=r[n][i],c=Math.floor(o/u);t[n]+=c*e,t[i]-=c*u*e}return n},null),ps.reduce((i,n)=>{if(ie(t[n]))return i;if(i){let o=t[i]%1;t[i]-=o,t[n]+=o*r[i][n]}return n},null)}function qie(r){let t={};for(let[e,i]of Object.entries(r))i!==0&&(t[e]=i);return t}var Xe=class r{constructor(t){let e=t.conversionAccuracy==="longterm"||!1,i=e?Fie:Nie;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||qe.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,e){return r.fromObject({milliseconds:t},e)}static fromObject(t,e={}){if(t==null||typeof t!="object")throw new ut(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new r({values:wu(t,r.normalizeUnit),loc:qe.fromObject(e),conversionAccuracy:e.conversionAccuracy,matrix:e.matrix})}static fromDurationLike(t){if(gi(t))return r.fromMillis(t);if(r.isDuration(t))return t;if(typeof t=="object")return r.fromObject(t);throw new ut(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,e){let[i]=IL(t);return i?r.fromObject(i,e):r.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,e){let[i]=ML(t);return i?r.fromObject(i,e):r.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,e=null){if(!t)throw new ut("need to specify a reason the Duration is invalid");let i=t instanceof _t?t:new _t(t,e);if(Re.throwOnInvalid)throw new Cv(i);return new r({invalid:i})}static normalizeUnit(t){let e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!e)throw new gu(t);return e}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,e={}){let i={...e,floor:e.round!==!1&&e.floor!==!1};return this.isValid?Et.create(this.loc,i).formatDurationFromString(this,t):kL}toHuman(t={}){if(!this.isValid)return kL;let e=ps.map(i=>{let n=this.values[i];return ie(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(e)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=bu(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;let e=this.toMillis();return e<0||e>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},De.fromMillis(e,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?FL(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;let e=r.fromDurationLike(t),i={};for(let n of ps)(Zn(e.values,n)||Zn(this.values,n))&&(i[n]=e.get(n)+this.get(n));return Yn(this,{values:i},!0)}minus(t){if(!this.isValid)return this;let e=r.fromDurationLike(t);return this.plus(e.negate())}mapUnits(t){if(!this.isValid)return this;let e={};for(let i of Object.keys(this.values))e[i]=Z0(t(this.values[i],i));return Yn(this,{values:e},!0)}get(t){return this[r.normalizeUnit(t)]}set(t){if(!this.isValid)return this;let e={...this.values,...wu(t,r.normalizeUnit)};return Yn(this,{values:e})}reconfigure({locale:t,numberingSystem:e,conversionAccuracy:i,matrix:n}={}){let u={loc:this.loc.clone({locale:t,numberingSystem:e}),matrix:n,conversionAccuracy:i};return Yn(this,u)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;let t=this.toObject();return RL(this.matrix,t),Yn(this,{values:t},!0)}rescale(){if(!this.isValid)return this;let t=qie(this.normalize().shiftToAll().toObject());return Yn(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(u=>r.normalizeUnit(u));let e={},i={},n=this.toObject(),o;for(let u of ps)if(t.indexOf(u)>=0){o=u;let c=0;for(let h in i)c+=this.matrix[h][u]*i[h],i[h]=0;gi(n[u])&&(c+=n[u]);let l=Math.trunc(c);e[u]=l,i[u]=(c*1e3-l*1e3)/1e3}else gi(n[u])&&(i[u]=n[u]);for(let u in i)i[u]!==0&&(e[o]+=u===o?i[u]:i[u]/this.matrix[o][u]);return RL(this.matrix,e),Yn(this,{values:e},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let t={};for(let e of Object.keys(this.values))t[e]=this.values[e]===0?0:-this.values[e];return Yn(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function e(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(let i of ps)if(!e(this.values[i],t.values[i]))return!1;return!0}};d();var Au="Invalid Interval";function $ie(r,t){return!r||!r.isValid?Zi.invalid("missing or invalid start"):!t||!t.isValid?Zi.invalid("missing or invalid end"):t<r?Zi.invalid("end before start",`The end of an interval must be after its start, but you had start=${r.toISO()} and end=${t.toISO()}`):null}var Zi=class r{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,e=null){if(!t)throw new ut("need to specify a reason the Interval is invalid");let i=t instanceof _t?t:new _t(t,e);if(Re.throwOnInvalid)throw new Tv(i);return new r({invalid:i})}static fromDateTimes(t,e){let i=Iu(t),n=Iu(e),o=$ie(i,n);return o??new r({start:i,end:n})}static after(t,e){let i=Xe.fromDurationLike(e),n=Iu(t);return r.fromDateTimes(n,n.plus(i))}static before(t,e){let i=Xe.fromDurationLike(e),n=Iu(t);return r.fromDateTimes(n.minus(i),n)}static fromISO(t,e){let[i,n]=(t||"").split("/",2);if(i&&n){let o,u;try{o=De.fromISO(i,e),u=o.isValid}catch{u=!1}let c,l;try{c=De.fromISO(n,e),l=c.isValid}catch{l=!1}if(u&&l)return r.fromDateTimes(o,c);if(u){let h=Xe.fromISO(n,e);if(h.isValid)return r.after(o,h)}else if(l){let h=Xe.fromISO(i,e);if(h.isValid)return r.before(c,h)}}return r.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",e){if(!this.isValid)return NaN;let i=this.start.startOf(t,e),n;return e!=null&&e.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(t,e),Math.floor(n.diff(i,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:e}={}){return this.isValid?r.fromDateTimes(t||this.s,e||this.e):this}splitAt(...t){if(!this.isValid)return[];let e=t.map(Iu).filter(u=>this.contains(u)).sort((u,c)=>u.toMillis()-c.toMillis()),i=[],{s:n}=this,o=0;for(;n<this.e;){let u=e[o]||this.e,c=+u>+this.e?this.e:u;i.push(r.fromDateTimes(n,c)),n=c,o+=1}return i}splitBy(t){let e=Xe.fromDurationLike(t);if(!this.isValid||!e.isValid||e.as("milliseconds")===0)return[];let{s:i}=this,n=1,o,u=[];for(;i<this.e;){let c=this.start.plus(e.mapUnits(l=>l*n));o=+c>+this.e?this.e:c,u.push(r.fromDateTimes(i,o)),i=o,n+=1}return u}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;let e=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return e>=i?null:r.fromDateTimes(e,i)}union(t){if(!this.isValid)return this;let e=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return r.fromDateTimes(e,i)}static merge(t){let[e,i]=t.sort((n,o)=>n.s-o.s).reduce(([n,o],u)=>o?o.overlaps(u)||o.abutsStart(u)?[n,o.union(u)]:[n.concat([o]),u]:[n,u],[[],null]);return i&&e.push(i),e}static xor(t){let e=null,i=0,n=[],o=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),u=Array.prototype.concat(...o),c=u.sort((l,h)=>l.time-h.time);for(let l of c)i+=l.type==="s"?1:-1,i===1?e=l.time:(e&&+e!=+l.time&&n.push(r.fromDateTimes(e,l.time)),e=null);return r.merge(n)}difference(...t){return r.xor([this].concat(t)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Au}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Hn,e={}){return this.isValid?Et.create(this.s.loc.clone(e),t).formatInterval(this):Au}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Au}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Au}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Au}toFormat(t,{separator:e=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${e}${this.e.toFormat(t)}`:Au}toDuration(t,e){return this.isValid?this.e.diff(this.s,t,e):Xe.invalid(this.invalidReason)}mapEndpoints(t){return r.fromDateTimes(t(this.s),t(this.e))}};d();var Ji=class{static hasDST(t=Re.defaultZone){let e=De.now().setZone(t).set({month:12});return!t.isUniversal&&e.offset!==e.set({month:6}).offset}static isValidIANAZone(t){return kt.isValidZone(t)}static normalizeZone(t){return Qr(t,Re.defaultZone)}static getStartOfWeek({locale:t=null,locObj:e=null}={}){return(e||qe.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:e=null}={}){return(e||qe.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:e=null}={}){return(e||qe.create(t)).getWeekendDays().slice()}static months(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null,outputCalendar:o="gregory"}={}){return(n||qe.create(e,i,o)).months(t)}static monthsFormat(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null,outputCalendar:o="gregory"}={}){return(n||qe.create(e,i,o)).months(t,!0)}static weekdays(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null}={}){return(n||qe.create(e,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null}={}){return(n||qe.create(e,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return qe.create(t).meridiems()}static eras(t="short",{locale:e=null}={}){return qe.create(e,null,"gregory").eras(t)}static features(){return{relative:kv(),localeWeek:Rv()}}};d();function DL(r,t){let e=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=e(t)-e(r);return Math.floor(Xe.fromMillis(i).as("days"))}function Bie(r,t,e){let i=[["years",(l,h)=>h.year-l.year],["quarters",(l,h)=>h.quarter-l.quarter+(h.year-l.year)*4],["months",(l,h)=>h.month-l.month+(h.year-l.year)*12],["weeks",(l,h)=>{let f=DL(l,h);return(f-f%7)/7}],["days",DL]],n={},o=r,u,c;for(let[l,h]of i)e.indexOf(l)>=0&&(u=l,n[l]=h(r,t),c=o.plus(n),c>t?(n[l]--,r=o.plus(n),r>t&&(c=r,n[l]--,r=o.plus(n))):r=c);return[r,n,c,u]}function qL(r,t,e,i){let[n,o,u,c]=Bie(r,t,e),l=t-n,h=e.filter(v=>["hours","minutes","seconds","milliseconds"].indexOf(v)>=0);h.length===0&&(u<t&&(u=n.plus({[c]:1})),u!==n&&(o[c]=(o[c]||0)+l/(u-n)));let f=Xe.fromObject(o,i);return h.length>0?Xe.fromMillis(l,i).shiftTo(...h).plus(f):f}d();d();var tE={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},$L={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},jie=tE.hanidec.replace(/[\[|\]]/g,"").split("");function BL(r){let t=parseInt(r,10);if(isNaN(t)){t="";for(let e=0;e<r.length;e++){let i=r.charCodeAt(e);if(r[e].search(tE.hanidec)!==-1)t+=jie.indexOf(r[e]);else for(let n in $L){let[o,u]=$L[n];i>=o&&i<=u&&(t+=i-o)}}return parseInt(t,10)}else return t}function Nr({numberingSystem:r},t=""){return new RegExp(`${tE[r||"latn"]}${t}`)}var Wie="missing Intl.DateTimeFormat.formatToParts support";function Ne(r,t=e=>e){return{regex:r,deser:([e])=>t(BL(e))}}var Uie="\xA0",UL=`[ ${Uie}]`,HL=new RegExp(UL,"g");function Hie(r){return r.replace(/\./g,"\\.?").replace(HL,UL)}function jL(r){return r.replace(/\./g,"").replace(HL," ").toLowerCase()}function ei(r,t){return r===null?null:{regex:RegExp(r.map(Hie).join("|")),deser:([e])=>r.findIndex(i=>jL(e)===jL(i))+t}}function WL(r,t){return{regex:r,deser:([,e,i])=>cs(e,i),groups:t}}function qv(r){return{regex:r,deser:([t])=>t}}function Vie(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function zie(r,t){let e=Nr(t),i=Nr(t,"{2}"),n=Nr(t,"{3}"),o=Nr(t,"{4}"),u=Nr(t,"{6}"),c=Nr(t,"{1,2}"),l=Nr(t,"{1,3}"),h=Nr(t,"{1,6}"),f=Nr(t,"{1,9}"),v=Nr(t,"{2,4}"),b=Nr(t,"{4,6}"),w=I=>({regex:RegExp(Vie(I.val)),deser:([A])=>A,literal:!0}),C=(I=>{if(r.literal)return w(I);switch(I.val){case"G":return ei(t.eras("short"),0);case"GG":return ei(t.eras("long"),0);case"y":return Ne(h);case"yy":return Ne(v,Jl);case"yyyy":return Ne(o);case"yyyyy":return Ne(b);case"yyyyyy":return Ne(u);case"M":return Ne(c);case"MM":return Ne(i);case"MMM":return ei(t.months("short",!0),1);case"MMMM":return ei(t.months("long",!0),1);case"L":return Ne(c);case"LL":return Ne(i);case"LLL":return ei(t.months("short",!1),1);case"LLLL":return ei(t.months("long",!1),1);case"d":return Ne(c);case"dd":return Ne(i);case"o":return Ne(l);case"ooo":return Ne(n);case"HH":return Ne(i);case"H":return Ne(c);case"hh":return Ne(i);case"h":return Ne(c);case"mm":return Ne(i);case"m":return Ne(c);case"q":return Ne(c);case"qq":return Ne(i);case"s":return Ne(c);case"ss":return Ne(i);case"S":return Ne(l);case"SSS":return Ne(n);case"u":return qv(f);case"uu":return qv(c);case"uuu":return Ne(e);case"a":return ei(t.meridiems(),0);case"kkkk":return Ne(o);case"kk":return Ne(v,Jl);case"W":return Ne(c);case"WW":return Ne(i);case"E":case"c":return Ne(e);case"EEE":return ei(t.weekdays("short",!1),1);case"EEEE":return ei(t.weekdays("long",!1),1);case"ccc":return ei(t.weekdays("short",!0),1);case"cccc":return ei(t.weekdays("long",!0),1);case"Z":case"ZZ":return WL(new RegExp(`([+-]${c.source})(?::(${i.source}))?`),2);case"ZZZ":return WL(new RegExp(`([+-]${c.source})(${i.source})?`),2);case"z":return qv(/[a-z_+-/]{1,256}?/i);case" ":return qv(/[^\S\n\r]/);default:return w(I)}})(r)||{invalidReason:Wie};return C.token=r,C}var Gie={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Zie(r,t,e){let{type:i,value:n}=r;if(i==="literal"){let l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}let o=t[i],u=i;i==="hour"&&(t.hour12!=null?u=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?u="hour12":u="hour24":u=e.hour12?"hour12":"hour24");let c=Gie[u];if(typeof c=="object"&&(c=c[o]),c)return{literal:!1,val:c}}function Jie(r){return[`^${r.map(e=>e.regex).reduce((e,i)=>`${e}(${i.source})`,"")}$`,r]}function Yie(r,t,e){let i=r.match(t);if(i){let n={},o=1;for(let u in e)if(Zn(e,u)){let c=e[u],l=c.groups?c.groups+1:1;!c.literal&&c.token&&(n[c.token.val[0]]=c.deser(i.slice(o,o+l))),o+=l}return[i,n]}else return[i,{}]}function Kie(r){let t=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},e=null,i;return ie(r.z)||(e=kt.create(r.z)),ie(r.Z)||(e||(e=new bt(r.Z)),i=r.Z),ie(r.q)||(r.M=(r.q-1)*3+1),ie(r.h)||(r.h<12&&r.a===1?r.h+=12:r.h===12&&r.a===0&&(r.h=0)),r.G===0&&r.y&&(r.y=-r.y),ie(r.u)||(r.S=Zl(r.u)),[Object.keys(r).reduce((o,u)=>{let c=t(u);return c&&(o[c]=r[u]),o},{}),e,i]}var rE=null;function Xie(){return rE||(rE=De.fromMillis(1555555555555)),rE}function Qie(r,t){if(r.literal)return r;let e=Et.macroTokenToFormatOpts(r.val),i=oE(e,t);return i==null||i.includes(void 0)?r:i}function iE(r,t){return Array.prototype.concat(...r.map(e=>Qie(e,t)))}function nE(r,t,e){let i=iE(Et.parseFormat(e),r),n=i.map(u=>zie(u,r)),o=n.find(u=>u.invalidReason);if(o)return{input:t,tokens:i,invalidReason:o.invalidReason};{let[u,c]=Jie(n),l=RegExp(u,"i"),[h,f]=Yie(t,l,c),[v,b,w]=f?Kie(f):[null,null,void 0];if(Zn(f,"a")&&Zn(f,"H"))throw new Yr("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:h,matches:f,result:v,zone:b,specificOffset:w}}}function VL(r,t,e){let{result:i,zone:n,specificOffset:o,invalidReason:u}=nE(r,t,e);return[i,n,o,u]}function oE(r,t){if(!r)return null;let i=Et.create(t,r).dtFormatter(Xie()),n=i.formatToParts(),o=i.resolvedOptions();return n.map(u=>Zie(u,r,o))}var sE="Invalid DateTime",zL=864e13;function $v(r){return new _t("unsupported zone",`the zone "${r.name}" is not supported`)}function aE(r){return r.weekData===null&&(r.weekData=Vl(r.c)),r.weekData}function uE(r){return r.localWeekData===null&&(r.localWeekData=Vl(r.c,r.loc.getMinDaysInFirstWeek(),r.loc.getStartOfWeek())),r.localWeekData}function hs(r,t){let e={ts:r.ts,zone:r.zone,c:r.c,o:r.o,loc:r.loc,invalid:r.invalid};return new De({...e,...t,old:e})}function QL(r,t,e){let i=r-t*60*1e3,n=e.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;let o=e.offset(i);return n===o?[i,n]:[r-Math.min(n,o)*60*1e3,Math.max(n,o)]}function Bv(r,t){r+=t*60*1e3;let e=new Date(r);return{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds(),millisecond:e.getUTCMilliseconds()}}function Wv(r,t,e){return QL(yu(r),t,e)}function GL(r,t){let e=r.o,i=r.c.year+Math.trunc(t.years),n=r.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o={...r.c,year:i,month:n,day:Math.min(r.c.day,Eu(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},u=Xe.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),c=yu(o),[l,h]=QL(c,e,r.zone);return u!==0&&(l+=u,h=r.zone.offset(l)),{ts:l,o:h}}function Xl(r,t,e,i,n,o){let{setZone:u,zone:c}=e;if(r&&Object.keys(r).length!==0||t){let l=t||c,h=De.fromObject(r,{...e,zone:l,specificOffset:o});return u?h:h.setZone(c)}else return De.invalid(new _t("unparsable",`the input "${n}" can't be parsed as ${i}`))}function jv(r,t,e=!0){return r.isValid?Et.create(qe.create("en-US"),{allowZ:e,forceSimple:!0}).formatDateTimeFromString(r,t):null}function cE(r,t){let e=r.c.year>9999||r.c.year<0,i="";return e&&r.c.year>=0&&(i+="+"),i+=Ke(r.c.year,e?6:4),t?(i+="-",i+=Ke(r.c.month),i+="-",i+=Ke(r.c.day)):(i+=Ke(r.c.month),i+=Ke(r.c.day)),i}function ZL(r,t,e,i,n,o){let u=Ke(r.c.hour);return t?(u+=":",u+=Ke(r.c.minute),(r.c.millisecond!==0||r.c.second!==0||!e)&&(u+=":")):u+=Ke(r.c.minute),(r.c.millisecond!==0||r.c.second!==0||!e)&&(u+=Ke(r.c.second),(r.c.millisecond!==0||!i)&&(u+=".",u+=Ke(r.c.millisecond,3))),n&&(r.isOffsetFixed&&r.offset===0&&!o?u+="Z":r.o<0?(u+="-",u+=Ke(Math.trunc(-r.o/60)),u+=":",u+=Ke(Math.trunc(-r.o%60))):(u+="+",u+=Ke(Math.trunc(r.o/60)),u+=":",u+=Ke(Math.trunc(r.o%60)))),o&&(u+="["+r.zone.ianaName+"]"),u}var ek={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},ene={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},tne={ordinal:1,hour:0,minute:0,second:0,millisecond:0},tk=["year","month","day","hour","minute","second","millisecond"],rne=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ine=["year","ordinal","hour","minute","second","millisecond"];function nne(r){let t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[r.toLowerCase()];if(!t)throw new gu(r);return t}function JL(r){switch(r.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return nne(r)}}function YL(r,t){let e=Qr(t.zone,Re.defaultZone),i=qe.fromObject(t),n=Re.now(),o,u;if(ie(r.year))o=n;else{for(let h of tk)ie(r[h])&&(r[h]=ek[h]);let c=V0(r)||z0(r);if(c)return De.invalid(c);let l=e.offset(n);[o,u]=Wv(r,l,e)}return new De({ts:o,zone:e,loc:i,o:u})}function KL(r,t,e){let i=ie(e.round)?!0:e.round,n=(u,c)=>(u=bu(u,i||e.calendary?0:2,!0),t.loc.clone(e).relFormatter(e).format(u,c)),o=u=>e.calendary?t.hasSame(r,u)?0:t.startOf(u).diff(r.startOf(u),u).get(u):t.diff(r,u).get(u);if(e.unit)return n(o(e.unit),e.unit);for(let u of e.units){let c=o(u);if(Math.abs(c)>=1)return n(c,u)}return n(r>t?-0:0,e.units[e.units.length-1])}function XL(r){let t={},e;return r.length>0&&typeof r[r.length-1]=="object"?(t=r[r.length-1],e=Array.from(r).slice(0,r.length-1)):e=Array.from(r),[t,e]}var De=class r{constructor(t){let e=t.zone||Re.defaultZone,i=t.invalid||(Number.isNaN(t.ts)?new _t("invalid input"):null)||(e.isValid?null:$v(e));this.ts=ie(t.ts)?Re.now():t.ts;let n=null,o=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e))[n,o]=[t.old.c,t.old.o];else{let c=e.offset(this.ts);n=Bv(this.ts,c),i=Number.isNaN(n.year)?new _t("invalid input"):null,n=i?null:n,o=i?null:c}this._zone=e,this.loc=t.loc||qe.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=o,this.isLuxonDateTime=!0}static now(){return new r({})}static local(){let[t,e]=XL(arguments),[i,n,o,u,c,l,h]=e;return YL({year:i,month:n,day:o,hour:u,minute:c,second:l,millisecond:h},t)}static utc(){let[t,e]=XL(arguments),[i,n,o,u,c,l,h]=e;return t.zone=bt.utcInstance,YL({year:i,month:n,day:o,hour:u,minute:c,second:l,millisecond:h},t)}static fromJSDate(t,e={}){let i=pL(t)?t.valueOf():NaN;if(Number.isNaN(i))return r.invalid("invalid input");let n=Qr(e.zone,Re.defaultZone);return n.isValid?new r({ts:i,zone:n,loc:qe.fromObject(e)}):r.invalid($v(n))}static fromMillis(t,e={}){if(gi(t))return t<-zL||t>zL?r.invalid("Timestamp out of range"):new r({ts:t,zone:Qr(e.zone,Re.defaultZone),loc:qe.fromObject(e)});throw new ut(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,e={}){if(gi(t))return new r({ts:t*1e3,zone:Qr(e.zone,Re.defaultZone),loc:qe.fromObject(e)});throw new ut("fromSeconds requires a numerical input")}static fromObject(t,e={}){t=t||{};let i=Qr(e.zone,Re.defaultZone);if(!i.isValid)return r.invalid($v(i));let n=qe.fromObject(e),o=wu(t,JL),{minDaysInFirstWeek:u,startOfWeek:c}=H0(o,n),l=Re.now(),h=ie(e.specificOffset)?i.offset(l):e.specificOffset,f=!ie(o.ordinal),v=!ie(o.year),b=!ie(o.month)||!ie(o.day),w=v||b,x=o.weekYear||o.weekNumber;if((w||f)&&x)throw new Yr("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&f)throw new Yr("Can't mix ordinal dates with month/day");let C=x||o.weekday&&!w,I,A,j=Bv(l,h);C?(I=rne,A=ene,j=Vl(j,u,c)):f?(I=ine,A=tne,j=Dv(j)):(I=tk,A=ek);let N=!1;for(let tt of I){let yr=o[tt];ie(yr)?N?o[tt]=A[tt]:o[tt]=j[tt]:N=!0}let U=C?cL(o,u,c):f?lL(o):V0(o),ee=U||z0(o);if(ee)return r.invalid(ee);let $=C?W0(o,u,c):f?U0(o):o,[te,Te]=Wv($,h,i),Oe=new r({ts:te,zone:i,o:Te,loc:n});return o.weekday&&w&&t.weekday!==Oe.weekday?r.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${Oe.toISO()}`):Oe}static fromISO(t,e={}){let[i,n]=CL(t);return Xl(i,n,e,"ISO 8601",t)}static fromRFC2822(t,e={}){let[i,n]=PL(t);return Xl(i,n,e,"RFC 2822",t)}static fromHTTP(t,e={}){let[i,n]=AL(t);return Xl(i,n,e,"HTTP",e)}static fromFormat(t,e,i={}){if(ie(t)||ie(e))throw new ut("fromFormat requires an input string and a format");let{locale:n=null,numberingSystem:o=null}=i,u=qe.fromOpts({locale:n,numberingSystem:o,defaultToEN:!0}),[c,l,h,f]=VL(u,t,e);return f?r.invalid(f):Xl(c,l,i,`format ${e}`,t,h)}static fromString(t,e,i={}){return r.fromFormat(t,e,i)}static fromSQL(t,e={}){let[i,n]=LL(t);return Xl(i,n,e,"SQL",t)}static invalid(t,e=null){if(!t)throw new ut("need to specify a reason the DateTime is invalid");let i=t instanceof _t?t:new _t(t,e);if(Re.throwOnInvalid)throw new xv(i);return new r({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,e={}){let i=oE(t,qe.fromObject(e));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(t,e={}){return iE(Et.parseFormat(t),qe.fromObject(e)).map(n=>n.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?aE(this).weekYear:NaN}get weekNumber(){return this.isValid?aE(this).weekNumber:NaN}get weekday(){return this.isValid?aE(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?uE(this).weekday:NaN}get localWeekNumber(){return this.isValid?uE(this).weekNumber:NaN}get localWeekYear(){return this.isValid?uE(this).weekYear:NaN}get ordinal(){return this.isValid?Dv(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ji.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ji.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ji.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ji.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let t=864e5,e=6e4,i=yu(this.c),n=this.zone.offset(i-t),o=this.zone.offset(i+t),u=this.zone.offset(i-n*e),c=this.zone.offset(i-o*e);if(u===c)return[this];let l=i-u*e,h=i-c*e,f=Bv(l,u),v=Bv(h,c);return f.hour===v.hour&&f.minute===v.minute&&f.second===v.second&&f.millisecond===v.millisecond?[hs(this,{ts:l}),hs(this,{ts:h})]:[this]}get isInLeapYear(){return ds(this.year)}get daysInMonth(){return Eu(this.year,this.month)}get daysInYear(){return this.isValid?Gn(this.year):NaN}get weeksInWeekYear(){return this.isValid?ls(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ls(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){let{locale:e,numberingSystem:i,calendar:n}=Et.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:e,numberingSystem:i,outputCalendar:n}}toUTC(t=0,e={}){return this.setZone(bt.instance(t),e)}toLocal(){return this.setZone(Re.defaultZone)}setZone(t,{keepLocalTime:e=!1,keepCalendarTime:i=!1}={}){if(t=Qr(t,Re.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(e||i){let o=t.offset(this.ts),u=this.toObject();[n]=Wv(u,o,t)}return hs(this,{ts:n,zone:t})}else return r.invalid($v(t))}reconfigure({locale:t,numberingSystem:e,outputCalendar:i}={}){let n=this.loc.clone({locale:t,numberingSystem:e,outputCalendar:i});return hs(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;let e=wu(t,JL),{minDaysInFirstWeek:i,startOfWeek:n}=H0(e,this.loc),o=!ie(e.weekYear)||!ie(e.weekNumber)||!ie(e.weekday),u=!ie(e.ordinal),c=!ie(e.year),l=!ie(e.month)||!ie(e.day),h=c||l,f=e.weekYear||e.weekNumber;if((h||u)&&f)throw new Yr("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&u)throw new Yr("Can't mix ordinal dates with month/day");let v;o?v=W0({...Vl(this.c,i,n),...e},i,n):ie(e.ordinal)?(v={...this.toObject(),...e},ie(e.day)&&(v.day=Math.min(Eu(v.year,v.month),v.day))):v=U0({...Dv(this.c),...e});let[b,w]=Wv(v,this.o,this.zone);return hs(this,{ts:b,o:w})}plus(t){if(!this.isValid)return this;let e=Xe.fromDurationLike(t);return hs(this,GL(this,e))}minus(t){if(!this.isValid)return this;let e=Xe.fromDurationLike(t).negate();return hs(this,GL(this,e))}startOf(t,{useLocaleWeeks:e=!1}={}){if(!this.isValid)return this;let i={},n=Xe.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break;case"milliseconds":break}if(n==="weeks")if(e){let o=this.loc.getStartOfWeek(),{weekday:u}=this;u<o&&(i.weekNumber=this.weekNumber-1),i.weekday=o}else i.weekday=1;if(n==="quarters"){let o=Math.ceil(this.month/3);i.month=(o-1)*3+1}return this.set(i)}endOf(t,e){return this.isValid?this.plus({[t]:1}).startOf(t,e).minus(1):this}toFormat(t,e={}){return this.isValid?Et.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):sE}toLocaleString(t=Hn,e={}){return this.isValid?Et.create(this.loc.clone(e),t).formatDateTime(this):sE}toLocaleParts(t={}){return this.isValid?Et.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:e=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;let u=t==="extended",c=cE(this,u);return c+="T",c+=ZL(this,u,e,i,n,o),c}toISODate({format:t="extended"}={}){return this.isValid?cE(this,t==="extended"):null}toISOWeekDate(){return jv(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:e=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:o=!1,format:u="extended"}={}){return this.isValid?(n?"T":"")+ZL(this,u==="extended",e,t,i,o):null}toRFC2822(){return jv(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return jv(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?cE(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:e=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(e||t)&&(i&&(n+=" "),e?n+="z":t&&(n+="ZZ")),jv(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():sE}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};let e={...this.c};return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,e="milliseconds",i={}){if(!this.isValid||!t.isValid)return Xe.invalid("created by diffing an invalid DateTime");let n={locale:this.locale,numberingSystem:this.numberingSystem,...i},o=hL(e).map(Xe.normalizeUnit),u=t.valueOf()>this.valueOf(),c=u?this:t,l=u?t:this,h=qL(c,l,o,n);return u?h.negate():h}diffNow(t="milliseconds",e={}){return this.diff(r.now(),t,e)}until(t){return this.isValid?Zi.fromDateTimes(this,t):this}hasSame(t,e,i){if(!this.isValid)return!1;let n=t.valueOf(),o=this.setZone(t.zone,{keepLocalTime:!0});return o.startOf(e,i)<=n&&n<=o.endOf(e,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;let e=t.base||r.fromObject({},{zone:this.zone}),i=t.padding?this<e?-t.padding:t.padding:0,n=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(n=t.unit,o=void 0),KL(e,this.plus(i),{...t,numeric:"always",units:n,unit:o})}toRelativeCalendar(t={}){return this.isValid?KL(t.base||r.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(r.isDateTime))throw new ut("min requires all arguments be DateTimes");return G0(t,e=>e.valueOf(),Math.min)}static max(...t){if(!t.every(r.isDateTime))throw new ut("max requires all arguments be DateTimes");return G0(t,e=>e.valueOf(),Math.max)}static fromFormatExplain(t,e,i={}){let{locale:n=null,numberingSystem:o=null}=i,u=qe.fromOpts({locale:n,numberingSystem:o,defaultToEN:!0});return nE(u,t,e)}static fromStringExplain(t,e,i={}){return r.fromFormatExplain(t,e,i)}static get DATE_SHORT(){return Hn}static get DATE_MED(){return Ol}static get DATE_MED_WITH_WEEKDAY(){return T0}static get DATE_FULL(){return xl}static get DATE_HUGE(){return Tl}static get TIME_SIMPLE(){return Cl}static get TIME_WITH_SECONDS(){return Pl}static get TIME_WITH_SHORT_OFFSET(){return Al}static get TIME_WITH_LONG_OFFSET(){return Il}static get TIME_24_SIMPLE(){return Ml}static get TIME_24_WITH_SECONDS(){return Ll}static get TIME_24_WITH_SHORT_OFFSET(){return kl}static get TIME_24_WITH_LONG_OFFSET(){return Rl}static get DATETIME_SHORT(){return Nl}static get DATETIME_SHORT_WITH_SECONDS(){return Fl}static get DATETIME_MED(){return Dl}static get DATETIME_MED_WITH_SECONDS(){return ql}static get DATETIME_MED_WITH_WEEKDAY(){return C0}static get DATETIME_FULL(){return $l}static get DATETIME_FULL_WITH_SECONDS(){return Bl}static get DATETIME_HUGE(){return jl}static get DATETIME_HUGE_WITH_SECONDS(){return Wl}};function Iu(r){if(De.isDateTime(r))return r;if(r&&r.valueOf&&gi(r.valueOf()))return De.fromJSDate(r);if(r&&typeof r=="object")return De.fromObject(r);throw new ut(`Unknown datetime argument: ${r}, of type ${typeof r}`)}var rk=_e(ue),sne=[rk.styles,f0],fs=class extends rk{constructor(){super();this.unselectAnnotationEsc=e=>{e.key==="Escape"&&(this.isSelected=!1)};this.unselectAnnotation=()=>{this.isSelected=!1};this.selectAnnotation=({detail:e})=>{let{uuid:i}=e;if(this.isSelected){this.isSelected=!1;return}this.isSelected=i===this.annotationId};this.updateComment=({detail:e})=>{let{text:i,mentions:n}=e;this.text=i,this.closeEditMode(),this.emitEvent("update-comment",{uuid:this.uuid,mentions:n,text:i})};this.resolveAnnotation=e=>{e.stopPropagation(),this.emitEvent("resolve-annotation",{type:"resolve-annotation",resolved:!this.resolved},{composed:!1,bubbles:!1})};this.confirmDelete=()=>{if(this.deleteCommentModalOpen=!1,this.primaryComment)return this.emitEvent("delete-annotation",{uuid:this.annotationId});this.emitEvent("delete-comment",{annotationId:this.annotationId,uuid:this.uuid})};this.closeEditMode=()=>{this.mode="readonly",this.emitEvent("edit-comment",{editing:!1})};this.resolved=!1}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{je.call(this,["comments"])}),document.body.addEventListener("select-annotation",this.selectAnnotation)}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("select-annotation",this.selectAnnotation),window.document.body.addEventListener("keyup",this.unselectAnnotationEsc),window.document.body.addEventListener("unselect-annotation",this.unselectAnnotation)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("select-annotation",this.selectAnnotation),window.document.body.removeEventListener("keyup",this.unselectAnnotationEsc),window.document.body.removeEventListener("unselect-annotation",this.unselectAnnotation)}getAvatar(){var e;return this.avatar?B` <div class=${this.getClasses("avatar-container")}>
        <img src=${this.avatar} class=${this.getClasses("avatar-image")} />
      </div>`:B`<div class=${this.getClasses("avatar-container")}>
      <p class="text text-bold ${this.getClasses("avatar-letter")}">
        ${((e=this.username[0])==null?void 0:e.toUpperCase())||"A"}
      </p>
    </div>`}getClasses(e){return`comments__comment-item__${e} ${this.class}__${e}`}render(){let e=this.annotationFilter==="All comments"?"resolve":"undo",i=b=>De.fromISO(b).toFormat("yyyy-dd-MM"),n=this.resolvable?"comments__comment-item__resolve":"hidden",o=[{label:"EDIT"},{label:"DELETE"}],u=({detail:{label:b}})=>{b==="EDIT"&&(this.mode="editable",this.emitEvent("edit-comment",{editing:!0})),b==="DELETE"&&(this.deleteCommentModalOpen=!0)},c=()=>{let b={"comments__comment-item--editable":!0,"hide-edit-input":this.mode!=="editable"};return B`
        <superviz-comments-comment-input
          class="${le(b)}"
          editable
          mode=${this.mode}
          @click=${w=>w.stopPropagation()}
          text=${this.text}
          eventType="update-comment"
          participantsList=${JSON.stringify(this.participantsList)}
          mentions=${JSON.stringify(this.mentions)}
          @update-comment=${this.updateComment}
          @close-edit-mode=${this.closeEditMode}
        ></superviz-comments-comment-input>
      `},l=()=>{let b={text:!0,"text-big":!0,"sv-gray-700":!0,"annotation-content":!0,[this.getClasses("content")]:!0,editing:this.mode==="editable","line-clamp":!this.isSelected&&this.text.length>120};return B` <p id="comment-text" class="${le(b)}">${this.text}</p> `},h=()=>{this.deleteCommentModalOpen=!1},f={[this.class]:!0,"comments__comment-item":!0,reply:!this.primaryComment},v={"comments__comment-item__content__body":!0,"editing-annotation":this.mode==="editable"};return B`
      <div class=${le(f)}>
        <div class=${this.getClasses("header")}>
          <div class=${this.getClasses("metadata")}>
            ${this.getAvatar()}
            <span class="text text-big text-bold sv-gray-700 ${this.getClasses("username")}">
              ${this.username}
            </span>
            <span class="text text-small sv-gray-500 ${this.getClasses("date")}">
              ${i(this.createdAt)}
            </span>
          </div>
          <div class=${this.getClasses("actions")}>
            <button
              @click=${this.resolveAnnotation}
              class="${this.getClasses("icons")} ${this.getClasses("resolve-icon")} icon-button icon-button--clickable icon-button--xsmall ${n}"
            >
              <!-- TODO: Add undo icon in sm format -->
              <superviz-icon name=${e} size="sm"></superviz-icon>
            </button>
            <superviz-dropdown
              options=${JSON.stringify(o)}
              position="bottom-left"
              @selected=${u}
              @click=${b=>{b.stopPropagation()}}
              classesPrefix="comments__dropdown"
              parentComponent="comments"
            >
              <button
                slot="dropdown"
                class="${this.getClasses("icons")} ${this.getClasses("options-icon")} icon-button icon-button--clickable icon-button--small"
              >
                <superviz-icon name="more" size="sm"></superviz-icon>
              </button>
            </superviz-dropdown>
          </div>
        </div>

        <div class="comments__comment-item__content">
          <div class="${le(v)}">${c()} ${l()}</div>
        </div>
      </div>
      <superviz-comments-delete-comments-modal
        ?open=${this.deleteCommentModalOpen}
        @close=${h}
        @confirm=${this.confirmDelete}
      >
      </superviz-comments-delete-comments-modal>
    `}};fs.styles=sne,fs.properties={uuid:{type:String},annotationId:{type:String},avatar:{type:String},username:{type:String},text:{type:String},resolved:{type:Boolean},resolvable:{type:Boolean},createdAt:{type:String},mode:{type:String},deleteCommentModalOpen:{type:Boolean},primaryComment:{type:Boolean},isSelected:{type:Boolean},annotationFilter:{type:String},participantsList:{type:Object},mentions:{type:Array},class:{type:String}},fs=he([ge("superviz-comments-comment-item")],fs);d();d();var Uv=class{constructor(){this.keys=["@"];this.input=null,this.mentions=[]}setInput(t){this.event=t,this.input=t.target,this.key=t.data}getMentions(t,e=[]){return e.length>0&&(this.mentions=e),this.mentions.filter(i=>((o,u)=>u.includes(o.name))(i,t))}setMentions(t){this.mentions=t}addMention(t){this.mentions.some(i=>i.userId===t.userId)||this.mentions.push(t)}clearMentions(){this.mentions=[]}getSelectionPosition(){let t=this.getSelectionStart(),e=this.getLastKeyBeforeCaret(t);return{start:((e==null?void 0:e.keyIndex)??-1)+1,end:t}}getSelectionStart(){var t;return(t=this.input)==null?void 0:t.selectionStart}setCaretPosition(t){this.input.selectionEnd=t}getValue(){var t;return(t=this.input)==null?void 0:t.value}setValue(t){this.input.value=t}getLastKeyBeforeCaret(t){let[e]=this.keys.map(i=>({key:i,keyIndex:this.getValue().lastIndexOf(i,t-1)})).sort((i,n)=>n.keyIndex-i.keyIndex);return e}searchMention(t,e){return e!==-1?this.getValue().substring(e+1,t):null}isDeletion(){return this.event.inputType==="deleteContentBackward"||this.event.inputType==="deleteContentForward"||this.event.inputType==="deleteWordBackward"}insertMention(t,e,i){if(this.isDeletion())return;let{id:n,name:o}=i,u=`${this.getValue().slice(0,t)+o} ${this.getValue().slice(e,this.getValue().length)}`;this.setValue(u),this.input.focus(),this.addMention({userId:n,name:o}),this.setCaretPosition(t+o.length+1)}};d();var lE={SHOW:"show",HIDE:"hide"},ane={action:lE.HIDE,mentions:[],findDigitParticipant:!1},une=(r,t,e)=>{var o,u;let i=[];if(i=e==null?void 0:e.filter(c=>c==null?void 0:c.email),r.length>0&&(i=i.filter(c=>(c==null?void 0:c.name.toLowerCase().search(r.toLowerCase()))!==-1),r===((u=(o=i[0])==null?void 0:o.name)==null?void 0:u.toLowerCase()))){let c=ik(i,t);return{action:lE.HIDE,mentions:c,findDigitParticipant:!0}}if(!((i==null?void 0:i.length)>0))return ane;let n=ik(i,t);return{action:lE.SHOW,mentions:n,findDigitParticipant:!1}},ik=(r,t)=>r.map(e=>({id:e.id,name:e.name,avatar:e.avatar,email:e.email,position:t})),nk={matchParticipant:(r,t,e)=>une(r,t,e)};var ok=_e(ue),cne=[ok.styles,v0],ms=class extends ok{constructor(){super();this.pinCoordinates=null;this.autoCompleteHandler=new Uv;this.addAtSymbolInCaretPosition=()=>{let e=this.shadowRoot.querySelector(".comments__input__textarea"),i=new InputEvent("input",{bubbles:!0,cancelable:!0});Object.defineProperty(i,"data",{value:"@",writable:!0}),e.dispatchEvent(i)};this.getCommentInput=()=>this.shadowRoot.querySelector(".comments__input__textarea");this.userMentionedByTextInput=e=>{this.mentionList=[];let i={detail:{...e[0]}};this.insertMention(i)};this.buttonAtSymbol=()=>{let e=this.autoCompleteHandler.getSelectionStart(),i=this.autoCompleteHandler.getValue();this.autoCompleteHandler.setValue(`${i.slice(0,e)}@${i.slice(e,i.length)}`),e+=1;let n=this.autoCompleteHandler.getLastKeyBeforeCaret(e),o=(n==null?void 0:n.keyIndex)??-1,u=this.autoCompleteHandler.searchMention(e,o),c={start:o+1,end:e};return{searchText:u,position:c}};this.focusInput=()=>{this.getCommentInput().focus()};this.handleInput=e=>{var w;((w=this.commentInput)==null?void 0:w.value.length)===0?this.btnActive=!1:this.btnActive=!0,this.autoCompleteHandler.setInput(e);let i=this.autoCompleteHandler.getSelectionStart(),n=this.autoCompleteHandler.getLastKeyBeforeCaret(i),o=(n==null?void 0:n.keyIndex)??-1;if(i===-1)return;let u=this.autoCompleteHandler.searchMention(i,o),c=this.autoCompleteHandler.getSelectionPosition(),l=e.data==="@"&&o===-1,h=e.data==="@"&&i-1!==o;if(l||h){let x=this.buttonAtSymbol();u=x.searchText,c=x.position}if(u===null){this.mentionList=[];return}let{action:f,mentions:v,findDigitParticipant:b}=nk.matchParticipant(u,c,this.participantsList);if(b){this.userMentionedByTextInput(v);return}f==="show"&&(this.mentionList=v),f==="hide"&&(this.mentionList=[])};this.insertMention=e=>{let{id:i,name:n,avatar:o,email:u,position:c}=e.detail;this.autoCompleteHandler.insertMention(c.start,c.end,{id:i,name:n,avatar:o,email:u}),this.mentionList=[],this.updateHeight()};this.sendEnter=e=>{var u;if(e.key!=="Escape"&&e.stopImmediatePropagation(),e.key==="Enter"&&!e.shiftKey&&e.preventDefault(),e.key!=="Enter"||e.shiftKey||((u=this.mentionList)==null?void 0:u.length)>0)return;let i=this.commentInput,n=i.value.trim();if(!n)return;let o=this.autoCompleteHandler.getMentions(n);this.emitEvent(this.eventType,{text:n,mentions:o,position:this.pinCoordinates},{composed:!1,bubbles:!1}),i.value="",this.sendBtn.disabled=!0,this.updateHeight()};this.closeEditMode=()=>{this.emitEvent("close-edit-mode",{},{composed:!1,bubbles:!1}),this.hideInput=!0};this.onTextareaFocus=()=>{let e=this.optionsContainer,i=this.horizontalRule,n=this.commentInput;e.classList.add("active-textarea"),i.classList.add("comments__input__divisor"),n.classList.add("active-textarea")};this.onTextareaLoseFocus=e=>{var l,h;let i=(h=(l=e.explicitOriginalTarget)==null?void 0:l.parentNode)==null?void 0:h.host,n=this.mentionButton;if(n===e.explicitOriginalTarget||n===e.relatedTarget)return;if(this.closeButton.contains(i)||this.closeButton.contains(e.explicitOriginalTarget)||this.closeButton.contains(e.relatedTarget)){this.cancelComment();return}if(!this.shadowRoot.contains(e.target))return;let o=this.optionsContainer,u=this.horizontalRule,c=this.commentInput;c.value.length||(o.classList.remove("active-textarea"),u.classList.remove("comments__input__divisor"),c.classList.remove("active-textarea"))};this.cancelComment=()=>{document.body.dispatchEvent(new KeyboardEvent("keyup",{key:"Escape"}))};this.commentInputEditableOptions=()=>{var e;if(this.editable)return B`
      <button
        id="close"
        @click=${this.closeEditMode}
        class="icon-button icon-button--medium icon-button--clickable comments__input__button comments__input__close-button"
      >
        <superviz-icon name="close" size="sm"></superviz-icon>
      </button>
      <button
        id="confirm"
        class="icon-button icon-button--medium icon-button--clickable icon-button--no-hover comments__input__button comments__input__send-button"
        disabled
        @click=${this.send}
      >
        <superviz-icon
          color=${(e=this.sendBtn)!=null&&e.disabled||!this.sendBtn?"black":"white"}
          name="check"
          size="sm"
        ></superviz-icon>
      </button>
    `};this.commentInputOptions=()=>{var e;if(!this.editable)return B`
      <button
        class="icon-button icon-button--medium icon-button--clickable comments__input__button comments__input__close-button align-send-btn"
        @click=${this.cancelComment}
      >
        <superviz-icon name="close" size="sm"></superviz-icon>
      </button>
      <button
        class="comments__input__button comments__input__send-button align-send-btn"
        disabled
        @click=${this.send}
      >
        <superviz-icon
          color=${(e=this.sendBtn)!=null&&e.disabled||!this.sendBtn?"black":"white"}
          name="line-arrow-right"
          size="sm"
        ></superviz-icon>
      </button>
    `};this.btnActive=!1,this.text="",this.mentionList=[],this.mentions=[],this.mode="readonly"}get commentInput(){return this.shadowRoot.querySelector(".comments__input__textarea")}get mentionButton(){return this.shadowRoot.querySelector(".mention-button")}get sendBtn(){return this.shadowRoot.querySelector(".comments__input__send-button")}get optionsContainer(){return this.shadowRoot.querySelector(".comments__input__options")}get horizontalRule(){return this.shadowRoot.querySelector(".sv-hr")}get closeButton(){return this.shadowRoot.querySelector(".comments__input__close-button")}connectedCallback(){super.connectedCallback(),["create-annotation","create-comment"].includes(this.eventType)&&this.addEventListener("keyup",this.sendEnter)}disconnectedCallback(){if(super.disconnectedCallback(),!["create-annotation","create-comment"].includes(this.eventType))return;let e=this.getCommentInput();this.removeEventListener("keyup",this.sendEnter),e.removeEventListener("keydown",this.sendEnter),e.removeEventListener("click",this.focusInput),e.addEventListener("input",this.handleInput)}firstUpdated(e){this.updateComplete.then(()=>{this.emitEvent("comment-input-ready",{},{composed:!1,bubbles:!1});let i=this.getCommentInput();if(i&&(i.addEventListener("input",this.handleInput),i.addEventListener("click",this.focusInput),i.addEventListener("keydown",this.sendEnter)),this.text.length>0){let n=this.participantsList.map(({id:o,name:u})=>({userId:o,name:u}));this.mentions=this.autoCompleteHandler.getMentions(this.text,n),this.autoCompleteHandler.setMentions(this.mentions)}this.editable&&this.focusInput(),je.call(this,["comments"])})}updated(e){if(e.has("mode")&&this.mode==="editable"&&(this.focusInput(),this.updateHeight(),this.sendBtn.disabled=!1,this.btnActive=!0),e.has("text")&&this.text.length>0){let i=this.commentInput;i.value=this.text,this.updateHeight()}e.has("btnActive")&&(this.sendBtn.disabled=!this.btnActive)}updateHeight(){let e=this.commentInput;e.style.height="40px";let i=e.scrollHeight+14;i===47&&(i=40),e.style.height=`${i}px`,this.sendBtn.disabled=!(e.value.length>0)}send(e){var u;if(e.preventDefault(),((u=this.mentionList)==null?void 0:u.length)>0)return;let i=this.commentInput,n=i.value,o=this.autoCompleteHandler.getMentions(n);this.emitEvent(this.eventType,{text:n,mentions:o,position:this.pinCoordinates},{composed:!1,bubbles:!1}),i.value="",this.sendBtn.disabled=!0,this.updateHeight()}render(){let e={comments__input__textarea:!0,"fixed-width":this.eventType==="create-annotation"},i={comments__input:!0,"comments__input--editable":this.editable,"hide-input":this.hideInput};return B`
      <div class="${le(i)}">
        <textarea
          id="comments__input__textarea"
          class=${le(e)}
          placeholder=${this.placeholder??"Add comment..."}
          @input=${this.updateHeight}
          @focus=${this.onTextareaFocus}
          @blur=${this.onTextareaLoseFocus}
          spellcheck="false"
        ></textarea>
        <superviz-comments-mention-list
          .participants=${this.mentionList}
          @participant-selected=${this.insertMention}
        ></superviz-comments-mention-list>
        <div class="sv-hr"></div>
        <div class="comments__input__options">
          <button
            @click=${this.addAtSymbolInCaretPosition}
            class="mention-button icon-button icon-button--medium icon-button--clickable"
          >
            <superviz-icon name="mention" size="sm"></superviz-icon>
          </button>
          <div class="comment-input-options">
            ${this.commentInputOptions()} ${this.commentInputEditableOptions()}
          </div>
        </div>
      </div>
    `}};ms.styles=cne,ms.properties={eventType:{type:String},text:{type:String},btnActive:{type:Boolean},editable:{type:Boolean},placeholder:{type:String},mentions:{type:Array},mentionList:{type:Object},participantsList:{type:Object},hideInput:{type:Boolean},mode:{type:String}},ms=he([ge("superviz-comments-comment-input")],ms);d();var sk=_e(ue),lne=[sk.styles,b0],vs=class extends sk{constructor(){super();this.focusInput=()=>{var e,i;this.inputElement||(this.inputElement=(i=(e=this.shadowRoot)==null?void 0:e.querySelector("superviz-comments-comment-input"))==null?void 0:i.shadowRoot.querySelector("textarea")),this.inputElement.focus()};this.setInputSide=()=>{let o=this.commentsSide==="right"?320:0,u=this.annotationSides.right+293,c=this.containerSides.right-o;if(u<c){this.horizontalSide="right";return}o=this.commentsSide==="left"?320:0;let l=this.annotationSides.left-293,h=this.containerSides.left+o;if(l>h){this.horizontalSide="left";return}this.horizontalSide=h-l>u-c?"right":"left"};this.createComment=({detail:e})=>{this.annotationSent=!0,document.body.dispatchEvent(new CustomEvent("create-annotation",{detail:{...e,position:{...this.originalPosition,type:"canvas"}}})),this.annotation=null};this.cancelTemporaryAnnotation=()=>{this.annotation=null};this.cancelTemporaryAnnotationEsc=e=>{this.annotation=null};this.avatar=()=>{if(this.type==="add"&&!this.showInput)return B`<div
        class="comments__annotation-pin__avatar comments__annotation-pin__avatar--add"
      >
        <superviz-icon name="add"></superviz-icon>
      </div>`;let e=this.userAvatar;return e?B`<div class="comments__annotation-pin__avatar">
        <img src=${e} />
      </div>`:B`<div class="comments__annotation-pin__avatar">
      <p class="text text-bold text-big">${this.userInitial}</p>
    </div>`};this.input=()=>{if(!(!this.showInput||this.annotationSent))return B`<div class="floating-input">
      <superviz-comments-comment-input
        @create-annotation=${this.createComment}
        eventType="create-annotation"
        @comment-input-ready=${this.focusInput}
        participantsList=${JSON.stringify(this.participantsList)}
      >
      </superviz-comments-comment-input>
    </div>`};this.position={x:0,y:0},setTimeout(()=>{this.firstLoad=!1},800)}updated(e){super.updated(e),!(!e.has("movedPosition")||!this.annotationSides)&&(this.annotationSides=this.pinAnnotation.getBoundingClientRect(),this.setInputSide(),this.inputElement&&this.focusInput())}firstUpdated(e){var i;super.firstUpdated(e),je.call(this,["comments"]),this.showInput&&(this.originalPosition={...this.position},this.pinAnnotation=(i=this.shadowRoot)==null?void 0:i.querySelector(".comments__annotation-pin"),this.annotationSides=this.pinAnnotation.getBoundingClientRect(),this.setInputSide())}connectedCallback(){if(super.connectedCallback(),this.type!=="add")return;let{localParticipant:e}=this.useStore("global-store");e.subscribe(i=>{var n;this.localAvatar=(n=i==null?void 0:i.avatar)==null?void 0:n.imageUrl,this.localName=i==null?void 0:i.name}),window.document.body.addEventListener("close-temporary-annotation",this.cancelTemporaryAnnotation),window.document.body.addEventListener("keyup",i=>{i.key==="Escape"&&this.cancelTemporaryAnnotationEsc(i)})}disconnectedCallback(){super.disconnectedCallback(),this.type==="add"&&(window.document.body.removeEventListener("close-temporary-annotation",this.cancelTemporaryAnnotation),window.document.body.removeEventListener("keyup",e=>{e.key==="Escape"&&this.cancelTemporaryAnnotationEsc(e)}))}get userAvatar(){var e,i,n,o;return((o=(n=(i=(e=this.annotation)==null?void 0:e.comments)==null?void 0:i.at(0))==null?void 0:n.participant)==null?void 0:o.avatar)||this.localAvatar}get userInitial(){var i,n,o,u;return((((u=(o=(n=(i=this.annotation)==null?void 0:i.comments)==null?void 0:n.at(0))==null?void 0:o.participant)==null?void 0:u.name)??this.localName)||"Anonymous")[0].toUpperCase()}emitClick(){var e;document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:(e=this.annotation)==null?void 0:e.uuid}}))}render(){let e={"comments__annotation-pin":!0,preload:this.firstLoad===void 0,"comments__annotation-pin--active":this.active,"comments__cursor-pointer":this.type==="add"&&!this.showInput,"comments__annotation-pin--add":this.type==="add"&&this.showInput,[this.horizontalSide]:!0},i={"comments__annotation-pin-wrapper":!0,"comments__annotation-pin-wrapper--new":this.newPin},n=this.keepPositionRatio?"%":"px",o=`top: ${this.position.y}${n}; left: ${this.position.x}${n};`;return this.type==="add"?B`
        <div class=${le(e)} style=${o}>${this.avatar()} ${this.input()}</div>
      `:B`<div class=${le(i)} style=${o}>
      <div @click=${this.emitClick} class=${le(e)}>${this.avatar()}</div>
    </div> `}};vs.styles=lne,vs.properties={type:{type:String},annotation:{type:Object},position:{type:Object},active:{type:Boolean},showInput:{type:Boolean},containerSides:{type:Object},horizontalSide:{type:String},commentsSide:{type:String},movedPosition:{type:String},pinAnnotation:{type:Object},localAvatar:{type:String},annotationSent:{type:Boolean},localName:{type:String},keepPositionRatio:{type:Boolean},participantsList:{type:Object},firstLoad:{type:Boolean},newPin:{type:Boolean}},vs=he([ge("superviz-comments-annotation-pin")],vs);d();var ak=_e(ue),dne=[ak.styles,g0],gs=class extends ak{constructor(){super(...arguments);this.selectAnnotation=e=>{let{uuid:i}=this.annotation;document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:i}}))};this.resolveAnnotation=({detail:e})=>{let{uuid:i}=this.annotation,{resolved:n,type:o}=e,u=o==="resolve-annotation"&&this.annotationFilter==="All comments";this.emitEvent("resolve-annotation",{uuid:i,resolved:n}),u&&(this.shouldShowUndoResolved=!0)};this.hideUndoResolved=()=>{this.shouldShowUndoResolved=!1};this.generateExpandedCommentsTemplate=(e,i)=>{var n,o,u,c;return i===0?B``:B`
      <superviz-comments-comment-item
        uuid=${e.uuid}
        avatar=${(c=(u=(o=(n=this.annotation)==null?void 0:n.comments)==null?void 0:o.at(i))==null?void 0:u.participant)==null?void 0:c.avatar}
        username=${e.participant.name||"Anonymous"}
        text=${e.text}
        createdAt=${e.createdAt}
        annotationId=${this.annotation.uuid}
        participantsList=${JSON.stringify(this.participantsList)}
        mentions=${JSON.stringify(e.mentions)}
        class="comments__replies"
      ></superviz-comments-comment-item>
    `};this.updateEditMode=({detail:{editing:e}})=>{this.hideInput=e}}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{je.call(this,["comments"])})}get filterIsAll(){return this.annotationFilter==="All comments"}get filterIsResolved(){return this.annotationFilter==="Resolved comments"}get shouldHideAnnotation(){return{hidden:this.resolved&&this.filterIsAll||!this.resolved&&this.filterIsResolved}}get replies(){return[...this.annotation.comments].splice(1).length}get repliesSize(){return this.replies>=5?5:this.replies}get replyText(){return this.replies!==1?"replies":"reply"}get isSelected(){return this.selected===this.annotation.uuid}get annotationClasses(){return{comments__thread:!0,"comments__thread--selected":this.isSelected,"extra-space-bottom":this.replies}}get mainAnnotationClasses(){return{"comments__main-annotation":!0,"comments__main-annotation--selected":this.isSelected}}get hrClasses(){return{"sv-hr":!0,hidden:this.isLastAnnotation}}get avatarCommentsClasses(){return{"avatars-comments":!0,"comment-avatar--expand":!this.expandComments&&this.replies>1,invisible:!(!this.expandComments&&this.replies>=1)}}get containerWrapperClasses(){return{"comments-container-wrapper":!0,show:this.isSelected&&this.expandComments}}get commentsClasses(){return{"comments-container":!0,"comment-item--expand":this.isSelected&&this.expandComments,show:this.isSelected&&this.expandComments}}updated(e){if(e.has("selected")){let i=this.selected===this.annotation.uuid;this.expandComments=i}}createComment({detail:e}){let{text:i,mentions:n}=e;this.emitEvent("create-comment",{uuid:this.annotation.uuid,mentions:n,text:i})}generateAvatarCommentsTemplate(){var i,n,o,u,c,l;let e=[];for(let h=1;h<=this.repliesSize;h++)(n=(i=this.annotation.comments[h])==null?void 0:i.participant)!=null&&n.avatar?e.push(B`
          <div class="avatar">
            <img src=${(u=(o=this.annotation.comments[h])==null?void 0:o.participant)==null?void 0:u.avatar} />
          </div>
        `):e.push(B`
          <div class="avatar">
            <p class="text text-bold">
              ${((l=(c=this.annotation.comments[h])==null?void 0:c.participant.name[0])==null?void 0:l.toUpperCase())||"A"}
            </p>
          </div>
        `);return B`
      ${e}
      <div class="text text-big sv-gray-500">${this.replies} ${this.replyText}</div>
    `}annotationResolvedTemplate(){return this.shouldShowUndoResolved?B`
      <superviz-comments-annotation-resolved
        @undo-resolve=${this.resolveAnnotation}
        @hide=${this.hideUndoResolved}
        class=${le({hidden:this.filterIsResolved,"comments__resolved-annotation-message":!0})}
      >
      </superviz-comments-annotation-resolved>
    `:B``}get inputClasses(){return{"hide-input":this.hideInput}}get wrapperClasses(){return{wrapper:!0,"show-wrapper":!this.resolved&&this.filterIsAll||this.resolved&&this.filterIsResolved}}render(){var i,n,o,u,c,l,h,f,v,b,w;let e={"comments__complete-annotation":!0,"comments__hide-complete-annotation":this.shouldShowUndoResolved};return B`
      <div class="${le(e)}">
        ${this.annotationResolvedTemplate()}

        <div class=${le(this.wrapperClasses)}>
          <div class=${le(this.shouldHideAnnotation)}>
            <div class=${le(this.annotationClasses)} @click=${this.selectAnnotation}>
              <div class=${le(this.mainAnnotationClasses)}>
                <superviz-comments-comment-item
                  uuid=${(i=this.annotation.comments)==null?void 0:i[0].uuid}
                  annotationId=${this.annotation.uuid}
                  username=${((o=(n=this.annotation.comments)==null?void 0:n[0].participant)==null?void 0:o.name)||"Anonymous"}
                  text=${(u=this.annotation.comments)==null?void 0:u[0].text}
                  createdAt=${(c=this.annotation.comments)==null?void 0:c[0].createdAt}
                  participantsList=${JSON.stringify(this.participantsList)}
                  primaryComment
                  avatar=${(v=(f=(h=(l=this.annotation)==null?void 0:l.comments)==null?void 0:h.at(0))==null?void 0:f.participant)==null?void 0:v.avatar}
                  resolvable
                  ?resolved=${this.resolved}
                  annotationFilter=${this.annotationFilter}
                  @resolve-annotation=${this.resolveAnnotation}
                  mentions=${JSON.stringify((b=this.annotation.comments)==null?void 0:b[0].mentions)}
                  class="comments__annotation"
                  @edit-comment=${this.updateEditMode}
                ></superviz-comments-comment-item>
              </div>

              <div class=${le(this.containerWrapperClasses)}>
                <div class=${le(this.commentsClasses)}>
                  ${(w=this.annotation.comments)==null?void 0:w.map(this.generateExpandedCommentsTemplate)}
                  <span class=${le(this.inputClasses)}>
                    <superviz-comments-comment-input
                      @create-comment=${this.createComment}
                      eventType="create-comment"
                      @click=${x=>x.stopPropagation()}
                      placeholder="Reply"
                      participantsList=${JSON.stringify(this.participantsList)}
                    ></superviz-comments-comment-input>
                  </span>
                </div>
              </div>
              <div class=${le(this.avatarCommentsClasses)}>
                <div class="avatar-container">${this.generateAvatarCommentsTemplate()}</div>
              </div>
            </div>
            <div class=${le(this.hrClasses)}></div>
          </div>
        </div>
      </div>
    `}};gs.styles=dne,gs.properties={annotation:{type:Object},expandComments:{type:Boolean},selected:{type:String,reflect:!0},resolved:{type:Boolean},shouldShowUndoResolved:{type:Boolean},isLastAnnotation:{type:Boolean},annotationFilter:{type:String},participantsList:{type:Object},hideInput:{type:Boolean}},gs=he([ge("superviz-comments-annotation-item")],gs);d();var uk=_e(ue),pne=[uk.styles],ys=class extends uk{constructor(){super(...arguments);this.emitEventOpenModal=()=>{window.document.body.dispatchEvent(new CustomEvent("superviz-modal--open",{detail:{title:"DELETE COMMENT",body:B`<span class="text text-big sv-gray-600"
            >Are you sure you want to delete this comment? <br />
            This action cannot be undone</span
          >`,confirmLabel:"DELETE",confirm:!0,cancel:!0},bubbles:!0,composed:!0}))};this.toggle=()=>{this.open=!this.open}}firstUpdated(){window.document.body.addEventListener("superviz-modal--close",()=>{this.open&&this.emitEvent("close",{},{bubbles:!1,composed:!1})}),window.document.body.addEventListener("superviz-modal--confirm",()=>{this.open&&(this.emitEvent("confirm",{},{bubbles:!1,composed:!1}),this.emitEventCloseModal())})}updated(e){e.has("open")&&(this.open&&setTimeout(()=>this.emitEventOpenModal()),this.open||setTimeout(()=>this.emitEventCloseModal()))}emitEventCloseModal(){this.open&&(window.document.body.dispatchEvent(new CustomEvent("superviz-modal--close",{detail:{open:!0},bubbles:!0,composed:!0})),this.emitEvent("close",{},{bubbles:!1,composed:!1}))}render(){let e=()=>{if(this.useSlot)return B`<slot name="modal-handler" @click=${this.toggle}></slot>`},i=()=>{if(this.open)return B` <superviz-modal></superviz-modal> `};return B` ${e()} ${i()} `}};ys.styles=pne,ys.properties={open:{type:Boolean},useSlot:{type:Boolean}},ys=he([ge("superviz-comments-delete-comments-modal")],ys);d();var ck=_e(ue),hne=[ck.styles,y0],fne=10*1e3,bs=class extends ck{constructor(){super();this.setTimer=()=>{clearTimeout(this.timeout),this.isCanceled=!1,this.timeout=setTimeout(()=>{this.isCanceled||(this.timeToHide=0,this.isCanceled=!1,this.hide())},this.timeToHide)};this.timeToHide=fne,this.isCanceled=!1}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{je.call(this,["comments"]),this.setTimer()})}hide(){this.emitEvent("hide",{},{bubbles:!1,composed:!1})}undone(){this.isCanceled=!0,this.hide(),this.emitEvent("undo-resolve",{type:"undo-resolve",resolved:!1},{bubbles:!1,composed:!1}),clearTimeout(this.timeout)}render(){return this.timeToHide===0?B``:this.isCanceled?B``:B`
      <div class="comments__annotation-resolved">
        <span class="text text-big sv-gray-700 comments__annotation-resolved__text"
          >You resolved this comment</span
        >
        <button
          id="undone"
          @click=${this.undone}
          class="icon-button icon-button--clickable icon-button--medium comments__annotation-resolved__unresolve_button"
        >
          <superviz-icon name="undo" size="md"></superviz-icon>
        </button>
      </div>
    `}};bs.styles=hne,bs.properties={timeToHide:{type:Number},isCanceled:{type:Boolean}},bs=he([ge("superviz-comments-annotation-resolved")],bs);d();var lk=_e(ue),mne=[lk.styles,_0],Ql=[{label:"All comments"},{label:"Resolved comments"}],_s=class extends lk{constructor(){super();this.selectClick=()=>{this.caret=this.caret==="down"?"up":"down"};this.dropdownOptionsHandler=({detail:e})=>{this.emitEvent("select",{filter:e}),this.selectClick()};this.caret="down"}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{je.call(this,["comments"])})}render(){let e=this.filter==="All comments"?Ql[0].label:Ql[1].label;Ql[0].active=this.filter==="All comments",Ql[1].active=this.filter==="Resolved comments";let i={text:!0,"text-bold":!0,"select-content":!0,"comments__filter__selected-label":!0,"sv-gray-500":this.caret==="down","sv-gray-700":this.caret==="up"};return B`
      <div class="comments__filter-container">
        <div class="comments__filter">
          <superviz-dropdown
            options=${JSON.stringify(Ql)}
            position="bottom-left"
            right-offset="100px"
            @click=${this.selectClick}
            @selected=${this.dropdownOptionsHandler}
            @close=${this.selectClick}
            classesPrefix="comments__dropdown"
            parentComponent="comments"
          >
            <div class="comments__filter__toggle-button" slot="dropdown">
              <span class=${le(i)}>${e}</span>
              <div class="comments__filter__icon">
                <superviz-icon name=${this.caret} size="xs"></superviz-icon>
              </div>
            </div>
          </superviz-dropdown>
        </div>
      </div>
    `}};_s.styles=mne,_s.properties={filter:{type:String},caret:{type:String}},_s=he([ge("superviz-comments-annotation-filter")],_s);d();var dk=_e(ue),vne=[dk.styles,E0],Es=class extends dk{constructor(){super();this.onTogglePinActive=({detail:{isActive:e}})=>{this.isActive=e};this.isHidden=!0,this.positionStyles="top: 20px; left: 20px;",this.shouldHide=!1,this.commentsPosition="left"}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{je.call(this,["comments"])}),this.mouseHovering=!1;let i=this.shadowRoot.querySelector(".comments__floating-button");i.addEventListener("mouseenter",()=>{setTimeout(()=>i.classList.add("comments-floating-button-hovered"),300),this.mouseHovering=!0}),i.addEventListener("mouseleave",()=>{i.classList.remove("comments-floating-button-hovered"),this.mouseHovering=!1})}toggle(){this.emitEvent("toggle",{})}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("toggle-annotation-sidebar",()=>{this.isHidden=!this.isHidden}),window.document.body.addEventListener("toggle-pin-active",this.onTogglePinActive)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("toggle-annotation-sidebar",()=>{this.isHidden=!this.isHidden}),window.document.body.removeEventListener("toggle-pin-active",this.onTogglePinActive)}updated(e){super.updated(e),this.updateComplete.then(()=>{let i=this.shadowRoot.querySelector(".comments__floating-button");i&&i.setAttribute("style",this.positionStyles)})}calculateIfShouldHide(){var I;let e=(I=document.getElementsByTagName("superviz-comments")[0])==null?void 0:I.shadowRoot.querySelector(".superviz-comments"),i=this.shadowRoot.querySelector(".comments__floating-button");if(!e||!i)return;let{left:n,right:o,top:u,bottom:c}=e.getBoundingClientRect(),{left:l,right:h,top:f,bottom:v}=i.getBoundingClientRect(),b=c>f&&v>u,w=u<v&&f<c,x=o>l&&h>n,C=n<h&&l<o;this.shouldHide=(w||b)&&(x||C)}render(){this.calculateIfShouldHide();let e={"comments__floating-button":!0,"hide-button":!this.isHidden&&this.shouldHide,"is-active":this.isActive,"is-inactive":!this.isActive},i={"comments__floating-button-text-box":!0,"comments__floating-button-text-box--hovered":this.mouseHovering},n={text:!0,"text-big":!0,"text-bold":!0,"not-hovered":!this.mouseHovering,"comments__floating-button__text":!0,textActive:this.isActive,textInactive:!this.isActive};return B` <button @click=${this.toggle} class="${le(e)}">
      <div class="comments__floating-button__icon">
        <superviz-icon
          size="sm"
          name="comment"
          color=${this.mouseHovering||this.isActive?"white":"black"}
        ></superviz-icon>
        <svg class="cross" width="8px" height="8px" viewBox="0 0 8 8">
          <rect class="cross-bar-1" x="0" y="3" width="8px" height="2px" />
          <rect class="cross-bar-2" x="0" y="3" width="8px" height="2px" />
        </svg>
      </div>
      <div class=${le(i)}>
        <p class="${le(n)} comment">Comment</p>
        <p class="${le(n)} cancel">Cancel</p>
      </div>
    </button>`}};Es.styles=vne,Es.properties={positionStyles:{type:String},isHidden:{type:Boolean},commentsPosition:{type:String},isActive:{type:Boolean},mouseHovering:{type:Boolean}},Es=he([ge("superviz-comments-button")],Es);d();var pk=_e(ue),gne=[pk.styles,S0],ws=class extends pk{constructor(){super();this.showMentionList=()=>{var i;let e=(i=this.shadowRoot)==null?void 0:i.getElementById("mention-list");e==null||e.style.setProperty("display","block"),e==null||e.style.setProperty("margin-top","1px"),e.addEventListener("wheel",this.stopHandleZoom)};this.hideMentionList=()=>{var i;let e=(i=this.shadowRoot)==null?void 0:i.getElementById("mention-list");e.removeEventListener("wheel",this.stopHandleZoom),e==null||e.style.setProperty("display","none")};this.selectParticipant=e=>{this.emitEvent("participant-selected",e,{bubbles:!1,composed:!1}),this.hideMentionList()};this.stopHandleZoom=e=>{var n;let i=(n=this.shadowRoot)==null?void 0:n.getElementById("mention-list");i.scrollTop+=e.deltaY,e.preventDefault()};this.participants=[]}updated(e){if(e.has("participants")&&this.participants.length>0){this.showMentionList();return}this.hideMentionList()}getAvatar(e){var i;return e.avatar?B`<img class="avatar" src=${e.avatar} />`:B`<div class="default-avatar">
      <p class="text text-bold">${((i=e.name[0])==null?void 0:i.toUpperCase())||"A"}</p>
    </div>`}render(){let e=i=>B`
      <div class="mention-item" @click=${()=>this.selectParticipant(i)}>
        ${this.getAvatar(i)}
        <div class="avatar-type">${i.name}</div>
      </div>
    `;return B`
      <div id="mention-list">
        ${Un(this.participants,i=>i.id,i=>B` ${e(i)} `)}
      </div>
    `}};ws.styles=gne,ws.properties={participants:{type:Object}},ws=he([ge("superviz-comments-mention-list")],ws);d();d();d();d();var dE=ae`
  .who-is-online__participant-list {
    display: flex;
    align-items: center;
    gap: 4px;
    position: relative;
  }

  .who-is-online {
    display: flex;
    flex-direction: column;
    position: fixed;
    z-index: 99;
  }

  .who-is-online__presence-control-message__text {
    margin: 0;
  }

  .who-is-online__participant {
    border-radius: 50%;
    box-sizing: border-box;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    cursor: pointer;
    transition: opacity 0.3s ease-in-out;
    border: 2px solid #878291;
    border-radius: 50%;
    max-width: 40px;
    flex: 1 0 40px;
  }

  .followed {
    border-style: dashed !important;
    animation: rotate 15s linear infinite;
  }

  .followed .who-is-online__participant__avatar {
    animation: nullifyRotate 15s linear infinite;
  }

  .private {
    opacity: 0.3;
  }

  @keyframes rotate {
    100% {
      transform: rotate(1turn);
    }
  }

  @keyframes nullifyRotate {
    100% {
      transform: rotate(-1turn);
    }
  }

  .who-is-online__participant.disable-dropdown {
    cursor: default;
  }

  .who-is-online__participant__avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Open Sans';
    font-size: 14px;
    line-height: 14px;
    line-height: 14px;
    font-weight: bold;
    color: #26242a;
    object-fit: contain;
  }

  .superviz-who-is-online__excess {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: Roboto;
    font-size: 14px;
    line-height: 16px;
    text-align: center;
    font-weight: bold;
    cursor: pointer;
    color: #aea9b8;
  }

  .excess_participants:hover,
  .excess_participants--open {
    background-color: #aea9b8 !important;
  }

  .excess_participants:hover > div,
  .excess_participants--open > div {
    color: #fff !important;
  }

  @media (max-width: 780px) {
    .who-is-online__participant {
      width: 32px;
      height: 32px;
    }

    .who-is-online__participant {
      flex: 1 0 32px;
      max-width: 32px;
    }

    .who-is-online__participant__avatar {
      width: 24px;
      height: 24px;
    }

    .who-is-online__participant-list {
      gap: 8px;
    }

    .superviz-who-is-online__excess {
      width: 24px;
      height: 24px;
      font-size: 12px;
      line-height: 12px;
    }
  }
`;d();var pE=ae`
  .dropdown {
    position: relative;
  }

  .who-is-online__extra-participant {
    display: flex;
    user-select: none;
    align-items: center;
    justify-items: start;
    gap: 4px;
    width: 100%;
    padding: 10px;
    border-radius: 2px;
    position: relative;
    cursor: pointer;
  }

  .who-is-online__extra-participant.disable-dropdown {
    cursor: default;
  }

  .who-is-online__extra-participant:hover,
  .who-is-online__extra-participant--selected {
    background-color: rgb(var(--sv-gray-200));
  }

  .who-is-online__participant {
    border-radius: 50%;
    box-sizing: border-box;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border: 2px solid #878291;
    border-radius: 50%;
    max-width: 40px;
    flex: 1 0 40px;
  }

  .who-is-online__participant__avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Open Sans';
    font-size: 14px;
    line-height: 14px;
    font-weight: bold;
    color: #26242a;
    object-fit: contain;
  }

  .dropdown-list {
    position: relative;
    display: flex;
    flex-direction: column;
    z-index: 100;
  }

  .dropdown-list > div {
    padding: 4px;
    width: 216px;
    box-sizing: border-box;
  }

  .who-is-online__extras-dropdown {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    opacity: 0;
    display: none;
    background: #fff;
    padding: 0;
    z-index: 1;
    transition: 0.2s;
    border-radius: 3px;
    max-height: 240px;
    overflow: auto;
  }

  .who-is-online__extras-dropdown superviz-dropdown:hover {
    z-index: 999;
    position: relative;
  }

  .who-is-online__extras__arrow-icon {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .menu--bottom {
    top: 4px;
    min-width: 103px;
    position: absolute;
    right: 0;
  }

  .menu--top {
    bottom: 44px;
    min-width: 103px;
    position: absolute;
    right: 0px;
  }

  .menu-open {
    display: block;
    opacity: 1;
  }

  .superviz-who-is-online-dropdown__tooltip {
    background-color: rgb(var(--sv-gray-600));
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-items: center;
    position: absolute;
    top: 52px;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 2px;
    opacity: 0;
    cursor: default;
    display: none;
    transition: opacity 0.2s ease-in-out display 0s;
  }

  .superviz-who-is-online-dropdown__tooltip-arrow {
    width: 13px;
    height: 13px;
    position: absolute;
    top: 0px;
    left: 50%;
    transform: rotate(45deg) translateX(-50%);
    background-color: rgb(var(--sv-gray-600));
    border-top-left-radius: 3px;
  }

  .dropdown-content:hover + .superviz-who-is-online-dropdown__tooltip {
    opacity: 1;
    display: block;
  }

  .tooltip-content {
    margin: 0;
    font-family: roboto;
    white-space: nowrap;
    text-align: center;
    color: white;
    font-size: 14px;
  }

  .who-is-online__extras__username {
    font-size: 14px;
    line-height: 20px;
    font-family: 'Open sans';
    color: rgb(var(--sv-gray-600));
  }

  .icon {
    flex: 1;
    justify-content: flex-end;
    display: flex;
  }

  .hide-icon {
    display: none;
  }

  @media (max-width: 780px) {
    .sv-icon,
    .who-is-online__participant {
      width: 32px;
      height: 32px;
    }

    .who-is-online__participant {
      flex: 1 0 32px;
      max-width: 32px;
    }

    .who-is-online__participant__avatar {
      width: 24px;
      height: 24px;
    }

    .dropdown-list > div {
      width: 192px;
    }

    .menu--top {
      bottom: 36px;
    }

    .superviz-who-is-online-dropdown__tooltip {
      top: 44px;
    }
  }
`;d();var hE=ae`
  .who-is-online__controls-messages {
    position: absolute;
    right: 0;
    display: flex;
    flex-direction: column;
    gap: 5px;
    margin-top: 4px;
  }

  .who-is-online__presence-control-message {
    box-sizing: border-box;
    font-size: 12px;
    padding: 8px 10px;
    font-family: 'Roboto';
    border-radius: 6px;
    background-color: #fff;
    color: rgb(var(--sv-gray-700));
    border: 2px solid #e0e0e0;
    white-space: nowrap;
  }

  .who-is-online__pcm__text {
    margin: 0;
  }

  .who-is-online__presence-control-message span {
    margin-left: 3px;
    text-decoration: underline;
    cursor: pointer;
  }

  .left-side {
    left: 0;
  }

  .right-side {
    right: 0;
  }

  .left-side .who-is-online__presence-control-message {
    align-self: flex-start;
  }

  .right-side .who-is-online__presence-control-message {
    align-self: flex-end;
  }

  .bottom-side {
    bottom: auto;
    top: calc(100% + 5px);
  }

  .top-side {
    top: auto;
    bottom: calc(100% + 5px);
  }
`;var hk=_e(ue),yne=[hk.styles,dE],Ss=class extends hk{constructor(){super();this.onClickOutDropdown=({detail:e})=>{this.open=e.open};this.toggleShowTooltip=()=>{this.showTooltip=!this.showTooltip};this.dropdownOptionsHandler=({detail:{label:e,participantId:i,source:n}})=>{switch(e){case"go to":this.handleGoTo(i);break;case"follow":this.handleLocalFollow(i,n);break;case"unfollow":this.handleLocalUnfollow();break;case"private mode":this.handlePrivate(i);break;case"leave private mode":this.handleCancelPrivate(i);break;case"everyone follows me":this.handleFollow(i,n);break;case"stop followers":this.handleStopFollow();break;case"gather all":this.handleGatherAll(i);break;default:break}};this.position="top: 20px; right: 40px;",this.showTooltip=!0,this.open=!1;let{localParticipant:e}=this.useStore("global-store"),{participants:i,following:n,extras:o,disablePresenceControls:u}=this.useStore("who-is-online-store");i.subscribe(c=>{this.participants=c}),n.subscribe(),u.subscribe(),o.subscribe(c=>{this.amountOfExtras=c.length}),e.subscribe(c=>{var h,f;let l=(h=c.activeComponents)==null?void 0:h.some(v=>v.toLowerCase().includes("presence"));this.localParticipantData={id:c.id,joinedPresence:(f=c.activeComponents)==null?void 0:f.some(v=>v.toLowerCase().includes("presence"))},this.disableDropdown=!l})}firstUpdated(e){super.firstUpdated(e),je.call(this,"who-is-online")}toggleOpen(){this.open=!this.open}dropdownPosition(e){if(this.participants.length===1)return"bottom-center";if(e===0)return"bottom-right";let i=this.participants.length>4,n=e+1===this.participants.length;return i||!n?"bottom-center":"bottom-left"}renderExtras(){var i;if(!this.amountOfExtras)return;let e={"who-is-online__participant":!0,excess_participants:!0,"excess_participants--open":this.open};return B`
      <superviz-who-is-online-dropdown
        @selected=${this.dropdownOptionsHandler}
        @clickout=${this.onClickOutDropdown}
        ?disableDropdown=${this.disableDropdown}
        ?showSeeMoreTooltip=${this.showTooltip}
        @toggle=${this.toggleOpen}
        @toggle-dropdown-state=${this.toggleShowTooltip}
        ?localParticipantJoinedPresence=${(i=this.localParticipantData)==null?void 0:i.joinedPresence}
        classesPrefix="who-is-online__controls"
        parentComponent="who-is-online"
        tooltipPrefix="who-is-online"
      >
        <div class=${le(e)} slot="dropdown">
          <div class="superviz-who-is-online__excess who-is-online__extras">
            +${this.amountOfExtras}
          </div>
        </div>
      </superviz-who-is-online-dropdown>
    `}getAvatar({color:e,imageUrl:i,firstLetter:n,slotIndex:o}){if(i)return B` <img
        class="who-is-online__participant__avatar"
        style="background-color: ${e}"
        src=${i}
      />`;let u=ru.includes(o)?"#FFFFFF":"#26242A";return B`<div
      class="who-is-online__participant__avatar"
      style="background-color: ${e}; color: ${u}"
    >
      ${n}
    </div>`}cancelPrivate(){this.isPrivate=void 0,this.emitEvent("realtime.private-mode",{id:this.localParticipantData.id})}renderParticipants(){return this.participants.length?B`
      ${Un(this.participants,e=>e.id,(e,i)=>{var x;let{avatar:n,id:o,name:u,tooltip:c,controls:l,disableDropdown:h,isLocalParticipant:f}=e,v=this.dropdownPosition(i),b=((x=this.following)==null?void 0:x.id)===o,w={"who-is-online__participant":!0,"disable-dropdown":h,followed:b||this.everyoneFollowsMe&&f,private:f&&this.isPrivate};return B`
            <superviz-dropdown
              options=${JSON.stringify(l)}
              returnData=${JSON.stringify({participantId:o,source:"participants"})}
              position=${v}
              name=${u}
              tooltipData=${JSON.stringify(c)}
              classesPrefix="who-is-online__controls"
              parentComponent="who-is-online"
              tooltipPrefix="who-is-online"
              ?disabled=${h}
              ?canShowTooltip=${this.showTooltip}
              @selected=${this.dropdownOptionsHandler}
              @toggle-dropdown-state=${this.toggleShowTooltip}
            >
              <div
                slot="dropdown"
                class=${le(w)}
                style="border-color: ${n.color}"
              >
                ${this.getAvatar(n)}
              </div>
            </superviz-dropdown>
          `})}
    `:B``}handleGoTo(e){this.emitEvent("realtime.go-to-participant",{id:e})}handleLocalFollow(e,i){let{following:n}=this.useStore("who-is-online-store"),o=this.useStore("who-is-online-store")[i].value,{id:u,name:c,avatar:{color:l}}=o.find(({id:h})=>h===e);this.everyoneFollowsMe&&this.handleStopFollow(),n.publish({name:c,id:u,color:l}),this.emitEvent("realtime.local-follow-participant",{id:u,source:i})}handleLocalUnfollow(){let{following:e}=this.useStore("who-is-online-store");e.publish(void 0),this.emitEvent("realtime.local-follow-participant",{id:void 0})}handlePrivate(e){this.everyoneFollowsMe&&this.handleStopFollow(),this.emitEvent("realtime.private-mode",{id:e,isPrivate:!0}),this.isPrivate=!0}handleCancelPrivate(e){this.emitEvent("realtime.private-mode",{id:e,isPrivate:!1}),this.isPrivate=!1}handleFollow(e,i){this.isPrivate&&this.cancelPrivate();let n=this.useStore("who-is-online-store")[i].value,{id:o,name:u,avatar:{color:c,slotIndex:l}}=n.find(({id:f})=>f===e);this.everyoneFollowsMe=!0;let{following:h}=this.useStore("who-is-online-store");h.publish(void 0),this.emitEvent("realtime.follow-participant",{id:o,name:u,color:c,slotIndex:l})}handleStopFollow(){this.everyoneFollowsMe=!1,this.emitEvent("realtime.follow-participant",void 0)}handleGatherAll(e){this.isPrivate&&this.cancelPrivate(),this.emitEvent("realtime.gather",{id:e})}updated(e){super.updated(e),this.updateComplete.then(()=>{let i=this.shadowRoot.querySelector(".who-is-online");if(!i)return;let n=this.position.includes("left")?"flex-start":"flex-end",o=`${this.position} align-items: ${n};`;i.setAttribute("style",o)})}render(){return B`<div class="who-is-online who-is-online">
      <div class="who-is-online__participant-list">
        ${this.renderParticipants()} ${this.renderExtras()}
      </div>
      <superviz-who-is-online-messages
        ?everyoneFollowsMe=${this.everyoneFollowsMe}
        ?isPrivate=${this.isPrivate}
        @stop-following=${this.handleLocalUnfollow}
        @cancel-private=${this.cancelPrivate}
        @stop-everyone-follows-me=${this.handleStopFollow}
      ></superviz-who-is-online-messages>
    </div> `}};Ss.styles=yne,Ss.properties={position:{type:String},open:{type:Boolean},localParticipantColor:{type:String},isPrivate:{type:Boolean},everyoneFollowsMe:{type:Boolean},showTooltip:{type:Boolean}},Ss=he([ge("superviz-who-is-online")],Ss);d();d();d();var fk=_e(ue),_ne=[fk.styles,hE],Os=class extends fk{constructor(){super();this.repositionMessages=()=>{let{following:e,everyoneFollowsMe:i,isPrivate:n}=this;if(e||i||n){this.repositionInVerticalDirection(),this.repositionInHorizontalDirection(),this.animationFrame=window.requestAnimationFrame(this.repositionMessages);return}window.cancelAnimationFrame(this.animationFrame)};let{localParticipant:e}=this.useStore("global-store");e.subscribe(n=>{this.participantColor=n.color});let{following:i}=this.useStore("who-is-online-store");i.subscribe()}firstUpdated(e){super.firstUpdated(e),je.call(this,"who-is-online")}updated(e){super.updated(e),["following","everyoneFollowsMe","isPrivate"].some(n=>e.has(n))&&this.repositionMessages()}repositionInVerticalDirection(){let e=window.innerHeight/2,{top:i}=this.parentElement.getBoundingClientRect();if(i<e){this.verticalSide="bottom-side";return}this.verticalSide="top-side"}repositionInHorizontalDirection(){let e=window.innerWidth/2,{left:i}=this.parentElement.getBoundingClientRect();if(i<e){this.horizontalSide="left-side";return}this.horizontalSide="right-side"}stopFollowing(){this.emitEvent("stop-following",{})}cancelPrivate(){this.emitEvent("cancel-private",{})}stopEveryoneFollowsMe(){this.emitEvent("stop-everyone-follows-me",{})}followingMessage(){if(!this.following)return"";let{name:e,color:i}=this.following;return B`<div
      class="who-is-online__following-message who-is-online__presence-control-message who-is-online__pcm"
      style="border-color: ${i}"
    >
      <p class="who-is-online__presence-control-message__text who-is-online__pcm__text">
        Following: ${e}
        <span
          class="who-is-online__presence-control-message__cancel-action-button who-is-online__pcm__cancel-action-button"
          @click=${this.stopFollowing}
          >Stop</span
        >
      </p>
    </div>`}everyoneFollowsMeMessage(){return this.everyoneFollowsMe?B`<div
      class="who-is-online__follow-me-message who-is-online__presence-control-message who-is-online__pcm"
      style="border-color: ${this.participantColor}"
    >
      <p class="who-is-online__presence-control-message__text who-is-online__pcm__text">
        Everyone is following you
        <span
          class="who-is-online__presence-control-message__cancel-action-button who-is-online__pcm__cancel-action-button"
          @click=${this.stopEveryoneFollowsMe}
          >Stop</span
        >
      </p>
    </div>`:""}privateMessage(){return this.isPrivate?B`<div
      class="who-is-online__private-mode-message who-is-online__presence-control-message who-is-online__pcm"
      style="border-color: ${this.participantColor}"
    >
      <p class="who-is-online__presence-control-message__text who-is-online__pcm__text">
        You are in Private Mode
        <span
          class="who-is-online__presence-control-message__cancel-action-button who-is-online__pcm__cancel-action-button"
          @click=${this.cancelPrivate}
          >Cancel</span
        >
      </p>
    </div>`:""}render(){let e={"who-is-online__controls-messages":!0,[this.verticalSide]:!0,[this.horizontalSide]:!0};return B` <div class=${le(e)}>
      ${this.followingMessage()} ${this.everyoneFollowsMeMessage()} ${this.privateMessage()}
    </div>`}};Os.styles=_ne,Os.properties={everyoneFollowsMe:{type:Boolean},isPrivate:{type:Boolean},verticalSide:{type:String},horizontalSide:{type:String}},Os=he([ge("superviz-who-is-online-messages")],Os);d();var mk=_e(ue),Ene=[mk.styles,pE],xs=class extends mk{constructor(){super();this.onClickOutDropdown=e=>{if(e.stopPropagation(),!this.open)return;let i=e.composedPath(),n=this.shadowRoot.querySelector(".dropdown-content"),o=this.shadowRoot.querySelector(".dropdown-list"),c=this.shadowRoot.querySelector('slot[name="dropdown"]').assignedElements()[0],l=i.includes(n),h=i.includes(o),f=i.includes(c);l||h||f||this.close()};this.close=()=>{this.open=!1,this.selected="",this.emitEvent("clickout",{bubbles:!1,composed:!1})};this.selectParticipant=(e,i)=>()=>{i||(this.selected=e)};this.toggleShowTooltip=({detail:{open:e}})=>{this.showParticipantTooltip=!this.showParticipantTooltip,e||(this.selected="")};this.tooltip=()=>this.showSeeMoreTooltip?B`<superviz-tooltip
      tooltipData=${JSON.stringify({name:"See more"})}
      classesPrefix="who-is-online__tooltip"
      parentComponent="who-is-online"
    ></superviz-tooltip>`:"";this.repositionDropdown=()=>{if(!this.open||!this.parentElement){window.cancelAnimationFrame(this.animationFrame);return}this.repositionInVerticalDirection(),this.repositionInHorizontalDirection(),this.animationFrame=window.requestAnimationFrame(this.repositionDropdown)};this.repositionInVerticalDirection=()=>{let{bottom:e,top:i,height:n}=this.parentElement.getBoundingClientRect(),o=window.innerHeight/2;if(i+n/2>o){this.dropdownList.style.setProperty("bottom",`${window.innerHeight-i+8}px`),this.dropdownList.style.setProperty("top","");return}this.dropdownList.style.setProperty("top",`${e+8}px`),this.dropdownList.style.setProperty("bottom","")};this.repositionInHorizontalDirection=()=>{let{right:e,left:i}=this.parentElement.getBoundingClientRect();this.dropdownList.style.setProperty("right",`${window.innerWidth-e}px`),this.dropdownList.style.setProperty("left",`${i}px`)};this.selected="",this.showParticipantTooltip=!0;let{extras:e}=this.useStore("who-is-online-store");e.subscribe(i=>{this.participants=i})}firstUpdated(e){this.shadowRoot.querySelector(".who-is-online__extras-dropdown").scrollTop=0,je.call(this,"who-is-online"),this.dropdownList=this.shadowRoot.querySelector(".dropdown-list"),this.dropdownList.style.position="fixed"}updated(e){if(e.has("open")){if(this.emitEvent("toggle-dropdown-state",{open:this.open,font:"toggle"}),this.open){document.addEventListener("click",this.onClickOutDropdown);return}document.removeEventListener("click",this.onClickOutDropdown)}}getAvatar({color:e,imageUrl:i,firstLetter:n,slotIndex:o}){if(i)return B` <img
        class="who-is-online__participant__avatar"
        style="background-color: ${e}"
        src=${i}
      />`;let u=ru.includes(o)?"#FFFFFF":"#26242A";return B`<div
      class="who-is-online__participant__avatar"
      style="background-color: ${e}; color: ${u}"
    >
      ${n}
    </div>`}renderParticipants(){if(!this.participants)return;let e=this.participants.length-1;return Un(this.participants,i=>i.id,(i,n)=>{let{disableDropdown:o,id:u,avatar:c,controls:l,tooltip:h,name:f}=i,v={"who-is-online__extra-participant":!0,"who-is-online__extra-participant--selected":this.selected===u,"disable-dropdown":o},b={"who-is-online__extras__arrow-icon":!0,"hide-icon":o},w=n===e;return B`
        <superviz-dropdown
          options=${JSON.stringify(l)}
          returnData=${JSON.stringify({participantId:u,source:"extras"})}
          tooltipData=${JSON.stringify(h)}
          position="bottom-right"
          classesPrefix="who-is-online__controls"
          parentComponent="who-is-online"
          tooltipPrefix="who-is-online"
          ?disabled=${o}
          ?canShowTooltip=${this.showParticipantTooltip}
          ?shiftTooltipLeft=${!0}
          ?lastParticipant=${w}
          @toggle-dropdown-state=${this.toggleShowTooltip}
          @selected=${this.close}
        >
        <div 
          class=${le(v)} 
          @click=${this.selectParticipant(u,o)} slot="dropdown">
            <div class="who-is-online__participant" style="border-color: 
            ${c.color}">
              ${this.getAvatar(c)}
            </div>
            <span class="who-is-online__extras__username">${f}</span>
            <superviz-icon 
              class=${le(b)} 
              name="right" 
              color="var(--sv-gray-600)"
              size="sm"
            >
          </superviz-icon>
          </div>
        </div>
      </superviz-dropdown>
      `})}toggle(){this.open=!this.open,this.open&&(this.selected="",this.repositionDropdown())}get menuClasses(){return{"who-is-online__extras-dropdown":!0,"menu--bottom":this.position==="bottom-side","menu--top":this.position==="top-side","menu-open":this.open}}render(){return B`
      <div class="dropdown">
        <div class="dropdown-content" @click=${this.toggle}>
          <slot name="dropdown"></slot>
        </div>
        ${this.tooltip()}
      </div>
      <div class="dropdown-list">
        <div class=${le(this.menuClasses)}>${this.renderParticipants()}</div>
      </div>
    `}};xs.styles=Ene,xs.properties={open:{type:Boolean},align:{type:String},position:{type:String},selected:{type:String},disableDropdown:{type:Boolean},showSeeMoreTooltip:{type:Boolean},showParticipantTooltip:{type:Boolean},localParticipantJoinedPresence:{type:Boolean},dropdownList:{type:Object}},xs=he([ge("superviz-who-is-online-dropdown")],xs);d();d();function vk(r){if(typeof document<"u"){let t=document.createElement("style");t.id="superviz-style";let e=document.createTextNode(r);t.appendChild(e),document.head.appendChild(t)}}var gk=`@import"https://unpkg.com/@superviz/sv-icons@0.8.13/css/style.css";@import"https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap";:root{--sv-primary: 98, 16, 204}html,body{width:100%;height:100%;overflow:hidden}#sv-video-wrapper iframe{position:fixed;border:none;margin:0;padding:0;overflow:hidden;z-index:1000}#sv-video-wrapper iframe.sv-video-frame--right{top:var(--superviz-offset-top);right:var(--superviz-offset-right)}#sv-video-wrapper iframe.sv-video-frame--left{top:var(--superviz-offset-top);left:var(--superviz-offset-left)}#sv-video-wrapper iframe.sv-video-frame--bottom{bottom:var(--superviz-offset-bottom);right:var(--superviz-offset-right);width:100%}#sv-video-wrapper iframe.sv-video-frame--top{top:var(--superviz-offset-top);right:var(--superviz-offset-right);width:100%}#sv-video-wrapper iframe.sv-video-frame--no-overlay{display:none}.pointer-mouse{display:flex;height:17px;width:17px;background-image:url(https://production.cdn.superviz.com/static/pointers/0.svg)}.mouse-user-name{display:block;position:absolute;border-radius:30px;padding:2px 8px;font-weight:700;font-size:14px;font-family:Roboto,sans-serif;line-height:22px;margin-left:10px;margin-top:-6px;background:#ff0;white-space:nowrap}.mouse-follower{position:absolute;display:block;z-index:2;transition:all .15s linear,opacity 100s ease-in}
`;vk(gk);d();d();window&&(window.SuperVizRoom={init:Z_,CommentEvent:rc,MeetingEvent:Ws,DeviceEvent:Vd,RealtimeEvent:ni,MeetingState:ec,MeetingConnectionStatus:Vs,MeetingControlsEvent:Hs,ParticipantEvent:tc,FrameEvent:Us,LayoutMode:il,VideoConference:su,MousePointers:au,Realtime:uu,Comments:Ra,CanvasPin:Da,HTMLPin:qa,WhoIsOnline:cu,FormElements:lu,ParticipantType:zs,LayoutPosition:ou,CamerasPosition:nl,RealtimeComponentState:sl,RealtimeComponentEvent:al,ComponentLifeCycleEvent:co,WhoIsOnlineEvent:ic});var Sne=Z_;0&&(module.exports={BrowserService,CamerasPosition,CanvasPin,CommentEvent,Comments,ComponentLifeCycleEvent,DeviceEvent,FieldEvents,FormElements,FrameEvent,HTMLPin,LayoutMode,LayoutPosition,MeetingConnectionStatus,MeetingControlsEvent,MeetingEvent,MeetingState,MousePointers,Observer,ParticipantEvent,ParticipantType,PinMode,Presence3DManager,Realtime,RealtimeComponentEvent,RealtimeComponentState,RealtimeEvent,StoreType,VideoConference,WhoIsOnline,WhoIsOnlineEvent});
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

xmlhttprequest-ssl/lib/XMLHttpRequest.js:
  (**
   * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
   *
   * This can be used with JS designed for browsers to improve reuse of code and
   * allow the use of existing libraries.
   *
   * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
   *
   * @author Dan DeFelippi <dan@driverdan.com>
   * @contributor David Ellis <d.f.ellis@ieee.org>
   * @license MIT
   *)

@lit-labs/ssr-dom-shim/lib/element-internals.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit-labs/ssr-dom-shim/index.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/node/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit-labs/ssr-dom-shim/lib/element-internals.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit-labs/ssr-dom-shim/index.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-element/lit-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/node/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/custom-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/property.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/state.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/event-options.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/base.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/query.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/query-all.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/query-async.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/node/decorators/query-assigned-nodes.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/node/directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/node/directives/class-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/node/directive-helpers.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/node/directives/repeat.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=index.cjs.js.map
