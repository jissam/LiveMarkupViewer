import{a as Qg,b as w,c as N,d as go,e as Qe,f as IO,g as fi,h as le,i as q,j as f,k as _}from"./chunks/chunk-SEU2QL6W.js";var tv=Qe((zk,ev)=>{f();var yo=1e3,bo=yo*60,_o=bo*60,Kr=_o*24,LO=Kr*7,MO=Kr*365.25;ev.exports=function(r,t){t=t||{};var e=typeof r;if(e==="string"&&r.length>0)return RO(r);if(e==="number"&&isFinite(r))return t.long?NO(r):kO(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function RO(r){if(r=String(r),!(r.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(t){var e=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return e*MO;case"weeks":case"week":case"w":return e*LO;case"days":case"day":case"d":return e*Kr;case"hours":case"hour":case"hrs":case"hr":case"h":return e*_o;case"minutes":case"minute":case"mins":case"min":case"m":return e*bo;case"seconds":case"second":case"secs":case"sec":case"s":return e*yo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e;default:return}}}}function kO(r){var t=Math.abs(r);return t>=Kr?Math.round(r/Kr)+"d":t>=_o?Math.round(r/_o)+"h":t>=bo?Math.round(r/bo)+"m":t>=yo?Math.round(r/yo)+"s":r+"ms"}function NO(r){var t=Math.abs(r);return t>=Kr?nc(r,t,Kr,"day"):t>=_o?nc(r,t,_o,"hour"):t>=bo?nc(r,t,bo,"minute"):t>=yo?nc(r,t,yo,"second"):r+" ms"}function nc(r,t,e,i){var n=t>=e*1.5;return Math.round(r/e)+" "+i+(n?"s":"")}});var rv=Qe((Vk,iv)=>{f();function DO(r){e.debug=e,e.default=e,e.coerce=d,e.disable=s,e.enable=n,e.enabled=c,e.humanize=tv(),e.destroy=p,Object.keys(r).forEach(m=>{e[m]=r[m]}),e.names=[],e.skips=[],e.formatters={};function t(m){let y=0;for(let E=0;E<m.length;E++)y=(y<<5)-y+m.charCodeAt(E),y|=0;return e.colors[Math.abs(y)%e.colors.length]}e.selectColor=t;function e(m){let y,E=null,x,P;function k(...B){if(!k.enabled)return;let I=k,ne=Number(new Date),ve=ne-(y||ne);I.diff=ve,I.prev=y,I.curr=ne,y=ne,B[0]=e.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");let ke=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,(G,Se)=>{if(G==="%%")return"%";ke++;let Xe=e.formatters[Se];if(typeof Xe=="function"){let We=B[ke];G=Xe.call(I,We),B.splice(ke,1),ke--}return G}),e.formatArgs.call(I,B),(I.log||e.log).apply(I,B)}return k.namespace=m,k.useColors=e.useColors(),k.color=e.selectColor(m),k.extend=i,k.destroy=e.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(x!==e.namespaces&&(x=e.namespaces,P=e.enabled(m)),P),set:B=>{E=B}}),typeof e.init=="function"&&e.init(k),k}function i(m,y){let E=e(this.namespace+(typeof y=="undefined"?":":y)+m);return E.log=this.log,E}function n(m){e.save(m),e.namespaces=m,e.names=[],e.skips=[];let y,E=(typeof m=="string"?m:"").split(/[\s,]+/),x=E.length;for(y=0;y<x;y++)E[y]&&(m=E[y].replace(/\*/g,".*?"),m[0]==="-"?e.skips.push(new RegExp("^"+m.slice(1)+"$")):e.names.push(new RegExp("^"+m+"$")))}function s(){let m=[...e.names.map(l),...e.skips.map(l).map(y=>"-"+y)].join(",");return e.enable(""),m}function c(m){if(m[m.length-1]==="*")return!0;let y,E;for(y=0,E=e.skips.length;y<E;y++)if(e.skips[y].test(m))return!1;for(y=0,E=e.names.length;y<E;y++)if(e.names[y].test(m))return!0;return!1}function l(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function d(m){return m instanceof Error?m.stack||m.message:m}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}iv.exports=DO});var op=Qe((Ht,oc)=>{f();Ht.formatArgs=$O;Ht.save=BO;Ht.load=WO;Ht.useColors=FO;Ht.storage=UO();Ht.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ht.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function FO(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function $O(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+oc.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;r.splice(1,0,t,"color: inherit");let e=0,i=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(e++,n==="%c"&&(i=e))}),r.splice(i,0,t)}Ht.log=console.debug||console.log||(()=>{});function BO(r){try{r?Ht.storage.setItem("debug",r):Ht.storage.removeItem("debug")}catch(t){}}function WO(){let r;try{r=Ht.storage.getItem("debug")}catch(t){}return!r&&typeof process!="undefined"&&"env"in process&&(r=_.DEBUG),r}function UO(){try{return localStorage}catch(r){}}oc.exports=rv()(Ht);var{formatters:HO}=oc.exports;HO.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var sc=Qe((Yk,ov)=>{f();function zO(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}ov.exports=zO});var av=Qe((Xk,sv)=>{f();var GO=typeof window=="object"&&window&&window.Object===Object&&window;sv.exports=GO});var sp=Qe((eN,lv)=>{f();var VO=av(),jO=typeof self=="object"&&self&&self.Object===Object&&self,qO=VO||jO||Function("return this")();lv.exports=qO});var uv=Qe((iN,cv)=>{f();var ZO=sp(),JO=function(){return ZO.Date.now()};cv.exports=JO});var pv=Qe((nN,dv)=>{f();var YO=/\s/;function KO(r){for(var t=r.length;t--&&YO.test(r.charAt(t)););return t}dv.exports=KO});var fv=Qe((sN,hv)=>{f();var XO=pv(),QO=/^\s+/;function eC(r){return r&&r.slice(0,XO(r)+1).replace(QO,"")}hv.exports=eC});var ap=Qe((lN,mv)=>{f();var tC=sp(),iC=tC.Symbol;mv.exports=iC});var bv=Qe((uN,yv)=>{f();var gv=ap(),vv=Object.prototype,rC=vv.hasOwnProperty,nC=vv.toString,Ls=gv?gv.toStringTag:void 0;function oC(r){var t=rC.call(r,Ls),e=r[Ls];try{r[Ls]=void 0;var i=!0}catch(s){}var n=nC.call(r);return i&&(t?r[Ls]=e:delete r[Ls]),n}yv.exports=oC});var Ev=Qe((pN,_v)=>{f();var sC=Object.prototype,aC=sC.toString;function lC(r){return aC.call(r)}_v.exports=lC});var Sv=Qe((fN,Tv)=>{f();var wv=ap(),cC=bv(),uC=Ev(),dC="[object Null]",pC="[object Undefined]",xv=wv?wv.toStringTag:void 0;function hC(r){return r==null?r===void 0?pC:dC:xv&&xv in Object(r)?cC(r):uC(r)}Tv.exports=hC});var Pv=Qe((gN,Av)=>{f();function fC(r){return r!=null&&typeof r=="object"}Av.exports=fC});var Cv=Qe((yN,Ov)=>{f();var mC=Sv(),gC=Pv(),vC="[object Symbol]";function yC(r){return typeof r=="symbol"||gC(r)&&mC(r)==vC}Ov.exports=yC});var Rv=Qe((_N,Mv)=>{f();var bC=fv(),Iv=sc(),_C=Cv(),Lv=NaN,EC=/^[-+]0x[0-9a-f]+$/i,wC=/^0b[01]+$/i,xC=/^0o[0-7]+$/i,TC=parseInt;function SC(r){if(typeof r=="number")return r;if(_C(r))return Lv;if(Iv(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=Iv(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=bC(r);var e=wC.test(r);return e||xC.test(r)?TC(r.slice(2),e?2:8):EC.test(r)?Lv:+r}Mv.exports=SC});var Dv=Qe((wN,Nv)=>{f();var AC=sc(),lp=uv(),kv=Rv(),PC="Expected a function",OC=Math.max,CC=Math.min;function IC(r,t,e){var i,n,s,c,l,d,p=0,m=!1,y=!1,E=!0;if(typeof r!="function")throw new TypeError(PC);t=kv(t)||0,AC(e)&&(m=!!e.leading,y="maxWait"in e,s=y?OC(kv(e.maxWait)||0,t):s,E="trailing"in e?!!e.trailing:E);function x(G){var Se=i,Xe=n;return i=n=void 0,p=G,c=r.apply(Xe,Se),c}function P(G){return p=G,l=setTimeout(I,t),m?x(G):c}function k(G){var Se=G-d,Xe=G-p,We=t-Se;return y?CC(We,s-Xe):We}function B(G){var Se=G-d,Xe=G-p;return d===void 0||Se>=t||Se<0||y&&Xe>=s}function I(){var G=lp();if(B(G))return ne(G);l=setTimeout(I,k(G))}function ne(G){return l=void 0,E&&i?x(G):(i=n=void 0,c)}function ve(){l!==void 0&&clearTimeout(l),p=0,i=d=n=l=void 0}function ke(){return l===void 0?c:ne(lp())}function Ie(){var G=lp(),Se=B(G);if(i=arguments,n=this,d=G,Se){if(l===void 0)return P(d);if(y)return clearTimeout(l),l=setTimeout(I,t),x(d)}return l===void 0&&(l=setTimeout(I,t)),c}return Ie.cancel=ve,Ie.flush=ke,Ie}Nv.exports=IC});var cp=Qe((TN,Fv)=>{f();var LC=Dv(),MC=sc(),RC="Expected a function";function kC(r,t,e){var i=!0,n=!0;if(typeof r!="function")throw new TypeError(RC);return MC(e)&&(i="leading"in e?!!e.leading:i,n="trailing"in e?!!e.trailing:n),LC(r,t,{leading:i,maxWait:t,trailing:n})}Fv.exports=kC});var Xr=Qe((Eo,Ms)=>{f();(function(){var r,t="4.17.21",e=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",n="Expected a function",s="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",l=500,d="__lodash_placeholder__",p=1,m=2,y=4,E=1,x=2,P=1,k=2,B=4,I=8,ne=16,ve=32,ke=64,Ie=128,G=256,Se=512,Xe=30,We="...",pt=800,Si=16,Ai=1,Br=2,Wr=3,kt=1/0,St=9007199254740991,nl=17976931348623157e292,Ur=NaN,Nt=4294967295,ol=Nt-1,sl=Nt>>>1,al=[["ary",Ie],["bind",P],["bindKey",k],["curry",I],["curryRight",ne],["flip",Se],["partial",ve],["partialRight",ke],["rearg",G]],eo="[object Arguments]",ll="[object Array]",VE="[object AsyncFunction]",ns="[object Boolean]",os="[object Date]",jE="[object DOMException]",cl="[object Error]",ul="[object Function]",wf="[object GeneratorFunction]",li="[object Map]",ss="[object Number]",qE="[object Null]",$i="[object Object]",xf="[object Promise]",ZE="[object Proxy]",as="[object RegExp]",ci="[object Set]",ls="[object String]",dl="[object Symbol]",JE="[object Undefined]",cs="[object WeakMap]",YE="[object WeakSet]",us="[object ArrayBuffer]",to="[object DataView]",Fu="[object Float32Array]",$u="[object Float64Array]",Bu="[object Int8Array]",Wu="[object Int16Array]",Uu="[object Int32Array]",Hu="[object Uint8Array]",zu="[object Uint8ClampedArray]",Gu="[object Uint16Array]",Vu="[object Uint32Array]",KE=/\b__p \+= '';/g,XE=/\b(__p \+=) '' \+/g,QE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tf=/&(?:amp|lt|gt|quot|#39);/g,Sf=/[&<>"']/g,ew=RegExp(Tf.source),tw=RegExp(Sf.source),iw=/<%-([\s\S]+?)%>/g,rw=/<%([\s\S]+?)%>/g,Af=/<%=([\s\S]+?)%>/g,nw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ow=/^\w*$/,sw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ju=/[\\^$.*+?()[\]{}|]/g,aw=RegExp(ju.source),qu=/^\s+/,lw=/\s/,cw=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,uw=/\{\n\/\* \[wrapped with (.+)\] \*/,dw=/,? & /,pw=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hw=/[()=,{}\[\]\/\s]/,fw=/\\(\\)?/g,mw=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pf=/\w*$/,gw=/^[-+]0x[0-9a-f]+$/i,vw=/^0b[01]+$/i,yw=/^\[object .+?Constructor\]$/,bw=/^0o[0-7]+$/i,_w=/^(?:0|[1-9]\d*)$/,Ew=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pl=/($^)/,ww=/['\n\r\u2028\u2029\\]/g,hl="\\ud800-\\udfff",xw="\\u0300-\\u036f",Tw="\\ufe20-\\ufe2f",Sw="\\u20d0-\\u20ff",Of=xw+Tw+Sw,Cf="\\u2700-\\u27bf",If="a-z\\xdf-\\xf6\\xf8-\\xff",Aw="\\xac\\xb1\\xd7\\xf7",Pw="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ow="\\u2000-\\u206f",Cw=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Lf="A-Z\\xc0-\\xd6\\xd8-\\xde",Mf="\\ufe0e\\ufe0f",Rf=Aw+Pw+Ow+Cw,Zu="['\u2019]",Iw="["+hl+"]",kf="["+Rf+"]",fl="["+Of+"]",Nf="\\d+",Lw="["+Cf+"]",Df="["+If+"]",Ff="[^"+hl+Rf+Nf+Cf+If+Lf+"]",Ju="\\ud83c[\\udffb-\\udfff]",Mw="(?:"+fl+"|"+Ju+")",$f="[^"+hl+"]",Yu="(?:\\ud83c[\\udde6-\\uddff]){2}",Ku="[\\ud800-\\udbff][\\udc00-\\udfff]",io="["+Lf+"]",Bf="\\u200d",Wf="(?:"+Df+"|"+Ff+")",Rw="(?:"+io+"|"+Ff+")",Uf="(?:"+Zu+"(?:d|ll|m|re|s|t|ve))?",Hf="(?:"+Zu+"(?:D|LL|M|RE|S|T|VE))?",zf=Mw+"?",Gf="["+Mf+"]?",kw="(?:"+Bf+"(?:"+[$f,Yu,Ku].join("|")+")"+Gf+zf+")*",Nw="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dw="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vf=Gf+zf+kw,Fw="(?:"+[Lw,Yu,Ku].join("|")+")"+Vf,$w="(?:"+[$f+fl+"?",fl,Yu,Ku,Iw].join("|")+")",Bw=RegExp(Zu,"g"),Ww=RegExp(fl,"g"),Xu=RegExp(Ju+"(?="+Ju+")|"+$w+Vf,"g"),Uw=RegExp([io+"?"+Df+"+"+Uf+"(?="+[kf,io,"$"].join("|")+")",Rw+"+"+Hf+"(?="+[kf,io+Wf,"$"].join("|")+")",io+"?"+Wf+"+"+Uf,io+"+"+Hf,Dw,Nw,Nf,Fw].join("|"),"g"),Hw=RegExp("["+Bf+hl+Of+Mf+"]"),zw=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gw=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vw=-1,Ue={};Ue[Fu]=Ue[$u]=Ue[Bu]=Ue[Wu]=Ue[Uu]=Ue[Hu]=Ue[zu]=Ue[Gu]=Ue[Vu]=!0,Ue[eo]=Ue[ll]=Ue[us]=Ue[ns]=Ue[to]=Ue[os]=Ue[cl]=Ue[ul]=Ue[li]=Ue[ss]=Ue[$i]=Ue[as]=Ue[ci]=Ue[ls]=Ue[cs]=!1;var $e={};$e[eo]=$e[ll]=$e[us]=$e[to]=$e[ns]=$e[os]=$e[Fu]=$e[$u]=$e[Bu]=$e[Wu]=$e[Uu]=$e[li]=$e[ss]=$e[$i]=$e[as]=$e[ci]=$e[ls]=$e[dl]=$e[Hu]=$e[zu]=$e[Gu]=$e[Vu]=!0,$e[cl]=$e[ul]=$e[cs]=!1;var jw={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},qw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Jw={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yw=parseFloat,Kw=parseInt,jf=typeof window=="object"&&window&&window.Object===Object&&window,Xw=typeof self=="object"&&self&&self.Object===Object&&self,ot=jf||Xw||Function("return this")(),Qu=typeof Eo=="object"&&Eo&&!Eo.nodeType&&Eo,Hr=Qu&&typeof Ms=="object"&&Ms&&!Ms.nodeType&&Ms,qf=Hr&&Hr.exports===Qu,ed=qf&&jf.process,Jt=function(){try{var A=Hr&&Hr.require&&Hr.require("util").types;return A||ed&&ed.binding&&ed.binding("util")}catch(L){}}(),Zf=Jt&&Jt.isArrayBuffer,Jf=Jt&&Jt.isDate,Yf=Jt&&Jt.isMap,Kf=Jt&&Jt.isRegExp,Xf=Jt&&Jt.isSet,Qf=Jt&&Jt.isTypedArray;function Dt(A,L,C){switch(C.length){case 0:return A.call(L);case 1:return A.call(L,C[0]);case 2:return A.call(L,C[0],C[1]);case 3:return A.call(L,C[0],C[1],C[2])}return A.apply(L,C)}function Qw(A,L,C,V){for(var se=-1,Ae=A==null?0:A.length;++se<Ae;){var it=A[se];L(V,it,C(it),A)}return V}function Yt(A,L){for(var C=-1,V=A==null?0:A.length;++C<V&&L(A[C],C,A)!==!1;);return A}function ex(A,L){for(var C=A==null?0:A.length;C--&&L(A[C],C,A)!==!1;);return A}function em(A,L){for(var C=-1,V=A==null?0:A.length;++C<V;)if(!L(A[C],C,A))return!1;return!0}function cr(A,L){for(var C=-1,V=A==null?0:A.length,se=0,Ae=[];++C<V;){var it=A[C];L(it,C,A)&&(Ae[se++]=it)}return Ae}function ml(A,L){var C=A==null?0:A.length;return!!C&&ro(A,L,0)>-1}function td(A,L,C){for(var V=-1,se=A==null?0:A.length;++V<se;)if(C(L,A[V]))return!0;return!1}function He(A,L){for(var C=-1,V=A==null?0:A.length,se=Array(V);++C<V;)se[C]=L(A[C],C,A);return se}function ur(A,L){for(var C=-1,V=L.length,se=A.length;++C<V;)A[se+C]=L[C];return A}function id(A,L,C,V){var se=-1,Ae=A==null?0:A.length;for(V&&Ae&&(C=A[++se]);++se<Ae;)C=L(C,A[se],se,A);return C}function tx(A,L,C,V){var se=A==null?0:A.length;for(V&&se&&(C=A[--se]);se--;)C=L(C,A[se],se,A);return C}function rd(A,L){for(var C=-1,V=A==null?0:A.length;++C<V;)if(L(A[C],C,A))return!0;return!1}var ix=nd("length");function rx(A){return A.split("")}function nx(A){return A.match(pw)||[]}function tm(A,L,C){var V;return C(A,function(se,Ae,it){if(L(se,Ae,it))return V=Ae,!1}),V}function gl(A,L,C,V){for(var se=A.length,Ae=C+(V?1:-1);V?Ae--:++Ae<se;)if(L(A[Ae],Ae,A))return Ae;return-1}function ro(A,L,C){return L===L?gx(A,L,C):gl(A,im,C)}function ox(A,L,C,V){for(var se=C-1,Ae=A.length;++se<Ae;)if(V(A[se],L))return se;return-1}function im(A){return A!==A}function rm(A,L){var C=A==null?0:A.length;return C?sd(A,L)/C:Ur}function nd(A){return function(L){return L==null?r:L[A]}}function od(A){return function(L){return A==null?r:A[L]}}function nm(A,L,C,V,se){return se(A,function(Ae,it,Fe){C=V?(V=!1,Ae):L(C,Ae,it,Fe)}),C}function sx(A,L){var C=A.length;for(A.sort(L);C--;)A[C]=A[C].value;return A}function sd(A,L){for(var C,V=-1,se=A.length;++V<se;){var Ae=L(A[V]);Ae!==r&&(C=C===r?Ae:C+Ae)}return C}function ad(A,L){for(var C=-1,V=Array(A);++C<A;)V[C]=L(C);return V}function ax(A,L){return He(L,function(C){return[C,A[C]]})}function om(A){return A&&A.slice(0,cm(A)+1).replace(qu,"")}function Ft(A){return function(L){return A(L)}}function ld(A,L){return He(L,function(C){return A[C]})}function ds(A,L){return A.has(L)}function sm(A,L){for(var C=-1,V=A.length;++C<V&&ro(L,A[C],0)>-1;);return C}function am(A,L){for(var C=A.length;C--&&ro(L,A[C],0)>-1;);return C}function lx(A,L){for(var C=A.length,V=0;C--;)A[C]===L&&++V;return V}var cx=od(jw),ux=od(qw);function dx(A){return"\\"+Jw[A]}function px(A,L){return A==null?r:A[L]}function no(A){return Hw.test(A)}function hx(A){return zw.test(A)}function fx(A){for(var L,C=[];!(L=A.next()).done;)C.push(L.value);return C}function cd(A){var L=-1,C=Array(A.size);return A.forEach(function(V,se){C[++L]=[se,V]}),C}function lm(A,L){return function(C){return A(L(C))}}function dr(A,L){for(var C=-1,V=A.length,se=0,Ae=[];++C<V;){var it=A[C];(it===L||it===d)&&(A[C]=d,Ae[se++]=C)}return Ae}function vl(A){var L=-1,C=Array(A.size);return A.forEach(function(V){C[++L]=V}),C}function mx(A){var L=-1,C=Array(A.size);return A.forEach(function(V){C[++L]=[V,V]}),C}function gx(A,L,C){for(var V=C-1,se=A.length;++V<se;)if(A[V]===L)return V;return-1}function vx(A,L,C){for(var V=C+1;V--;)if(A[V]===L)return V;return V}function oo(A){return no(A)?bx(A):ix(A)}function ui(A){return no(A)?_x(A):rx(A)}function cm(A){for(var L=A.length;L--&&lw.test(A.charAt(L)););return L}var yx=od(Zw);function bx(A){for(var L=Xu.lastIndex=0;Xu.test(A);)++L;return L}function _x(A){return A.match(Xu)||[]}function Ex(A){return A.match(Uw)||[]}var wx=function A(L){L=L==null?ot:pr.defaults(ot.Object(),L,pr.pick(ot,Gw));var C=L.Array,V=L.Date,se=L.Error,Ae=L.Function,it=L.Math,Fe=L.Object,ud=L.RegExp,xx=L.String,Kt=L.TypeError,yl=C.prototype,Tx=Ae.prototype,so=Fe.prototype,bl=L["__core-js_shared__"],_l=Tx.toString,Ne=so.hasOwnProperty,Sx=0,um=function(){var o=/[^.]+$/.exec(bl&&bl.keys&&bl.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),El=so.toString,Ax=_l.call(Fe),Px=ot._,Ox=ud("^"+_l.call(Ne).replace(ju,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wl=qf?L.Buffer:r,hr=L.Symbol,xl=L.Uint8Array,dm=wl?wl.allocUnsafe:r,Tl=lm(Fe.getPrototypeOf,Fe),pm=Fe.create,hm=so.propertyIsEnumerable,Sl=yl.splice,fm=hr?hr.isConcatSpreadable:r,ps=hr?hr.iterator:r,zr=hr?hr.toStringTag:r,Al=function(){try{var o=Zr(Fe,"defineProperty");return o({},"",{}),o}catch(a){}}(),Cx=L.clearTimeout!==ot.clearTimeout&&L.clearTimeout,Ix=V&&V.now!==ot.Date.now&&V.now,Lx=L.setTimeout!==ot.setTimeout&&L.setTimeout,Pl=it.ceil,Ol=it.floor,dd=Fe.getOwnPropertySymbols,Mx=wl?wl.isBuffer:r,mm=L.isFinite,Rx=yl.join,kx=lm(Fe.keys,Fe),rt=it.max,ft=it.min,Nx=V.now,Dx=L.parseInt,gm=it.random,Fx=yl.reverse,pd=Zr(L,"DataView"),hs=Zr(L,"Map"),hd=Zr(L,"Promise"),ao=Zr(L,"Set"),fs=Zr(L,"WeakMap"),ms=Zr(Fe,"create"),Cl=fs&&new fs,lo={},$x=Jr(pd),Bx=Jr(hs),Wx=Jr(hd),Ux=Jr(ao),Hx=Jr(fs),Il=hr?hr.prototype:r,gs=Il?Il.valueOf:r,vm=Il?Il.toString:r;function v(o){if(qe(o)&&!ae(o)&&!(o instanceof _e)){if(o instanceof Xt)return o;if(Ne.call(o,"__wrapped__"))return yg(o)}return new Xt(o)}var co=function(){function o(){}return function(a){if(!Ge(a))return{};if(pm)return pm(a);o.prototype=a;var u=new o;return o.prototype=r,u}}();function Ll(){}function Xt(o,a){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=r}v.templateSettings={escape:iw,evaluate:rw,interpolate:Af,variable:"",imports:{_:v}},v.prototype=Ll.prototype,v.prototype.constructor=v,Xt.prototype=co(Ll.prototype),Xt.prototype.constructor=Xt;function _e(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nt,this.__views__=[]}function zx(){var o=new _e(this.__wrapped__);return o.__actions__=At(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=At(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=At(this.__views__),o}function Gx(){if(this.__filtered__){var o=new _e(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function Vx(){var o=this.__wrapped__.value(),a=this.__dir__,u=ae(o),h=a<0,g=u?o.length:0,b=rT(0,g,this.__views__),T=b.start,S=b.end,O=S-T,M=h?S:T-1,R=this.__iteratees__,D=R.length,W=0,j=ft(O,this.__takeCount__);if(!u||!h&&g==O&&j==O)return Um(o,this.__actions__);var X=[];e:for(;O--&&W<j;){M+=a;for(var me=-1,Q=o[M];++me<D;){var be=R[me],we=be.iteratee,Wt=be.type,wt=we(Q);if(Wt==Br)Q=wt;else if(!wt){if(Wt==Ai)continue e;break e}}X[W++]=Q}return X}_e.prototype=co(Ll.prototype),_e.prototype.constructor=_e;function Gr(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var h=o[a];this.set(h[0],h[1])}}function jx(){this.__data__=ms?ms(null):{},this.size=0}function qx(o){var a=this.has(o)&&delete this.__data__[o];return this.size-=a?1:0,a}function Zx(o){var a=this.__data__;if(ms){var u=a[o];return u===c?r:u}return Ne.call(a,o)?a[o]:r}function Jx(o){var a=this.__data__;return ms?a[o]!==r:Ne.call(a,o)}function Yx(o,a){var u=this.__data__;return this.size+=this.has(o)?0:1,u[o]=ms&&a===r?c:a,this}Gr.prototype.clear=jx,Gr.prototype.delete=qx,Gr.prototype.get=Zx,Gr.prototype.has=Jx,Gr.prototype.set=Yx;function Bi(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var h=o[a];this.set(h[0],h[1])}}function Kx(){this.__data__=[],this.size=0}function Xx(o){var a=this.__data__,u=Ml(a,o);if(u<0)return!1;var h=a.length-1;return u==h?a.pop():Sl.call(a,u,1),--this.size,!0}function Qx(o){var a=this.__data__,u=Ml(a,o);return u<0?r:a[u][1]}function e0(o){return Ml(this.__data__,o)>-1}function t0(o,a){var u=this.__data__,h=Ml(u,o);return h<0?(++this.size,u.push([o,a])):u[h][1]=a,this}Bi.prototype.clear=Kx,Bi.prototype.delete=Xx,Bi.prototype.get=Qx,Bi.prototype.has=e0,Bi.prototype.set=t0;function Wi(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var h=o[a];this.set(h[0],h[1])}}function i0(){this.size=0,this.__data__={hash:new Gr,map:new(hs||Bi),string:new Gr}}function r0(o){var a=Gl(this,o).delete(o);return this.size-=a?1:0,a}function n0(o){return Gl(this,o).get(o)}function o0(o){return Gl(this,o).has(o)}function s0(o,a){var u=Gl(this,o),h=u.size;return u.set(o,a),this.size+=u.size==h?0:1,this}Wi.prototype.clear=i0,Wi.prototype.delete=r0,Wi.prototype.get=n0,Wi.prototype.has=o0,Wi.prototype.set=s0;function Vr(o){var a=-1,u=o==null?0:o.length;for(this.__data__=new Wi;++a<u;)this.add(o[a])}function a0(o){return this.__data__.set(o,c),this}function l0(o){return this.__data__.has(o)}Vr.prototype.add=Vr.prototype.push=a0,Vr.prototype.has=l0;function di(o){var a=this.__data__=new Bi(o);this.size=a.size}function c0(){this.__data__=new Bi,this.size=0}function u0(o){var a=this.__data__,u=a.delete(o);return this.size=a.size,u}function d0(o){return this.__data__.get(o)}function p0(o){return this.__data__.has(o)}function h0(o,a){var u=this.__data__;if(u instanceof Bi){var h=u.__data__;if(!hs||h.length<e-1)return h.push([o,a]),this.size=++u.size,this;u=this.__data__=new Wi(h)}return u.set(o,a),this.size=u.size,this}di.prototype.clear=c0,di.prototype.delete=u0,di.prototype.get=d0,di.prototype.has=p0,di.prototype.set=h0;function ym(o,a){var u=ae(o),h=!u&&Yr(o),g=!u&&!h&&yr(o),b=!u&&!h&&!g&&fo(o),T=u||h||g||b,S=T?ad(o.length,xx):[],O=S.length;for(var M in o)(a||Ne.call(o,M))&&!(T&&(M=="length"||g&&(M=="offset"||M=="parent")||b&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||Gi(M,O)))&&S.push(M);return S}function bm(o){var a=o.length;return a?o[Td(0,a-1)]:r}function f0(o,a){return Vl(At(o),jr(a,0,o.length))}function m0(o){return Vl(At(o))}function fd(o,a,u){(u!==r&&!pi(o[a],u)||u===r&&!(a in o))&&Ui(o,a,u)}function vs(o,a,u){var h=o[a];(!(Ne.call(o,a)&&pi(h,u))||u===r&&!(a in o))&&Ui(o,a,u)}function Ml(o,a){for(var u=o.length;u--;)if(pi(o[u][0],a))return u;return-1}function g0(o,a,u,h){return fr(o,function(g,b,T){a(h,g,u(g),T)}),h}function _m(o,a){return o&&Oi(a,st(a),o)}function v0(o,a){return o&&Oi(a,Ot(a),o)}function Ui(o,a,u){a=="__proto__"&&Al?Al(o,a,{configurable:!0,enumerable:!0,value:u,writable:!0}):o[a]=u}function md(o,a){for(var u=-1,h=a.length,g=C(h),b=o==null;++u<h;)g[u]=b?r:Jd(o,a[u]);return g}function jr(o,a,u){return o===o&&(u!==r&&(o=o<=u?o:u),a!==r&&(o=o>=a?o:a)),o}function Qt(o,a,u,h,g,b){var T,S=a&p,O=a&m,M=a&y;if(u&&(T=g?u(o,h,g,b):u(o)),T!==r)return T;if(!Ge(o))return o;var R=ae(o);if(R){if(T=oT(o),!S)return At(o,T)}else{var D=mt(o),W=D==ul||D==wf;if(yr(o))return Gm(o,S);if(D==$i||D==eo||W&&!g){if(T=O||W?{}:cg(o),!S)return O?Z0(o,v0(T,o)):q0(o,_m(T,o))}else{if(!$e[D])return g?o:{};T=sT(o,D,S)}}b||(b=new di);var j=b.get(o);if(j)return j;b.set(o,T),$g(o)?o.forEach(function(Q){T.add(Qt(Q,a,u,Q,o,b))}):Dg(o)&&o.forEach(function(Q,be){T.set(be,Qt(Q,a,u,be,o,b))});var X=M?O?Nd:kd:O?Ot:st,me=R?r:X(o);return Yt(me||o,function(Q,be){me&&(be=Q,Q=o[be]),vs(T,be,Qt(Q,a,u,be,o,b))}),T}function y0(o){var a=st(o);return function(u){return Em(u,o,a)}}function Em(o,a,u){var h=u.length;if(o==null)return!h;for(o=Fe(o);h--;){var g=u[h],b=a[g],T=o[g];if(T===r&&!(g in o)||!b(T))return!1}return!0}function wm(o,a,u){if(typeof o!="function")throw new Kt(n);return Ts(function(){o.apply(r,u)},a)}function ys(o,a,u,h){var g=-1,b=ml,T=!0,S=o.length,O=[],M=a.length;if(!S)return O;u&&(a=He(a,Ft(u))),h?(b=td,T=!1):a.length>=e&&(b=ds,T=!1,a=new Vr(a));e:for(;++g<S;){var R=o[g],D=u==null?R:u(R);if(R=h||R!==0?R:0,T&&D===D){for(var W=M;W--;)if(a[W]===D)continue e;O.push(R)}else b(a,D,h)||O.push(R)}return O}var fr=Jm(Pi),xm=Jm(vd,!0);function b0(o,a){var u=!0;return fr(o,function(h,g,b){return u=!!a(h,g,b),u}),u}function Rl(o,a,u){for(var h=-1,g=o.length;++h<g;){var b=o[h],T=a(b);if(T!=null&&(S===r?T===T&&!Bt(T):u(T,S)))var S=T,O=b}return O}function _0(o,a,u,h){var g=o.length;for(u=pe(u),u<0&&(u=-u>g?0:g+u),h=h===r||h>g?g:pe(h),h<0&&(h+=g),h=u>h?0:Wg(h);u<h;)o[u++]=a;return o}function Tm(o,a){var u=[];return fr(o,function(h,g,b){a(h,g,b)&&u.push(h)}),u}function ht(o,a,u,h,g){var b=-1,T=o.length;for(u||(u=lT),g||(g=[]);++b<T;){var S=o[b];a>0&&u(S)?a>1?ht(S,a-1,u,h,g):ur(g,S):h||(g[g.length]=S)}return g}var gd=Ym(),Sm=Ym(!0);function Pi(o,a){return o&&gd(o,a,st)}function vd(o,a){return o&&Sm(o,a,st)}function kl(o,a){return cr(a,function(u){return Vi(o[u])})}function qr(o,a){a=gr(a,o);for(var u=0,h=a.length;o!=null&&u<h;)o=o[Ci(a[u++])];return u&&u==h?o:r}function Am(o,a,u){var h=a(o);return ae(o)?h:ur(h,u(o))}function _t(o){return o==null?o===r?JE:qE:zr&&zr in Fe(o)?iT(o):mT(o)}function yd(o,a){return o>a}function E0(o,a){return o!=null&&Ne.call(o,a)}function w0(o,a){return o!=null&&a in Fe(o)}function x0(o,a,u){return o>=ft(a,u)&&o<rt(a,u)}function bd(o,a,u){for(var h=u?td:ml,g=o[0].length,b=o.length,T=b,S=C(b),O=1/0,M=[];T--;){var R=o[T];T&&a&&(R=He(R,Ft(a))),O=ft(R.length,O),S[T]=!u&&(a||g>=120&&R.length>=120)?new Vr(T&&R):r}R=o[0];var D=-1,W=S[0];e:for(;++D<g&&M.length<O;){var j=R[D],X=a?a(j):j;if(j=u||j!==0?j:0,!(W?ds(W,X):h(M,X,u))){for(T=b;--T;){var me=S[T];if(!(me?ds(me,X):h(o[T],X,u)))continue e}W&&W.push(X),M.push(j)}}return M}function T0(o,a,u,h){return Pi(o,function(g,b,T){a(h,u(g),b,T)}),h}function bs(o,a,u){a=gr(a,o),o=hg(o,a);var h=o==null?o:o[Ci(ti(a))];return h==null?r:Dt(h,o,u)}function Pm(o){return qe(o)&&_t(o)==eo}function S0(o){return qe(o)&&_t(o)==us}function A0(o){return qe(o)&&_t(o)==os}function _s(o,a,u,h,g){return o===a?!0:o==null||a==null||!qe(o)&&!qe(a)?o!==o&&a!==a:P0(o,a,u,h,_s,g)}function P0(o,a,u,h,g,b){var T=ae(o),S=ae(a),O=T?ll:mt(o),M=S?ll:mt(a);O=O==eo?$i:O,M=M==eo?$i:M;var R=O==$i,D=M==$i,W=O==M;if(W&&yr(o)){if(!yr(a))return!1;T=!0,R=!1}if(W&&!R)return b||(b=new di),T||fo(o)?sg(o,a,u,h,g,b):eT(o,a,O,u,h,g,b);if(!(u&E)){var j=R&&Ne.call(o,"__wrapped__"),X=D&&Ne.call(a,"__wrapped__");if(j||X){var me=j?o.value():o,Q=X?a.value():a;return b||(b=new di),g(me,Q,u,h,b)}}return W?(b||(b=new di),tT(o,a,u,h,g,b)):!1}function O0(o){return qe(o)&&mt(o)==li}function _d(o,a,u,h){var g=u.length,b=g,T=!h;if(o==null)return!b;for(o=Fe(o);g--;){var S=u[g];if(T&&S[2]?S[1]!==o[S[0]]:!(S[0]in o))return!1}for(;++g<b;){S=u[g];var O=S[0],M=o[O],R=S[1];if(T&&S[2]){if(M===r&&!(O in o))return!1}else{var D=new di;if(h)var W=h(M,R,O,o,a,D);if(!(W===r?_s(R,M,E|x,h,D):W))return!1}}return!0}function Om(o){if(!Ge(o)||uT(o))return!1;var a=Vi(o)?Ox:yw;return a.test(Jr(o))}function C0(o){return qe(o)&&_t(o)==as}function I0(o){return qe(o)&&mt(o)==ci}function L0(o){return qe(o)&&Kl(o.length)&&!!Ue[_t(o)]}function Cm(o){return typeof o=="function"?o:o==null?Ct:typeof o=="object"?ae(o)?Mm(o[0],o[1]):Lm(o):Kg(o)}function Ed(o){if(!xs(o))return kx(o);var a=[];for(var u in Fe(o))Ne.call(o,u)&&u!="constructor"&&a.push(u);return a}function M0(o){if(!Ge(o))return fT(o);var a=xs(o),u=[];for(var h in o)h=="constructor"&&(a||!Ne.call(o,h))||u.push(h);return u}function wd(o,a){return o<a}function Im(o,a){var u=-1,h=Pt(o)?C(o.length):[];return fr(o,function(g,b,T){h[++u]=a(g,b,T)}),h}function Lm(o){var a=Fd(o);return a.length==1&&a[0][2]?dg(a[0][0],a[0][1]):function(u){return u===o||_d(u,o,a)}}function Mm(o,a){return Bd(o)&&ug(a)?dg(Ci(o),a):function(u){var h=Jd(u,o);return h===r&&h===a?Yd(u,o):_s(a,h,E|x)}}function Nl(o,a,u,h,g){o!==a&&gd(a,function(b,T){if(g||(g=new di),Ge(b))R0(o,a,T,u,Nl,h,g);else{var S=h?h(Ud(o,T),b,T+"",o,a,g):r;S===r&&(S=b),fd(o,T,S)}},Ot)}function R0(o,a,u,h,g,b,T){var S=Ud(o,u),O=Ud(a,u),M=T.get(O);if(M){fd(o,u,M);return}var R=b?b(S,O,u+"",o,a,T):r,D=R===r;if(D){var W=ae(O),j=!W&&yr(O),X=!W&&!j&&fo(O);R=O,W||j||X?ae(S)?R=S:Je(S)?R=At(S):j?(D=!1,R=Gm(O,!0)):X?(D=!1,R=Vm(O,!0)):R=[]:Ss(O)||Yr(O)?(R=S,Yr(S)?R=Ug(S):(!Ge(S)||Vi(S))&&(R=cg(O))):D=!1}D&&(T.set(O,R),g(R,O,h,b,T),T.delete(O)),fd(o,u,R)}function Rm(o,a){var u=o.length;if(u)return a+=a<0?u:0,Gi(a,u)?o[a]:r}function km(o,a,u){a.length?a=He(a,function(b){return ae(b)?function(T){return qr(T,b.length===1?b[0]:b)}:b}):a=[Ct];var h=-1;a=He(a,Ft(Y()));var g=Im(o,function(b,T,S){var O=He(a,function(M){return M(b)});return{criteria:O,index:++h,value:b}});return sx(g,function(b,T){return j0(b,T,u)})}function k0(o,a){return Nm(o,a,function(u,h){return Yd(o,h)})}function Nm(o,a,u){for(var h=-1,g=a.length,b={};++h<g;){var T=a[h],S=qr(o,T);u(S,T)&&Es(b,gr(T,o),S)}return b}function N0(o){return function(a){return qr(a,o)}}function xd(o,a,u,h){var g=h?ox:ro,b=-1,T=a.length,S=o;for(o===a&&(a=At(a)),u&&(S=He(o,Ft(u)));++b<T;)for(var O=0,M=a[b],R=u?u(M):M;(O=g(S,R,O,h))>-1;)S!==o&&Sl.call(S,O,1),Sl.call(o,O,1);return o}function Dm(o,a){for(var u=o?a.length:0,h=u-1;u--;){var g=a[u];if(u==h||g!==b){var b=g;Gi(g)?Sl.call(o,g,1):Pd(o,g)}}return o}function Td(o,a){return o+Ol(gm()*(a-o+1))}function D0(o,a,u,h){for(var g=-1,b=rt(Pl((a-o)/(u||1)),0),T=C(b);b--;)T[h?b:++g]=o,o+=u;return T}function Sd(o,a){var u="";if(!o||a<1||a>St)return u;do a%2&&(u+=o),a=Ol(a/2),a&&(o+=o);while(a);return u}function ge(o,a){return Hd(pg(o,a,Ct),o+"")}function F0(o){return bm(mo(o))}function $0(o,a){var u=mo(o);return Vl(u,jr(a,0,u.length))}function Es(o,a,u,h){if(!Ge(o))return o;a=gr(a,o);for(var g=-1,b=a.length,T=b-1,S=o;S!=null&&++g<b;){var O=Ci(a[g]),M=u;if(O==="__proto__"||O==="constructor"||O==="prototype")return o;if(g!=T){var R=S[O];M=h?h(R,O,S):r,M===r&&(M=Ge(R)?R:Gi(a[g+1])?[]:{})}vs(S,O,M),S=S[O]}return o}var Fm=Cl?function(o,a){return Cl.set(o,a),o}:Ct,B0=Al?function(o,a){return Al(o,"toString",{configurable:!0,enumerable:!1,value:Xd(a),writable:!0})}:Ct;function W0(o){return Vl(mo(o))}function ei(o,a,u){var h=-1,g=o.length;a<0&&(a=-a>g?0:g+a),u=u>g?g:u,u<0&&(u+=g),g=a>u?0:u-a>>>0,a>>>=0;for(var b=C(g);++h<g;)b[h]=o[h+a];return b}function U0(o,a){var u;return fr(o,function(h,g,b){return u=a(h,g,b),!u}),!!u}function Dl(o,a,u){var h=0,g=o==null?h:o.length;if(typeof a=="number"&&a===a&&g<=sl){for(;h<g;){var b=h+g>>>1,T=o[b];T!==null&&!Bt(T)&&(u?T<=a:T<a)?h=b+1:g=b}return g}return Ad(o,a,Ct,u)}function Ad(o,a,u,h){var g=0,b=o==null?0:o.length;if(b===0)return 0;a=u(a);for(var T=a!==a,S=a===null,O=Bt(a),M=a===r;g<b;){var R=Ol((g+b)/2),D=u(o[R]),W=D!==r,j=D===null,X=D===D,me=Bt(D);if(T)var Q=h||X;else M?Q=X&&(h||W):S?Q=X&&W&&(h||!j):O?Q=X&&W&&!j&&(h||!me):j||me?Q=!1:Q=h?D<=a:D<a;Q?g=R+1:b=R}return ft(b,ol)}function $m(o,a){for(var u=-1,h=o.length,g=0,b=[];++u<h;){var T=o[u],S=a?a(T):T;if(!u||!pi(S,O)){var O=S;b[g++]=T===0?0:T}}return b}function Bm(o){return typeof o=="number"?o:Bt(o)?Ur:+o}function $t(o){if(typeof o=="string")return o;if(ae(o))return He(o,$t)+"";if(Bt(o))return vm?vm.call(o):"";var a=o+"";return a=="0"&&1/o==-kt?"-0":a}function mr(o,a,u){var h=-1,g=ml,b=o.length,T=!0,S=[],O=S;if(u)T=!1,g=td;else if(b>=e){var M=a?null:X0(o);if(M)return vl(M);T=!1,g=ds,O=new Vr}else O=a?[]:S;e:for(;++h<b;){var R=o[h],D=a?a(R):R;if(R=u||R!==0?R:0,T&&D===D){for(var W=O.length;W--;)if(O[W]===D)continue e;a&&O.push(D),S.push(R)}else g(O,D,u)||(O!==S&&O.push(D),S.push(R))}return S}function Pd(o,a){return a=gr(a,o),o=hg(o,a),o==null||delete o[Ci(ti(a))]}function Wm(o,a,u,h){return Es(o,a,u(qr(o,a)),h)}function Fl(o,a,u,h){for(var g=o.length,b=h?g:-1;(h?b--:++b<g)&&a(o[b],b,o););return u?ei(o,h?0:b,h?b+1:g):ei(o,h?b+1:0,h?g:b)}function Um(o,a){var u=o;return u instanceof _e&&(u=u.value()),id(a,function(h,g){return g.func.apply(g.thisArg,ur([h],g.args))},u)}function Od(o,a,u){var h=o.length;if(h<2)return h?mr(o[0]):[];for(var g=-1,b=C(h);++g<h;)for(var T=o[g],S=-1;++S<h;)S!=g&&(b[g]=ys(b[g]||T,o[S],a,u));return mr(ht(b,1),a,u)}function Hm(o,a,u){for(var h=-1,g=o.length,b=a.length,T={};++h<g;){var S=h<b?a[h]:r;u(T,o[h],S)}return T}function Cd(o){return Je(o)?o:[]}function Id(o){return typeof o=="function"?o:Ct}function gr(o,a){return ae(o)?o:Bd(o,a)?[o]:vg(Le(o))}var H0=ge;function vr(o,a,u){var h=o.length;return u=u===r?h:u,!a&&u>=h?o:ei(o,a,u)}var zm=Cx||function(o){return ot.clearTimeout(o)};function Gm(o,a){if(a)return o.slice();var u=o.length,h=dm?dm(u):new o.constructor(u);return o.copy(h),h}function Ld(o){var a=new o.constructor(o.byteLength);return new xl(a).set(new xl(o)),a}function z0(o,a){var u=a?Ld(o.buffer):o.buffer;return new o.constructor(u,o.byteOffset,o.byteLength)}function G0(o){var a=new o.constructor(o.source,Pf.exec(o));return a.lastIndex=o.lastIndex,a}function V0(o){return gs?Fe(gs.call(o)):{}}function Vm(o,a){var u=a?Ld(o.buffer):o.buffer;return new o.constructor(u,o.byteOffset,o.length)}function jm(o,a){if(o!==a){var u=o!==r,h=o===null,g=o===o,b=Bt(o),T=a!==r,S=a===null,O=a===a,M=Bt(a);if(!S&&!M&&!b&&o>a||b&&T&&O&&!S&&!M||h&&T&&O||!u&&O||!g)return 1;if(!h&&!b&&!M&&o<a||M&&u&&g&&!h&&!b||S&&u&&g||!T&&g||!O)return-1}return 0}function j0(o,a,u){for(var h=-1,g=o.criteria,b=a.criteria,T=g.length,S=u.length;++h<T;){var O=jm(g[h],b[h]);if(O){if(h>=S)return O;var M=u[h];return O*(M=="desc"?-1:1)}}return o.index-a.index}function qm(o,a,u,h){for(var g=-1,b=o.length,T=u.length,S=-1,O=a.length,M=rt(b-T,0),R=C(O+M),D=!h;++S<O;)R[S]=a[S];for(;++g<T;)(D||g<b)&&(R[u[g]]=o[g]);for(;M--;)R[S++]=o[g++];return R}function Zm(o,a,u,h){for(var g=-1,b=o.length,T=-1,S=u.length,O=-1,M=a.length,R=rt(b-S,0),D=C(R+M),W=!h;++g<R;)D[g]=o[g];for(var j=g;++O<M;)D[j+O]=a[O];for(;++T<S;)(W||g<b)&&(D[j+u[T]]=o[g++]);return D}function At(o,a){var u=-1,h=o.length;for(a||(a=C(h));++u<h;)a[u]=o[u];return a}function Oi(o,a,u,h){var g=!u;u||(u={});for(var b=-1,T=a.length;++b<T;){var S=a[b],O=h?h(u[S],o[S],S,u,o):r;O===r&&(O=o[S]),g?Ui(u,S,O):vs(u,S,O)}return u}function q0(o,a){return Oi(o,$d(o),a)}function Z0(o,a){return Oi(o,ag(o),a)}function $l(o,a){return function(u,h){var g=ae(u)?Qw:g0,b=a?a():{};return g(u,o,Y(h,2),b)}}function uo(o){return ge(function(a,u){var h=-1,g=u.length,b=g>1?u[g-1]:r,T=g>2?u[2]:r;for(b=o.length>3&&typeof b=="function"?(g--,b):r,T&&Et(u[0],u[1],T)&&(b=g<3?r:b,g=1),a=Fe(a);++h<g;){var S=u[h];S&&o(a,S,h,b)}return a})}function Jm(o,a){return function(u,h){if(u==null)return u;if(!Pt(u))return o(u,h);for(var g=u.length,b=a?g:-1,T=Fe(u);(a?b--:++b<g)&&h(T[b],b,T)!==!1;);return u}}function Ym(o){return function(a,u,h){for(var g=-1,b=Fe(a),T=h(a),S=T.length;S--;){var O=T[o?S:++g];if(u(b[O],O,b)===!1)break}return a}}function J0(o,a,u){var h=a&P,g=ws(o);function b(){var T=this&&this!==ot&&this instanceof b?g:o;return T.apply(h?u:this,arguments)}return b}function Km(o){return function(a){a=Le(a);var u=no(a)?ui(a):r,h=u?u[0]:a.charAt(0),g=u?vr(u,1).join(""):a.slice(1);return h[o]()+g}}function po(o){return function(a){return id(Jg(Zg(a).replace(Bw,"")),o,"")}}function ws(o){return function(){var a=arguments;switch(a.length){case 0:return new o;case 1:return new o(a[0]);case 2:return new o(a[0],a[1]);case 3:return new o(a[0],a[1],a[2]);case 4:return new o(a[0],a[1],a[2],a[3]);case 5:return new o(a[0],a[1],a[2],a[3],a[4]);case 6:return new o(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new o(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var u=co(o.prototype),h=o.apply(u,a);return Ge(h)?h:u}}function Y0(o,a,u){var h=ws(o);function g(){for(var b=arguments.length,T=C(b),S=b,O=ho(g);S--;)T[S]=arguments[S];var M=b<3&&T[0]!==O&&T[b-1]!==O?[]:dr(T,O);if(b-=M.length,b<u)return ig(o,a,Bl,g.placeholder,r,T,M,r,r,u-b);var R=this&&this!==ot&&this instanceof g?h:o;return Dt(R,this,T)}return g}function Xm(o){return function(a,u,h){var g=Fe(a);if(!Pt(a)){var b=Y(u,3);a=st(a),u=function(S){return b(g[S],S,g)}}var T=o(a,u,h);return T>-1?g[b?a[T]:T]:r}}function Qm(o){return zi(function(a){var u=a.length,h=u,g=Xt.prototype.thru;for(o&&a.reverse();h--;){var b=a[h];if(typeof b!="function")throw new Kt(n);if(g&&!T&&zl(b)=="wrapper")var T=new Xt([],!0)}for(h=T?h:u;++h<u;){b=a[h];var S=zl(b),O=S=="wrapper"?Dd(b):r;O&&Wd(O[0])&&O[1]==(Ie|I|ve|G)&&!O[4].length&&O[9]==1?T=T[zl(O[0])].apply(T,O[3]):T=b.length==1&&Wd(b)?T[S]():T.thru(b)}return function(){var M=arguments,R=M[0];if(T&&M.length==1&&ae(R))return T.plant(R).value();for(var D=0,W=u?a[D].apply(this,M):R;++D<u;)W=a[D].call(this,W);return W}})}function Bl(o,a,u,h,g,b,T,S,O,M){var R=a&Ie,D=a&P,W=a&k,j=a&(I|ne),X=a&Se,me=W?r:ws(o);function Q(){for(var be=arguments.length,we=C(be),Wt=be;Wt--;)we[Wt]=arguments[Wt];if(j)var wt=ho(Q),Ut=lx(we,wt);if(h&&(we=qm(we,h,g,j)),b&&(we=Zm(we,b,T,j)),be-=Ut,j&&be<M){var Ye=dr(we,wt);return ig(o,a,Bl,Q.placeholder,u,we,Ye,S,O,M-be)}var hi=D?u:this,qi=W?hi[o]:o;return be=we.length,S?we=gT(we,S):X&&be>1&&we.reverse(),R&&O<be&&(we.length=O),this&&this!==ot&&this instanceof Q&&(qi=me||ws(qi)),qi.apply(hi,we)}return Q}function eg(o,a){return function(u,h){return T0(u,o,a(h),{})}}function Wl(o,a){return function(u,h){var g;if(u===r&&h===r)return a;if(u!==r&&(g=u),h!==r){if(g===r)return h;typeof u=="string"||typeof h=="string"?(u=$t(u),h=$t(h)):(u=Bm(u),h=Bm(h)),g=o(u,h)}return g}}function Md(o){return zi(function(a){return a=He(a,Ft(Y())),ge(function(u){var h=this;return o(a,function(g){return Dt(g,h,u)})})})}function Ul(o,a){a=a===r?" ":$t(a);var u=a.length;if(u<2)return u?Sd(a,o):a;var h=Sd(a,Pl(o/oo(a)));return no(a)?vr(ui(h),0,o).join(""):h.slice(0,o)}function K0(o,a,u,h){var g=a&P,b=ws(o);function T(){for(var S=-1,O=arguments.length,M=-1,R=h.length,D=C(R+O),W=this&&this!==ot&&this instanceof T?b:o;++M<R;)D[M]=h[M];for(;O--;)D[M++]=arguments[++S];return Dt(W,g?u:this,D)}return T}function tg(o){return function(a,u,h){return h&&typeof h!="number"&&Et(a,u,h)&&(u=h=r),a=ji(a),u===r?(u=a,a=0):u=ji(u),h=h===r?a<u?1:-1:ji(h),D0(a,u,h,o)}}function Hl(o){return function(a,u){return typeof a=="string"&&typeof u=="string"||(a=ii(a),u=ii(u)),o(a,u)}}function ig(o,a,u,h,g,b,T,S,O,M){var R=a&I,D=R?T:r,W=R?r:T,j=R?b:r,X=R?r:b;a|=R?ve:ke,a&=~(R?ke:ve),a&B||(a&=~(P|k));var me=[o,a,g,j,D,X,W,S,O,M],Q=u.apply(r,me);return Wd(o)&&fg(Q,me),Q.placeholder=h,mg(Q,o,a)}function Rd(o){var a=it[o];return function(u,h){if(u=ii(u),h=h==null?0:ft(pe(h),292),h&&mm(u)){var g=(Le(u)+"e").split("e"),b=a(g[0]+"e"+(+g[1]+h));return g=(Le(b)+"e").split("e"),+(g[0]+"e"+(+g[1]-h))}return a(u)}}var X0=ao&&1/vl(new ao([,-0]))[1]==kt?function(o){return new ao(o)}:tp;function rg(o){return function(a){var u=mt(a);return u==li?cd(a):u==ci?mx(a):ax(a,o(a))}}function Hi(o,a,u,h,g,b,T,S){var O=a&k;if(!O&&typeof o!="function")throw new Kt(n);var M=h?h.length:0;if(M||(a&=~(ve|ke),h=g=r),T=T===r?T:rt(pe(T),0),S=S===r?S:pe(S),M-=g?g.length:0,a&ke){var R=h,D=g;h=g=r}var W=O?r:Dd(o),j=[o,a,u,h,g,R,D,b,T,S];if(W&&hT(j,W),o=j[0],a=j[1],u=j[2],h=j[3],g=j[4],S=j[9]=j[9]===r?O?0:o.length:rt(j[9]-M,0),!S&&a&(I|ne)&&(a&=~(I|ne)),!a||a==P)var X=J0(o,a,u);else a==I||a==ne?X=Y0(o,a,S):(a==ve||a==(P|ve))&&!g.length?X=K0(o,a,u,h):X=Bl.apply(r,j);var me=W?Fm:fg;return mg(me(X,j),o,a)}function ng(o,a,u,h){return o===r||pi(o,so[u])&&!Ne.call(h,u)?a:o}function og(o,a,u,h,g,b){return Ge(o)&&Ge(a)&&(b.set(a,o),Nl(o,a,r,og,b),b.delete(a)),o}function Q0(o){return Ss(o)?r:o}function sg(o,a,u,h,g,b){var T=u&E,S=o.length,O=a.length;if(S!=O&&!(T&&O>S))return!1;var M=b.get(o),R=b.get(a);if(M&&R)return M==a&&R==o;var D=-1,W=!0,j=u&x?new Vr:r;for(b.set(o,a),b.set(a,o);++D<S;){var X=o[D],me=a[D];if(h)var Q=T?h(me,X,D,a,o,b):h(X,me,D,o,a,b);if(Q!==r){if(Q)continue;W=!1;break}if(j){if(!rd(a,function(be,we){if(!ds(j,we)&&(X===be||g(X,be,u,h,b)))return j.push(we)})){W=!1;break}}else if(!(X===me||g(X,me,u,h,b))){W=!1;break}}return b.delete(o),b.delete(a),W}function eT(o,a,u,h,g,b,T){switch(u){case to:if(o.byteLength!=a.byteLength||o.byteOffset!=a.byteOffset)return!1;o=o.buffer,a=a.buffer;case us:return!(o.byteLength!=a.byteLength||!b(new xl(o),new xl(a)));case ns:case os:case ss:return pi(+o,+a);case cl:return o.name==a.name&&o.message==a.message;case as:case ls:return o==a+"";case li:var S=cd;case ci:var O=h&E;if(S||(S=vl),o.size!=a.size&&!O)return!1;var M=T.get(o);if(M)return M==a;h|=x,T.set(o,a);var R=sg(S(o),S(a),h,g,b,T);return T.delete(o),R;case dl:if(gs)return gs.call(o)==gs.call(a)}return!1}function tT(o,a,u,h,g,b){var T=u&E,S=kd(o),O=S.length,M=kd(a),R=M.length;if(O!=R&&!T)return!1;for(var D=O;D--;){var W=S[D];if(!(T?W in a:Ne.call(a,W)))return!1}var j=b.get(o),X=b.get(a);if(j&&X)return j==a&&X==o;var me=!0;b.set(o,a),b.set(a,o);for(var Q=T;++D<O;){W=S[D];var be=o[W],we=a[W];if(h)var Wt=T?h(we,be,W,a,o,b):h(be,we,W,o,a,b);if(!(Wt===r?be===we||g(be,we,u,h,b):Wt)){me=!1;break}Q||(Q=W=="constructor")}if(me&&!Q){var wt=o.constructor,Ut=a.constructor;wt!=Ut&&"constructor"in o&&"constructor"in a&&!(typeof wt=="function"&&wt instanceof wt&&typeof Ut=="function"&&Ut instanceof Ut)&&(me=!1)}return b.delete(o),b.delete(a),me}function zi(o){return Hd(pg(o,r,Eg),o+"")}function kd(o){return Am(o,st,$d)}function Nd(o){return Am(o,Ot,ag)}var Dd=Cl?function(o){return Cl.get(o)}:tp;function zl(o){for(var a=o.name+"",u=lo[a],h=Ne.call(lo,a)?u.length:0;h--;){var g=u[h],b=g.func;if(b==null||b==o)return g.name}return a}function ho(o){var a=Ne.call(v,"placeholder")?v:o;return a.placeholder}function Y(){var o=v.iteratee||Qd;return o=o===Qd?Cm:o,arguments.length?o(arguments[0],arguments[1]):o}function Gl(o,a){var u=o.__data__;return cT(a)?u[typeof a=="string"?"string":"hash"]:u.map}function Fd(o){for(var a=st(o),u=a.length;u--;){var h=a[u],g=o[h];a[u]=[h,g,ug(g)]}return a}function Zr(o,a){var u=px(o,a);return Om(u)?u:r}function iT(o){var a=Ne.call(o,zr),u=o[zr];try{o[zr]=r;var h=!0}catch(b){}var g=El.call(o);return h&&(a?o[zr]=u:delete o[zr]),g}var $d=dd?function(o){return o==null?[]:(o=Fe(o),cr(dd(o),function(a){return hm.call(o,a)}))}:ip,ag=dd?function(o){for(var a=[];o;)ur(a,$d(o)),o=Tl(o);return a}:ip,mt=_t;(pd&&mt(new pd(new ArrayBuffer(1)))!=to||hs&&mt(new hs)!=li||hd&&mt(hd.resolve())!=xf||ao&&mt(new ao)!=ci||fs&&mt(new fs)!=cs)&&(mt=function(o){var a=_t(o),u=a==$i?o.constructor:r,h=u?Jr(u):"";if(h)switch(h){case $x:return to;case Bx:return li;case Wx:return xf;case Ux:return ci;case Hx:return cs}return a});function rT(o,a,u){for(var h=-1,g=u.length;++h<g;){var b=u[h],T=b.size;switch(b.type){case"drop":o+=T;break;case"dropRight":a-=T;break;case"take":a=ft(a,o+T);break;case"takeRight":o=rt(o,a-T);break}}return{start:o,end:a}}function nT(o){var a=o.match(uw);return a?a[1].split(dw):[]}function lg(o,a,u){a=gr(a,o);for(var h=-1,g=a.length,b=!1;++h<g;){var T=Ci(a[h]);if(!(b=o!=null&&u(o,T)))break;o=o[T]}return b||++h!=g?b:(g=o==null?0:o.length,!!g&&Kl(g)&&Gi(T,g)&&(ae(o)||Yr(o)))}function oT(o){var a=o.length,u=new o.constructor(a);return a&&typeof o[0]=="string"&&Ne.call(o,"index")&&(u.index=o.index,u.input=o.input),u}function cg(o){return typeof o.constructor=="function"&&!xs(o)?co(Tl(o)):{}}function sT(o,a,u){var h=o.constructor;switch(a){case us:return Ld(o);case ns:case os:return new h(+o);case to:return z0(o,u);case Fu:case $u:case Bu:case Wu:case Uu:case Hu:case zu:case Gu:case Vu:return Vm(o,u);case li:return new h;case ss:case ls:return new h(o);case as:return G0(o);case ci:return new h;case dl:return V0(o)}}function aT(o,a){var u=a.length;if(!u)return o;var h=u-1;return a[h]=(u>1?"& ":"")+a[h],a=a.join(u>2?", ":" "),o.replace(cw,`{
/* [wrapped with `+a+`] */
`)}function lT(o){return ae(o)||Yr(o)||!!(fm&&o&&o[fm])}function Gi(o,a){var u=typeof o;return a=a==null?St:a,!!a&&(u=="number"||u!="symbol"&&_w.test(o))&&o>-1&&o%1==0&&o<a}function Et(o,a,u){if(!Ge(u))return!1;var h=typeof a;return(h=="number"?Pt(u)&&Gi(a,u.length):h=="string"&&a in u)?pi(u[a],o):!1}function Bd(o,a){if(ae(o))return!1;var u=typeof o;return u=="number"||u=="symbol"||u=="boolean"||o==null||Bt(o)?!0:ow.test(o)||!nw.test(o)||a!=null&&o in Fe(a)}function cT(o){var a=typeof o;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?o!=="__proto__":o===null}function Wd(o){var a=zl(o),u=v[a];if(typeof u!="function"||!(a in _e.prototype))return!1;if(o===u)return!0;var h=Dd(u);return!!h&&o===h[0]}function uT(o){return!!um&&um in o}var dT=bl?Vi:rp;function xs(o){var a=o&&o.constructor,u=typeof a=="function"&&a.prototype||so;return o===u}function ug(o){return o===o&&!Ge(o)}function dg(o,a){return function(u){return u==null?!1:u[o]===a&&(a!==r||o in Fe(u))}}function pT(o){var a=Jl(o,function(h){return u.size===l&&u.clear(),h}),u=a.cache;return a}function hT(o,a){var u=o[1],h=a[1],g=u|h,b=g<(P|k|Ie),T=h==Ie&&u==I||h==Ie&&u==G&&o[7].length<=a[8]||h==(Ie|G)&&a[7].length<=a[8]&&u==I;if(!(b||T))return o;h&P&&(o[2]=a[2],g|=u&P?0:B);var S=a[3];if(S){var O=o[3];o[3]=O?qm(O,S,a[4]):S,o[4]=O?dr(o[3],d):a[4]}return S=a[5],S&&(O=o[5],o[5]=O?Zm(O,S,a[6]):S,o[6]=O?dr(o[5],d):a[6]),S=a[7],S&&(o[7]=S),h&Ie&&(o[8]=o[8]==null?a[8]:ft(o[8],a[8])),o[9]==null&&(o[9]=a[9]),o[0]=a[0],o[1]=g,o}function fT(o){var a=[];if(o!=null)for(var u in Fe(o))a.push(u);return a}function mT(o){return El.call(o)}function pg(o,a,u){return a=rt(a===r?o.length-1:a,0),function(){for(var h=arguments,g=-1,b=rt(h.length-a,0),T=C(b);++g<b;)T[g]=h[a+g];g=-1;for(var S=C(a+1);++g<a;)S[g]=h[g];return S[a]=u(T),Dt(o,this,S)}}function hg(o,a){return a.length<2?o:qr(o,ei(a,0,-1))}function gT(o,a){for(var u=o.length,h=ft(a.length,u),g=At(o);h--;){var b=a[h];o[h]=Gi(b,u)?g[b]:r}return o}function Ud(o,a){if(!(a==="constructor"&&typeof o[a]=="function")&&a!="__proto__")return o[a]}var fg=gg(Fm),Ts=Lx||function(o,a){return ot.setTimeout(o,a)},Hd=gg(B0);function mg(o,a,u){var h=a+"";return Hd(o,aT(h,vT(nT(h),u)))}function gg(o){var a=0,u=0;return function(){var h=Nx(),g=Si-(h-u);if(u=h,g>0){if(++a>=pt)return arguments[0]}else a=0;return o.apply(r,arguments)}}function Vl(o,a){var u=-1,h=o.length,g=h-1;for(a=a===r?h:a;++u<a;){var b=Td(u,g),T=o[b];o[b]=o[u],o[u]=T}return o.length=a,o}var vg=pT(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(sw,function(u,h,g,b){a.push(g?b.replace(fw,"$1"):h||u)}),a});function Ci(o){if(typeof o=="string"||Bt(o))return o;var a=o+"";return a=="0"&&1/o==-kt?"-0":a}function Jr(o){if(o!=null){try{return _l.call(o)}catch(a){}try{return o+""}catch(a){}}return""}function vT(o,a){return Yt(al,function(u){var h="_."+u[0];a&u[1]&&!ml(o,h)&&o.push(h)}),o.sort()}function yg(o){if(o instanceof _e)return o.clone();var a=new Xt(o.__wrapped__,o.__chain__);return a.__actions__=At(o.__actions__),a.__index__=o.__index__,a.__values__=o.__values__,a}function yT(o,a,u){(u?Et(o,a,u):a===r)?a=1:a=rt(pe(a),0);var h=o==null?0:o.length;if(!h||a<1)return[];for(var g=0,b=0,T=C(Pl(h/a));g<h;)T[b++]=ei(o,g,g+=a);return T}function bT(o){for(var a=-1,u=o==null?0:o.length,h=0,g=[];++a<u;){var b=o[a];b&&(g[h++]=b)}return g}function _T(){var o=arguments.length;if(!o)return[];for(var a=C(o-1),u=arguments[0],h=o;h--;)a[h-1]=arguments[h];return ur(ae(u)?At(u):[u],ht(a,1))}var ET=ge(function(o,a){return Je(o)?ys(o,ht(a,1,Je,!0)):[]}),wT=ge(function(o,a){var u=ti(a);return Je(u)&&(u=r),Je(o)?ys(o,ht(a,1,Je,!0),Y(u,2)):[]}),xT=ge(function(o,a){var u=ti(a);return Je(u)&&(u=r),Je(o)?ys(o,ht(a,1,Je,!0),r,u):[]});function TT(o,a,u){var h=o==null?0:o.length;return h?(a=u||a===r?1:pe(a),ei(o,a<0?0:a,h)):[]}function ST(o,a,u){var h=o==null?0:o.length;return h?(a=u||a===r?1:pe(a),a=h-a,ei(o,0,a<0?0:a)):[]}function AT(o,a){return o&&o.length?Fl(o,Y(a,3),!0,!0):[]}function PT(o,a){return o&&o.length?Fl(o,Y(a,3),!0):[]}function OT(o,a,u,h){var g=o==null?0:o.length;return g?(u&&typeof u!="number"&&Et(o,a,u)&&(u=0,h=g),_0(o,a,u,h)):[]}function bg(o,a,u){var h=o==null?0:o.length;if(!h)return-1;var g=u==null?0:pe(u);return g<0&&(g=rt(h+g,0)),gl(o,Y(a,3),g)}function _g(o,a,u){var h=o==null?0:o.length;if(!h)return-1;var g=h-1;return u!==r&&(g=pe(u),g=u<0?rt(h+g,0):ft(g,h-1)),gl(o,Y(a,3),g,!0)}function Eg(o){var a=o==null?0:o.length;return a?ht(o,1):[]}function CT(o){var a=o==null?0:o.length;return a?ht(o,kt):[]}function IT(o,a){var u=o==null?0:o.length;return u?(a=a===r?1:pe(a),ht(o,a)):[]}function LT(o){for(var a=-1,u=o==null?0:o.length,h={};++a<u;){var g=o[a];h[g[0]]=g[1]}return h}function wg(o){return o&&o.length?o[0]:r}function MT(o,a,u){var h=o==null?0:o.length;if(!h)return-1;var g=u==null?0:pe(u);return g<0&&(g=rt(h+g,0)),ro(o,a,g)}function RT(o){var a=o==null?0:o.length;return a?ei(o,0,-1):[]}var kT=ge(function(o){var a=He(o,Cd);return a.length&&a[0]===o[0]?bd(a):[]}),NT=ge(function(o){var a=ti(o),u=He(o,Cd);return a===ti(u)?a=r:u.pop(),u.length&&u[0]===o[0]?bd(u,Y(a,2)):[]}),DT=ge(function(o){var a=ti(o),u=He(o,Cd);return a=typeof a=="function"?a:r,a&&u.pop(),u.length&&u[0]===o[0]?bd(u,r,a):[]});function FT(o,a){return o==null?"":Rx.call(o,a)}function ti(o){var a=o==null?0:o.length;return a?o[a-1]:r}function $T(o,a,u){var h=o==null?0:o.length;if(!h)return-1;var g=h;return u!==r&&(g=pe(u),g=g<0?rt(h+g,0):ft(g,h-1)),a===a?vx(o,a,g):gl(o,im,g,!0)}function BT(o,a){return o&&o.length?Rm(o,pe(a)):r}var WT=ge(xg);function xg(o,a){return o&&o.length&&a&&a.length?xd(o,a):o}function UT(o,a,u){return o&&o.length&&a&&a.length?xd(o,a,Y(u,2)):o}function HT(o,a,u){return o&&o.length&&a&&a.length?xd(o,a,r,u):o}var zT=zi(function(o,a){var u=o==null?0:o.length,h=md(o,a);return Dm(o,He(a,function(g){return Gi(g,u)?+g:g}).sort(jm)),h});function GT(o,a){var u=[];if(!(o&&o.length))return u;var h=-1,g=[],b=o.length;for(a=Y(a,3);++h<b;){var T=o[h];a(T,h,o)&&(u.push(T),g.push(h))}return Dm(o,g),u}function zd(o){return o==null?o:Fx.call(o)}function VT(o,a,u){var h=o==null?0:o.length;return h?(u&&typeof u!="number"&&Et(o,a,u)?(a=0,u=h):(a=a==null?0:pe(a),u=u===r?h:pe(u)),ei(o,a,u)):[]}function jT(o,a){return Dl(o,a)}function qT(o,a,u){return Ad(o,a,Y(u,2))}function ZT(o,a){var u=o==null?0:o.length;if(u){var h=Dl(o,a);if(h<u&&pi(o[h],a))return h}return-1}function JT(o,a){return Dl(o,a,!0)}function YT(o,a,u){return Ad(o,a,Y(u,2),!0)}function KT(o,a){var u=o==null?0:o.length;if(u){var h=Dl(o,a,!0)-1;if(pi(o[h],a))return h}return-1}function XT(o){return o&&o.length?$m(o):[]}function QT(o,a){return o&&o.length?$m(o,Y(a,2)):[]}function eS(o){var a=o==null?0:o.length;return a?ei(o,1,a):[]}function tS(o,a,u){return o&&o.length?(a=u||a===r?1:pe(a),ei(o,0,a<0?0:a)):[]}function iS(o,a,u){var h=o==null?0:o.length;return h?(a=u||a===r?1:pe(a),a=h-a,ei(o,a<0?0:a,h)):[]}function rS(o,a){return o&&o.length?Fl(o,Y(a,3),!1,!0):[]}function nS(o,a){return o&&o.length?Fl(o,Y(a,3)):[]}var oS=ge(function(o){return mr(ht(o,1,Je,!0))}),sS=ge(function(o){var a=ti(o);return Je(a)&&(a=r),mr(ht(o,1,Je,!0),Y(a,2))}),aS=ge(function(o){var a=ti(o);return a=typeof a=="function"?a:r,mr(ht(o,1,Je,!0),r,a)});function lS(o){return o&&o.length?mr(o):[]}function cS(o,a){return o&&o.length?mr(o,Y(a,2)):[]}function uS(o,a){return a=typeof a=="function"?a:r,o&&o.length?mr(o,r,a):[]}function Gd(o){if(!(o&&o.length))return[];var a=0;return o=cr(o,function(u){if(Je(u))return a=rt(u.length,a),!0}),ad(a,function(u){return He(o,nd(u))})}function Tg(o,a){if(!(o&&o.length))return[];var u=Gd(o);return a==null?u:He(u,function(h){return Dt(a,r,h)})}var dS=ge(function(o,a){return Je(o)?ys(o,a):[]}),pS=ge(function(o){return Od(cr(o,Je))}),hS=ge(function(o){var a=ti(o);return Je(a)&&(a=r),Od(cr(o,Je),Y(a,2))}),fS=ge(function(o){var a=ti(o);return a=typeof a=="function"?a:r,Od(cr(o,Je),r,a)}),mS=ge(Gd);function gS(o,a){return Hm(o||[],a||[],vs)}function vS(o,a){return Hm(o||[],a||[],Es)}var yS=ge(function(o){var a=o.length,u=a>1?o[a-1]:r;return u=typeof u=="function"?(o.pop(),u):r,Tg(o,u)});function Sg(o){var a=v(o);return a.__chain__=!0,a}function bS(o,a){return a(o),o}function jl(o,a){return a(o)}var _S=zi(function(o){var a=o.length,u=a?o[0]:0,h=this.__wrapped__,g=function(b){return md(b,o)};return a>1||this.__actions__.length||!(h instanceof _e)||!Gi(u)?this.thru(g):(h=h.slice(u,+u+(a?1:0)),h.__actions__.push({func:jl,args:[g],thisArg:r}),new Xt(h,this.__chain__).thru(function(b){return a&&!b.length&&b.push(r),b}))});function ES(){return Sg(this)}function wS(){return new Xt(this.value(),this.__chain__)}function xS(){this.__values__===r&&(this.__values__=Bg(this.value()));var o=this.__index__>=this.__values__.length,a=o?r:this.__values__[this.__index__++];return{done:o,value:a}}function TS(){return this}function SS(o){for(var a,u=this;u instanceof Ll;){var h=yg(u);h.__index__=0,h.__values__=r,a?g.__wrapped__=h:a=h;var g=h;u=u.__wrapped__}return g.__wrapped__=o,a}function AS(){var o=this.__wrapped__;if(o instanceof _e){var a=o;return this.__actions__.length&&(a=new _e(this)),a=a.reverse(),a.__actions__.push({func:jl,args:[zd],thisArg:r}),new Xt(a,this.__chain__)}return this.thru(zd)}function PS(){return Um(this.__wrapped__,this.__actions__)}var OS=$l(function(o,a,u){Ne.call(o,u)?++o[u]:Ui(o,u,1)});function CS(o,a,u){var h=ae(o)?em:b0;return u&&Et(o,a,u)&&(a=r),h(o,Y(a,3))}function IS(o,a){var u=ae(o)?cr:Tm;return u(o,Y(a,3))}var LS=Xm(bg),MS=Xm(_g);function RS(o,a){return ht(ql(o,a),1)}function kS(o,a){return ht(ql(o,a),kt)}function NS(o,a,u){return u=u===r?1:pe(u),ht(ql(o,a),u)}function Ag(o,a){var u=ae(o)?Yt:fr;return u(o,Y(a,3))}function Pg(o,a){var u=ae(o)?ex:xm;return u(o,Y(a,3))}var DS=$l(function(o,a,u){Ne.call(o,u)?o[u].push(a):Ui(o,u,[a])});function FS(o,a,u,h){o=Pt(o)?o:mo(o),u=u&&!h?pe(u):0;var g=o.length;return u<0&&(u=rt(g+u,0)),Xl(o)?u<=g&&o.indexOf(a,u)>-1:!!g&&ro(o,a,u)>-1}var $S=ge(function(o,a,u){var h=-1,g=typeof a=="function",b=Pt(o)?C(o.length):[];return fr(o,function(T){b[++h]=g?Dt(a,T,u):bs(T,a,u)}),b}),BS=$l(function(o,a,u){Ui(o,u,a)});function ql(o,a){var u=ae(o)?He:Im;return u(o,Y(a,3))}function WS(o,a,u,h){return o==null?[]:(ae(a)||(a=a==null?[]:[a]),u=h?r:u,ae(u)||(u=u==null?[]:[u]),km(o,a,u))}var US=$l(function(o,a,u){o[u?0:1].push(a)},function(){return[[],[]]});function HS(o,a,u){var h=ae(o)?id:nm,g=arguments.length<3;return h(o,Y(a,4),u,g,fr)}function zS(o,a,u){var h=ae(o)?tx:nm,g=arguments.length<3;return h(o,Y(a,4),u,g,xm)}function GS(o,a){var u=ae(o)?cr:Tm;return u(o,Yl(Y(a,3)))}function VS(o){var a=ae(o)?bm:F0;return a(o)}function jS(o,a,u){(u?Et(o,a,u):a===r)?a=1:a=pe(a);var h=ae(o)?f0:$0;return h(o,a)}function qS(o){var a=ae(o)?m0:W0;return a(o)}function ZS(o){if(o==null)return 0;if(Pt(o))return Xl(o)?oo(o):o.length;var a=mt(o);return a==li||a==ci?o.size:Ed(o).length}function JS(o,a,u){var h=ae(o)?rd:U0;return u&&Et(o,a,u)&&(a=r),h(o,Y(a,3))}var YS=ge(function(o,a){if(o==null)return[];var u=a.length;return u>1&&Et(o,a[0],a[1])?a=[]:u>2&&Et(a[0],a[1],a[2])&&(a=[a[0]]),km(o,ht(a,1),[])}),Zl=Ix||function(){return ot.Date.now()};function KS(o,a){if(typeof a!="function")throw new Kt(n);return o=pe(o),function(){if(--o<1)return a.apply(this,arguments)}}function Og(o,a,u){return a=u?r:a,a=o&&a==null?o.length:a,Hi(o,Ie,r,r,r,r,a)}function Cg(o,a){var u;if(typeof a!="function")throw new Kt(n);return o=pe(o),function(){return--o>0&&(u=a.apply(this,arguments)),o<=1&&(a=r),u}}var Vd=ge(function(o,a,u){var h=P;if(u.length){var g=dr(u,ho(Vd));h|=ve}return Hi(o,h,a,u,g)}),Ig=ge(function(o,a,u){var h=P|k;if(u.length){var g=dr(u,ho(Ig));h|=ve}return Hi(a,h,o,u,g)});function Lg(o,a,u){a=u?r:a;var h=Hi(o,I,r,r,r,r,r,a);return h.placeholder=Lg.placeholder,h}function Mg(o,a,u){a=u?r:a;var h=Hi(o,ne,r,r,r,r,r,a);return h.placeholder=Mg.placeholder,h}function Rg(o,a,u){var h,g,b,T,S,O,M=0,R=!1,D=!1,W=!0;if(typeof o!="function")throw new Kt(n);a=ii(a)||0,Ge(u)&&(R=!!u.leading,D="maxWait"in u,b=D?rt(ii(u.maxWait)||0,a):b,W="trailing"in u?!!u.trailing:W);function j(Ye){var hi=h,qi=g;return h=g=r,M=Ye,T=o.apply(qi,hi),T}function X(Ye){return M=Ye,S=Ts(be,a),R?j(Ye):T}function me(Ye){var hi=Ye-O,qi=Ye-M,Xg=a-hi;return D?ft(Xg,b-qi):Xg}function Q(Ye){var hi=Ye-O,qi=Ye-M;return O===r||hi>=a||hi<0||D&&qi>=b}function be(){var Ye=Zl();if(Q(Ye))return we(Ye);S=Ts(be,me(Ye))}function we(Ye){return S=r,W&&h?j(Ye):(h=g=r,T)}function Wt(){S!==r&&zm(S),M=0,h=O=g=S=r}function wt(){return S===r?T:we(Zl())}function Ut(){var Ye=Zl(),hi=Q(Ye);if(h=arguments,g=this,O=Ye,hi){if(S===r)return X(O);if(D)return zm(S),S=Ts(be,a),j(O)}return S===r&&(S=Ts(be,a)),T}return Ut.cancel=Wt,Ut.flush=wt,Ut}var XS=ge(function(o,a){return wm(o,1,a)}),QS=ge(function(o,a,u){return wm(o,ii(a)||0,u)});function eA(o){return Hi(o,Se)}function Jl(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new Kt(n);var u=function(){var h=arguments,g=a?a.apply(this,h):h[0],b=u.cache;if(b.has(g))return b.get(g);var T=o.apply(this,h);return u.cache=b.set(g,T)||b,T};return u.cache=new(Jl.Cache||Wi),u}Jl.Cache=Wi;function Yl(o){if(typeof o!="function")throw new Kt(n);return function(){var a=arguments;switch(a.length){case 0:return!o.call(this);case 1:return!o.call(this,a[0]);case 2:return!o.call(this,a[0],a[1]);case 3:return!o.call(this,a[0],a[1],a[2])}return!o.apply(this,a)}}function tA(o){return Cg(2,o)}var iA=H0(function(o,a){a=a.length==1&&ae(a[0])?He(a[0],Ft(Y())):He(ht(a,1),Ft(Y()));var u=a.length;return ge(function(h){for(var g=-1,b=ft(h.length,u);++g<b;)h[g]=a[g].call(this,h[g]);return Dt(o,this,h)})}),jd=ge(function(o,a){var u=dr(a,ho(jd));return Hi(o,ve,r,a,u)}),kg=ge(function(o,a){var u=dr(a,ho(kg));return Hi(o,ke,r,a,u)}),rA=zi(function(o,a){return Hi(o,G,r,r,r,a)});function nA(o,a){if(typeof o!="function")throw new Kt(n);return a=a===r?a:pe(a),ge(o,a)}function oA(o,a){if(typeof o!="function")throw new Kt(n);return a=a==null?0:rt(pe(a),0),ge(function(u){var h=u[a],g=vr(u,0,a);return h&&ur(g,h),Dt(o,this,g)})}function sA(o,a,u){var h=!0,g=!0;if(typeof o!="function")throw new Kt(n);return Ge(u)&&(h="leading"in u?!!u.leading:h,g="trailing"in u?!!u.trailing:g),Rg(o,a,{leading:h,maxWait:a,trailing:g})}function aA(o){return Og(o,1)}function lA(o,a){return jd(Id(a),o)}function cA(){if(!arguments.length)return[];var o=arguments[0];return ae(o)?o:[o]}function uA(o){return Qt(o,y)}function dA(o,a){return a=typeof a=="function"?a:r,Qt(o,y,a)}function pA(o){return Qt(o,p|y)}function hA(o,a){return a=typeof a=="function"?a:r,Qt(o,p|y,a)}function fA(o,a){return a==null||Em(o,a,st(a))}function pi(o,a){return o===a||o!==o&&a!==a}var mA=Hl(yd),gA=Hl(function(o,a){return o>=a}),Yr=Pm(function(){return arguments}())?Pm:function(o){return qe(o)&&Ne.call(o,"callee")&&!hm.call(o,"callee")},ae=C.isArray,vA=Zf?Ft(Zf):S0;function Pt(o){return o!=null&&Kl(o.length)&&!Vi(o)}function Je(o){return qe(o)&&Pt(o)}function yA(o){return o===!0||o===!1||qe(o)&&_t(o)==ns}var yr=Mx||rp,bA=Jf?Ft(Jf):A0;function _A(o){return qe(o)&&o.nodeType===1&&!Ss(o)}function EA(o){if(o==null)return!0;if(Pt(o)&&(ae(o)||typeof o=="string"||typeof o.splice=="function"||yr(o)||fo(o)||Yr(o)))return!o.length;var a=mt(o);if(a==li||a==ci)return!o.size;if(xs(o))return!Ed(o).length;for(var u in o)if(Ne.call(o,u))return!1;return!0}function wA(o,a){return _s(o,a)}function xA(o,a,u){u=typeof u=="function"?u:r;var h=u?u(o,a):r;return h===r?_s(o,a,r,u):!!h}function qd(o){if(!qe(o))return!1;var a=_t(o);return a==cl||a==jE||typeof o.message=="string"&&typeof o.name=="string"&&!Ss(o)}function TA(o){return typeof o=="number"&&mm(o)}function Vi(o){if(!Ge(o))return!1;var a=_t(o);return a==ul||a==wf||a==VE||a==ZE}function Ng(o){return typeof o=="number"&&o==pe(o)}function Kl(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=St}function Ge(o){var a=typeof o;return o!=null&&(a=="object"||a=="function")}function qe(o){return o!=null&&typeof o=="object"}var Dg=Yf?Ft(Yf):O0;function SA(o,a){return o===a||_d(o,a,Fd(a))}function AA(o,a,u){return u=typeof u=="function"?u:r,_d(o,a,Fd(a),u)}function PA(o){return Fg(o)&&o!=+o}function OA(o){if(dT(o))throw new se(i);return Om(o)}function CA(o){return o===null}function IA(o){return o==null}function Fg(o){return typeof o=="number"||qe(o)&&_t(o)==ss}function Ss(o){if(!qe(o)||_t(o)!=$i)return!1;var a=Tl(o);if(a===null)return!0;var u=Ne.call(a,"constructor")&&a.constructor;return typeof u=="function"&&u instanceof u&&_l.call(u)==Ax}var Zd=Kf?Ft(Kf):C0;function LA(o){return Ng(o)&&o>=-St&&o<=St}var $g=Xf?Ft(Xf):I0;function Xl(o){return typeof o=="string"||!ae(o)&&qe(o)&&_t(o)==ls}function Bt(o){return typeof o=="symbol"||qe(o)&&_t(o)==dl}var fo=Qf?Ft(Qf):L0;function MA(o){return o===r}function RA(o){return qe(o)&&mt(o)==cs}function kA(o){return qe(o)&&_t(o)==YE}var NA=Hl(wd),DA=Hl(function(o,a){return o<=a});function Bg(o){if(!o)return[];if(Pt(o))return Xl(o)?ui(o):At(o);if(ps&&o[ps])return fx(o[ps]());var a=mt(o),u=a==li?cd:a==ci?vl:mo;return u(o)}function ji(o){if(!o)return o===0?o:0;if(o=ii(o),o===kt||o===-kt){var a=o<0?-1:1;return a*nl}return o===o?o:0}function pe(o){var a=ji(o),u=a%1;return a===a?u?a-u:a:0}function Wg(o){return o?jr(pe(o),0,Nt):0}function ii(o){if(typeof o=="number")return o;if(Bt(o))return Ur;if(Ge(o)){var a=typeof o.valueOf=="function"?o.valueOf():o;o=Ge(a)?a+"":a}if(typeof o!="string")return o===0?o:+o;o=om(o);var u=vw.test(o);return u||bw.test(o)?Kw(o.slice(2),u?2:8):gw.test(o)?Ur:+o}function Ug(o){return Oi(o,Ot(o))}function FA(o){return o?jr(pe(o),-St,St):o===0?o:0}function Le(o){return o==null?"":$t(o)}var $A=uo(function(o,a){if(xs(a)||Pt(a)){Oi(a,st(a),o);return}for(var u in a)Ne.call(a,u)&&vs(o,u,a[u])}),Hg=uo(function(o,a){Oi(a,Ot(a),o)}),Ql=uo(function(o,a,u,h){Oi(a,Ot(a),o,h)}),BA=uo(function(o,a,u,h){Oi(a,st(a),o,h)}),WA=zi(md);function UA(o,a){var u=co(o);return a==null?u:_m(u,a)}var HA=ge(function(o,a){o=Fe(o);var u=-1,h=a.length,g=h>2?a[2]:r;for(g&&Et(a[0],a[1],g)&&(h=1);++u<h;)for(var b=a[u],T=Ot(b),S=-1,O=T.length;++S<O;){var M=T[S],R=o[M];(R===r||pi(R,so[M])&&!Ne.call(o,M))&&(o[M]=b[M])}return o}),zA=ge(function(o){return o.push(r,og),Dt(zg,r,o)});function GA(o,a){return tm(o,Y(a,3),Pi)}function VA(o,a){return tm(o,Y(a,3),vd)}function jA(o,a){return o==null?o:gd(o,Y(a,3),Ot)}function qA(o,a){return o==null?o:Sm(o,Y(a,3),Ot)}function ZA(o,a){return o&&Pi(o,Y(a,3))}function JA(o,a){return o&&vd(o,Y(a,3))}function YA(o){return o==null?[]:kl(o,st(o))}function KA(o){return o==null?[]:kl(o,Ot(o))}function Jd(o,a,u){var h=o==null?r:qr(o,a);return h===r?u:h}function XA(o,a){return o!=null&&lg(o,a,E0)}function Yd(o,a){return o!=null&&lg(o,a,w0)}var QA=eg(function(o,a,u){a!=null&&typeof a.toString!="function"&&(a=El.call(a)),o[a]=u},Xd(Ct)),eP=eg(function(o,a,u){a!=null&&typeof a.toString!="function"&&(a=El.call(a)),Ne.call(o,a)?o[a].push(u):o[a]=[u]},Y),tP=ge(bs);function st(o){return Pt(o)?ym(o):Ed(o)}function Ot(o){return Pt(o)?ym(o,!0):M0(o)}function iP(o,a){var u={};return a=Y(a,3),Pi(o,function(h,g,b){Ui(u,a(h,g,b),h)}),u}function rP(o,a){var u={};return a=Y(a,3),Pi(o,function(h,g,b){Ui(u,g,a(h,g,b))}),u}var nP=uo(function(o,a,u){Nl(o,a,u)}),zg=uo(function(o,a,u,h){Nl(o,a,u,h)}),oP=zi(function(o,a){var u={};if(o==null)return u;var h=!1;a=He(a,function(b){return b=gr(b,o),h||(h=b.length>1),b}),Oi(o,Nd(o),u),h&&(u=Qt(u,p|m|y,Q0));for(var g=a.length;g--;)Pd(u,a[g]);return u});function sP(o,a){return Gg(o,Yl(Y(a)))}var aP=zi(function(o,a){return o==null?{}:k0(o,a)});function Gg(o,a){if(o==null)return{};var u=He(Nd(o),function(h){return[h]});return a=Y(a),Nm(o,u,function(h,g){return a(h,g[0])})}function lP(o,a,u){a=gr(a,o);var h=-1,g=a.length;for(g||(g=1,o=r);++h<g;){var b=o==null?r:o[Ci(a[h])];b===r&&(h=g,b=u),o=Vi(b)?b.call(o):b}return o}function cP(o,a,u){return o==null?o:Es(o,a,u)}function uP(o,a,u,h){return h=typeof h=="function"?h:r,o==null?o:Es(o,a,u,h)}var Vg=rg(st),jg=rg(Ot);function dP(o,a,u){var h=ae(o),g=h||yr(o)||fo(o);if(a=Y(a,4),u==null){var b=o&&o.constructor;g?u=h?new b:[]:Ge(o)?u=Vi(b)?co(Tl(o)):{}:u={}}return(g?Yt:Pi)(o,function(T,S,O){return a(u,T,S,O)}),u}function pP(o,a){return o==null?!0:Pd(o,a)}function hP(o,a,u){return o==null?o:Wm(o,a,Id(u))}function fP(o,a,u,h){return h=typeof h=="function"?h:r,o==null?o:Wm(o,a,Id(u),h)}function mo(o){return o==null?[]:ld(o,st(o))}function mP(o){return o==null?[]:ld(o,Ot(o))}function gP(o,a,u){return u===r&&(u=a,a=r),u!==r&&(u=ii(u),u=u===u?u:0),a!==r&&(a=ii(a),a=a===a?a:0),jr(ii(o),a,u)}function vP(o,a,u){return a=ji(a),u===r?(u=a,a=0):u=ji(u),o=ii(o),x0(o,a,u)}function yP(o,a,u){if(u&&typeof u!="boolean"&&Et(o,a,u)&&(a=u=r),u===r&&(typeof a=="boolean"?(u=a,a=r):typeof o=="boolean"&&(u=o,o=r)),o===r&&a===r?(o=0,a=1):(o=ji(o),a===r?(a=o,o=0):a=ji(a)),o>a){var h=o;o=a,a=h}if(u||o%1||a%1){var g=gm();return ft(o+g*(a-o+Yw("1e-"+((g+"").length-1))),a)}return Td(o,a)}var bP=po(function(o,a,u){return a=a.toLowerCase(),o+(u?qg(a):a)});function qg(o){return Kd(Le(o).toLowerCase())}function Zg(o){return o=Le(o),o&&o.replace(Ew,cx).replace(Ww,"")}function _P(o,a,u){o=Le(o),a=$t(a);var h=o.length;u=u===r?h:jr(pe(u),0,h);var g=u;return u-=a.length,u>=0&&o.slice(u,g)==a}function EP(o){return o=Le(o),o&&tw.test(o)?o.replace(Sf,ux):o}function wP(o){return o=Le(o),o&&aw.test(o)?o.replace(ju,"\\$&"):o}var xP=po(function(o,a,u){return o+(u?"-":"")+a.toLowerCase()}),TP=po(function(o,a,u){return o+(u?" ":"")+a.toLowerCase()}),SP=Km("toLowerCase");function AP(o,a,u){o=Le(o),a=pe(a);var h=a?oo(o):0;if(!a||h>=a)return o;var g=(a-h)/2;return Ul(Ol(g),u)+o+Ul(Pl(g),u)}function PP(o,a,u){o=Le(o),a=pe(a);var h=a?oo(o):0;return a&&h<a?o+Ul(a-h,u):o}function OP(o,a,u){o=Le(o),a=pe(a);var h=a?oo(o):0;return a&&h<a?Ul(a-h,u)+o:o}function CP(o,a,u){return u||a==null?a=0:a&&(a=+a),Dx(Le(o).replace(qu,""),a||0)}function IP(o,a,u){return(u?Et(o,a,u):a===r)?a=1:a=pe(a),Sd(Le(o),a)}function LP(){var o=arguments,a=Le(o[0]);return o.length<3?a:a.replace(o[1],o[2])}var MP=po(function(o,a,u){return o+(u?"_":"")+a.toLowerCase()});function RP(o,a,u){return u&&typeof u!="number"&&Et(o,a,u)&&(a=u=r),u=u===r?Nt:u>>>0,u?(o=Le(o),o&&(typeof a=="string"||a!=null&&!Zd(a))&&(a=$t(a),!a&&no(o))?vr(ui(o),0,u):o.split(a,u)):[]}var kP=po(function(o,a,u){return o+(u?" ":"")+Kd(a)});function NP(o,a,u){return o=Le(o),u=u==null?0:jr(pe(u),0,o.length),a=$t(a),o.slice(u,u+a.length)==a}function DP(o,a,u){var h=v.templateSettings;u&&Et(o,a,u)&&(a=r),o=Le(o),a=Ql({},a,h,ng);var g=Ql({},a.imports,h.imports,ng),b=st(g),T=ld(g,b),S,O,M=0,R=a.interpolate||pl,D="__p += '",W=ud((a.escape||pl).source+"|"+R.source+"|"+(R===Af?mw:pl).source+"|"+(a.evaluate||pl).source+"|$","g"),j="//# sourceURL="+(Ne.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vw+"]")+`
`;o.replace(W,function(Q,be,we,Wt,wt,Ut){return we||(we=Wt),D+=o.slice(M,Ut).replace(ww,dx),be&&(S=!0,D+=`' +
__e(`+be+`) +
'`),wt&&(O=!0,D+=`';
`+wt+`;
__p += '`),we&&(D+=`' +
((__t = (`+we+`)) == null ? '' : __t) +
'`),M=Ut+Q.length,Q}),D+=`';
`;var X=Ne.call(a,"variable")&&a.variable;if(!X)D=`with (obj) {
`+D+`
}
`;else if(hw.test(X))throw new se(s);D=(O?D.replace(KE,""):D).replace(XE,"$1").replace(QE,"$1;"),D="function("+(X||"obj")+`) {
`+(X?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(S?", __e = _.escape":"")+(O?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+D+`return __p
}`;var me=Yg(function(){return Ae(b,j+"return "+D).apply(r,T)});if(me.source=D,qd(me))throw me;return me}function FP(o){return Le(o).toLowerCase()}function $P(o){return Le(o).toUpperCase()}function BP(o,a,u){if(o=Le(o),o&&(u||a===r))return om(o);if(!o||!(a=$t(a)))return o;var h=ui(o),g=ui(a),b=sm(h,g),T=am(h,g)+1;return vr(h,b,T).join("")}function WP(o,a,u){if(o=Le(o),o&&(u||a===r))return o.slice(0,cm(o)+1);if(!o||!(a=$t(a)))return o;var h=ui(o),g=am(h,ui(a))+1;return vr(h,0,g).join("")}function UP(o,a,u){if(o=Le(o),o&&(u||a===r))return o.replace(qu,"");if(!o||!(a=$t(a)))return o;var h=ui(o),g=sm(h,ui(a));return vr(h,g).join("")}function HP(o,a){var u=Xe,h=We;if(Ge(a)){var g="separator"in a?a.separator:g;u="length"in a?pe(a.length):u,h="omission"in a?$t(a.omission):h}o=Le(o);var b=o.length;if(no(o)){var T=ui(o);b=T.length}if(u>=b)return o;var S=u-oo(h);if(S<1)return h;var O=T?vr(T,0,S).join(""):o.slice(0,S);if(g===r)return O+h;if(T&&(S+=O.length-S),Zd(g)){if(o.slice(S).search(g)){var M,R=O;for(g.global||(g=ud(g.source,Le(Pf.exec(g))+"g")),g.lastIndex=0;M=g.exec(R);)var D=M.index;O=O.slice(0,D===r?S:D)}}else if(o.indexOf($t(g),S)!=S){var W=O.lastIndexOf(g);W>-1&&(O=O.slice(0,W))}return O+h}function zP(o){return o=Le(o),o&&ew.test(o)?o.replace(Tf,yx):o}var GP=po(function(o,a,u){return o+(u?" ":"")+a.toUpperCase()}),Kd=Km("toUpperCase");function Jg(o,a,u){return o=Le(o),a=u?r:a,a===r?hx(o)?Ex(o):nx(o):o.match(a)||[]}var Yg=ge(function(o,a){try{return Dt(o,r,a)}catch(u){return qd(u)?u:new se(u)}}),VP=zi(function(o,a){return Yt(a,function(u){u=Ci(u),Ui(o,u,Vd(o[u],o))}),o});function jP(o){var a=o==null?0:o.length,u=Y();return o=a?He(o,function(h){if(typeof h[1]!="function")throw new Kt(n);return[u(h[0]),h[1]]}):[],ge(function(h){for(var g=-1;++g<a;){var b=o[g];if(Dt(b[0],this,h))return Dt(b[1],this,h)}})}function qP(o){return y0(Qt(o,p))}function Xd(o){return function(){return o}}function ZP(o,a){return o==null||o!==o?a:o}var JP=Qm(),YP=Qm(!0);function Ct(o){return o}function Qd(o){return Cm(typeof o=="function"?o:Qt(o,p))}function KP(o){return Lm(Qt(o,p))}function XP(o,a){return Mm(o,Qt(a,p))}var QP=ge(function(o,a){return function(u){return bs(u,o,a)}}),eO=ge(function(o,a){return function(u){return bs(o,u,a)}});function ep(o,a,u){var h=st(a),g=kl(a,h);u==null&&!(Ge(a)&&(g.length||!h.length))&&(u=a,a=o,o=this,g=kl(a,st(a)));var b=!(Ge(u)&&"chain"in u)||!!u.chain,T=Vi(o);return Yt(g,function(S){var O=a[S];o[S]=O,T&&(o.prototype[S]=function(){var M=this.__chain__;if(b||M){var R=o(this.__wrapped__),D=R.__actions__=At(this.__actions__);return D.push({func:O,args:arguments,thisArg:o}),R.__chain__=M,R}return O.apply(o,ur([this.value()],arguments))})}),o}function tO(){return ot._===this&&(ot._=Px),this}function tp(){}function iO(o){return o=pe(o),ge(function(a){return Rm(a,o)})}var rO=Md(He),nO=Md(em),oO=Md(rd);function Kg(o){return Bd(o)?nd(Ci(o)):N0(o)}function sO(o){return function(a){return o==null?r:qr(o,a)}}var aO=tg(),lO=tg(!0);function ip(){return[]}function rp(){return!1}function cO(){return{}}function uO(){return""}function dO(){return!0}function pO(o,a){if(o=pe(o),o<1||o>St)return[];var u=Nt,h=ft(o,Nt);a=Y(a),o-=Nt;for(var g=ad(h,a);++u<o;)a(u);return g}function hO(o){return ae(o)?He(o,Ci):Bt(o)?[o]:At(vg(Le(o)))}function fO(o){var a=++Sx;return Le(o)+a}var mO=Wl(function(o,a){return o+a},0),gO=Rd("ceil"),vO=Wl(function(o,a){return o/a},1),yO=Rd("floor");function bO(o){return o&&o.length?Rl(o,Ct,yd):r}function _O(o,a){return o&&o.length?Rl(o,Y(a,2),yd):r}function EO(o){return rm(o,Ct)}function wO(o,a){return rm(o,Y(a,2))}function xO(o){return o&&o.length?Rl(o,Ct,wd):r}function TO(o,a){return o&&o.length?Rl(o,Y(a,2),wd):r}var SO=Wl(function(o,a){return o*a},1),AO=Rd("round"),PO=Wl(function(o,a){return o-a},0);function OO(o){return o&&o.length?sd(o,Ct):0}function CO(o,a){return o&&o.length?sd(o,Y(a,2)):0}return v.after=KS,v.ary=Og,v.assign=$A,v.assignIn=Hg,v.assignInWith=Ql,v.assignWith=BA,v.at=WA,v.before=Cg,v.bind=Vd,v.bindAll=VP,v.bindKey=Ig,v.castArray=cA,v.chain=Sg,v.chunk=yT,v.compact=bT,v.concat=_T,v.cond=jP,v.conforms=qP,v.constant=Xd,v.countBy=OS,v.create=UA,v.curry=Lg,v.curryRight=Mg,v.debounce=Rg,v.defaults=HA,v.defaultsDeep=zA,v.defer=XS,v.delay=QS,v.difference=ET,v.differenceBy=wT,v.differenceWith=xT,v.drop=TT,v.dropRight=ST,v.dropRightWhile=AT,v.dropWhile=PT,v.fill=OT,v.filter=IS,v.flatMap=RS,v.flatMapDeep=kS,v.flatMapDepth=NS,v.flatten=Eg,v.flattenDeep=CT,v.flattenDepth=IT,v.flip=eA,v.flow=JP,v.flowRight=YP,v.fromPairs=LT,v.functions=YA,v.functionsIn=KA,v.groupBy=DS,v.initial=RT,v.intersection=kT,v.intersectionBy=NT,v.intersectionWith=DT,v.invert=QA,v.invertBy=eP,v.invokeMap=$S,v.iteratee=Qd,v.keyBy=BS,v.keys=st,v.keysIn=Ot,v.map=ql,v.mapKeys=iP,v.mapValues=rP,v.matches=KP,v.matchesProperty=XP,v.memoize=Jl,v.merge=nP,v.mergeWith=zg,v.method=QP,v.methodOf=eO,v.mixin=ep,v.negate=Yl,v.nthArg=iO,v.omit=oP,v.omitBy=sP,v.once=tA,v.orderBy=WS,v.over=rO,v.overArgs=iA,v.overEvery=nO,v.overSome=oO,v.partial=jd,v.partialRight=kg,v.partition=US,v.pick=aP,v.pickBy=Gg,v.property=Kg,v.propertyOf=sO,v.pull=WT,v.pullAll=xg,v.pullAllBy=UT,v.pullAllWith=HT,v.pullAt=zT,v.range=aO,v.rangeRight=lO,v.rearg=rA,v.reject=GS,v.remove=GT,v.rest=nA,v.reverse=zd,v.sampleSize=jS,v.set=cP,v.setWith=uP,v.shuffle=qS,v.slice=VT,v.sortBy=YS,v.sortedUniq=XT,v.sortedUniqBy=QT,v.split=RP,v.spread=oA,v.tail=eS,v.take=tS,v.takeRight=iS,v.takeRightWhile=rS,v.takeWhile=nS,v.tap=bS,v.throttle=sA,v.thru=jl,v.toArray=Bg,v.toPairs=Vg,v.toPairsIn=jg,v.toPath=hO,v.toPlainObject=Ug,v.transform=dP,v.unary=aA,v.union=oS,v.unionBy=sS,v.unionWith=aS,v.uniq=lS,v.uniqBy=cS,v.uniqWith=uS,v.unset=pP,v.unzip=Gd,v.unzipWith=Tg,v.update=hP,v.updateWith=fP,v.values=mo,v.valuesIn=mP,v.without=dS,v.words=Jg,v.wrap=lA,v.xor=pS,v.xorBy=hS,v.xorWith=fS,v.zip=mS,v.zipObject=gS,v.zipObjectDeep=vS,v.zipWith=yS,v.entries=Vg,v.entriesIn=jg,v.extend=Hg,v.extendWith=Ql,ep(v,v),v.add=mO,v.attempt=Yg,v.camelCase=bP,v.capitalize=qg,v.ceil=gO,v.clamp=gP,v.clone=uA,v.cloneDeep=pA,v.cloneDeepWith=hA,v.cloneWith=dA,v.conformsTo=fA,v.deburr=Zg,v.defaultTo=ZP,v.divide=vO,v.endsWith=_P,v.eq=pi,v.escape=EP,v.escapeRegExp=wP,v.every=CS,v.find=LS,v.findIndex=bg,v.findKey=GA,v.findLast=MS,v.findLastIndex=_g,v.findLastKey=VA,v.floor=yO,v.forEach=Ag,v.forEachRight=Pg,v.forIn=jA,v.forInRight=qA,v.forOwn=ZA,v.forOwnRight=JA,v.get=Jd,v.gt=mA,v.gte=gA,v.has=XA,v.hasIn=Yd,v.head=wg,v.identity=Ct,v.includes=FS,v.indexOf=MT,v.inRange=vP,v.invoke=tP,v.isArguments=Yr,v.isArray=ae,v.isArrayBuffer=vA,v.isArrayLike=Pt,v.isArrayLikeObject=Je,v.isBoolean=yA,v.isBuffer=yr,v.isDate=bA,v.isElement=_A,v.isEmpty=EA,v.isEqual=wA,v.isEqualWith=xA,v.isError=qd,v.isFinite=TA,v.isFunction=Vi,v.isInteger=Ng,v.isLength=Kl,v.isMap=Dg,v.isMatch=SA,v.isMatchWith=AA,v.isNaN=PA,v.isNative=OA,v.isNil=IA,v.isNull=CA,v.isNumber=Fg,v.isObject=Ge,v.isObjectLike=qe,v.isPlainObject=Ss,v.isRegExp=Zd,v.isSafeInteger=LA,v.isSet=$g,v.isString=Xl,v.isSymbol=Bt,v.isTypedArray=fo,v.isUndefined=MA,v.isWeakMap=RA,v.isWeakSet=kA,v.join=FT,v.kebabCase=xP,v.last=ti,v.lastIndexOf=$T,v.lowerCase=TP,v.lowerFirst=SP,v.lt=NA,v.lte=DA,v.max=bO,v.maxBy=_O,v.mean=EO,v.meanBy=wO,v.min=xO,v.minBy=TO,v.stubArray=ip,v.stubFalse=rp,v.stubObject=cO,v.stubString=uO,v.stubTrue=dO,v.multiply=SO,v.nth=BT,v.noConflict=tO,v.noop=tp,v.now=Zl,v.pad=AP,v.padEnd=PP,v.padStart=OP,v.parseInt=CP,v.random=yP,v.reduce=HS,v.reduceRight=zS,v.repeat=IP,v.replace=LP,v.result=lP,v.round=AO,v.runInContext=A,v.sample=VS,v.size=ZS,v.snakeCase=MP,v.some=JS,v.sortedIndex=jT,v.sortedIndexBy=qT,v.sortedIndexOf=ZT,v.sortedLastIndex=JT,v.sortedLastIndexBy=YT,v.sortedLastIndexOf=KT,v.startCase=kP,v.startsWith=NP,v.subtract=PO,v.sum=OO,v.sumBy=CO,v.template=DP,v.times=pO,v.toFinite=ji,v.toInteger=pe,v.toLength=Wg,v.toLower=FP,v.toNumber=ii,v.toSafeInteger=FA,v.toString=Le,v.toUpper=$P,v.trim=BP,v.trimEnd=WP,v.trimStart=UP,v.truncate=HP,v.unescape=zP,v.uniqueId=fO,v.upperCase=GP,v.upperFirst=Kd,v.each=Ag,v.eachRight=Pg,v.first=wg,ep(v,function(){var o={};return Pi(v,function(a,u){Ne.call(v.prototype,u)||(o[u]=a)}),o}(),{chain:!1}),v.VERSION=t,Yt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){v[o].placeholder=v}),Yt(["drop","take"],function(o,a){_e.prototype[o]=function(u){u=u===r?1:rt(pe(u),0);var h=this.__filtered__&&!a?new _e(this):this.clone();return h.__filtered__?h.__takeCount__=ft(u,h.__takeCount__):h.__views__.push({size:ft(u,Nt),type:o+(h.__dir__<0?"Right":"")}),h},_e.prototype[o+"Right"]=function(u){return this.reverse()[o](u).reverse()}}),Yt(["filter","map","takeWhile"],function(o,a){var u=a+1,h=u==Ai||u==Wr;_e.prototype[o]=function(g){var b=this.clone();return b.__iteratees__.push({iteratee:Y(g,3),type:u}),b.__filtered__=b.__filtered__||h,b}}),Yt(["head","last"],function(o,a){var u="take"+(a?"Right":"");_e.prototype[o]=function(){return this[u](1).value()[0]}}),Yt(["initial","tail"],function(o,a){var u="drop"+(a?"":"Right");_e.prototype[o]=function(){return this.__filtered__?new _e(this):this[u](1)}}),_e.prototype.compact=function(){return this.filter(Ct)},_e.prototype.find=function(o){return this.filter(o).head()},_e.prototype.findLast=function(o){return this.reverse().find(o)},_e.prototype.invokeMap=ge(function(o,a){return typeof o=="function"?new _e(this):this.map(function(u){return bs(u,o,a)})}),_e.prototype.reject=function(o){return this.filter(Yl(Y(o)))},_e.prototype.slice=function(o,a){o=pe(o);var u=this;return u.__filtered__&&(o>0||a<0)?new _e(u):(o<0?u=u.takeRight(-o):o&&(u=u.drop(o)),a!==r&&(a=pe(a),u=a<0?u.dropRight(-a):u.take(a-o)),u)},_e.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},_e.prototype.toArray=function(){return this.take(Nt)},Pi(_e.prototype,function(o,a){var u=/^(?:filter|find|map|reject)|While$/.test(a),h=/^(?:head|last)$/.test(a),g=v[h?"take"+(a=="last"?"Right":""):a],b=h||/^find/.test(a);g&&(v.prototype[a]=function(){var T=this.__wrapped__,S=h?[1]:arguments,O=T instanceof _e,M=S[0],R=O||ae(T),D=function(be){var we=g.apply(v,ur([be],S));return h&&W?we[0]:we};R&&u&&typeof M=="function"&&M.length!=1&&(O=R=!1);var W=this.__chain__,j=!!this.__actions__.length,X=b&&!W,me=O&&!j;if(!b&&R){T=me?T:new _e(this);var Q=o.apply(T,S);return Q.__actions__.push({func:jl,args:[D],thisArg:r}),new Xt(Q,W)}return X&&me?o.apply(this,S):(Q=this.thru(D),X?h?Q.value()[0]:Q.value():Q)})}),Yt(["pop","push","shift","sort","splice","unshift"],function(o){var a=yl[o],u=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",h=/^(?:pop|shift)$/.test(o);v.prototype[o]=function(){var g=arguments;if(h&&!this.__chain__){var b=this.value();return a.apply(ae(b)?b:[],g)}return this[u](function(T){return a.apply(ae(T)?T:[],g)})}}),Pi(_e.prototype,function(o,a){var u=v[a];if(u){var h=u.name+"";Ne.call(lo,h)||(lo[h]=[]),lo[h].push({name:a,func:u})}}),lo[Bl(r,k).name]=[{name:"wrapper",func:r}],_e.prototype.clone=zx,_e.prototype.reverse=Gx,_e.prototype.value=Vx,v.prototype.at=_S,v.prototype.chain=ES,v.prototype.commit=wS,v.prototype.next=xS,v.prototype.plant=SS,v.prototype.reverse=AS,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=PS,v.prototype.first=v.prototype.head,ps&&(v.prototype[ps]=TS),v},pr=wx();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ot._=pr,define(function(){return pr})):Hr?((Hr.exports=pr)._=pr,Qu._=pr):ot._=pr}).call(Eo)});var _b=Qe((aa,Zp)=>{f();(function(r,t){typeof aa=="object"&&typeof Zp=="object"?Zp.exports=t():typeof define=="function"&&define.amd?define([],t):typeof aa=="object"?aa.bowser=t():r.bowser=t()})(aa,function(){return function(r){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=r,e.c=t,e.d=function(i,n,s){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:s})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(1&n&&(i=e(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var c in i)e.d(s,c,function(l){return i[l]}.bind(null,c));return s},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="",e(e.s=90)}({17:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i=e(18),n=function(){function s(){}return s.getFirstMatch=function(c,l){var d=l.match(c);return d&&d.length>0&&d[1]||""},s.getSecondMatch=function(c,l){var d=l.match(c);return d&&d.length>1&&d[2]||""},s.matchAndReturnConst=function(c,l,d){if(c.test(l))return d},s.getWindowsVersionName=function(c){switch(c){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(c){var l=c.split(".").splice(0,2).map(function(d){return parseInt(d,10)||0});if(l.push(0),l[0]===10)switch(l[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(c){var l=c.split(".").splice(0,2).map(function(d){return parseInt(d,10)||0});if(l.push(0),!(l[0]===1&&l[1]<5))return l[0]===1&&l[1]<6?"Cupcake":l[0]===1&&l[1]>=6?"Donut":l[0]===2&&l[1]<2?"Eclair":l[0]===2&&l[1]===2?"Froyo":l[0]===2&&l[1]>2?"Gingerbread":l[0]===3?"Honeycomb":l[0]===4&&l[1]<1?"Ice Cream Sandwich":l[0]===4&&l[1]<4?"Jelly Bean":l[0]===4&&l[1]>=4?"KitKat":l[0]===5?"Lollipop":l[0]===6?"Marshmallow":l[0]===7?"Nougat":l[0]===8?"Oreo":l[0]===9?"Pie":void 0},s.getVersionPrecision=function(c){return c.split(".").length},s.compareVersions=function(c,l,d){d===void 0&&(d=!1);var p=s.getVersionPrecision(c),m=s.getVersionPrecision(l),y=Math.max(p,m),E=0,x=s.map([c,l],function(P){var k=y-s.getVersionPrecision(P),B=P+new Array(k+1).join(".0");return s.map(B.split("."),function(I){return new Array(20-I.length).join("0")+I}).reverse()});for(d&&(E=y-Math.min(p,m)),y-=1;y>=E;){if(x[0][y]>x[1][y])return 1;if(x[0][y]===x[1][y]){if(y===E)return 0;y-=1}else if(x[0][y]<x[1][y])return-1}},s.map=function(c,l){var d,p=[];if(Array.prototype.map)return Array.prototype.map.call(c,l);for(d=0;d<c.length;d+=1)p.push(l(c[d]));return p},s.find=function(c,l){var d,p;if(Array.prototype.find)return Array.prototype.find.call(c,l);for(d=0,p=c.length;d<p;d+=1){var m=c[d];if(l(m,d))return m}},s.assign=function(c){for(var l,d,p=c,m=arguments.length,y=new Array(m>1?m-1:0),E=1;E<m;E++)y[E-1]=arguments[E];if(Object.assign)return Object.assign.apply(Object,[c].concat(y));var x=function(){var P=y[l];typeof P=="object"&&P!==null&&Object.keys(P).forEach(function(k){p[k]=P[k]})};for(l=0,d=y.length;l<d;l+=1)x();return c},s.getBrowserAlias=function(c){return i.BROWSER_ALIASES_MAP[c]},s.getBrowserTypeByAlias=function(c){return i.BROWSER_MAP[c]||""},s}();t.default=n,r.exports=t.default},18:function(r,t,e){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(91))&&i.__esModule?i:{default:i},s=e(18);function c(d,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}var l=function(){function d(){}var p,m,y;return d.getParser=function(E,x){if(x===void 0&&(x=!1),typeof E!="string")throw new Error("UserAgent should be a string");return new n.default(E,x)},d.parse=function(E){return new n.default(E).getResult()},p=d,y=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(m=null)&&c(p.prototype,m),y&&c(p,y),d}();t.default=l,r.exports=t.default},91:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i=d(e(92)),n=d(e(93)),s=d(e(94)),c=d(e(95)),l=d(e(17));function d(m){return m&&m.__esModule?m:{default:m}}var p=function(){function m(E,x){if(x===void 0&&(x=!1),E==null||E==="")throw new Error("UserAgent parameter can't be empty");this._ua=E,this.parsedResult={},x!==!0&&this.parse()}var y=m.prototype;return y.getUA=function(){return this._ua},y.test=function(E){return E.test(this._ua)},y.parseBrowser=function(){var E=this;this.parsedResult.browser={};var x=l.default.find(i.default,function(P){if(typeof P.test=="function")return P.test(E);if(P.test instanceof Array)return P.test.some(function(k){return E.test(k)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.browser=x.describe(this.getUA())),this.parsedResult.browser},y.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},y.getBrowserName=function(E){return E?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},y.getBrowserVersion=function(){return this.getBrowser().version},y.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},y.parseOS=function(){var E=this;this.parsedResult.os={};var x=l.default.find(n.default,function(P){if(typeof P.test=="function")return P.test(E);if(P.test instanceof Array)return P.test.some(function(k){return E.test(k)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.os=x.describe(this.getUA())),this.parsedResult.os},y.getOSName=function(E){var x=this.getOS().name;return E?String(x).toLowerCase()||"":x||""},y.getOSVersion=function(){return this.getOS().version},y.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},y.getPlatformType=function(E){E===void 0&&(E=!1);var x=this.getPlatform().type;return E?String(x).toLowerCase()||"":x||""},y.parsePlatform=function(){var E=this;this.parsedResult.platform={};var x=l.default.find(s.default,function(P){if(typeof P.test=="function")return P.test(E);if(P.test instanceof Array)return P.test.some(function(k){return E.test(k)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.platform=x.describe(this.getUA())),this.parsedResult.platform},y.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},y.getEngineName=function(E){return E?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},y.parseEngine=function(){var E=this;this.parsedResult.engine={};var x=l.default.find(c.default,function(P){if(typeof P.test=="function")return P.test(E);if(P.test instanceof Array)return P.test.some(function(k){return E.test(k)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.engine=x.describe(this.getUA())),this.parsedResult.engine},y.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},y.getResult=function(){return l.default.assign({},this.parsedResult)},y.satisfies=function(E){var x=this,P={},k=0,B={},I=0;if(Object.keys(E).forEach(function(We){var pt=E[We];typeof pt=="string"?(B[We]=pt,I+=1):typeof pt=="object"&&(P[We]=pt,k+=1)}),k>0){var ne=Object.keys(P),ve=l.default.find(ne,function(We){return x.isOS(We)});if(ve){var ke=this.satisfies(P[ve]);if(ke!==void 0)return ke}var Ie=l.default.find(ne,function(We){return x.isPlatform(We)});if(Ie){var G=this.satisfies(P[Ie]);if(G!==void 0)return G}}if(I>0){var Se=Object.keys(B),Xe=l.default.find(Se,function(We){return x.isBrowser(We,!0)});if(Xe!==void 0)return this.compareVersion(B[Xe])}},y.isBrowser=function(E,x){x===void 0&&(x=!1);var P=this.getBrowserName().toLowerCase(),k=E.toLowerCase(),B=l.default.getBrowserTypeByAlias(k);return x&&B&&(k=B.toLowerCase()),k===P},y.compareVersion=function(E){var x=[0],P=E,k=!1,B=this.getBrowserVersion();if(typeof B=="string")return E[0]===">"||E[0]==="<"?(P=E.substr(1),E[1]==="="?(k=!0,P=E.substr(2)):x=[],E[0]===">"?x.push(1):x.push(-1)):E[0]==="="?P=E.substr(1):E[0]==="~"&&(k=!0,P=E.substr(1)),x.indexOf(l.default.compareVersions(B,P,k))>-1},y.isOS=function(E){return this.getOSName(!0)===String(E).toLowerCase()},y.isPlatform=function(E){return this.getPlatformType(!0)===String(E).toLowerCase()},y.isEngine=function(E){return this.getEngineName(!0)===String(E).toLowerCase()},y.is=function(E,x){return x===void 0&&(x=!1),this.isBrowser(E,x)||this.isOS(E)||this.isPlatform(E)},y.some=function(E){var x=this;return E===void 0&&(E=[]),E.some(function(P){return x.is(P)})},m}();t.default=p,r.exports=t.default},92:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(17))&&i.__esModule?i:{default:i},s=/version\/(\d+(\.?_?\d+)+)/i,c=[{test:[/googlebot/i],describe:function(l){var d={name:"Googlebot"},p=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/opera/i],describe:function(l){var d={name:"Opera"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/opr\/|opios/i],describe:function(l){var d={name:"Opera"},p=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/SamsungBrowser/i],describe:function(l){var d={name:"Samsung Internet for Android"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/Whale/i],describe:function(l){var d={name:"NAVER Whale Browser"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/MZBrowser/i],describe:function(l){var d={name:"MZ Browser"},p=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/focus/i],describe:function(l){var d={name:"Focus"},p=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/swing/i],describe:function(l){var d={name:"Swing"},p=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/coast/i],describe:function(l){var d={name:"Opera Coast"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(l){var d={name:"Opera Touch"},p=n.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/yabrowser/i],describe:function(l){var d={name:"Yandex Browser"},p=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/ucbrowser/i],describe:function(l){var d={name:"UC Browser"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/Maxthon|mxios/i],describe:function(l){var d={name:"Maxthon"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/epiphany/i],describe:function(l){var d={name:"Epiphany"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/puffin/i],describe:function(l){var d={name:"Puffin"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/sleipnir/i],describe:function(l){var d={name:"Sleipnir"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/k-meleon/i],describe:function(l){var d={name:"K-Meleon"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/micromessenger/i],describe:function(l){var d={name:"WeChat"},p=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/qqbrowser/i],describe:function(l){var d={name:/qqbrowserlite/i.test(l)?"QQ Browser Lite":"QQ Browser"},p=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/msie|trident/i],describe:function(l){var d={name:"Internet Explorer"},p=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/\sedg\//i],describe:function(l){var d={name:"Microsoft Edge"},p=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/edg([ea]|ios)/i],describe:function(l){var d={name:"Microsoft Edge"},p=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/vivaldi/i],describe:function(l){var d={name:"Vivaldi"},p=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/seamonkey/i],describe:function(l){var d={name:"SeaMonkey"},p=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/sailfish/i],describe:function(l){var d={name:"Sailfish"},p=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,l);return p&&(d.version=p),d}},{test:[/silk/i],describe:function(l){var d={name:"Amazon Silk"},p=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/phantom/i],describe:function(l){var d={name:"PhantomJS"},p=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/slimerjs/i],describe:function(l){var d={name:"SlimerJS"},p=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var d={name:"BlackBerry"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var d={name:"WebOS Browser"},p=n.default.getFirstMatch(s,l)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/bada/i],describe:function(l){var d={name:"Bada"},p=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/tizen/i],describe:function(l){var d={name:"Tizen"},p=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/qupzilla/i],describe:function(l){var d={name:"QupZilla"},p=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/firefox|iceweasel|fxios/i],describe:function(l){var d={name:"Firefox"},p=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/electron/i],describe:function(l){var d={name:"Electron"},p=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/MiuiBrowser/i],describe:function(l){var d={name:"Miui"},p=n.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/chromium/i],describe:function(l){var d={name:"Chromium"},p=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,l)||n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/chrome|crios|crmo/i],describe:function(l){var d={name:"Chrome"},p=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/GSA/i],describe:function(l){var d={name:"Google Search"},p=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:function(l){var d=!l.test(/like android/i),p=l.test(/android/i);return d&&p},describe:function(l){var d={name:"Android Browser"},p=n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/playstation 4/i],describe:function(l){var d={name:"PlayStation 4"},p=n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/safari|applewebkit/i],describe:function(l){var d={name:"Safari"},p=n.default.getFirstMatch(s,l);return p&&(d.version=p),d}},{test:[/.*/i],describe:function(l){var d=l.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(d,l),version:n.default.getSecondMatch(d,l)}}}];t.default=c,r.exports=t.default},93:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(17))&&i.__esModule?i:{default:i},s=e(18),c=[{test:[/Roku\/DVP/],describe:function(l){var d=n.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,l);return{name:s.OS_MAP.Roku,version:d}}},{test:[/windows phone/i],describe:function(l){var d=n.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,l);return{name:s.OS_MAP.WindowsPhone,version:d}}},{test:[/windows /i],describe:function(l){var d=n.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,l),p=n.default.getWindowsVersionName(d);return{name:s.OS_MAP.Windows,version:d,versionName:p}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(l){var d={name:s.OS_MAP.iOS},p=n.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,l);return p&&(d.version=p),d}},{test:[/macintosh/i],describe:function(l){var d=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,l).replace(/[_\s]/g,"."),p=n.default.getMacOSVersionName(d),m={name:s.OS_MAP.MacOS,version:d};return p&&(m.versionName=p),m}},{test:[/(ipod|iphone|ipad)/i],describe:function(l){var d=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,l).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:d}}},{test:function(l){var d=!l.test(/like android/i),p=l.test(/android/i);return d&&p},describe:function(l){var d=n.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,l),p=n.default.getAndroidVersionName(d),m={name:s.OS_MAP.Android,version:d};return p&&(m.versionName=p),m}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var d=n.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,l),p={name:s.OS_MAP.WebOS};return d&&d.length&&(p.version=d),p}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var d=n.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,l)||n.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,l)||n.default.getFirstMatch(/\bbb(\d+)/i,l);return{name:s.OS_MAP.BlackBerry,version:d}}},{test:[/bada/i],describe:function(l){var d=n.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,l);return{name:s.OS_MAP.Bada,version:d}}},{test:[/tizen/i],describe:function(l){var d=n.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,l);return{name:s.OS_MAP.Tizen,version:d}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(l){var d=n.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,l);return{name:s.OS_MAP.PlayStation4,version:d}}}];t.default=c,r.exports=t.default},94:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(17))&&i.__esModule?i:{default:i},s=e(18),c=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(l){var d=n.default.getFirstMatch(/(can-l01)/i,l)&&"Nova",p={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return d&&(p.model=d),p}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(l){var d=l.test(/ipod|iphone/i),p=l.test(/like (ipod|iphone)/i);return d&&!p},describe:function(l){var d=n.default.getFirstMatch(/(ipod|iphone)/i,l);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:d}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(l){return l.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(l){var d=Number(String(l.getOSVersion()).split(".")[0]);return l.getOSName(!0)==="android"&&d>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(l){return l.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(l){return l.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(l){return l.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=c,r.exports=t.default},95:function(r,t,e){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=e(17))&&i.__esModule?i:{default:i},s=e(18),c=[{test:function(l){return l.getBrowserName(!0)==="microsoft edge"},describe:function(l){if(/\sedg\//i.test(l))return{name:s.ENGINE_MAP.Blink};var d=n.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,l);return{name:s.ENGINE_MAP.EdgeHTML,version:d}}},{test:[/trident/i],describe:function(l){var d={name:s.ENGINE_MAP.Trident},p=n.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:function(l){return l.test(/presto/i)},describe:function(l){var d={name:s.ENGINE_MAP.Presto},p=n.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:function(l){var d=l.test(/gecko/i),p=l.test(/like gecko/i);return d&&!p},describe:function(l){var d={name:s.ENGINE_MAP.Gecko},p=n.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(l){var d={name:s.ENGINE_MAP.WebKit},p=n.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,l);return p&&(d.version=p),d}}];t.default=c,r.exports=t.default}})})});f();f();var As=(G=>(G.MEETING_START="meeting.start",G.MEETING_LEAVE="meeting.leave",G.MEETING_PARTICIPANT_AMOUNT_UPDATE="meeting.amount-of-participants-update",G.MEETING_PARTICIPANT_LIST_UPDATE="meeting.participant-list-update",G.MEETING_PARTICIPANT_JOINED="meeting.participant-joined",G.MEETING_PARTICIPANT_LEFT="meeting.participant-left",G.MEETING_JOIN="meeting.join",G.MEETING_PARTICIPANT_PROPERTIES="meeting.participant-properties",G.MEETING_HOST_CHANGE="meeting.host-change",G.MEETING_HOST_AVAILABLE="meeting.host-available",G.MEETING_NO_HOST_AVAILABLE="meeting.no-host-available",G.MEETING_SAME_PARTICIPANT_ERROR="meeting.same-participant-error",G.MEETING_DEVICES_CHANGE="meeting.devices-change",G.MEETING_KICK_PARTICIPANTS="meeting.kick-all-participants",G.MEETING_STATE_UPDATE="meeting.state-update",G.MEETING_CONNECTION_STATUS_CHANGE="meeting.connection-status-change",G.MEETING_WAITING_FOR_HOST="meeting.waiting-for-host",G.MY_PARTICIPANT_UPDATED="my-participant.update",G.MY_PARTICIPANT_LEFT="my-participant.left",G.MY_PARTICIPANT_JOINED="my-participant.joined",G.MEETING_KICK_PARTICIPANT="meeting.kick-participant",G.DESTROY="destroy",G))(As||{}),Ps=(d=>(d.FRAME_LOAD="frame.load",d.FRAME_DIMENSIONS_UPDATE="frame.dimensions-update",d.FRAME_PARENT_SIZE_UPDATE="frame.parent-window-size-update",d.FRAME_LOCALE_UPDATE="frame.locales-update",d.FRAME_AVATAR_LIST_UPDATE="frame.avatar-list-update",d.FRAME_COLOR_LIST_UPDATE="frame.color-list-update",d.FRAME_STYLES_UPDATE="frame.styles-update",d.FRAME_CALLBACKS_UPDATE="frame.callbacks-update",d))(Ps||{}),Os=(d=>(d.TOGGLE_MEETING_CHAT="meeting-controls.toggle-chat",d.TOGGLE_MEETING_SETUP="meeting-controls.toggle-setup",d.TOGGLE_MICROPHONE="meeting-controls.toggle-microphone",d.TOGGLE_CAM="meeting-controls.toggle-cam",d.TOGGLE_SCREENSHARE="meeting-controls.toggle-screenshare",d.TOGGLE_RECORDING="meeting-controls.toggle-recording",d.HANG_UP="hang-up",d.CALLBACK_CALLED="callback-called",d))(Os||{}),Zi=(x=>(x.REALTIME_PARTICIPANT_LIST_UPDATE="realtime.participant-list-update",x.REALTIME_HOST_CHANGE="realtime.host-change",x.REALTIME_GRID_MODE_CHANGE="realtime.grid-mode-change",x.REALTIME_WAIT_FOR_HOST="realtime.wait-for-host",x.REALTIME_AUTHENTICATION_FAILED="realtime.authentication-failed",x.REALTIME_GO_TO_PARTICIPANT="realtime.go-to-participant",x.REALTIME_GATHER="realtime.gather",x.REALTIME_FOLLOW_PARTICIPANT="realtime.follow-participant",x.REALTIME_LOCAL_FOLLOW_PARTICIPANT="realtime.local-follow-participant",x.REALTIME_SET_AVATAR="realtime.set-avatar",x.REALTIME_DRAWING_CHANGE="realtime.drawing-change",x.REALTIME_TRANSCRIPT_CHANGE="realtime.transcript-change",x.REALTIME_PRIVATE_MODE="realtime.private-mode",x))(Zi||{});var ec=(m=>(m[m.MEETING_FAILED=-1]="MEETING_FAILED",m[m.MEETING_DISCONNECTED=0]="MEETING_DISCONNECTED",m[m.MEETING_INITIALIZING=1]="MEETING_INITIALIZING",m[m.MEETING_READY_TO_JOIN=2]="MEETING_READY_TO_JOIN",m[m.MEETING_CONNECTING=3]="MEETING_CONNECTING",m[m.MEETING_CONNECTED=4]="MEETING_CONNECTED",m[m.MEETING_RECONNECT=5]="MEETING_RECONNECT",m[m.FRAME_INITIALIZING=6]="FRAME_INITIALIZING",m[m.FRAME_INITIALIZED=7]="FRAME_INITIALIZED",m[m.FRAME_UNINITIALIZED=8]="FRAME_UNINITIALIZED",m))(ec||{}),tc=(l=>(l.JOINED="participant.joined",l.LOCAL_JOINED="participant.local-joined",l.LEFT="participant.left",l.LOCAL_LEFT="participant.local-left",l.LOCAL_UPDATED="participant.updated",l.LIST_UPDATED="participant.list-updated",l.SAME_ACCOUNT_ERROR="participant.same-account-error",l))(tc||{}),Cs=(l=>(l[l.NOT_AVAILABLE=0]="NOT_AVAILABLE",l[l.GOOD=1]="GOOD",l[l.BAD=2]="BAD",l[l.POOR=3]="POOR",l[l.DISCONNECTED=4]="DISCONNECTED",l[l.RECONNECTING=5]="RECONNECTING",l[l.LOST_CONNECTION=6]="LOST_CONNECTION",l))(Cs||{}),np=(l=>(l.NO_CAM="devices.no-cam",l.NO_DEVICES="devices.no-devices",l.DEVICES_BLOCKED="devices.blocked",l.DEVICES_CAM_BLOCKED="devices.cam-blocked",l.DEVICES_INITIALIZATION_ERROR="devices.inititalization-error",l.DEVICES_UNKNOWN_ERROR="devices.unknown-error",l.DEVICES_ALLOWED="devices.allowed",l))(np||{}),ic=(e=>(e.PIN_ACTIVE="pin-mode.active",e.PIN_INACTIVE="pin-mode.inactive",e))(ic||{}),vo=(e=>(e.MOUNT="mount",e.UNMOUNT="unmount",e))(vo||{}),rc=(d=>(d.START_FOLLOWING_PARTICIPANT="who-is-online.start-following-participant",d.STOP_FOLLOWING_PARTICIPANT="who-is-online.stop-following-participant",d.ENTER_PRIVATE_MODE="who-is-online.enter-private-mode",d.LEAVE_PRIVATE_MODE="who-is-online.leave-private-mode",d.GATHER_ALL="who-is-online.gather-all",d.GO_TO_PARTICIPANT="who-is-online.go-to-participant",d.START_FOLLOW_ME="who-is-online.start-follow-me",d.STOP_FOLLOW_ME="who-is-online.stop-follow-me",d))(rc||{});f();var Is=(i=>(i.HOST="host",i.GUEST="guest",i.AUDIENCE="audience",i))(Is||{});f();f();f();var nt=(s=>(s.GLOBAL="global-store",s.COMMENTS="comments-store",s.WHO_IS_ONLINE="who-is-online-store",s.VIDEO="video-store",s.PRESENCE_3D="presence-3d-store",s))(nt||{});f();f();var et=(n,s,c,...l)=>q(void 0,[n,s,c,...l],function*(r,t,e,i={}){let d=yield fetch(r,{method:t,headers:w({"Content-Type":"application/json"},i),body:e?JSON.stringify(e):null});if(!d.ok)throw d;try{return yield d.json()}catch(p){return d.ok}});f();var nv=fi(op()),he=class{constructor(t){this.debug=(0,nv.default)(t)}log(t,...e){this.debug(t,...e)}};f();f();var $v=fi(cp());var xe=class{constructor(t={}){this.subscribe=t=>{this.callbacks.push(t)};this.unsubscribe=t=>{this.callbacks=this.callbacks.filter(e=>e!==t)};this.publish=(...t)=>{this.callbacks&&this.callbacks.forEach(e=>{this.callListener(e,t).catch(i=>{var n;(n=this.logger)==null||n.log("superviz-sdk:observer-helper:publish:error",`
            Failed to execute callback on publish value.
            Callback: ${e.name}
            Event: ${JSON.stringify(t)}
            Error: ${i}
          `)})})};this.reset=()=>{this.callbacks=[]};this.destroy=()=>{delete this.logger,delete this.callbacks};this.callListener=(t,e)=>new Promise((i,n)=>{try{let s=t(...e);i(s)}catch(s){n(s)}});let{logger:e,throttleTime:i}=t;this.logger=e||new he("@superviz/sdk/observer-helper"),this.throttle=i,this.callbacks=[],this.throttle&&(this.publish=(0,$v.default)(this.publish,this.throttle))}};var Ji=class{constructor(){this.observers={};this.subscribe=(t,e)=>{this.logger.log(`subscribed to ${t} event`),this.observers[t]||(this.observers[t]=new xe({logger:this.logger})),this.observers[t].subscribe(e)};this.unsubscribe=(t,e)=>{if(this.logger.log(`unsubscribed from ${t} event`),!!this.observers[t]){if(!e){this.observers[t].destroy(),delete this.observers[t];return}this.observers[t].unsubscribe(e)}};this.publish=(t,e)=>{t in this.observers&&this.observers[t].publish(e)}}};f();f();f();var Bv=fi(Xr()),up=class{setConfig(t){this.configuration=t}get(t,e){return this.configuration?(0,Bv.get)(this.configuration,t,e):e}},Z=new up;var ze=class{static createUrl(t,e,i={}){let n=new URL(e,t);return Object.keys(i).forEach(s=>n.searchParams.append(s,i[s])),n.toString()}static validateApiKey(t,e){let n=this.createUrl(t,"/user/checkapikey");return et(n,"POST",{apiKey:e})}static fetchConfig(t,e){let n=this.createUrl(t,"/immersive-config");return et(n,"POST",{apiKey:e})}static fetchLimits(t,e){return q(this,null,function*(){let n=this.createUrl(t,"/user/check_limits");return(yield et(n,"GET","",{apikey:e})).usage})}static fetchWaterMark(t,e){return q(this,null,function*(){let n=this.createUrl(t,"/user/watermark"),{message:s}=yield et(n,"POST",{apiKey:e});return s})}static createAnnotations(t,e,i){return q(this,null,function*(){let s=this.createUrl(t,"/annotations");return et(s,"POST",w({},i),{apikey:e})})}static updateComment(t,e,i,n){return q(this,null,function*(){let s=`/comments/${i}`,c=this.createUrl(t,s);return et(c,"PUT",{text:n},{apikey:e})})}static createComment(t,e,i){return q(this,null,function*(){let s=this.createUrl(t,"/comments");return et(s,"POST",w({},i),{apikey:e})})}static fetchAnnotation(t,e,i){return q(this,null,function*(){let s=this.createUrl(t,"/annotations",{roomId:i.roomId,url:i.url});return et(s,"GET",void 0,{apikey:e})})}static resolveAnnotation(t,e,i){return q(this,null,function*(){let n=`/annotations/resolve/${i}`,s=this.createUrl(t,n);return et(s,"POST",{},{apikey:e})})}static deleteComment(t,e,i){return q(this,null,function*(){let n=`/comments/${i}`,s=this.createUrl(t,n);return et(s,"DELETE",{},{apikey:e})})}static deleteAnnotation(t,e,i){return q(this,null,function*(){let n=`/annotations/${i}`,s=this.createUrl(t,n);return et(s,"DELETE",{},{apikey:e})})}static createOrUpdateParticipant(t){return q(this,null,function*(){let e=Z.get("apiUrl"),n=this.createUrl(e,"/participants");return et(n,"POST",w({},t),{apikey:Z.get("apiKey")})})}static sendActivity(t,e,i,n){return q(this,null,function*(){let s="/activity",c=Z.get("apiUrl"),l=Z.get("roomId"),d=Z.get("apiKey"),p=this.createUrl(c,s);return et(p,"POST",{groupId:e,groupName:i,meetingId:l,product:n,userId:t},{apikey:d})})}static fetchParticipantsByGroup(t){return q(this,null,function*(){let e=`/groups/participants/${t}`,i=Z.get("apiUrl"),n=this.createUrl(i,e,{take:1e4});return et(n,"GET",void 0,{apikey:Z.get("apiKey")})})}static createMentions(t){return q(this,null,function*(){let e="/mentions",i=Z.get("apiUrl"),n=this.createUrl(i,e);return et(n,"POST",t,{apikey:Z.get("apiKey")})})}};f();f();f();f();function br(){return{set value(r){this.instance=r,setTimeout(()=>Object.freeze(this))},get value(){return this.instance}}}f();f();f();f();f();var dp=function(r,t){return dp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])},dp(r,t)};function at(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dp(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Wv(r,t,e,i){function n(s){return s instanceof e?s:new e(function(c){c(s)})}return new(e||(e=Promise))(function(s,c){function l(m){try{p(i.next(m))}catch(y){c(y)}}function d(m){try{p(i.throw(m))}catch(y){c(y)}}function p(m){m.done?s(m.value):n(m.value).then(l,d)}p((i=i.apply(r,t||[])).next())})}function ac(r,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(p){return function(m){return d([p,m])}}function d(p){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return e.label++,{value:p[1],done:!1};case 5:e.label++,n=p[1],p=[0];continue;case 7:p=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){e=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){e.label=p[1];break}if(p[0]===6&&e.label<s[1]){e.label=s[1],s=p;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(p);break}s[2]&&e.ops.pop(),e.trys.pop();continue}p=t.call(r,e)}catch(m){p=[6,m],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Yi(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,s=[],c;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(c)throw c.error}}return s}function zt(r,t,e){if(e||arguments.length===2)for(var i=0,n=t.length,s;i<n;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return r.concat(s||Array.prototype.slice.call(t))}function Qr(r){return this instanceof Qr?(this.v=r,this):new Qr(r)}function Uv(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(r,t||[]),n,s=[];return n={},c("next"),c("throw"),c("return"),n[Symbol.asyncIterator]=function(){return this},n;function c(E){i[E]&&(n[E]=function(x){return new Promise(function(P,k){s.push([E,x,P,k])>1||l(E,x)})})}function l(E,x){try{d(i[E](x))}catch(P){y(s[0][3],P)}}function d(E){E.value instanceof Qr?Promise.resolve(E.value.v).then(p,m):y(s[0][2],E)}function p(E){l("next",E)}function m(E){l("throw",E)}function y(E,x){E(x),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Hv(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof Yi=="function"?Yi(r):r[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=r[s]&&function(c){return new Promise(function(l,d){c=r[s](c),n(l,d,c.done,c.value)})}}function n(s,c,l,d){Promise.resolve(d).then(function(p){s({value:p,done:l})},c)}}f();function ye(r){return typeof r=="function"}f();f();f();function lc(r){var t=function(i){Error.call(i),i.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var cc=lc(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(i,n){return n+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});f();function en(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}var _r=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,i,n,s;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=Yi(c),d=l.next();!d.done;d=l.next()){var p=d.value;p.remove(this)}}catch(k){t={error:k}}finally{try{d&&!d.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}else c.remove(this);var m=this.initialTeardown;if(ye(m))try{m()}catch(k){s=k instanceof cc?k.errors:[k]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var E=Yi(y),x=E.next();!x.done;x=E.next()){var P=x.value;try{zv(P)}catch(k){s=s!=null?s:[],k instanceof cc?s=zt(zt([],xt(s)),xt(k.errors)):s.push(k)}}}catch(k){i={error:k}}finally{try{x&&!x.done&&(n=E.return)&&n.call(E)}finally{if(i)throw i.error}}}if(s)throw new cc(s)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)zv(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&en(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&en(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}();var pp=_r.EMPTY;function uc(r){return r instanceof _r||r&&"closed"in r&&ye(r.remove)&&ye(r.add)&&ye(r.unsubscribe)}function zv(r){ye(r)?r():r.unsubscribe()}f();var mi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};f();f();var wo={setTimeout:function(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var n=wo.delegate;return n!=null&&n.setTimeout?n.setTimeout.apply(n,zt([r,t],xt(e))):setTimeout.apply(void 0,zt([r,t],xt(e)))},clearTimeout:function(r){var t=wo.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function dc(r){wo.setTimeout(function(){var t=mi.onUnhandledError;if(t)t(r);else throw r})}f();function hp(){}f();var Gv=function(){return fp("C",void 0,void 0)}();function Vv(r){return fp("E",void 0,r)}function jv(r){return fp("N",r,void 0)}function fp(r,t,e){return{kind:r,value:t,error:e}}f();var tn=null;function xo(r){if(mi.useDeprecatedSynchronousErrorHandling){var t=!tn;if(t&&(tn={errorThrown:!1,error:null}),r(),t){var e=tn,i=e.errorThrown,n=e.error;if(tn=null,i)throw n}}else r()}function qv(r){mi.useDeprecatedSynchronousErrorHandling&&tn&&(tn.errorThrown=!0,tn.error=r)}var Rs=function(r){at(t,r);function t(e){var i=r.call(this)||this;return i.isStopped=!1,e?(i.destination=e,uc(e)&&e.add(i)):i.destination=$C,i}return t.create=function(e,i,n){return new rn(e,i,n)},t.prototype.next=function(e){this.isStopped?gp(jv(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?gp(Vv(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?gp(Gv,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(_r);var NC=Function.prototype.bind;function mp(r,t){return NC.call(r,t)}var DC=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(i){pc(i)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(i){pc(i)}else pc(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){pc(e)}},r}(),rn=function(r){at(t,r);function t(e,i,n){var s=r.call(this)||this,c;if(ye(e)||!e)c={next:e!=null?e:void 0,error:i!=null?i:void 0,complete:n!=null?n:void 0};else{var l;s&&mi.useDeprecatedNextContext?(l=Object.create(e),l.unsubscribe=function(){return s.unsubscribe()},c={next:e.next&&mp(e.next,l),error:e.error&&mp(e.error,l),complete:e.complete&&mp(e.complete,l)}):c=e}return s.destination=new DC(c),s}return t}(Rs);function pc(r){mi.useDeprecatedSynchronousErrorHandling?qv(r):dc(r)}function FC(r){throw r}function gp(r,t){var e=mi.onStoppedNotification;e&&wo.setTimeout(function(){return e(r,t)})}var $C={closed:!0,next:hp,error:FC,complete:hp};f();var To=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();f();f();function hc(r){return r}function Zv(r){return r.length===0?hc:r.length===1?r[0]:function(e){return r.reduce(function(i,n){return n(i)},e)}}var It=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,i){var n=this,s=WC(t)?t:new rn(t,e,i);return xo(function(){var c=n,l=c.operator,d=c.source;s.add(l?l.call(s,d):d?n._subscribe(s):n._trySubscribe(s))}),s},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var i=this;return e=Jv(e),new e(function(n,s){var c=new rn({next:function(l){try{t(l)}catch(d){s(d),c.unsubscribe()}},error:s,complete:n});i.subscribe(c)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[To]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zv(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=Jv(t),new t(function(i,n){var s;e.subscribe(function(c){return s=c},function(c){return n(c)},function(){return i(s)})})},r.create=function(t){return new r(t)},r}();function Jv(r){var t;return(t=r!=null?r:mi.Promise)!==null&&t!==void 0?t:Promise}function BC(r){return r&&ye(r.next)&&ye(r.error)&&ye(r.complete)}function WC(r){return r&&r instanceof Rs||BC(r)&&uc(r)}f();function UC(r){return ye(r==null?void 0:r.lift)}function Ii(r){return function(t){if(UC(t))return t.lift(function(e){try{return r(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}f();function Li(r,t,e,i,n){return new HC(r,t,e,i,n)}var HC=function(r){at(t,r);function t(e,i,n,s,c,l){var d=r.call(this,e)||this;return d.onFinalize=c,d.shouldUnsubscribe=l,d._next=i?function(p){try{i(p)}catch(m){e.error(m)}}:r.prototype._next,d._error=s?function(p){try{s(p)}catch(m){e.error(m)}finally{this.unsubscribe()}}:r.prototype._error,d._complete=n?function(){try{n()}catch(p){e.error(p)}finally{this.unsubscribe()}}:r.prototype._complete,d}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;r.prototype.unsubscribe.call(this),!i&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(Rs);f();f();var Yv=lc(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Ke=function(r){at(t,r);function t(){var e=r.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var i=new Kv(this,this);return i.operator=e,i},t.prototype._throwIfClosed=function(){if(this.closed)throw new Yv},t.prototype.next=function(e){var i=this;xo(function(){var n,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var c=Yi(i.currentObservers),l=c.next();!l.done;l=c.next()){var d=l.value;d.next(e)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}}})},t.prototype.error=function(e){var i=this;xo(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=e;for(var n=i.observers;n.length;)n.shift().error(e)}})},t.prototype.complete=function(){var e=this;xo(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var i=e.observers;i.length;)i.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var i=this,n=this,s=n.hasError,c=n.isStopped,l=n.observers;return s||c?pp:(this.currentObservers=null,l.push(e),new _r(function(){i.currentObservers=null,en(l,e)}))},t.prototype._checkFinalizedStatuses=function(e){var i=this,n=i.hasError,s=i.thrownError,c=i.isStopped;n?e.error(s):c&&e.complete()},t.prototype.asObservable=function(){var e=new It;return e.source=this,e},t.create=function(e,i){return new Kv(e,i)},t}(It);var Kv=function(r){at(t,r);function t(e,i){var n=r.call(this)||this;return n.destination=e,n.source=i,n}return t.prototype.next=function(e){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.next)===null||n===void 0||n.call(i,e)},t.prototype.error=function(e){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.error)===null||n===void 0||n.call(i,e)},t.prototype.complete=function(){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||i===void 0||i.call(e)},t.prototype._subscribe=function(e){var i,n;return(n=(i=this.source)===null||i===void 0?void 0:i.subscribe(e))!==null&&n!==void 0?n:pp},t}(Ke);f();var fc=function(r){at(t,r);function t(e){var i=r.call(this)||this;return i._value=e,i}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(e){var i=r.prototype._subscribe.call(this,e);return!i.closed&&e.next(this._value),i},t.prototype.getValue=function(){var e=this,i=e.hasError,n=e.thrownError,s=e._value;if(i)throw n;return this._throwIfClosed(),s},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(Ke);f();f();var ks={now:function(){return(ks.delegate||Date).now()},delegate:void 0};var Xv=function(r){at(t,r);function t(e,i,n){e===void 0&&(e=1/0),i===void 0&&(i=1/0),n===void 0&&(n=ks);var s=r.call(this)||this;return s._bufferSize=e,s._windowTime=i,s._timestampProvider=n,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=i===1/0,s._bufferSize=Math.max(1,e),s._windowTime=Math.max(1,i),s}return t.prototype.next=function(e){var i=this,n=i.isStopped,s=i._buffer,c=i._infiniteTimeWindow,l=i._timestampProvider,d=i._windowTime;n||(s.push(e),!c&&s.push(l.now()+d)),this._trimBuffer(),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var i=this._innerSubscribe(e),n=this,s=n._infiniteTimeWindow,c=n._buffer,l=c.slice(),d=0;d<l.length&&!e.closed;d+=s?1:2)e.next(l[d]);return this._checkFinalizedStatuses(e),i},t.prototype._trimBuffer=function(){var e=this,i=e._bufferSize,n=e._timestampProvider,s=e._buffer,c=e._infiniteTimeWindow,l=(c?1:2)*i;if(i<1/0&&l<s.length&&s.splice(0,s.length-l),!c){for(var d=n.now(),p=0,m=1;m<s.length&&s[m]<=d;m+=2)p=m;p&&s.splice(0,p+1)}},t}(Ke);f();f();var Qv=function(r){at(t,r);function t(e,i){return r.call(this)||this}return t.prototype.schedule=function(e,i){return i===void 0&&(i=0),this},t}(_r);f();var Ns={setInterval:function(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var n=Ns.delegate;return n!=null&&n.setInterval?n.setInterval.apply(n,zt([r,t],xt(e))):setInterval.apply(void 0,zt([r,t],xt(e)))},clearInterval:function(r){var t=Ns.delegate;return((t==null?void 0:t.clearInterval)||clearInterval)(r)},delegate:void 0};var ey=function(r){at(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.scheduler=e,n.work=i,n.pending=!1,n}return t.prototype.schedule=function(e,i){var n;if(i===void 0&&(i=0),this.closed)return this;this.state=e;var s=this.id,c=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(c,s,i)),this.pending=!0,this.delay=i,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(c,this.id,i),this},t.prototype.requestAsyncId=function(e,i,n){return n===void 0&&(n=0),Ns.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,i,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return i;i!=null&&Ns.clearInterval(i)},t.prototype.execute=function(e,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,i);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,i){var n=!1,s;try{this.work(e)}catch(c){n=!0,s=c||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),s},t.prototype.unsubscribe=function(){if(!this.closed){var e=this,i=e.id,n=e.scheduler,s=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,en(s,this),i!=null&&(this.id=this.recycleAsyncId(n,i,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},t}(Qv);f();f();var vp=function(){function r(t,e){e===void 0&&(e=r.now),this.schedulerActionCtor=t,this.now=e}return r.prototype.schedule=function(t,e,i){return e===void 0&&(e=0),new this.schedulerActionCtor(this,t).schedule(i,e)},r.now=ks.now,r}();var ty=function(r){at(t,r);function t(e,i){i===void 0&&(i=vp.now);var n=r.call(this,e,i)||this;return n.actions=[],n._active=!1,n}return t.prototype.flush=function(e){var i=this.actions;if(this._active){i.push(e);return}var n;this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=i.shift());if(this._active=!1,n){for(;e=i.shift();)e.unsubscribe();throw n}},t}(vp);f();var yp=new ty(ey),iy=yp;f();function ry(r){return r&&ye(r.schedule)}f();f();var mc=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};f();function ny(r){return ye(r==null?void 0:r.then)}f();function oy(r){return ye(r[To])}f();function sy(r){return Symbol.asyncIterator&&ye(r==null?void 0:r[Symbol.asyncIterator])}f();function ay(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}f();f();function zC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ly=zC();function cy(r){return ye(r==null?void 0:r[ly])}f();function uy(r){return Uv(this,arguments,function(){var e,i,n,s;return ac(this,function(c){switch(c.label){case 0:e=r.getReader(),c.label=1;case 1:c.trys.push([1,,9,10]),c.label=2;case 2:return[4,Qr(e.read())];case 3:return i=c.sent(),n=i.value,s=i.done,s?[4,Qr(void 0)]:[3,5];case 4:return[2,c.sent()];case 5:return[4,Qr(n)];case 6:return[4,c.sent()];case 7:return c.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function dy(r){return ye(r==null?void 0:r.getReader)}function gi(r){if(r instanceof It)return r;if(r!=null){if(oy(r))return GC(r);if(mc(r))return VC(r);if(ny(r))return jC(r);if(sy(r))return py(r);if(cy(r))return qC(r);if(dy(r))return ZC(r)}throw ay(r)}function GC(r){return new It(function(t){var e=r[To]();if(ye(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VC(r){return new It(function(t){for(var e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}function jC(r){return new It(function(t){r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,dc)})}function qC(r){return new It(function(t){var e,i;try{for(var n=Yi(r),s=n.next();!s.done;s=n.next()){var c=s.value;if(t.next(c),t.closed)return}}catch(l){e={error:l}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}t.complete()})}function py(r){return new It(function(t){JC(r,t).catch(function(e){return t.error(e)})})}function ZC(r){return py(uy(r))}function JC(r,t){var e,i,n,s;return Wv(this,void 0,void 0,function(){var c,l;return ac(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),e=Hv(r),d.label=1;case 1:return[4,e.next()];case 2:if(i=d.sent(),!!i.done)return[3,4];if(c=i.value,t.next(c),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=d.sent(),n={error:l},[3,11];case 6:return d.trys.push([6,,9,10]),i&&!i.done&&(s=e.return)?[4,s.call(e)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}f();function hy(r,t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var s=t.schedule(function(){e(),n?r.add(this.schedule(null,i)):this.unsubscribe()},i);if(r.add(s),!n)return s}f();function fy(r){return r instanceof Date&&!isNaN(r)}f();f();function gc(r,t){return Ii(function(e,i){var n=0;e.subscribe(Li(i,function(s){i.next(r.call(t,s,n++))}))})}var YC=Array.isArray;function KC(r,t){return YC(t)?r.apply(void 0,zt([],xt(t))):r(t)}function my(r){return gc(function(t){return KC(r,t)})}f();f();function gy(r,t,e,i,n,s,c,l){var d=[],p=0,m=0,y=!1,E=function(){y&&!d.length&&!p&&t.complete()},x=function(k){return p<i?P(k):d.push(k)},P=function(k){s&&t.next(k),p++;var B=!1;gi(e(k,m++)).subscribe(Li(t,function(I){n==null||n(I),s?x(I):t.next(I)},function(){B=!0},void 0,function(){if(B)try{p--;for(var I=function(){var ne=d.shift();c?hy(t,c,function(){return P(ne)}):P(ne)};d.length&&p<i;)I();E()}catch(ne){t.error(ne)}}))};return r.subscribe(Li(t,x,function(){y=!0,E()})),function(){l==null||l()}}function bp(r,t,e){return e===void 0&&(e=1/0),ye(t)?bp(function(i,n){return gc(function(s,c){return t(i,s,n,c)})(gi(r(i,n)))},e):(typeof t=="number"&&(e=t),Ii(function(i,n){return gy(i,n,r,e)}))}f();var XC=["addListener","removeListener"],QC=["addEventListener","removeEventListener"],eI=["on","off"];function Ds(r,t,e,i){if(ye(e)&&(i=e,e=void 0),i)return Ds(r,t,e).pipe(my(i));var n=xt(rI(r)?QC.map(function(l){return function(d){return r[l](t,d,e)}}):tI(r)?XC.map(vy(r,t)):iI(r)?eI.map(vy(r,t)):[],2),s=n[0],c=n[1];if(!s&&mc(r))return bp(function(l){return Ds(l,t,e)})(gi(r));if(!s)throw new TypeError("Invalid event target");return new It(function(l){var d=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];return l.next(1<p.length?p:p[0])};return s(d),function(){return c(d)}})}function vy(r,t){return function(e){return function(i){return r[e](t,i)}}}function tI(r){return ye(r.addListener)&&ye(r.removeListener)}function iI(r){return ye(r.on)&&ye(r.off)}function rI(r){return ye(r.addEventListener)&&ye(r.removeEventListener)}f();function yy(r,t,e){r===void 0&&(r=0),e===void 0&&(e=iy);var i=-1;return t!=null&&(ry(t)?e=t:i=t),new It(function(n){var s=fy(r)?+r-e.now():r;s<0&&(s=0);var c=0;return e.schedule(function(){n.closed||(n.next(c++),0<=i?this.schedule(void 0,i):n.complete())},s)})}f();function vc(r,t){return t===void 0&&(t=hc),r=r!=null?r:nI,Ii(function(e,i){var n,s=!0;e.subscribe(Li(i,function(c){var l=t(c);(s||!r(n,l))&&(s=!1,n=l,i.next(c))}))})}function nI(r,t){return r===t}f();function by(r){r===void 0&&(r={});var t=r.connector,e=t===void 0?function(){return new Ke}:t,i=r.resetOnError,n=i===void 0?!0:i,s=r.resetOnComplete,c=s===void 0?!0:s,l=r.resetOnRefCountZero,d=l===void 0?!0:l;return function(p){var m,y,E,x=0,P=!1,k=!1,B=function(){y==null||y.unsubscribe(),y=void 0},I=function(){B(),m=E=void 0,P=k=!1},ne=function(){var ve=m;I(),ve==null||ve.unsubscribe()};return Ii(function(ve,ke){x++,!k&&!P&&B();var Ie=E=E!=null?E:e();ke.add(function(){x--,x===0&&!k&&!P&&(y=_p(ne,d))}),Ie.subscribe(ke),!m&&x>0&&(m=new rn({next:function(G){return Ie.next(G)},error:function(G){k=!0,B(),y=_p(I,n,G),Ie.error(G)},complete:function(){P=!0,B(),y=_p(I,c),Ie.complete()}}),gi(ve).subscribe(m))})(p)}}function _p(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];if(t===!0){r();return}if(t!==!1){var n=new rn({next:function(){n.unsubscribe(),r()}});return gi(t.apply(void 0,zt([],xt(e)))).subscribe(n)}}f();function yc(r,t,e){var i,n,s,c,l=!1;return r&&typeof r=="object"?(i=r.bufferSize,c=i===void 0?1/0:i,n=r.windowTime,t=n===void 0?1/0:n,s=r.refCount,l=s===void 0?!1:s,e=r.scheduler):c=r!=null?r:1/0,by({connector:function(){return new Xv(c,t,e)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}f();function _y(r,t){return Ii(function(e,i){var n=t!=null?t:{},s=n.leading,c=s===void 0?!0:s,l=n.trailing,d=l===void 0?!1:l,p=!1,m=null,y=null,E=!1,x=function(){y==null||y.unsubscribe(),y=null,d&&(B(),E&&i.complete())},P=function(){y=null,E&&i.complete()},k=function(I){return y=gi(r(I)).subscribe(Li(i,x,P))},B=function(){if(p){p=!1;var I=m;m=null,i.next(I),!E&&k(I)}};e.subscribe(Li(i,function(I){p=!0,m=I,!(y&&!y.closed)&&(c?B():k(I))},function(){E=!0,!(d&&p&&y&&!y.closed)&&i.complete()}))})}f();function Ep(r,t,e){t===void 0&&(t=yp);var i=yy(r,t);return _y(function(){return i},e)}var wp=class{constructor(t,e){this.subscriptions=new Map;this.setValue=t=>{this.state=t,this.subject.next(this.state)};this.subscribe=(t,e)=>{let i=this.subject.subscribe(e);if(this.subscriptions.has(t)){this.subscriptions.get(t).push(i);return}this.subscriptions.set(t,[i])};this.state=t,this.firstState=t,this.subject=e.pipe(vc(),yc({bufferSize:1,refCount:!0}))}getValue(){return this.state}unsubscribe(t){var e;(e=this.subscriptions.get(t))==null||e.forEach(i=>i.unsubscribe()),this.subscriptions.delete(t)}destroy(){this.subscriptions.clear(),this.subject.complete(),this.restart()}restart(){this.state=this.firstState,this.subject=new fc(this.firstState).pipe(vc(),yc({bufferSize:1,refCount:!0}))}expose(){let t=this.subscribe.bind(this),e=this.unsubscribe.bind(this),i=this.getValue.bind(this),n=this.setValue.bind(this);return{get value(){return i()},set value(s){n(s)},subscribe:t,unsubscribe:e}}};function Pe(r){let t=new fc(r);return new wp(r,t)}var Ey=br(),xp=class{constructor(){this.localParticipant=Pe({});this.participants=Pe({});this.group=Pe(null);this.isDomainWhitelisted=Pe(!0);this.hasJoinedRoom=Pe(!1);if(Ey.value)throw new Error("CommentsStore is a singleton. There can only be one instance of it.");Ey.value=this}destroy(){this.localParticipant.destroy(),this.participants.destroy(),this.group.destroy(),this.isDomainWhitelisted.destroy(),this.hasJoinedRoom.destroy()}},nn=new xp,oI=nn.destroy.bind(nn),sI=nn.group.expose(),aI=nn.participants.expose(),lI=nn.localParticipant.expose(),cI=nn.isDomainWhitelisted.expose(),uI=nn.hasJoinedRoom.expose();function Fs(){return{localParticipant:lI,participants:aI,group:sI,isDomainWhitelisted:cI,hasJoinedRoom:uI,destroy:oI}}f();var wy=br(),Tp=class{constructor(){this.hasJoined3D=Pe(!1);this.participants=Pe([]);if(wy.value)throw new Error("Presence3DStore is a singleton. There can only be one instance of it.");wy.value=this}destroy(){this.hasJoined3D.destroy(),this.participants.destroy()}},bc=new Tp,dI=bc.destroy.bind(bc),pI=bc.hasJoined3D.expose(),hI=bc.participants.expose();function xy(){return{hasJoined3D:pI,participants:hI,destroy:dI}}f();f();var _c=(d=>(d[d.DISCONNECTED=0]="DISCONNECTED",d[d.INITIALIZING=1]="INITIALIZING",d[d.READY_TO_JOIN=2]="READY_TO_JOIN",d[d.CONNECTING=3]="CONNECTING",d[d.CONNECTED=4]="CONNECTED",d[d.JOINED=5]="JOINED",d[d.FAILED=-1]="FAILED",d[d.RETRYING=-2]="RETRYING",d))(_c||{});var Ty=br(),Sp=class{constructor(){this.meetingState=Pe(0);this.gather=Pe(!1);this.hostId=Pe("");this.isGridModeEnabled=Pe(!1);this.followParticipantId=Pe("");this.drawing=Pe(null);this.transcript=Pe(null);if(Ty.value)throw new Error("VideoStore is a singleton. There can only be one instance of it.");Ty.value=this}destroy(){this.meetingState.destroy(),this.gather.destroy(),this.hostId.destroy(),this.isGridModeEnabled.destroy(),this.followParticipantId.destroy(),this.drawing.destroy(),this.transcript.destroy()}},Ki=new Sp,fI=Ki.destroy.bind(Ki),mI=Ki.meetingState.expose(),gI=Ki.gather.expose(),vI=Ki.hostId.expose(),yI=Ki.isGridModeEnabled.expose(),bI=Ki.followParticipantId.expose(),_I=Ki.drawing.expose(),EI=Ki.transcript.expose();function Sy(){return{meetingState:mI,gather:gI,destroy:fI,hostId:vI,isGridModeEnabled:yI,followParticipantId:bI,drawing:_I,transcript:EI}}f();var Ay=br(),Ap=class{constructor(){this.disablePresenceControls=Pe(!1);this.disableGoToParticipant=Pe(!1);this.disableFollowParticipant=Pe(!1);this.disablePrivateMode=Pe(!1);this.disableGatherAll=Pe(!1);this.disableFollowMe=Pe(!1);this.participants=Pe([]);this.extras=Pe([]);this.joinedPresence=Pe(void 0);this.everyoneFollowsMe=Pe(!1);this.privateMode=Pe(!1);this.following=Pe(void 0);if(Ay.value)throw new Error("WhoIsOnlineStore is a singleton. There can only be one instance of it.");Ay.value=this}destroy(){this.disableGoToParticipant.destroy(),this.disablePresenceControls.destroy(),this.disableFollowParticipant.destroy(),this.disablePrivateMode.destroy(),this.disableGatherAll.destroy(),this.disableFollowMe.destroy(),this.participants.destroy(),this.extras.destroy(),this.joinedPresence.destroy(),this.everyoneFollowsMe.destroy(),this.privateMode.destroy(),this.following.destroy()}},Lt=new Ap,wI=Lt.destroy.bind(Lt),xI=Lt.disablePresenceControls.expose(),TI=Lt.disableGoToParticipant.expose(),SI=Lt.disableFollowParticipant.expose(),AI=Lt.disablePrivateMode.expose(),PI=Lt.disableGatherAll.expose(),OI=Lt.disableFollowMe.expose(),CI=Lt.joinedPresence.expose(),II=Lt.participants.expose(),LI=Lt.extras.expose(),MI=Lt.everyoneFollowsMe.expose(),RI=Lt.privateMode.expose(),kI=Lt.following.expose();function Py(){return{disablePresenceControls:xI,disableGoToParticipant:TI,disableFollowParticipant:SI,disablePrivateMode:AI,disableGatherAll:PI,disableFollowMe:OI,participants:II,extras:LI,joinedPresence:CI,everyoneFollowsMe:MI,privateMode:RI,following:kI,destroy:wI}}var NI={"global-store":Fs,"who-is-online-store":Py,"video-store":Sy,"presence-3d-store":xy};function DI(r,t,e){t.subscribe(this,()=>{e?e(t.value):this[r]=t.value,this.requestUpdate&&this.requestUpdate()}),this.unsubscribeFrom||(this.unsubscribeFrom=[]),this.unsubscribeFrom.push(t.unsubscribe)}function Ze(r){let t=NI[r](),e=DI.bind(this);return new Proxy(t,{get(n,s){return s==="destroy"?n.destroy:{subscribe(c){e(s,n[s],c)},subject:n[s],get value(){return this.subject.value},publish(c){this.subject.value=c}}}})}var gt=class extends Ji{constructor(){super(...arguments);this.isAttached=!1;this.unsubscribeFrom=[];this.useStore=Ze.bind(this);this.attach=e=>{if(Object.values(e).includes(null)||Object.values(e).includes(void 0)){let d=`${this.name} @ attach - params are required`;throw this.logger.log(d),new Error(d)}let{config:i,eventBus:n,ioc:s}=e,{isDomainWhitelisted:c,hasJoinedRoom:l}=this.useStore("global-store");if(!c.value){let d=`Component ${this.name} can't be used because this website's domain is not whitelisted. Please add your domain in https://dashboard.superviz.com/developer`;this.logger.log(d);return}if(Z.setConfig(i),this.eventBus=n,this.isAttached=!0,this.ioc=s,this.room=s.createRoom(this.name),!l.value){this.logger.log(`${this.name} @ attach - not joined yet`),setTimeout(()=>{this.logger.log(`${this.name} @ attach - retrying`),this.attach(e)},1e3);return}this.logger.log(`${this.name} @ attached`),this.start(),this.publish("mount")};this.detach=()=>{if(!this.isAttached){this.logger.log(`${this.name} @ detach - component is not attached`);return}this.logger.log("detached"),this.publish("unmount"),this.destroy(),this.room.disconnect(),this.room=void 0,this.unsubscribeFrom.forEach(e=>e(this)),Object.values(this.observers).forEach(e=>{e.reset(),e.destroy()}),this.observers=void 0,this.isAttached=!1}}};f();var Pp=(c=>(c.presence3dMatterport="presence",c.presence3dAutodesk="presence",c.presence3dThreejs="presence",c.realtime="presence",c.whoIsOnline="presence",c.formElements="presence",c))(Pp||{});f();var $s=(e=>(e.LEFT="left",e.RIGHT="right",e))($s||{}),Op=(n=>(n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n))(Op||{});var Bs=class extends gt{constructor(e,i){var c,l,d;super();this.sidebarOpen=!1;this.layoutOptions={};this.openThreads=()=>{var e;this.sidebarOpen||((e=this.element)==null||e.setAttribute("open",""),this.sidebarOpen=!0,document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0})))};this.closeThreads=()=>{var e;this.sidebarOpen&&((e=this.element)==null||e.removeAttribute("open"),this.sidebarOpen=!1,document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0})))};this.togglePinActive=()=>{if(this.pinActive){this.disable();return}this.enable()};this.onPinFixed=e=>{this.coordinates=e};this.toggleAnnotationSidebar=()=>{this.element.toggleAttribute("open"),this.sidebarOpen=this.element.hasAttribute("open"),document.body.dispatchEvent(new CustomEvent("prepare-to-create-annotation",{detail:void 0,composed:!0,bubbles:!0})),document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0}))};this.onSelectAnnotation=e=>{this.sidebarOpen||this.toggleAnnotationSidebar()};this.positionFloatingButton=()=>{var d,p;this.button=document.createElement("superviz-comments-button");let e=(d=this.layoutOptions)==null?void 0:d.buttonLocation,i=(p=this.layoutOptions)==null?void 0:p.position;if(!e){document.body.appendChild(this.button),this.button.commentsPosition=i;return}let n="",s=Object.values(Op),c=!1,l=!s.includes(e.toLocaleLowerCase());if(l){let m=window.document.body.querySelector(`#${e}`);m?(m.appendChild(this.button),n="position: relative"):(c=!0,e="top-left")}if(!l||c){document.body.appendChild(this.button);let[m,y]=e.split("-");n=`${m}: 20px; ${y}: 20px;`}this.button.positionStyles=n,this.button.commentsPosition=i};this.positionComments=()=>{var n;this.element=document.createElement("superviz-comments"),this.element.setAttribute("comments",JSON.stringify([])),this.element.side="left",this.element.offset=this.offset,document.body.appendChild(this.element);let e=(n=this.layoutOptions)==null?void 0:n.position;if(!e)return;let i=e.toUpperCase();$s[i]&&(this.element.side=$s[i])};this.createAnnotation=i=>q(this,[i],function*({detail:e}){try{let{text:n,mentions:s}=e,{url:c}=this,l=w({},this.coordinates),d=yield ze.createAnnotations(Z.get("apiUrl"),Z.get("apiKey"),{roomId:Z.get("roomId"),position:JSON.stringify(l),url:c,userId:this.localParticipantId}),p=yield this.createComment(d.uuid,n,s);this.addAnnotation(N(w({},d),{comments:[p]})),this.pinAdapter.removeAnnotationPin("temporary-pin"),document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:d.uuid,haltGoToPin:!0,newPin:!0},composed:!0,bubbles:!0}))}catch(n){this.logger.log("error when creating annotation",n)}});this.deleteAnnotation=i=>q(this,[i],function*({detail:e}){try{let{uuid:n}=e;yield ze.deleteAnnotation(Z.get("apiUrl"),Z.get("apiKey"),n);let s=this.annotations.filter(c=>c.uuid!==n);this.updateAnnotationList(s),this.pinAdapter.removeAnnotationPin(n),this.element.updateAnnotations(this.annotations)}catch(n){this.logger.log("error when deleting annotation",n)}});this.updateComment=i=>q(this,[i],function*({detail:e}){try{let{uuid:n,text:s,mentions:c}=e,l=yield ze.updateComment(Z.get("apiUrl"),Z.get("apiKey"),n,s);yield ze.createMentions({commentsId:l.uuid,participants:c.map(p=>({id:p.userId}))});let d=this.annotations.map(p=>Object.assign({},p,{comments:p.comments.map(m=>m.uuid===n?Object.assign({},m,{text:s,mentions:c}):m)}));this.updateAnnotationList(d)}catch(n){this.logger.log("error when updating comment",n)}});this.resolveAnnotation=i=>q(this,[i],function*({detail:e}){try{let{uuid:n}=e,{resolved:s}=yield ze.resolveAnnotation(Z.get("apiUrl"),Z.get("apiKey"),n),c=this.annotations.map(l=>l.uuid===n?Object.assign({},l,{resolved:s}):l);if(this.updateAnnotationList(c),s){this.pinAdapter.removeAnnotationPin(n);return}this.pinAdapter.updateAnnotations(this.annotations)}catch(n){this.logger.log("error when resolve annotation",n)}});this.deleteComment=i=>q(this,[i],function*({detail:e}){try{let{uuid:n,annotationId:s}=e;if(!n||!s)return;yield ze.deleteComment(Z.get("apiUrl"),Z.get("apiKey"),n);let c=this.annotations.find(d=>d.uuid===s);c.comments=c.comments.filter(d=>d.uuid!==n);let l=this.annotations.map(d=>d.uuid===s?c:d);this.element.updateAnnotations(l),this.updateAnnotationList(l)}catch(n){this.logger.log("error when deleting comment",n)}});this.onAnnotationListUpdate=e=>{let{data:i,clientId:n}=e;this.localParticipantId!==n&&(this.annotations=i,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations))};this.name="comments",this.logger=new he("@superviz/sdk/comments-component"),this.annotations=[],this.layoutOptions={buttonLocation:(c=i==null?void 0:i.buttonLocation)!=null?c:"top-left",position:(l=i==null?void 0:i.position)!=null?l:"left"},this.hideDefaultButton=(d=i==null?void 0:i.hideDefaultButton)!=null?d:!1,this.setStyles(i==null?void 0:i.styles),this.offset=i==null?void 0:i.offset,setTimeout(()=>{var p,m;e.setCommentsMetadata((m=(p=this.layoutOptions)==null?void 0:p.position)!=null?m:"left")}),this.pinAdapter=e;let{group:n,localParticipant:s}=this.useStore("global-store");n.subscribe(),s.subscribe(p=>{this.localParticipantId=p.id})}enable(){this.pinAdapter.setActive(!0),this.pinActive=!0,this.publish("pin-mode.active"),document.body.dispatchEvent(new CustomEvent("toggle-pin-active",{detail:{isActive:!0}}))}disable(){this.pinAdapter.setActive(!1),this.pinActive=!1,this.publish("pin-mode.inactive"),document.body.dispatchEvent(new CustomEvent("toggle-pin-active",{detail:{isActive:!1}}))}get url(){let e=new URL(this.clientUrl);return e.search="",e.toString()}start(){this.clientUrl=window.location.href,this.positionComments(),this.hideDefaultButton||this.positionFloatingButton(),this.fetchAnnotations(),this.waterMarkState(),this.participantsList(),this.addListeners(),this.pinAdapter.setPinsVisibility(!0)}destroy(){var e;this.logger.log("comments component @ destroy"),this.destroyListeners(),(e=this.button)==null||e.remove(),this.element.remove(),this.element=void 0,this.pinAdapter.destroy()}addListeners(){var e;(e=this.button)==null||e.addEventListener("toggle",this.togglePinActive),this.element.addEventListener("close-threads",this.closeThreads),document.body.addEventListener("create-annotation",this.createAnnotation),this.element.addEventListener("resolve-annotation",this.resolveAnnotation),this.element.addEventListener("delete-annotation",this.deleteAnnotation),this.element.addEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,i.mentions,!0)}),this.element.addEventListener("update-comment",this.updateComment),this.element.addEventListener("delete-comment",this.deleteComment),document.body.addEventListener("select-annotation",this.onSelectAnnotation),this.room.on("update-comments",this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.subscribe(this.onPinFixed)}destroyListeners(){var e;(e=this.button)==null||e.removeEventListener("toggle",this.togglePinActive),this.element.removeEventListener("close-threads",this.closeThreads),this.element.removeEventListener("resolve-annotation",this.resolveAnnotation),this.element.removeEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,i.mentions,!0)}),this.element.removeEventListener("update-comment",this.updateComment),this.element.removeEventListener("delete-comment",this.deleteComment),document.body.removeEventListener("select-annotation",this.onSelectAnnotation),document.body.removeEventListener("create-annotation",this.createAnnotation),this.room.off("update-comments",this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.unsubscribe(this.onPinFixed)}setStyles(e=""){if(!e)return;let i=document.createElement("style");i.textContent=e,i.id="superviz-comments-styles",document.head.appendChild(i)}createComment(c,l){return q(this,arguments,function*(e,i,n=[],s=!1){try{let d=yield ze.createComment(Z.get("apiUrl"),Z.get("apiKey"),{annotationId:e,userId:this.localParticipantId,text:i});return yield ze.createMentions({commentsId:d.uuid,participants:n.map(p=>({id:p.userId,readed:0}))}),d.mentions=n,s&&this.addComment(e,d),d}catch(d){this.logger.log("error when creating comment",d)}})}addAnnotation(e){let i=[e,...this.annotations];this.element.updateAnnotations(i),this.pinAdapter.updateAnnotations(i),this.updateAnnotationList(i)}updateAnnotationList(e){this.annotations=e,this.room.emit("update-comments",e)}addComment(e,i){let n=this.annotations.find(c=>c.uuid===e);n.comments.push(i);let s=this.annotations.map(c=>c.uuid===e?n:c);this.updateAnnotationList(s),this.element.updateAnnotations(s)}fetchAnnotations(){return q(this,null,function*(){try{let e=yield ze.fetchAnnotation(Z.get("apiUrl"),Z.get("apiKey"),{roomId:Z.get("roomId"),url:this.url});this.annotations=e,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations)}catch(e){this.logger.log("error when fetching annotations",e)}})}waterMarkState(){return q(this,null,function*(){try{let e=yield ze.fetchWaterMark(Z.get("apiUrl"),Z.get("apiKey"));this.element.waterMarkStatus(e)}catch(e){this.logger.log("error when fetching waterMark",e)}})}participantsList(){return q(this,null,function*(){try{let i=(yield ze.fetchParticipantsByGroup(this.group.id)).data;this.pinAdapter.participantsList=i,this.element.participantsList=i}catch(e){this.logger.log("error when fetching participantsList",e)}})}};f();f();var Ws=(e=>(e.ADD="add",e.SHOW="show",e))(Ws||{});var Us=class{constructor(t,e){this.isPinsVisible=!0;this.selectedPin=null;this.temporaryPinCoordinates=null;this.commentsSide="left";this.setCommentsMetadata=t=>{this.commentsSide=t};this.resetPins=t=>{t&&(t==null?void 0:t.key)!=="Escape"||(this.resetSelectedPin(),this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};this.animate=()=>{(this.isActive||this.isPinsVisible)&&(this.renderAnnotationsPins(),this.divWrapper=this.renderDivWrapper()),this.temporaryPinCoordinates&&this.renderTemporaryPin(),this.animateFrame=requestAnimationFrame(this.animate)};this.setMouseDownCoordinates=({x:t,y:e})=>{this.mouseDownCoordinates={x:t,y:e}};this.annotationSelected=({detail:{uuid:t,haltGoToPin:e,newPin:i}})=>{var c,l;if(!t)return;i&&this.pins.get(t).setAttribute("newPin","");let n=JSON.parse((l=(c=this.selectedPin)==null?void 0:c.getAttribute("annotation"))!=null?l:"{}");if(this.resetPins(),(n==null?void 0:n.uuid)===t)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let s=this.pins.get(t);s&&(s.setAttribute("active",""),this.selectedPin=s,!e&&this.goToPin(t))};this.onClick=t=>{if(!this.isActive)return;let e=this.canvas.getBoundingClientRect(),{x:i,y:n}=this.mouseDownCoordinates,s=i-e.x,c=n-e.y,l=t.clientX-e.left,d=t.clientY-e.top;if(Math.hypot(l-s,d-c)>10)return;let E=this.canvas.getContext("2d").getTransform().inverse(),x=new DOMPoint(l,d-31).matrixTransform(E);this.onPinFixedObserver.publish({x:x.x,y:x.y,type:"canvas"}),this.resetSelectedPin(),this.temporaryPinCoordinates={x:x.x,y:x.y},this.renderTemporaryPin();let P=document.getElementById("superviz-temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,P.setAttribute("movedPosition",String(this.movedTemporaryPin)),!this.selectedPin&&document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onToggleAnnotationSidebar=({detail:t})=>{let{open:e}=t;e||(this.pins.forEach(i=>{i.removeAttribute("active")}),this.pins.has("temporary-pin")&&this.removeAnnotationPin("temporary-pin"))};this.hideTemporaryPin=t=>{var y;let e=t.target,i=e.contains(this.canvas),{x:n,y:s}=t,{left:c,top:l,right:d,bottom:p}=this.canvas.getBoundingClientRect(),m=n>c&&n<d&&s>l&&s<p;this.canvas.contains(e)||(y=this.pins.get("temporary-pin"))!=null&&y.contains(e)||i&&m||(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};if(this.logger=new he("@superviz/sdk/comments-component/canvas-pin-adapter"),this.canvas=document.getElementById(t),this.isActive=!1,this.pins=new Map,this.goToPinCallback=e==null?void 0:e.onGoToPin,!this.canvas){let i=`Canvas with id ${t} not found`;throw this.logger.log(i),new Error(i)}this.canvasSides=this.canvas.getBoundingClientRect(),document.body.style.position="relative",this.onPinFixedObserver=new xe({logger:this.logger}),this.divWrapper=this.renderDivWrapper(),this.annotations=[],this.renderAnnotationsPins(),this.animateFrame=requestAnimationFrame(this.animate),document.body.addEventListener("select-annotation",this.annotationSelected),document.body.addEventListener("keyup",this.resetPins)}destroy(){this.isActive=!1,this.removeListeners(),this.removeAnnotationsPins(),this.pins=new Map,this.divWrapper.remove(),this.divWrapper=null,this.onPinFixedObserver.destroy(),this.onPinFixedObserver=null,this.canvas.style.cursor="default",this.annotations=[],cancelAnimationFrame(this.animateFrame),document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("keyup",this.resetPins)}setPinsVisibility(t){if(this.isPinsVisible=t,this.isPinsVisible){this.renderAnnotationsPins();return}this.removeAnnotationsPins()}setActive(t){if(this.isActive!==t){if(this.isActive=t,this.isActive){this.originalCanvasCursor=this.canvas.style.cursor,this.canvas.style.cursor='url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer',this.addListeners();return}this.resetPins(),this.removeListeners(),this.canvas.style.cursor=this.originalCanvasCursor}}updateAnnotations(t){this.logger.log("updateAnnotations",t),this.annotations=t,!(!this.isActive&&!this.isPinsVisible)&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}removeAnnotationPin(t){let e=this.pins.get(t);e&&(e.remove(),this.pins.delete(t),t!=="temporary-pin"&&(this.annotations=this.annotations.filter(i=>i.uuid!==t)))}renderTemporaryPin(){let t=document.getElementById("superviz-temporary-pin");t||(t=document.createElement("superviz-comments-annotation-pin"),t.id="superviz-temporary-pin",t.setAttribute("type","add"),t.setAttribute("showInput",""),t.setAttribute("containerSides",JSON.stringify(this.canvasSides)),t.setAttribute("commentsSide",this.commentsSide),t.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),t.setAttribute("annotation",JSON.stringify({})),t.setAttribute("participantsList",JSON.stringify(this.participants)),t.setAttributeNode(document.createAttribute("active")),this.divWrapper.appendChild(t));let{x:e,y:i}=this.temporaryPinCoordinates,s=this.canvas.getContext("2d").getTransform(),c=s.e,l=s.f,d=s.a,p=s.d,m=e*d+c,y=i*p+l;t.setAttribute("position",JSON.stringify({x:m,y})),this.pins.set("temporary-pin",t)}addListeners(){this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("mousedown",this.setMouseDownCoordinates),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}removeListeners(){this.canvas.removeEventListener("click",this.onClick),this.canvas.removeEventListener("mousedown",this.setMouseDownCoordinates),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}resetSelectedPin(){this.selectedPin&&(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}renderDivWrapper(){let t=this.canvas.getBoundingClientRect(),e=this.divWrapper;return e||(e=document.createElement("div"),e.id="superviz-canvas-wrapper",["","static"].includes(this.canvas.parentElement.style.position)&&(this.canvas.parentElement.style.position="relative")),e.style.position="absolute",e.style.top=`${this.canvas.offsetTop}px`,e.style.left=`${this.canvas.offsetLeft}px`,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.pointerEvents="none",e.style.overflow="hidden",document.getElementById("superviz-canvas-wrapper")||this.canvas.parentElement.appendChild(e),e}renderAnnotationsPins(){if((!this.annotations.length||this.canvas.style.display==="none")&&!this.pins.get("temporary-pin")){this.removeAnnotationsPins();return}this.annotations.forEach(t=>{if(t.resolved)return;let e=JSON.parse(t.position);if((e==null?void 0:e.type)!=="canvas")return;let{x:i,y:n}=e,c=this.canvas.getContext("2d").getTransform(),l=c.e,d=c.f,p=c.a,m=c.d,y=i*p+l,E=n*m+d;if(this.pins.has(t.uuid)){let P=this.pins.get(t.uuid);if(this.divWrapper.clientWidth>y&&this.divWrapper.clientHeight>E){P.setAttribute("style","opacity: 1"),this.pins.get(t.uuid).setAttribute("position",JSON.stringify({x:y,y:E}));return}P.setAttribute("style","opacity: 0");return}let x=document.createElement("superviz-comments-annotation-pin");x.setAttribute("type","show"),x.setAttribute("participantsList",JSON.stringify(this.participants)),x.setAttribute("annotation",JSON.stringify(t)),x.setAttribute("position",JSON.stringify({x:y,y:E})),x.id=t.uuid,this.divWrapper.appendChild(x),this.pins.set(t.uuid,x)})}removeAnnotationsPins(){this.pins.forEach(t=>{t.remove()}),this.pins.clear()}set participantsList(t){this.participants=t}goToPin(t){let e=this.annotations.find(x=>x.uuid===t);if(!e)return;let i=JSON.parse(e.position);if((i==null?void 0:i.type)!=="canvas")return;let n=this.canvas.getBoundingClientRect(),{width:s,height:c}=n,{x:l,y:d}=i,p=s/2,m=c/2,y=p-l,E=m-d;this.goToPinCallback&&this.goToPinCallback({x:y,y:E})}};f();var Oy=fi(Xr());var Hs=class{constructor(t,e={}){this.isPinsVisible=!0;this.selectedPin=null;this.dataAttribute="data-superviz-id";this.commentsSide="left";this.temporaryPinCoordinates={};this.elementsWithDataId={};this.divWrappers=new Map;this.voidElementsWrappers=new Map;this.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","svg","rect","ellipse"];this.animate=()=>{this.voidElementsWrappers&&(this.updatePinsPositions(),this.animateFrame=requestAnimationFrame(this.animate))};this.setCommentsMetadata=t=>{this.commentsSide=t};this.hideTemporaryPin=t=>{var c;let e=t.target,i=this.divWrappers.get(this.temporaryPinCoordinates.elementId);if(!i)return;let n=i.contains(e),s=(c=this.pins.get("temporary-pin"))==null?void 0:c.contains(e);n||s||(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates={})};this.resetPins=t=>{t&&(t==null?void 0:t.key)!=="Escape"||(this.resetSelectedPin(),this.resetHoveredWrapper(),this.temporaryPinCoordinates.elementId&&(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates={}))};this.annotationSelected=({detail:{uuid:t,newPin:e}})=>{if(!t)return;e&&this.pins.get(t).setAttribute("newPin","");let i=this.annotations.find(c=>{var l;return c.uuid===((l=this.selectedPin)==null?void 0:l.id)});if(this.resetPins(),(i==null?void 0:i.uuid)===t)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let n=this.pins.get(t);if(!n)return;n.setAttribute("active",""),this.selectedPin=n;let s=this.annotations.find(c=>c.uuid===t);this.selectedPin.setAttribute("elementId",JSON.parse(s.position).elementId)};this.onClick=t=>{if(!this.isActive||t.target===this.pins.get("temporary-pin"))return;let e=t.target,i=t.currentTarget;if(e!==i&&this.pins.has(e.id))return;let n=i.getAttribute("data-wrapper-id"),s=i.getBoundingClientRect(),{x:c,y:l}=this.mouseDownCoordinates,d=t.clientX-s.left,p=t.clientY-s.top,m=c-s.x,y=l-s.y;if(Math.hypot(d-m,p-y)>10)return;let{width:x,height:P}=i.getBoundingClientRect(),k=32,B=i.getBoundingClientRect().width/i.offsetWidth||1;d=d*100/x,p=(p-k*B)*100/P,this.onPinFixedObserver.publish({x:d,y:p,type:"html",elementId:n}),this.resetSelectedPin(),this.temporaryPinCoordinates=N(w({},this.temporaryPinCoordinates),{x:d,y:p}),this.renderTemporaryPin(n);let I=this.pins.get("temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,I.setAttribute("movedPosition",String(this.movedTemporaryPin)),document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onMouseDown=({x:t,y:e})=>{this.mouseDownCoordinates={x:t,y:e}};this.handleMutationObserverChanges=t=>{t.forEach(e=>{var p;let{target:i,oldValue:n}=e,s=i.getAttribute(this.dataAttribute);if(!s&&!n||s===n)return;let c=this.dataAttributeValueFilters.some(m=>n.match(m));if(!s&&n&&!c){this.removeAnnotationPin("temporary-pin"),this.clearElement(n),((p=this.selectedPin)==null?void 0:p.getAttribute("elementId"))===n&&(document.body.dispatchEvent(new CustomEvent("unselect-annotation")),this.selectedPin=null);return}let d=this.dataAttributeValueFilters.some(m=>s.match(m));(n&&this.elementsWithDataId[n]||d)&&this.clearElement(n),!d&&(this.setElementReadyToPin(i,s),this.renderAnnotationsPins())})};this.onToggleAnnotationSidebar=({detail:t})=>{let{open:e}=t;e||(this.resetSelectedPin(),this.pins.has("temporary-pin")&&(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates.elementId=void 0))};this.onMouseEnter=t=>{var s;let e=t.target;if(this.hoveredWrapper=e,!((s=e.getAttribute("data-wrapper-type"))==null?void 0:s.includes("ellipse"))){this.hoveredWrapper.style.setProperty("outline","1px solid rgb(var(--sv-primary))");return}let n=e.querySelector("ellipse");n.setAttribute("stroke","rgb(var(--sv-primary))"),n.setAttribute("stroke-width","1")};this.onMouseLeave=t=>{var s;let e=t.target;if(this.hoveredWrapper=e,!((s=e.getAttribute("data-wrapper-type"))==null?void 0:s.includes("ellipse"))){this.hoveredWrapper.style.setProperty("outline","");return}let n=e.querySelector("ellipse");n.removeAttribute("stroke"),n.removeAttribute("stroke-width")};if(this.logger=new he("@superviz/sdk/comments-component/container-pin-adapter"),this.container=document.getElementById(t),!this.container){let s=`Element with id ${t} not found`;throw this.logger.log(s),new Error(s)}if(typeof e!="object")throw new Error("Second argument of the HTMLPin constructor must be an object");let{dataAttributeName:i,dataAttributeValueFilters:n}=e;if(i==="")throw new Error("dataAttributeName must be a non-empty string");if(i===null)throw new Error("dataAttributeName cannot be null");if(i!==void 0&&typeof i!="string")throw new Error("dataAttributeName must be a non-empty string");this.dataAttribute=i||this.dataAttribute,this.dataAttributeValueFilters=n||[],this.isActive=!1,this.prepareElements(),this.mutationObserver=new MutationObserver(this.handleMutationObserverChanges),this.observeContainer(),this.pins=new Map,this.onPinFixedObserver=new xe({logger:this.logger}),this.annotations=[],document.body.addEventListener("select-annotation",this.annotationSelected),document.body.addEventListener("keyup",this.resetPins),this.voidElementsWrappers.size&&(this.animateFrame=requestAnimationFrame(this.animate))}destroy(){var t;this.logger.log("Destroying HTML Pin Adapter for Comments"),this.removeListeners(),this.removeObservers(),this.divWrappers.forEach(e=>e.remove()),this.divWrappers.clear(),this.pins.forEach(e=>e.remove()),this.pins.clear(),this.divWrappers=void 0,this.pins=void 0,this.elementsWithDataId=void 0,this.logger=void 0,this.onPinFixedObserver.destroy(),this.onPinFixedObserver=void 0,this.container=void 0,this.voidElementsWrappers.clear(),this.voidElementsWrappers=void 0,this.annotations=[],(t=this.svgWrappers)==null||t.remove(),this.svgWrappers=void 0,document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),cancelAnimationFrame(this.animateFrame)}addElementListeners(t){this.divWrappers.get(t).addEventListener("click",this.onClick,!0),this.divWrappers.get(t).addEventListener("mousedown",this.onMouseDown),this.divWrappers.get(t).addEventListener("mouseenter",this.onMouseEnter),this.divWrappers.get(t).addEventListener("mouseleave",this.onMouseLeave)}removeElementListeners(t){this.divWrappers.get(t).removeEventListener("click",this.onClick,!0),this.divWrappers.get(t).removeEventListener("mousedown",this.onMouseDown),this.divWrappers.get(t).removeEventListener("mouseenter",this.onMouseEnter),this.divWrappers.get(t).removeEventListener("mouseleave",this.onMouseLeave)}set participantsList(t){this.participants=t}removeObservers(){this.mutationObserver.disconnect(),this.mutationObserver=void 0}addListeners(){this.divWrappers.forEach((t,e)=>this.addElementListeners(e)),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}removeListeners(){this.divWrappers.forEach((t,e)=>this.removeElementListeners(e)),document.body.removeEventListener("keyup",this.resetPins),document.body.removeEventListener("click",this.hideTemporaryPin)}observeContainer(){this.mutationObserver.observe(this.container,{subtree:!0,attributes:!0,attributeFilter:[this.dataAttribute],attributeOldValue:!0})}prepareElements(){this.container.querySelectorAll(`[${this.dataAttribute}]`).forEach(e=>{let i=e.getAttribute(this.dataAttribute);this.dataAttributeValueFilters.some(s=>i.match(s))||this.setElementReadyToPin(e,i)})}addAllCursors(){this.divWrappers.forEach((t,e)=>{this.addCursor(t,e)})}removeAddCursor(){this.divWrappers.forEach((t,e)=>{let i=t,n=t.getAttribute("data-wrapper-type");if(n){let s=n.split("-")[1];i=this.divWrappers.get(e).querySelector(s)}i.style.setProperty("cursor","default"),i.style.setProperty("pointer-events","none")})}setPinsVisibility(t){this.isPinsVisible=t,this.isPinsVisible&&this.renderAnnotationsPins(),this.removeAnnotationsPins()}removeAnnotationPin(t){let e=this.pins.get(t);!e&&t==="temporary-pin"||(e&&(e.remove(),this.pins.delete(t)),t!=="temporary-pin"&&(this.annotations=this.annotations.filter(i=>i.uuid!==t)))}updateAnnotations(t){this.logger.log("updateAnnotations",t),this.annotations=t,this.isPinsVisible&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}setActive(t){if(this.isActive!==t){if(this.isActive=t,this.isActive){this.addListeners(),this.addAllCursors(),this.prepareElements();return}this.resetPins(),this.removeListeners(),this.removeAddCursor()}}renderTemporaryPin(t){var s,c;(s=this.temporaryPinCoordinates).elementId||(s.elementId=t);let e=this.pins.get("temporary-pin");if(t&&t!==this.temporaryPinCoordinates.elementId&&(this.pins.get("temporary-pin").remove(),this.pins.delete("temporary-pin"),this.temporaryPinCoordinates.elementId=t,e=null),!e){let l=(c=this.elementsWithDataId[t])==null?void 0:c.getBoundingClientRect();e=document.createElement("superviz-comments-annotation-pin"),e.id="superviz-temporary-pin",e.setAttribute("type","add"),e.setAttribute("showInput",""),e.setAttribute("containerSides",JSON.stringify(l)),e.setAttribute("commentsSide",this.commentsSide),e.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),e.setAttribute("annotation",JSON.stringify({})),e.setAttribute("participantsList",JSON.stringify(this.participants)),e.setAttribute("keepPositionRatio",""),e.setAttributeNode(document.createAttribute("active")),this.addTemporaryPinToElement(t,e)}let{x:i,y:n}=this.temporaryPinCoordinates;e.setAttribute("position",JSON.stringify({x:i,y:n})),this.pins.set("temporary-pin",e)}renderAnnotationsPins(){if(!this.annotations.length){this.removeAnnotationsPins();return}this.annotations.forEach(t=>{if(t.resolved)return;let{x:e,y:i,elementId:n,type:s}=JSON.parse(t.position);if(s!=="html"||this.pins.has(t.uuid)||!this.elementsWithDataId[n])return;let l=this.divWrappers.get(n);if(!l)return;let d=this.createPin(t,e,i);l.appendChild(d),this.pins.set(t.uuid,d)})}updatePinsPositions(){this.voidElementsWrappers.forEach((t,e)=>{let i=JSON.stringify(t.getBoundingClientRect()),n=this.elementsWithDataId[e].getBoundingClientRect();this.elementsWithDataId[e].tagName.toLowerCase()==="ellipse"&&(n=this.elementsWithDataId[e].viewportElement.getBoundingClientRect()),!(0,Oy.isEqual)(JSON.stringify(n),i)&&(t.style.setProperty("top",`${n.top}px`),t.style.setProperty("left",`${n.left}px`),t.style.setProperty("width",`${n.width}px`),t.style.setProperty("height",`${n.height}px`))})}clearElement(t){if(!this.elementsWithDataId[t])return;let i=this.divWrappers.get(t);if(i){let n=i.children,{length:s}=n;for(let c=0;c<s;++c){let l=n.item(c);this.pins.delete(l.id)}i.remove()}this.voidElementsWrappers.delete(t),this.removeElementListeners(t),this.divWrappers.delete(t),this.elementsWithDataId[t]=void 0,this.voidElementsWrappers.size||(cancelAnimationFrame(this.animateFrame),this.animateFrame=void 0)}resetSelectedPin(){this.selectedPin&&(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}resetHoveredWrapper(){this.hoveredWrapper&&this.onMouseLeave({target:this.hoveredWrapper})}removeAnnotationsPins(){this.pins.forEach(t=>{t.remove()}),this.pins.clear()}setElementReadyToPin(t,e){if(!this.elementsWithDataId[e]){if(this.elementsWithDataId[e]=t,!this.divWrappers.get(e)){let i=this.createWrapper(t,e);this.divWrappers.set(e,i)}!this.isActive||!this.isPinsVisible||(this.addCursor(this.divWrappers.get(e),e),this.addElementListeners(e))}}handleSvgElement(t,e){let i=t.viewportElement;if(i===void 0)return;if(t.tagName.toLowerCase()==="svg"){let I=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return I.setAttribute("height","100%"),I.setAttribute("width","100%"),I.style.setProperty("overflow","visible"),I.appendChild(e),t.appendChild(I),t.style.setProperty("overflow","visible"),e}let c=t.tagName.toLowerCase(),l=c==="ellipse",d=c==="rect";if(!l&&!d)return;let p=document.createElementNS("http://www.w3.org/2000/svg","svg"),m=document.createElementNS("http://www.w3.org/2000/svg",c),y,E,x,P,k,B;if(d){let I=t;y=I.getAttribute("x"),E=I.getAttribute("y"),x=I.getAttribute("width"),P=I.getAttribute("height"),k=I.getAttribute("rx"),B=I.getAttribute("ry"),m.setAttribute("fill","transparent"),m.setAttribute("stroke","transparent"),m.setAttribute("x","0"),m.setAttribute("y","0"),m.setAttribute("rx",k),m.setAttribute("ry",B)}if(l){let I=t.getAttribute("cx"),ne=t.getAttribute("cy");k=t.getAttribute("rx"),B=t.getAttribute("ry"),y=Number(I)-Number(k),E=Number(ne)-Number(B);let{width:ve,height:ke}=i.getBoundingClientRect();x=`${ve}px`,P=`${ke}px`,m.setAttribute("fill","transparent"),m.setAttribute("stroke","transparent"),m.setAttribute("cx",I),m.setAttribute("cy",ne),m.setAttribute("rx",k),m.setAttribute("ry",B)}return m.setAttribute("height",P),m.setAttribute("width",x),p.setAttribute("height",P),p.setAttribute("width",x),p.appendChild(m),e.appendChild(p),t.style.setProperty("overflow","visible"),e.setAttribute("data-wrapper-type",`svg-${c}`),e}addTemporaryPinToElement(t,e){if(!this.elementsWithDataId[t])return;let n=this.divWrappers.get(t);n&&n.appendChild(e)}createPin(t,e,i){let n=document.createElement("superviz-comments-annotation-pin");return n.setAttribute("type","show"),n.setAttribute("annotation",JSON.stringify(t)),n.setAttribute("position",JSON.stringify({x:e,y:i})),n.setAttribute("keepPositionRatio",""),n.setAttribute("participantsList",JSON.stringify(this.participants)),n.id=t.uuid,n}addCursor(t,e){let i=t,n=t.getAttribute("data-wrapper-type");if(n){let s=n.split("-")[1];i=this.divWrappers.get(e).querySelector(s)}i.style.setProperty("cursor",'url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer'),i.style.setProperty("pointer-events","auto")}createWrapper(t,e){var d;let i=`superviz-id-${e}`;if(this.divWrappers.get(e))return;let n=t.getBoundingClientRect(),s=document.createElement("div");s.setAttribute("data-wrapper-id",e),s.id=i,s.style.position="absolute",s.style.pointerEvents="none",s.style.transform="translateX(0) translateY(0) scale(1)",s.style.cursor="default",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.pointerEvents="none";let c=window.getComputedStyle(t).getPropertyValue("border-radius");if(s.style.borderRadius=c,!this.VOID_ELEMENTS.includes(this.elementsWithDataId[e].tagName.toLowerCase()))return this.elementsWithDataId[e].appendChild(s),this.setPositionNotStatic(this.elementsWithDataId[e]),s;s=(d=this.handleSvgElement(t,s))!=null?d:s,s.style.position="fixed",s.style.top=`${n.top}px`,s.style.left=`${n.left}px`,s.style.width=`${n.width}px`,s.style.height=`${n.height}px`;let l=this.elementsWithDataId[e].parentElement;return(!l||t.viewportElement)&&(l=document.body),this.setPositionNotStatic(l),l.appendChild(s),this.voidElementsWrappers.set(e,s),this.animateFrame||(this.animateFrame=requestAnimationFrame(this.animate)),s}setPositionNotStatic(t){let{position:e}=window.getComputedStyle(t);e==="static"&&t.style.setProperty("position","relative")}};f();f();f();f();f();var zs=class r{constructor(t,e,i){this.io=t;this.presence=e;this.roomId=i;this.presences=new Set;this.observers=new Map;this.onPresenceJoin=t=>{(t==null?void 0:t.roomId)===this.roomId&&(this.logger.log("presence room @ presence join",t),this.presences.add(t),this.observers.get("presence.joined-room").next({connectionId:t.connectionId,data:t.data,id:t.id,name:t.name,timestamp:t.timestamp}))};this.onPresenceLeave=t=>{(t==null?void 0:t.roomId)===this.roomId&&(this.logger.log("presence room @ presence leave",t),this.presences.delete(t),this.observers.get("presence.leave").next(t))};this.onPresenceUpdate=t=>{(t==null?void 0:t.roomId)===this.roomId&&(this.logger.log("presence room @ presence update",t),this.observers.get("presence.update").next({connectionId:t.connectionId,data:t.data,id:t.id,name:t.name,roomId:t==null?void 0:t.roomId,timestamp:t.timestamp}))};this.logger=new he("@superviz/sdk/socket-client/presence"),this.registerSubsjects(),this.subscribeToPresenceEvents()}static register(t,e,i){return new r(t,e,i)}get(t,e){let i=new Ke;i.subscribe({next:t,error:e});let n=s=>{let c=s.presences.map(l=>({connectionId:l.connectionId,data:l.data,id:l.id,name:l.name,timestamp:l.timestamp}));this.logger.log("presence room @ get",s),this.io.off("presence.get",n),i.next(c),i.complete()};this.io.on("presence.get",n),this.io.emit("presence.get",this.roomId)}update(t){let e={connectionId:this.io.id,data:t,id:this.presence.id,name:this.presence.name,timestamp:Date.now()};this.io.emit("presence.update",this.roomId,e),this.logger.log("presence room @ update",this.roomId,e)}destroy(){this.io.off("presence.joined-room",this.onPresenceJoin),this.io.off("presence.leave",this.onPresenceLeave),this.io.off("presence.update",this.onPresenceUpdate),this.observers.forEach(t=>t.unsubscribe()),this.observers.clear()}registerSubsjects(){this.observers.set("presence.joined-room",new Ke),this.observers.set("presence.leave",new Ke),this.observers.set("presence.update",new Ke)}on(t,e,i){this.observers.get(t).subscribe({error:i,next:e})}off(t){this.observers.get(t).unsubscribe()}subscribeToPresenceEvents(){this.io.on("presence.joined-room",this.onPresenceJoin),this.io.on("presence.leave",this.onPresenceLeave),this.io.on("presence.update",this.onPresenceUpdate)}};f();f();f();f();f();f();f();f();f();f();f();f();var vi=Object.create(null);vi.open="0";vi.close="1";vi.ping="2";vi.pong="3";vi.message="4";vi.upgrade="5";vi.noop="6";var Gs=Object.create(null);Object.keys(vi).forEach(r=>{Gs[vi[r]]=r});var Vs={type:"error",data:"parser error"};var Ly=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",My=typeof ArrayBuffer=="function",Ry=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,js=({type:r,data:t},e,i)=>Ly&&t instanceof Blob?e?i(t):Cy(t,i):My&&(t instanceof ArrayBuffer||Ry(t))?e?i(t):Cy(new Blob([t]),i):i(vi[r]+(t||"")),Cy=(r,t)=>{let e=new FileReader;return e.onload=function(){let i=e.result.split(",")[1];t("b"+(i||""))},e.readAsDataURL(r)};function Iy(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}var Cp;function ky(r,t){if(Ly&&r.data instanceof Blob)return r.data.arrayBuffer().then(Iy).then(t);if(My&&(r.data instanceof ArrayBuffer||Ry(r.data)))return t(Iy(r.data));js(r,!1,e=>{Cp||(Cp=new TextEncoder),t(Cp.encode(e))})}f();f();var Ny="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qs=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let r=0;r<Ny.length;r++)qs[Ny.charCodeAt(r)]=r;var Dy=r=>{let t=r.length*.75,e=r.length,i,n=0,s,c,l,d;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);let p=new ArrayBuffer(t),m=new Uint8Array(p);for(i=0;i<e;i+=4)s=qs[r.charCodeAt(i)],c=qs[r.charCodeAt(i+1)],l=qs[r.charCodeAt(i+2)],d=qs[r.charCodeAt(i+3)],m[n++]=s<<2|c>>4,m[n++]=(c&15)<<4|l>>2,m[n++]=(l&3)<<6|d&63;return p};var FI=typeof ArrayBuffer=="function",Zs=(r,t)=>{if(typeof r!="string")return{type:"message",data:Fy(r,t)};let e=r.charAt(0);return e==="b"?{type:"message",data:$I(r.substring(1),t)}:Gs[e]?r.length>1?{type:Gs[e],data:r.substring(1)}:{type:Gs[e]}:Vs},$I=(r,t)=>{if(FI){let e=Dy(r);return Fy(e,t)}else return{base64:!0,data:r}},Fy=(r,t)=>{switch(t){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}};var $y="",By=(r,t)=>{let e=r.length,i=new Array(e),n=0;r.forEach((s,c)=>{js(s,!1,l=>{i[c]=l,++n===e&&t(i.join($y))})})},Wy=(r,t)=>{let e=r.split($y),i=[];for(let n=0;n<e.length;n++){let s=Zs(e[n],t);if(i.push(s),s.type==="error")break}return i};function Uy(){return new TransformStream({transform(r,t){ky(r,e=>{let i=e.length,n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);let s=new DataView(n.buffer);s.setUint8(0,126),s.setUint16(1,i)}else{n=new Uint8Array(9);let s=new DataView(n.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(i))}r.data&&typeof r.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(e)})}})}var Ip;function Ec(r){return r.reduce((t,e)=>t+e.length,0)}function wc(r,t){if(r[0].length===t)return r.shift();let e=new Uint8Array(t),i=0;for(let n=0;n<t;n++)e[n]=r[0][i++],i===r[0].length&&(r.shift(),i=0);return r.length&&i<r[0].length&&(r[0]=r[0].slice(i)),e}function Hy(r,t){Ip||(Ip=new TextDecoder);let e=[],i=0,n=-1,s=!1;return new TransformStream({transform(c,l){for(e.push(c);;){if(i===0){if(Ec(e)<1)break;let d=wc(e,1);s=(d[0]&128)===128,n=d[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(Ec(e)<2)break;let d=wc(e,2);n=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),i=3}else if(i===2){if(Ec(e)<8)break;let d=wc(e,8),p=new DataView(d.buffer,d.byteOffset,d.length),m=p.getUint32(0);if(m>Math.pow(2,21)-1){l.enqueue(Vs);break}n=m*Math.pow(2,32)+p.getUint32(4),i=3}else{if(Ec(e)<n)break;let d=wc(e,n);l.enqueue(Zs(s?d:Ip.decode(d),t)),i=0}if(n===0||n>r){l.enqueue(Vs);break}}}})}var Lp=4;f();function Be(r){if(r)return BI(r)}function BI(r){for(var t in Be.prototype)r[t]=Be.prototype[t];return r}Be.prototype.on=Be.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};Be.prototype.once=function(r,t){function e(){this.off(r,e),t.apply(this,arguments)}return e.fn=t,this.on(r,e),this};Be.prototype.off=Be.prototype.removeListener=Be.prototype.removeAllListeners=Be.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,n=0;n<e.length;n++)if(i=e[n],i===t||i.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+r],this};Be.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+r],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,n=e.length;i<n;++i)e[i].apply(this,t)}return this};Be.prototype.emitReserved=Be.prototype.emit;Be.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Be.prototype.hasListeners=function(r){return!!this.listeners(r).length};f();f();var vt=typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")();function xc(r,...t){return t.reduce((e,i)=>(r.hasOwnProperty(i)&&(e[i]=r[i]),e),{})}var WI=vt.setTimeout,UI=vt.clearTimeout;function Xi(r,t){t.useNativeTimers?(r.setTimeoutFn=WI.bind(vt),r.clearTimeoutFn=UI.bind(vt)):(r.setTimeoutFn=vt.setTimeout.bind(vt),r.clearTimeoutFn=vt.clearTimeout.bind(vt))}var HI=1.33;function zy(r){return typeof r=="string"?zI(r):Math.ceil((r.byteLength||r.size)*HI)}function zI(r){let t=0,e=0;for(let i=0,n=r.length;i<n;i++)t=r.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}f();function Gy(r){let t="";for(let e in r)r.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t}function Vy(r){let t={},e=r.split("&");for(let i=0,n=e.length;i<n;i++){let s=e[i].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}var Tc=class extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}},Qi=class extends Be{constructor(t){super(),this.writable=!1,Xi(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new Tc(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=Zs(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let e=Gy(t);return e.length?"?"+e:""}};f();var Jy="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Mp=64,GI={},jy=0,Sc=0,qy;function Zy(r){let t="";do t=Jy[r%Mp]+t,r=Math.floor(r/Mp);while(r>0);return t}function Ac(){let r=Zy(+new Date);return r!==qy?(jy=0,qy=r):r+"."+Zy(jy++)}for(;Sc<Mp;Sc++)GI[Jy[Sc]]=Sc;f();f();var Yy=!1;try{Yy=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(r){}var Ky=Yy;function Rp(r){let t=r.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!t||Ky))return new XMLHttpRequest}catch(e){}if(!t)try{return new vt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}function VI(){}var jI=function(){return new Rp({xdomain:!1}).responseType!=null}(),Pc=class extends Qi{constructor(t){if(super(t),this.polling=!1,typeof location!="undefined"){let i=location.protocol==="https:",n=location.port;n||(n=i?"443":"80"),this.xd=typeof location!="undefined"&&t.hostname!==location.hostname||n!==t.port}let e=t&&t.forceBase64;this.supportsBinary=jI&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){let e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Wy(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,By(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Ac()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Er(this.uri(),t)}doWrite(t,e){let i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(n,s)=>{this.onError("xhr post error",n,s)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}},Er=class r extends Be{constructor(t,e){super(),Xi(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.data=e.data!==void 0?e.data:null,this.create()}create(){var t;let e=xc(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;let i=this.xhr=new Rp(e);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this.opts.extraHeaders[n])}}catch(n){}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{i.setRequestHeader("Accept","*/*")}catch(n){}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this.opts.cookieJar)===null||n===void 0||n.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document!="undefined"&&(this.index=r.requestsCount++,r.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=VI,t)try{this.xhr.abort()}catch(e){}typeof document!="undefined"&&delete r.requests[this.index],this.xhr=null}}onLoad(){let t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Er.requestsCount=0;Er.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Xy);else if(typeof addEventListener=="function"){let r="onpagehide"in vt?"pagehide":"unload";addEventListener(r,Xy,!1)}}function Xy(){for(let r in Er.requests)Er.requests.hasOwnProperty(r)&&Er.requests[r].abort()}f();f();var on=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),Js=vt.WebSocket||vt.MozWebSocket,Oc=!0,Qy="arraybuffer";var eb=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Cc=class extends Qi{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let t=this.uri(),e=this.opts.protocols,i=eb?{}:xc(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Oc&&!eb?e?new Js(t,e):new Js(t):new Js(t,e,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let i=t[e],n=e===t.length-1;js(i,this.supportsBinary,s=>{let c={};Oc||(i.options&&(c.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof s=="string"?Buffer.byteLength(s):s.length)<this.opts.perMessageDeflate.threshold&&(c.compress=!1));try{Oc?this.ws.send(s):this.ws.send(s,c)}catch(l){}n&&on(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Ac()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!Js}};f();var Ic=class extends Qi{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{let e=Hy(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(e).getReader(),n=Uy();n.readable.pipeTo(t.writable),this.writer=n.writable.getWriter();let s=()=>{i.read().then(({done:l,value:d})=>{l||(this.onPacket(d),s())}).catch(l=>{})};s();let c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this.writer.write(c).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let i=t[e],n=e===t.length-1;this.writer.write(i).then(()=>{n&&on(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}};var kp={websocket:Cc,webtransport:Ic,polling:Pc};f();var qI=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ZI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ao(r){if(r.length>2e3)throw"URI too long";let t=r,e=r.indexOf("["),i=r.indexOf("]");e!=-1&&i!=-1&&(r=r.substring(0,e)+r.substring(e,i).replace(/:/g,";")+r.substring(i,r.length));let n=qI.exec(r||""),s={},c=14;for(;c--;)s[ZI[c]]=n[c]||"";return e!=-1&&i!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=JI(s,s.path),s.queryKey=YI(s,s.query),s}function JI(r,t){let e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function YI(r,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,s){n&&(e[n]=s)}),e}var sn=class r extends Be{constructor(t,e={}){super(),this.binaryType=Qy,this.writeBuffer=[],t&&typeof t=="object"&&(e=t,t=null),t?(t=Ao(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Ao(e.host).host),Xi(this,e),this.secure=e.secure!=null?e.secure:typeof location!="undefined"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=e.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Vy(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){let e=Object.assign({},this.opts.query);e.EIO=Lp,e.transport=t,this.id&&(e.sid=this.id);let i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new kp[t](i)}open(){let t;if(this.opts.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch(e){this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(t){let e=this.createTransport(t),i=!1;r.priorWebsocketSuccess=!1;let n=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",y=>{if(!i)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;r.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(m(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let E=new Error("probe error");E.transport=e.name,this.emitReserved("upgradeError",E)}}))};function s(){i||(i=!0,m(),e.close(),e=null)}let c=y=>{let E=new Error("probe error: "+y);E.transport=e.name,s(),this.emitReserved("upgradeError",E)};function l(){c("transport closed")}function d(){c("socket closed")}function p(y){e&&y.name!==e.name&&s()}let m=()=>{e.removeListener("open",n),e.removeListener("error",c),e.removeListener("close",l),this.off("close",d),this.off("upgrading",p)};e.once("open",n),e.once("error",c),e.once("close",l),this.once("close",d),this.once("upgrading",p),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onOpen(){if(this.readyState="open",r.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0,e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){let n=this.writeBuffer[i].data;if(n&&(e+=zy(n)),i>0&&e>this.maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,n){if(typeof e=="function"&&(n=e,e=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;let s={type:t,data:e,options:i};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),n&&this.once("flush",n),this.flush()}close(){let t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){r.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){let e=[],i=0,n=t.length;for(;i<n;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}};sn.protocol=Lp;var uU=sn.protocol;function tb(r,t="",e){let i=r;e=e||typeof location!="undefined"&&location,r==null&&(r=e.protocol+"//"+e.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=e.protocol+r:r=e.host+r),/^(https?|wss?):\/\//.test(r)||(typeof e!="undefined"?r=e.protocol+"//"+r:r="https://"+r),i=Ao(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let s=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port+t,i.href=i.protocol+"://"+s+(e&&e.port===i.port?"":":"+i.port),i}f();f();var Wp={};IO(Wp,{Decoder:()=>$p,Encoder:()=>Fp,PacketType:()=>Ee,protocol:()=>sb});f();f();f();var KI=typeof ArrayBuffer=="function",XI=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,ib=Object.prototype.toString,QI=typeof Blob=="function"||typeof Blob!="undefined"&&ib.call(Blob)==="[object BlobConstructor]",eL=typeof File=="function"||typeof File!="undefined"&&ib.call(File)==="[object FileConstructor]";function Ks(r){return KI&&(r instanceof ArrayBuffer||XI(r))||QI&&r instanceof Blob||eL&&r instanceof File}function Ys(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let e=0,i=r.length;e<i;e++)if(Ys(r[e]))return!0;return!1}if(Ks(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Ys(r.toJSON(),!0);for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&Ys(r[e]))return!0;return!1}function rb(r){let t=[],e=r.data,i=r;return i.data=Np(e,t),i.attachments=t.length,{packet:i,buffers:t}}function Np(r,t){if(!r)return r;if(Ks(r)){let e={_placeholder:!0,num:t.length};return t.push(r),e}else if(Array.isArray(r)){let e=new Array(r.length);for(let i=0;i<r.length;i++)e[i]=Np(r[i],t);return e}else if(typeof r=="object"&&!(r instanceof Date)){let e={};for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=Np(r[i],t));return e}return r}function nb(r,t){return r.data=Dp(r.data,t),delete r.attachments,r}function Dp(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=Dp(r[e],t);else if(typeof r=="object")for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=Dp(r[e],t));return r}var tL=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],sb=5,Ee;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Ee||(Ee={}));var Fp=class{constructor(t){this.replacer=t}encode(t){return(t.type===Ee.EVENT||t.type===Ee.ACK)&&Ys(t)?this.encodeAsBinary({type:t.type===Ee.EVENT?Ee.BINARY_EVENT:Ee.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Ee.BINARY_EVENT||t.type===Ee.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){let e=rb(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}};function ob(r){return Object.prototype.toString.call(r)==="[object Object]"}var $p=class r extends Be{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);let i=e.type===Ee.BINARY_EVENT;i||e.type===Ee.BINARY_ACK?(e.type=i?Ee.EVENT:Ee.ACK,this.reconstructor=new Bp(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(Ks(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,i={type:Number(t.charAt(0))};if(Ee[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Ee.BINARY_EVENT||i.type===Ee.BINARY_ACK){let s=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let c=t.substring(s,e);if(c!=Number(c)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(c)}if(t.charAt(e+1)==="/"){let s=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(s,e)}else i.nsp="/";let n=t.charAt(e+1);if(n!==""&&Number(n)==n){let s=e+1;for(;++e;){let c=t.charAt(e);if(c==null||Number(c)!=c){--e;break}if(e===t.length)break}i.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){let s=this.tryParse(t.substr(e));if(r.isPayloadValid(i.type,s))i.data=s;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(e){return!1}}static isPayloadValid(t,e){switch(t){case Ee.CONNECT:return ob(e);case Ee.DISCONNECT:return e===void 0;case Ee.CONNECT_ERROR:return typeof e=="string"||ob(e);case Ee.EVENT:case Ee.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&tL.indexOf(e[0])===-1);case Ee.ACK:case Ee.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},Bp=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=nb(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};f();function Gt(r,t,e){return r.on(t,e),function(){r.off(t,e)}}var iL=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Po=class extends Be{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[Gt(t,"open",this.onopen.bind(this)),Gt(t,"packet",this.onpacket.bind(this)),Gt(t,"error",this.onerror.bind(this)),Gt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(iL.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let i={type:Ee.EVENT,data:e};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let c=this.ids++,l=e.pop();this._registerAckCallback(c,l),i.id=c}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,e){var i;let n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=e;return}let s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);e.call(this,new Error("operation has timed out"))},n),c=(...l)=>{this.io.clearTimeoutFn(s),e.apply(this,l)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...e){return new Promise((i,n)=>{let s=(c,l)=>c?n(c):i(l);s.withError=!0,e.push(s),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());let i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...s)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(n)):(this._queue.shift(),e&&e(null,...s)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;let e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Ee.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){let i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Ee.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ee.EVENT:case Ee.BINARY_EVENT:this.onevent(t);break;case Ee.ACK:case Ee.BINARY_ACK:this.onack(t);break;case Ee.DISCONNECT:this.ondisconnect();break;case Ee.CONNECT_ERROR:this.destroy();let i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){let e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let i of e)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,i=!1;return function(...n){i||(i=!0,e.packet({type:Ee.ACK,id:t,data:n}))}}onack(t){let e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ee.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let i of e)i.apply(this,t.data)}}};f();function an(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}an.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*r);r=Math.floor(t*10)&1?r+e:r-e}return Math.min(r,this.max)|0};an.prototype.reset=function(){this.attempts=0};an.prototype.setMin=function(r){this.ms=r};an.prototype.setMax=function(r){this.max=r};an.prototype.setJitter=function(r){this.jitter=r};var wr=class extends Be{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Xi(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new an({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let n=e.parser||Wp;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new sn(this.uri,this.opts);let e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;let n=Gt(e,"open",function(){i.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},c=Gt(e,"error",s);if(this._timeout!==!1){let l=this._timeout,d=this.setTimeoutFn(()=>{n(),s(new Error("timeout")),e.close()},l);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(n),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(Gt(t,"ping",this.onping.bind(this)),Gt(t,"data",this.ondata.bind(this)),Gt(t,"error",this.onerror.bind(this)),Gt(t,"close",this.onclose.bind(this)),Gt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){on(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new Po(this,t,e),this.nsps[t]=i),i}_destroy(t){let e=Object.keys(this.nsps);for(let i of e)if(this.nsps[i].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var Xs={};function Up(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};let e=tb(r,t.path||"/socket.io"),i=e.source,n=e.id,s=e.path,c=Xs[n]&&s in Xs[n].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||c,d;return l?d=new wr(i,t):(Xs[n]||(Xs[n]=new wr(i,t)),d=Xs[n]),e.query&&!t.query&&(t.query=e.queryKey),d.socket(e.path,t)}Object.assign(Up,{Manager:wr,Socket:Po,io:Up,connect:Up});f();var Lc=class{constructor(t){this.socket=t;this.onConnect=()=>{this.logger.log("connection @ on connect","Connected to the socket"),this.changeState("CONNECTED")};this.onDisconnect=t=>{this.logger.log("connection @ on disconnect","Disconnected from the socket"),this.changeState("DISCONNECTED",t)};this.onConnectError=t=>{this.logger.log("connection @ on connect error","Connection error",t),this.changeState("CONNECTION_ERROR",t.message)};this.onConnectionError=t=>{this.logger.log("connection @ on connection error","Connection error",t),this.changeState("CONNECTION_ERROR",t.message)};this.onReconnect=()=>{this.logger.log("connection @ on reconnect","Reconnected to the socket"),this.changeState("CONNECTED")};this.onReconnectError=t=>{this.logger.log("connection @ on reconnect error","Reconnect error",t),this.changeState("RECONNECT_ERROR",t.message)};this.onReconnectFailed=()=>{this.logger.log("connection @ on reconnect failed","Failed to reconnect to the socket"),this.changeState("RECONNECT_ERROR")};this.onReconnecAttempt=t=>{this.logger.log("connection @ on reconnect attempt",`Reconnect attempt #${t}`),this.changeState("RECONNECTING",`Reconnect attempt #${t}`)};this.onCustomError=t=>{if(t.needsToDisconnect&&this.socket.disconnect(),t.level==="error"){console.error("[SuperViz - Error]","Type: ",t.errorType,"Message :",t.message);return}console.warn("[SuperViz - Warning]","Type: ",t.errorType,"Message :",t.message)};this.logger=new he("@superviz/sdk/socket-client/connection"),this.subscribeToManagerEvents(),this.stateObserver=new Ke}on(t,e){this.stateObserver.closed&&(this.stateObserver=new Ke),this.stateObserver.subscribe({next:t,error:e})}off(){this.stateObserver.closed||this.stateObserver.unsubscribe()}subscribeToManagerEvents(){this.socket.on("connect",this.onConnect),this.socket.on("disconnect",this.onDisconnect),this.socket.on("connect_error",this.onConnectError),this.socket.io.on("error",this.onConnectionError),this.socket.io.on("reconnect",this.onReconnect),this.socket.io.on("reconnect_attempt",this.onReconnecAttempt),this.socket.io.on("reconnect_error",this.onReconnectError),this.socket.io.on("reconnect_failed",this.onReconnectFailed),this.socket.on("socket-event.error",this.onCustomError)}changeState(t,e){this.state=t,!this.stateObserver.closed&&this.stateObserver.next({state:t,reason:e})}};f();var Qs=class r{constructor(t,e,i,n,s=100){this.io=t;this.user=e;this.roomId=i;this.apiKey=n;this.maxConnections=s;this.isJoined=!1;this.subscriptions=new Map;this.observers=new Map;this.onJoinedRoom=t=>{var e;this.roomId===((e=t==null?void 0:t.data)==null?void 0:e.name)&&(this.isJoined=!0,this.io.emit("room.joined",this.roomId,t.data),this.logger.log("room @ joined",t))};this.onHttpEvent=t=>{this.publishEventToClient(t.name,t)};this.logger=new he("@superviz/sdk/socket-client/room");let c={name:i,user:e,maxConnections:s};this.presence=zs.register(t,e,i),this.io.emit("room.join",c),this.subscribeToRoomEvents()}static register(t,e,i,n,s){return new r(t,e,i,n,s)}on(t,e){this.logger.log("room @ on",t);let i=this.observers.get(t);i||(i=new Ke,this.observers.set(t,i),this.io.on(t,n=>{this.publishEventToClient(t,n)})),this.subscriptions.set(e,i.subscribe(e))}off(t,e){var i;if(this.logger.log("room @ off",t),!e){this.observers.delete(t),this.io.off(t);return}(i=this.subscriptions.get(e))==null||i.unsubscribe()}emit(t,e){if(!this.isJoined){this.logger.log("Cannot emit event. Not joined to room");return}let i={name:t,roomId:this.roomId,presence:this.user,connectionId:this.io.id,data:e,timestamp:Date.now()};this.io.emit("room.update",this.roomId,i),this.logger.log("room @ emit",t,e)}history(t,e){let i=new Ke;i.subscribe({next:t,error:e});let n=s=>{this.logger.log("room @ history",s),this.io.off("room.get",n),i.next(s),i.complete(),i.unsubscribe()};this.io.on("room.get",n),this.io.emit("room.get",this.roomId)}disconnect(){this.logger.log("room @ disconnect","Leaving room...",this.roomId),this.io.emit("room.leave",this.roomId),this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions.clear(),this.observers.forEach(t=>t.unsubscribe()),this.observers.clear(),this.presence.destroy()}publishEventToClient(t,e){let i=this.observers.get(t);!i||e.roomId!==this.roomId||i.next(e)}subscribeToRoomEvents(){this.io.on("room.joined",this.onJoinedRoom),this.io.on("room.error",t=>{this.logger.log("Error:",t.data)}),this.io.on(`http:${this.roomId}:${this.apiKey}`,this.onHttpEvent)}};var ea=class{constructor(t,e,i){this.apiKey=t;this.environment=e;this.presence=i;this.manager=new wr("https://io.superviz.com",{addTrailingSlash:!1,secure:!0,withCredentials:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5,extraHeaders:{"sv-api-key":this.apiKey}});let{origin:n}=window.location;this.socket=this.manager.socket(`/${e}`,{auth:{apiKey:this.apiKey,origin:n,envirioment:this.environment}}),this.connection=new Lc(this.socket)}get state(){return this.connection.state}connect(t,e){return Qs.register(this.socket,this.presence,t,this.apiKey,e)}destroy(){this.socket.disconnect(),this.connection.off()}};f();f();var Te;(function(r){r.assertEqual=n=>n;function t(n){}r.assertIs=t;function e(n){throw new Error}r.assertNever=e,r.arrayToEnum=n=>{let s={};for(let c of n)s[c]=c;return s},r.getValidEnumValues=n=>{let s=r.objectKeys(n).filter(l=>typeof n[n[l]]!="number"),c={};for(let l of s)c[l]=n[l];return r.objectValues(c)},r.objectValues=n=>r.objectKeys(n).map(function(s){return n[s]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let s=[];for(let c in n)Object.prototype.hasOwnProperty.call(n,c)&&s.push(c);return s},r.find=(n,s)=>{for(let c of n)if(s(c))return c},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function i(n,s=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(s)}r.joinValues=i,r.jsonStringifyReplacer=(n,s)=>typeof s=="bigint"?s.toString():s})(Te||(Te={}));var zp;(function(r){r.mergeShapes=(t,e)=>w(w({},t),e)})(zp||(zp={}));var z=Te.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xr=r=>{switch(typeof r){case"undefined":return z.undefined;case"string":return z.string;case"number":return isNaN(r)?z.nan:z.number;case"boolean":return z.boolean;case"function":return z.function;case"bigint":return z.bigint;case"symbol":return z.symbol;case"object":return Array.isArray(r)?z.array:r===null?z.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?z.promise:typeof Map!="undefined"&&r instanceof Map?z.map:typeof Set!="undefined"&&r instanceof Set?z.set:typeof Date!="undefined"&&r instanceof Date?z.date:z.object;default:return z.unknown}},$=Te.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),nL=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),Vt=class r extends Error{constructor(t){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};let e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){let e=t||function(s){return s.message},i={_errors:[]},n=s=>{for(let c of s.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)i._errors.push(e(c));else{let l=i,d=0;for(;d<c.path.length;){let p=c.path[d];d===c.path.length-1?(l[p]=l[p]||{_errors:[]},l[p]._errors.push(e(c))):l[p]=l[p]||{_errors:[]},l=l[p],d++}}};return n(this),i}static assert(t){if(!(t instanceof r))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Te.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){let e={},i=[];for(let n of this.issues)n.path.length>0?(e[n.path[0]]=e[n.path[0]]||[],e[n.path[0]].push(t(n))):i.push(t(n));return{formErrors:i,fieldErrors:e}}get formErrors(){return this.flatten()}};Vt.create=r=>new Vt(r);var Io=(r,t)=>{let e;switch(r.code){case $.invalid_type:r.received===z.undefined?e="Required":e=`Expected ${r.expected}, received ${r.received}`;break;case $.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(r.expected,Te.jsonStringifyReplacer)}`;break;case $.unrecognized_keys:e=`Unrecognized key(s) in object: ${Te.joinValues(r.keys,", ")}`;break;case $.invalid_union:e="Invalid input";break;case $.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${Te.joinValues(r.options)}`;break;case $.invalid_enum_value:e=`Invalid enum value. Expected ${Te.joinValues(r.options)}, received '${r.received}'`;break;case $.invalid_arguments:e="Invalid function arguments";break;case $.invalid_return_type:e="Invalid function return type";break;case $.invalid_date:e="Invalid date";break;case $.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(e=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?e=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?e=`Invalid input: must end with "${r.validation.endsWith}"`:Te.assertNever(r.validation):r.validation!=="regex"?e=`Invalid ${r.validation}`:e="Invalid";break;case $.too_small:r.type==="array"?e=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?e=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?e=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?e=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:e="Invalid input";break;case $.too_big:r.type==="array"?e=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?e=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?e=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?e=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?e=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:e="Invalid input";break;case $.custom:e="Invalid input";break;case $.invalid_intersection_types:e="Intersection results could not be merged";break;case $.not_multiple_of:e=`Number must be a multiple of ${r.multipleOf}`;break;case $.not_finite:e="Number must be finite";break;default:e=t.defaultError,Te.assertNever(r)}return{message:e}},ub=Io;function oL(r){ub=r}function Mc(){return ub}var Rc=r=>{let{data:t,path:e,errorMaps:i,issueData:n}=r,s=[...e,...n.path||[]],c=N(w({},n),{path:s});if(n.message!==void 0)return N(w({},n),{path:s,message:n.message});let l="",d=i.filter(p=>!!p).slice().reverse();for(let p of d)l=p(c,{data:t,defaultError:l}).message;return N(w({},n),{path:s,message:l})},sL=[];function H(r,t){let e=Mc(),i=Rc({issueData:t,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,e,e===Io?void 0:Io].filter(n=>!!n)});r.common.issues.push(i)}var yt=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){let i=[];for(let n of e){if(n.status==="aborted")return re;n.status==="dirty"&&t.dirty(),i.push(n.value)}return{status:t.value,value:i}}static mergeObjectAsync(t,e){return q(this,null,function*(){let i=[];for(let n of e){let s=yield n.key,c=yield n.value;i.push({key:s,value:c})}return r.mergeObjectSync(t,i)})}static mergeObjectSync(t,e){let i={};for(let n of e){let{key:s,value:c}=n;if(s.status==="aborted"||c.status==="aborted")return re;s.status==="dirty"&&t.dirty(),c.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof c.value!="undefined"||n.alwaysSet)&&(i[s.value]=c.value)}return{status:t.value,value:i}}},re=Object.freeze({status:"aborted"}),Co=r=>({status:"dirty",value:r}),Tt=r=>({status:"valid",value:r}),Gp=r=>r.status==="aborted",Vp=r=>r.status==="dirty",ra=r=>r.status==="valid",na=r=>typeof Promise!="undefined"&&r instanceof Promise;function kc(r,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!i:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(r):i?i.value:t.get(r)}function db(r,t,e,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(r,e):n?n.value=e:t.set(r,e),e}var J;(function(r){r.errToObj=t=>typeof t=="string"?{message:t}:t||{},r.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(J||(J={}));var ta,ia,ni=class{constructor(t,e,i,n){this._cachedPath=[],this.parent=t,this.data=e,this._path=i,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},lb=(r,t)=>{if(ra(t))return{success:!0,data:t.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let e=new Vt(r.common.issues);return this._error=e,this._error}}};function ce(r){if(!r)return{};let{errorMap:t,invalid_type_error:e,required_error:i,description:n}=r;if(t&&(e||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(c,l)=>{var d,p;let{message:m}=r;return c.code==="invalid_enum_value"?{message:m!=null?m:l.defaultError}:typeof l.data=="undefined"?{message:(d=m!=null?m:i)!==null&&d!==void 0?d:l.defaultError}:c.code!=="invalid_type"?{message:l.defaultError}:{message:(p=m!=null?m:e)!==null&&p!==void 0?p:l.defaultError}},description:n}}var ue=class{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return xr(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:xr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new yt,ctx:{common:t.parent.common,data:t.data,parsedType:xr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let e=this._parse(t);if(na(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){let e=this._parse(t);return Promise.resolve(e)}parse(t,e){let i=this.safeParse(t,e);if(i.success)return i.data;throw i.error}safeParse(t,e){var i;let n={common:{issues:[],async:(i=e==null?void 0:e.async)!==null&&i!==void 0?i:!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xr(t)},s=this._parseSync({data:t,path:n.path,parent:n});return lb(n,s)}parseAsync(t,e){return q(this,null,function*(){let i=yield this.safeParseAsync(t,e);if(i.success)return i.data;throw i.error})}safeParseAsync(t,e){return q(this,null,function*(){let i={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xr(t)},n=this._parse({data:t,path:i.path,parent:i}),s=yield na(n)?n:Promise.resolve(n);return lb(i,s)})}refine(t,e){let i=n=>typeof e=="string"||typeof e=="undefined"?{message:e}:typeof e=="function"?e(n):e;return this._refinement((n,s)=>{let c=t(n),l=()=>s.addIssue(w({code:$.custom},i(n)));return typeof Promise!="undefined"&&c instanceof Promise?c.then(d=>d?!0:(l(),!1)):c?!0:(l(),!1)})}refinement(t,e){return this._refinement((i,n)=>t(i)?!0:(n.addIssue(typeof e=="function"?e(i,n):e),!1))}_refinement(t){return new jt({schema:this,typeName:ee.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return ri.create(this,this._def)}nullable(){return ki.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ir.create(this,this._def)}promise(){return Ar.create(this,this._def)}or(t){return fn.create([this,t],this._def)}and(t){return mn.create(this,t,this._def)}transform(t){return new jt(N(w({},ce(this._def)),{schema:this,typeName:ee.ZodEffects,effect:{type:"transform",transform:t}}))}default(t){let e=typeof t=="function"?t:()=>t;return new _n(N(w({},ce(this._def)),{innerType:this,defaultValue:e,typeName:ee.ZodDefault}))}brand(){return new oa(w({typeName:ee.ZodBranded,type:this},ce(this._def)))}catch(t){let e=typeof t=="function"?t:()=>t;return new En(N(w({},ce(this._def)),{innerType:this,catchValue:e,typeName:ee.ZodCatch}))}describe(t){let e=this.constructor;return new e(N(w({},this._def),{description:t}))}pipe(t){return sa.create(this,t)}readonly(){return wn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},aL=/^c[^\s-]{8,}$/i,lL=/^[0-9a-z]+$/,cL=/^[0-9A-HJKMNP-TV-Z]{26}$/,uL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,dL=/^[a-z0-9_-]{21}$/i,pL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Hp,mL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gL=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,vL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",yL=new RegExp(`^${pb}$`);function hb(r){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?t=`${t}\\.\\d{${r.precision}}`:r.precision==null&&(t=`${t}(\\.\\d+)?`),t}function bL(r){return new RegExp(`^${hb(r)}$`)}function fb(r){let t=`${pb}T${hb(r)}`,e=[];return e.push(r.local?"Z?":"Z"),r.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function _L(r,t){return!!((t==="v4"||!t)&&mL.test(r)||(t==="v6"||!t)&&gL.test(r))}var Tr=class r extends ue{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==z.string){let s=this._getOrReturnCtx(t);return H(s,{code:$.invalid_type,expected:z.string,received:s.parsedType}),re}let i=new yt,n;for(let s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(n=this._getOrReturnCtx(t,n),H(n,{code:$.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")t.data.length>s.value&&(n=this._getOrReturnCtx(t,n),H(n,{code:$.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){let c=t.data.length>s.value,l=t.data.length<s.value;(c||l)&&(n=this._getOrReturnCtx(t,n),c?H(n,{code:$.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&H(n,{code:$.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")hL.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"email",code:$.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")Hp||(Hp=new RegExp(fL,"u")),Hp.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"emoji",code:$.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")uL.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"uuid",code:$.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")dL.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"nanoid",code:$.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")aL.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"cuid",code:$.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")lL.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"cuid2",code:$.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")cL.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"ulid",code:$.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(t.data)}catch(c){n=this._getOrReturnCtx(t,n),H(n,{validation:"url",code:$.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"regex",code:$.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(t,n),H(n,{code:$.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(n=this._getOrReturnCtx(t,n),H(n,{code:$.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(n=this._getOrReturnCtx(t,n),H(n,{code:$.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?fb(s).test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{code:$.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?yL.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{code:$.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?bL(s).test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{code:$.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?pL.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"duration",code:$.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?_L(t.data,s.version)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"ip",code:$.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?vL.test(t.data)||(n=this._getOrReturnCtx(t,n),H(n,{validation:"base64",code:$.invalid_string,message:s.message}),i.dirty()):Te.assertNever(s);return{status:i.value,value:t.data}}_regex(t,e,i){return this.refinement(n=>t.test(n),w({validation:e,code:$.invalid_string},J.errToObj(i)))}_addCheck(t){return new r(N(w({},this._def),{checks:[...this._def.checks,t]}))}email(t){return this._addCheck(w({kind:"email"},J.errToObj(t)))}url(t){return this._addCheck(w({kind:"url"},J.errToObj(t)))}emoji(t){return this._addCheck(w({kind:"emoji"},J.errToObj(t)))}uuid(t){return this._addCheck(w({kind:"uuid"},J.errToObj(t)))}nanoid(t){return this._addCheck(w({kind:"nanoid"},J.errToObj(t)))}cuid(t){return this._addCheck(w({kind:"cuid"},J.errToObj(t)))}cuid2(t){return this._addCheck(w({kind:"cuid2"},J.errToObj(t)))}ulid(t){return this._addCheck(w({kind:"ulid"},J.errToObj(t)))}base64(t){return this._addCheck(w({kind:"base64"},J.errToObj(t)))}ip(t){return this._addCheck(w({kind:"ip"},J.errToObj(t)))}datetime(t){var e,i;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck(w({kind:"datetime",precision:typeof(t==null?void 0:t.precision)=="undefined"?null:t==null?void 0:t.precision,offset:(e=t==null?void 0:t.offset)!==null&&e!==void 0?e:!1,local:(i=t==null?void 0:t.local)!==null&&i!==void 0?i:!1},J.errToObj(t==null?void 0:t.message)))}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck(w({kind:"time",precision:typeof(t==null?void 0:t.precision)=="undefined"?null:t==null?void 0:t.precision},J.errToObj(t==null?void 0:t.message)))}duration(t){return this._addCheck(w({kind:"duration"},J.errToObj(t)))}regex(t,e){return this._addCheck(w({kind:"regex",regex:t},J.errToObj(e)))}includes(t,e){return this._addCheck(w({kind:"includes",value:t,position:e==null?void 0:e.position},J.errToObj(e==null?void 0:e.message)))}startsWith(t,e){return this._addCheck(w({kind:"startsWith",value:t},J.errToObj(e)))}endsWith(t,e){return this._addCheck(w({kind:"endsWith",value:t},J.errToObj(e)))}min(t,e){return this._addCheck(w({kind:"min",value:t},J.errToObj(e)))}max(t,e){return this._addCheck(w({kind:"max",value:t},J.errToObj(e)))}length(t,e){return this._addCheck(w({kind:"length",value:t},J.errToObj(e)))}nonempty(t){return this.min(1,J.errToObj(t))}trim(){return new r(N(w({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new r(N(w({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new r(N(w({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}};Tr.create=r=>{var t;return new Tr(w({checks:[],typeName:ee.ZodString,coerce:(t=r==null?void 0:r.coerce)!==null&&t!==void 0?t:!1},ce(r)))};function EL(r,t){let e=(r.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=e>i?e:i,s=parseInt(r.toFixed(n).replace(".","")),c=parseInt(t.toFixed(n).replace(".",""));return s%c/Math.pow(10,n)}var ln=class r extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==z.number){let s=this._getOrReturnCtx(t);return H(s,{code:$.invalid_type,expected:z.number,received:s.parsedType}),re}let i,n=new yt;for(let s of this._def.checks)s.kind==="int"?Te.isInteger(t.data)||(i=this._getOrReturnCtx(t,i),H(i,{code:$.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(i=this._getOrReturnCtx(t,i),H(i,{code:$.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(i=this._getOrReturnCtx(t,i),H(i,{code:$.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="multipleOf"?EL(t.data,s.value)!==0&&(i=this._getOrReturnCtx(t,i),H(i,{code:$.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(i=this._getOrReturnCtx(t,i),H(i,{code:$.not_finite,message:s.message}),n.dirty()):Te.assertNever(s);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,J.toString(e))}gt(t,e){return this.setLimit("min",t,!1,J.toString(e))}lte(t,e){return this.setLimit("max",t,!0,J.toString(e))}lt(t,e){return this.setLimit("max",t,!1,J.toString(e))}setLimit(t,e,i,n){return new r(N(w({},this._def),{checks:[...this._def.checks,{kind:t,value:e,inclusive:i,message:J.toString(n)}]}))}_addCheck(t){return new r(N(w({},this._def),{checks:[...this._def.checks,t]}))}int(t){return this._addCheck({kind:"int",message:J.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:J.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:J.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:J.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:J.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:J.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:J.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:J.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:J.toString(t)})}get minValue(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Te.isInteger(t.value))}get isFinite(){let t=null,e=null;for(let i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(e===null||i.value>e)&&(e=i.value):i.kind==="max"&&(t===null||i.value<t)&&(t=i.value)}return Number.isFinite(e)&&Number.isFinite(t)}};ln.create=r=>new ln(w({checks:[],typeName:ee.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1},ce(r)));var cn=class r extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==z.bigint){let s=this._getOrReturnCtx(t);return H(s,{code:$.invalid_type,expected:z.bigint,received:s.parsedType}),re}let i,n=new yt;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(i=this._getOrReturnCtx(t,i),H(i,{code:$.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(i=this._getOrReturnCtx(t,i),H(i,{code:$.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(t,i),H(i,{code:$.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):Te.assertNever(s);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,J.toString(e))}gt(t,e){return this.setLimit("min",t,!1,J.toString(e))}lte(t,e){return this.setLimit("max",t,!0,J.toString(e))}lt(t,e){return this.setLimit("max",t,!1,J.toString(e))}setLimit(t,e,i,n){return new r(N(w({},this._def),{checks:[...this._def.checks,{kind:t,value:e,inclusive:i,message:J.toString(n)}]}))}_addCheck(t){return new r(N(w({},this._def),{checks:[...this._def.checks,t]}))}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:J.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:J.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:J.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:J.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:J.toString(e)})}get minValue(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}};cn.create=r=>{var t;return new cn(w({checks:[],typeName:ee.ZodBigInt,coerce:(t=r==null?void 0:r.coerce)!==null&&t!==void 0?t:!1},ce(r)))};var un=class extends ue{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==z.boolean){let i=this._getOrReturnCtx(t);return H(i,{code:$.invalid_type,expected:z.boolean,received:i.parsedType}),re}return Tt(t.data)}};un.create=r=>new un(w({typeName:ee.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1},ce(r)));var dn=class r extends ue{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==z.date){let s=this._getOrReturnCtx(t);return H(s,{code:$.invalid_type,expected:z.date,received:s.parsedType}),re}if(isNaN(t.data.getTime())){let s=this._getOrReturnCtx(t);return H(s,{code:$.invalid_date}),re}let i=new yt,n;for(let s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(n=this._getOrReturnCtx(t,n),H(n,{code:$.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(n=this._getOrReturnCtx(t,n),H(n,{code:$.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Te.assertNever(s);return{status:i.value,value:new Date(t.data.getTime())}}_addCheck(t){return new r(N(w({},this._def),{checks:[...this._def.checks,t]}))}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:J.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:J.toString(e)})}get minDate(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}};dn.create=r=>new dn(w({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:ee.ZodDate},ce(r)));var Lo=class extends ue{_parse(t){if(this._getType(t)!==z.symbol){let i=this._getOrReturnCtx(t);return H(i,{code:$.invalid_type,expected:z.symbol,received:i.parsedType}),re}return Tt(t.data)}};Lo.create=r=>new Lo(w({typeName:ee.ZodSymbol},ce(r)));var pn=class extends ue{_parse(t){if(this._getType(t)!==z.undefined){let i=this._getOrReturnCtx(t);return H(i,{code:$.invalid_type,expected:z.undefined,received:i.parsedType}),re}return Tt(t.data)}};pn.create=r=>new pn(w({typeName:ee.ZodUndefined},ce(r)));var hn=class extends ue{_parse(t){if(this._getType(t)!==z.null){let i=this._getOrReturnCtx(t);return H(i,{code:$.invalid_type,expected:z.null,received:i.parsedType}),re}return Tt(t.data)}};hn.create=r=>new hn(w({typeName:ee.ZodNull},ce(r)));var Sr=class extends ue{constructor(){super(...arguments),this._any=!0}_parse(t){return Tt(t.data)}};Sr.create=r=>new Sr(w({typeName:ee.ZodAny},ce(r)));var tr=class extends ue{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Tt(t.data)}};tr.create=r=>new tr(w({typeName:ee.ZodUnknown},ce(r)));var yi=class extends ue{_parse(t){let e=this._getOrReturnCtx(t);return H(e,{code:$.invalid_type,expected:z.never,received:e.parsedType}),re}};yi.create=r=>new yi(w({typeName:ee.ZodNever},ce(r)));var Mo=class extends ue{_parse(t){if(this._getType(t)!==z.undefined){let i=this._getOrReturnCtx(t);return H(i,{code:$.invalid_type,expected:z.void,received:i.parsedType}),re}return Tt(t.data)}};Mo.create=r=>new Mo(w({typeName:ee.ZodVoid},ce(r)));var ir=class r extends ue{_parse(t){let{ctx:e,status:i}=this._processInputParams(t),n=this._def;if(e.parsedType!==z.array)return H(e,{code:$.invalid_type,expected:z.array,received:e.parsedType}),re;if(n.exactLength!==null){let c=e.data.length>n.exactLength.value,l=e.data.length<n.exactLength.value;(c||l)&&(H(e,{code:c?$.too_big:$.too_small,minimum:l?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),i.dirty())}if(n.minLength!==null&&e.data.length<n.minLength.value&&(H(e,{code:$.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),i.dirty()),n.maxLength!==null&&e.data.length>n.maxLength.value&&(H(e,{code:$.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),i.dirty()),e.common.async)return Promise.all([...e.data].map((c,l)=>n.type._parseAsync(new ni(e,c,e.path,l)))).then(c=>yt.mergeArray(i,c));let s=[...e.data].map((c,l)=>n.type._parseSync(new ni(e,c,e.path,l)));return yt.mergeArray(i,s)}get element(){return this._def.type}min(t,e){return new r(N(w({},this._def),{minLength:{value:t,message:J.toString(e)}}))}max(t,e){return new r(N(w({},this._def),{maxLength:{value:t,message:J.toString(e)}}))}length(t,e){return new r(N(w({},this._def),{exactLength:{value:t,message:J.toString(e)}}))}nonempty(t){return this.min(1,t)}};ir.create=(r,t)=>new ir(w({type:r,minLength:null,maxLength:null,exactLength:null,typeName:ee.ZodArray},ce(t)));function Oo(r){if(r instanceof Mt){let t={};for(let e in r.shape){let i=r.shape[e];t[e]=ri.create(Oo(i))}return new Mt(N(w({},r._def),{shape:()=>t}))}else return r instanceof ir?new ir(N(w({},r._def),{type:Oo(r.element)})):r instanceof ri?ri.create(Oo(r.unwrap())):r instanceof ki?ki.create(Oo(r.unwrap())):r instanceof Ri?Ri.create(r.items.map(t=>Oo(t))):r}var Mt=class r extends ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),e=Te.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==z.object){let p=this._getOrReturnCtx(t);return H(p,{code:$.invalid_type,expected:z.object,received:p.parsedType}),re}let{status:i,ctx:n}=this._processInputParams(t),{shape:s,keys:c}=this._getCached(),l=[];if(!(this._def.catchall instanceof yi&&this._def.unknownKeys==="strip"))for(let p in n.data)c.includes(p)||l.push(p);let d=[];for(let p of c){let m=s[p],y=n.data[p];d.push({key:{status:"valid",value:p},value:m._parse(new ni(n,y,n.path,p)),alwaysSet:p in n.data})}if(this._def.catchall instanceof yi){let p=this._def.unknownKeys;if(p==="passthrough")for(let m of l)d.push({key:{status:"valid",value:m},value:{status:"valid",value:n.data[m]}});else if(p==="strict")l.length>0&&(H(n,{code:$.unrecognized_keys,keys:l}),i.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let m of l){let y=n.data[m];d.push({key:{status:"valid",value:m},value:p._parse(new ni(n,y,n.path,m)),alwaysSet:m in n.data})}}return n.common.async?Promise.resolve().then(()=>q(this,null,function*(){let p=[];for(let m of d){let y=yield m.key,E=yield m.value;p.push({key:y,value:E,alwaysSet:m.alwaysSet})}return p})).then(p=>yt.mergeObjectSync(i,p)):yt.mergeObjectSync(i,d)}get shape(){return this._def.shape()}strict(t){return J.errToObj,new r(w(N(w({},this._def),{unknownKeys:"strict"}),t!==void 0?{errorMap:(e,i)=>{var n,s,c,l;let d=(c=(s=(n=this._def).errorMap)===null||s===void 0?void 0:s.call(n,e,i).message)!==null&&c!==void 0?c:i.defaultError;return e.code==="unrecognized_keys"?{message:(l=J.errToObj(t).message)!==null&&l!==void 0?l:d}:{message:d}}}:{}))}strip(){return new r(N(w({},this._def),{unknownKeys:"strip"}))}passthrough(){return new r(N(w({},this._def),{unknownKeys:"passthrough"}))}extend(t){return new r(N(w({},this._def),{shape:()=>w(w({},this._def.shape()),t)}))}merge(t){return new r({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>w(w({},this._def.shape()),t._def.shape()),typeName:ee.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new r(N(w({},this._def),{catchall:t}))}pick(t){let e={};return Te.objectKeys(t).forEach(i=>{t[i]&&this.shape[i]&&(e[i]=this.shape[i])}),new r(N(w({},this._def),{shape:()=>e}))}omit(t){let e={};return Te.objectKeys(this.shape).forEach(i=>{t[i]||(e[i]=this.shape[i])}),new r(N(w({},this._def),{shape:()=>e}))}deepPartial(){return Oo(this)}partial(t){let e={};return Te.objectKeys(this.shape).forEach(i=>{let n=this.shape[i];t&&!t[i]?e[i]=n:e[i]=n.optional()}),new r(N(w({},this._def),{shape:()=>e}))}required(t){let e={};return Te.objectKeys(this.shape).forEach(i=>{if(t&&!t[i])e[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof ri;)s=s._def.innerType;e[i]=s}}),new r(N(w({},this._def),{shape:()=>e}))}keyof(){return mb(Te.objectKeys(this.shape))}};Mt.create=(r,t)=>new Mt(w({shape:()=>r,unknownKeys:"strip",catchall:yi.create(),typeName:ee.ZodObject},ce(t)));Mt.strictCreate=(r,t)=>new Mt(w({shape:()=>r,unknownKeys:"strict",catchall:yi.create(),typeName:ee.ZodObject},ce(t)));Mt.lazycreate=(r,t)=>new Mt(w({shape:r,unknownKeys:"strip",catchall:yi.create(),typeName:ee.ZodObject},ce(t)));var fn=class extends ue{_parse(t){let{ctx:e}=this._processInputParams(t),i=this._def.options;function n(s){for(let l of s)if(l.result.status==="valid")return l.result;for(let l of s)if(l.result.status==="dirty")return e.common.issues.push(...l.ctx.common.issues),l.result;let c=s.map(l=>new Vt(l.ctx.common.issues));return H(e,{code:$.invalid_union,unionErrors:c}),re}if(e.common.async)return Promise.all(i.map(s=>q(this,null,function*(){let c=N(w({},e),{common:N(w({},e.common),{issues:[]}),parent:null});return{result:yield s._parseAsync({data:e.data,path:e.path,parent:c}),ctx:c}}))).then(n);{let s,c=[];for(let d of i){let p=N(w({},e),{common:N(w({},e.common),{issues:[]}),parent:null}),m=d._parseSync({data:e.data,path:e.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!s&&(s={result:m,ctx:p}),p.common.issues.length&&c.push(p.common.issues)}if(s)return e.common.issues.push(...s.ctx.common.issues),s.result;let l=c.map(d=>new Vt(d));return H(e,{code:$.invalid_union,unionErrors:l}),re}}get options(){return this._def.options}};fn.create=(r,t)=>new fn(w({options:r,typeName:ee.ZodUnion},ce(t)));var er=r=>r instanceof gn?er(r.schema):r instanceof jt?er(r.innerType()):r instanceof vn?[r.value]:r instanceof yn?r.options:r instanceof bn?Te.objectValues(r.enum):r instanceof _n?er(r._def.innerType):r instanceof pn?[void 0]:r instanceof hn?[null]:r instanceof ri?[void 0,...er(r.unwrap())]:r instanceof ki?[null,...er(r.unwrap())]:r instanceof oa||r instanceof wn?er(r.unwrap()):r instanceof En?er(r._def.innerType):[],Nc=class r extends ue{_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==z.object)return H(e,{code:$.invalid_type,expected:z.object,received:e.parsedType}),re;let i=this.discriminator,n=e.data[i],s=this.optionsMap.get(n);return s?e.common.async?s._parseAsync({data:e.data,path:e.path,parent:e}):s._parseSync({data:e.data,path:e.path,parent:e}):(H(e,{code:$.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),re)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,i){let n=new Map;for(let s of e){let c=er(s.shape[t]);if(!c.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let l of c){if(n.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);n.set(l,s)}}return new r(w({typeName:ee.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:n},ce(i)))}};function jp(r,t){let e=xr(r),i=xr(t);if(r===t)return{valid:!0,data:r};if(e===z.object&&i===z.object){let n=Te.objectKeys(t),s=Te.objectKeys(r).filter(l=>n.indexOf(l)!==-1),c=w(w({},r),t);for(let l of s){let d=jp(r[l],t[l]);if(!d.valid)return{valid:!1};c[l]=d.data}return{valid:!0,data:c}}else if(e===z.array&&i===z.array){if(r.length!==t.length)return{valid:!1};let n=[];for(let s=0;s<r.length;s++){let c=r[s],l=t[s],d=jp(c,l);if(!d.valid)return{valid:!1};n.push(d.data)}return{valid:!0,data:n}}else return e===z.date&&i===z.date&&+r==+t?{valid:!0,data:r}:{valid:!1}}var mn=class extends ue{_parse(t){let{status:e,ctx:i}=this._processInputParams(t),n=(s,c)=>{if(Gp(s)||Gp(c))return re;let l=jp(s.value,c.value);return l.valid?((Vp(s)||Vp(c))&&e.dirty(),{status:e.value,value:l.data}):(H(i,{code:$.invalid_intersection_types}),re)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,c])=>n(s,c)):n(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}};mn.create=(r,t,e)=>new mn(w({left:r,right:t,typeName:ee.ZodIntersection},ce(e)));var Ri=class r extends ue{_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==z.array)return H(i,{code:$.invalid_type,expected:z.array,received:i.parsedType}),re;if(i.data.length<this._def.items.length)return H(i,{code:$.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),re;!this._def.rest&&i.data.length>this._def.items.length&&(H(i,{code:$.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());let s=[...i.data].map((c,l)=>{let d=this._def.items[l]||this._def.rest;return d?d._parse(new ni(i,c,i.path,l)):null}).filter(c=>!!c);return i.common.async?Promise.all(s).then(c=>yt.mergeArray(e,c)):yt.mergeArray(e,s)}get items(){return this._def.items}rest(t){return new r(N(w({},this._def),{rest:t}))}};Ri.create=(r,t)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ri(w({items:r,typeName:ee.ZodTuple,rest:null},ce(t)))};var Dc=class r extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==z.object)return H(i,{code:$.invalid_type,expected:z.object,received:i.parsedType}),re;let n=[],s=this._def.keyType,c=this._def.valueType;for(let l in i.data)n.push({key:s._parse(new ni(i,l,i.path,l)),value:c._parse(new ni(i,i.data[l],i.path,l)),alwaysSet:l in i.data});return i.common.async?yt.mergeObjectAsync(e,n):yt.mergeObjectSync(e,n)}get element(){return this._def.valueType}static create(t,e,i){return e instanceof ue?new r(w({keyType:t,valueType:e,typeName:ee.ZodRecord},ce(i))):new r(w({keyType:Tr.create(),valueType:t,typeName:ee.ZodRecord},ce(e)))}},Ro=class extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==z.map)return H(i,{code:$.invalid_type,expected:z.map,received:i.parsedType}),re;let n=this._def.keyType,s=this._def.valueType,c=[...i.data.entries()].map(([l,d],p)=>({key:n._parse(new ni(i,l,i.path,[p,"key"])),value:s._parse(new ni(i,d,i.path,[p,"value"]))}));if(i.common.async){let l=new Map;return Promise.resolve().then(()=>q(this,null,function*(){for(let d of c){let p=yield d.key,m=yield d.value;if(p.status==="aborted"||m.status==="aborted")return re;(p.status==="dirty"||m.status==="dirty")&&e.dirty(),l.set(p.value,m.value)}return{status:e.value,value:l}}))}else{let l=new Map;for(let d of c){let p=d.key,m=d.value;if(p.status==="aborted"||m.status==="aborted")return re;(p.status==="dirty"||m.status==="dirty")&&e.dirty(),l.set(p.value,m.value)}return{status:e.value,value:l}}}};Ro.create=(r,t,e)=>new Ro(w({valueType:t,keyType:r,typeName:ee.ZodMap},ce(e)));var ko=class r extends ue{_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==z.set)return H(i,{code:$.invalid_type,expected:z.set,received:i.parsedType}),re;let n=this._def;n.minSize!==null&&i.data.size<n.minSize.value&&(H(i,{code:$.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),e.dirty()),n.maxSize!==null&&i.data.size>n.maxSize.value&&(H(i,{code:$.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),e.dirty());let s=this._def.valueType;function c(d){let p=new Set;for(let m of d){if(m.status==="aborted")return re;m.status==="dirty"&&e.dirty(),p.add(m.value)}return{status:e.value,value:p}}let l=[...i.data.values()].map((d,p)=>s._parse(new ni(i,d,i.path,p)));return i.common.async?Promise.all(l).then(d=>c(d)):c(l)}min(t,e){return new r(N(w({},this._def),{minSize:{value:t,message:J.toString(e)}}))}max(t,e){return new r(N(w({},this._def),{maxSize:{value:t,message:J.toString(e)}}))}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}};ko.create=(r,t)=>new ko(w({valueType:r,minSize:null,maxSize:null,typeName:ee.ZodSet},ce(t)));var Fc=class r extends ue{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==z.function)return H(e,{code:$.invalid_type,expected:z.function,received:e.parsedType}),re;function i(l,d){return Rc({data:l,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Mc(),Io].filter(p=>!!p),issueData:{code:$.invalid_arguments,argumentsError:d}})}function n(l,d){return Rc({data:l,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Mc(),Io].filter(p=>!!p),issueData:{code:$.invalid_return_type,returnTypeError:d}})}let s={errorMap:e.common.contextualErrorMap},c=e.data;if(this._def.returns instanceof Ar){let l=this;return Tt(function(...d){return q(this,null,function*(){let p=new Vt([]),m=yield l._def.args.parseAsync(d,s).catch(x=>{throw p.addIssue(i(d,x)),p}),y=yield Reflect.apply(c,this,m);return yield l._def.returns._def.type.parseAsync(y,s).catch(x=>{throw p.addIssue(n(y,x)),p})})})}else{let l=this;return Tt(function(...d){let p=l._def.args.safeParse(d,s);if(!p.success)throw new Vt([i(d,p.error)]);let m=Reflect.apply(c,this,p.data),y=l._def.returns.safeParse(m,s);if(!y.success)throw new Vt([n(m,y.error)]);return y.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new r(N(w({},this._def),{args:Ri.create(t).rest(tr.create())}))}returns(t){return new r(N(w({},this._def),{returns:t}))}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,i){return new r(w({args:t||Ri.create([]).rest(tr.create()),returns:e||tr.create(),typeName:ee.ZodFunction},ce(i)))}},gn=class extends ue{get schema(){return this._def.getter()}_parse(t){let{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};gn.create=(r,t)=>new gn(w({getter:r,typeName:ee.ZodLazy},ce(t)));var vn=class extends ue{_parse(t){if(t.data!==this._def.value){let e=this._getOrReturnCtx(t);return H(e,{received:e.data,code:$.invalid_literal,expected:this._def.value}),re}return{status:"valid",value:t.data}}get value(){return this._def.value}};vn.create=(r,t)=>new vn(w({value:r,typeName:ee.ZodLiteral},ce(t)));function mb(r,t){return new yn(w({values:r,typeName:ee.ZodEnum},ce(t)))}var yn=class r extends ue{constructor(){super(...arguments),ta.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let e=this._getOrReturnCtx(t),i=this._def.values;return H(e,{expected:Te.joinValues(i),received:e.parsedType,code:$.invalid_type}),re}if(kc(this,ta,"f")||db(this,ta,new Set(this._def.values),"f"),!kc(this,ta,"f").has(t.data)){let e=this._getOrReturnCtx(t),i=this._def.values;return H(e,{received:e.data,code:$.invalid_enum_value,options:i}),re}return Tt(t.data)}get options(){return this._def.values}get enum(){let t={};for(let e of this._def.values)t[e]=e;return t}get Values(){let t={};for(let e of this._def.values)t[e]=e;return t}get Enum(){let t={};for(let e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return r.create(t,w(w({},this._def),e))}exclude(t,e=this._def){return r.create(this.options.filter(i=>!t.includes(i)),w(w({},this._def),e))}};ta=new WeakMap;yn.create=mb;var bn=class extends ue{constructor(){super(...arguments),ia.set(this,void 0)}_parse(t){let e=Te.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(t);if(i.parsedType!==z.string&&i.parsedType!==z.number){let n=Te.objectValues(e);return H(i,{expected:Te.joinValues(n),received:i.parsedType,code:$.invalid_type}),re}if(kc(this,ia,"f")||db(this,ia,new Set(Te.getValidEnumValues(this._def.values)),"f"),!kc(this,ia,"f").has(t.data)){let n=Te.objectValues(e);return H(i,{received:i.data,code:$.invalid_enum_value,options:n}),re}return Tt(t.data)}get enum(){return this._def.values}};ia=new WeakMap;bn.create=(r,t)=>new bn(w({values:r,typeName:ee.ZodNativeEnum},ce(t)));var Ar=class extends ue{unwrap(){return this._def.type}_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==z.promise&&e.common.async===!1)return H(e,{code:$.invalid_type,expected:z.promise,received:e.parsedType}),re;let i=e.parsedType===z.promise?e.data:Promise.resolve(e.data);return Tt(i.then(n=>this._def.type.parseAsync(n,{path:e.path,errorMap:e.common.contextualErrorMap})))}};Ar.create=(r,t)=>new Ar(w({type:r,typeName:ee.ZodPromise},ce(t)));var jt=class extends ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:e,ctx:i}=this._processInputParams(t),n=this._def.effect||null,s={addIssue:c=>{H(i,c),c.fatal?e.abort():e.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),n.type==="preprocess"){let c=n.transform(i.data,s);if(i.common.async)return Promise.resolve(c).then(l=>q(this,null,function*(){if(e.value==="aborted")return re;let d=yield this._def.schema._parseAsync({data:l,path:i.path,parent:i});return d.status==="aborted"?re:d.status==="dirty"||e.value==="dirty"?Co(d.value):d}));{if(e.value==="aborted")return re;let l=this._def.schema._parseSync({data:c,path:i.path,parent:i});return l.status==="aborted"?re:l.status==="dirty"||e.value==="dirty"?Co(l.value):l}}if(n.type==="refinement"){let c=l=>{let d=n.refinement(l,s);if(i.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(i.common.async===!1){let l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?re:(l.status==="dirty"&&e.dirty(),c(l.value),{status:e.value,value:l.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>l.status==="aborted"?re:(l.status==="dirty"&&e.dirty(),c(l.value).then(()=>({status:e.value,value:l.value}))))}if(n.type==="transform")if(i.common.async===!1){let c=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!ra(c))return c;let l=n.transform(c.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:l}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(c=>ra(c)?Promise.resolve(n.transform(c.value,s)).then(l=>({status:e.value,value:l})):c);Te.assertNever(n)}};jt.create=(r,t,e)=>new jt(w({schema:r,typeName:ee.ZodEffects,effect:t},ce(e)));jt.createWithPreprocess=(r,t,e)=>new jt(w({schema:t,effect:{type:"preprocess",transform:r},typeName:ee.ZodEffects},ce(e)));var ri=class extends ue{_parse(t){return this._getType(t)===z.undefined?Tt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};ri.create=(r,t)=>new ri(w({innerType:r,typeName:ee.ZodOptional},ce(t)));var ki=class extends ue{_parse(t){return this._getType(t)===z.null?Tt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};ki.create=(r,t)=>new ki(w({innerType:r,typeName:ee.ZodNullable},ce(t)));var _n=class extends ue{_parse(t){let{ctx:e}=this._processInputParams(t),i=e.data;return e.parsedType===z.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};_n.create=(r,t)=>new _n(w({innerType:r,typeName:ee.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default},ce(t)));var En=class extends ue{_parse(t){let{ctx:e}=this._processInputParams(t),i=N(w({},e),{common:N(w({},e.common),{issues:[]})}),n=this._def.innerType._parse({data:i.data,path:i.path,parent:w({},i)});return na(n)?n.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vt(i.common.issues)},input:i.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Vt(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}};En.create=(r,t)=>new En(w({innerType:r,typeName:ee.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch},ce(t)));var No=class extends ue{_parse(t){if(this._getType(t)!==z.nan){let i=this._getOrReturnCtx(t);return H(i,{code:$.invalid_type,expected:z.nan,received:i.parsedType}),re}return{status:"valid",value:t.data}}};No.create=r=>new No(w({typeName:ee.ZodNaN},ce(r)));var wL=Symbol("zod_brand"),oa=class extends ue{_parse(t){let{ctx:e}=this._processInputParams(t),i=e.data;return this._def.type._parse({data:i,path:e.path,parent:e})}unwrap(){return this._def.type}},sa=class r extends ue{_parse(t){let{status:e,ctx:i}=this._processInputParams(t);if(i.common.async)return q(this,null,function*(){let s=yield this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?re:s.status==="dirty"?(e.dirty(),Co(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})});{let n=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return n.status==="aborted"?re:n.status==="dirty"?(e.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:i.path,parent:i})}}static create(t,e){return new r({in:t,out:e,typeName:ee.ZodPipeline})}},wn=class extends ue{_parse(t){let e=this._def.innerType._parse(t),i=n=>(ra(n)&&(n.value=Object.freeze(n.value)),n);return na(e)?e.then(n=>i(n)):i(e)}unwrap(){return this._def.innerType}};wn.create=(r,t)=>new wn(w({innerType:r,typeName:ee.ZodReadonly},ce(t)));function gb(r,t={},e){return r?Sr.create().superRefine((i,n)=>{var s,c;if(!r(i)){let l=typeof t=="function"?t(i):typeof t=="string"?{message:t}:t,d=(c=(s=l.fatal)!==null&&s!==void 0?s:e)!==null&&c!==void 0?c:!0,p=typeof l=="string"?{message:l}:l;n.addIssue(N(w({code:"custom"},p),{fatal:d}))}}):Sr.create()}var xL={object:Mt.lazycreate},ee;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(ee||(ee={}));var TL=(r,t={message:`Input not instance of ${r.name}`})=>gb(e=>e instanceof r,t),vb=Tr.create,yb=ln.create,SL=No.create,AL=cn.create,bb=un.create,PL=dn.create,OL=Lo.create,CL=pn.create,IL=hn.create,LL=Sr.create,ML=tr.create,RL=yi.create,kL=Mo.create,NL=ir.create,DL=Mt.create,FL=Mt.strictCreate,$L=fn.create,BL=Nc.create,WL=mn.create,UL=Ri.create,HL=Dc.create,zL=Ro.create,GL=ko.create,VL=Fc.create,jL=gn.create,qL=vn.create,ZL=yn.create,JL=bn.create,YL=Ar.create,cb=jt.create,KL=ri.create,XL=ki.create,QL=jt.createWithPreprocess,eM=sa.create,tM=()=>vb().optional(),iM=()=>yb().optional(),rM=()=>bb().optional(),nM={string:r=>Tr.create(N(w({},r),{coerce:!0})),number:r=>ln.create(N(w({},r),{coerce:!0})),boolean:r=>un.create(N(w({},r),{coerce:!0})),bigint:r=>cn.create(N(w({},r),{coerce:!0})),date:r=>dn.create(N(w({},r),{coerce:!0}))},oM=re,Ni=Object.freeze({__proto__:null,defaultErrorMap:Io,setErrorMap:oL,getErrorMap:Mc,makeIssue:Rc,EMPTY_PATH:sL,addIssueToContext:H,ParseStatus:yt,INVALID:re,DIRTY:Co,OK:Tt,isAborted:Gp,isDirty:Vp,isValid:ra,isAsync:na,get util(){return Te},get objectUtil(){return zp},ZodParsedType:z,getParsedType:xr,ZodType:ue,datetimeRegex:fb,ZodString:Tr,ZodNumber:ln,ZodBigInt:cn,ZodBoolean:un,ZodDate:dn,ZodSymbol:Lo,ZodUndefined:pn,ZodNull:hn,ZodAny:Sr,ZodUnknown:tr,ZodNever:yi,ZodVoid:Mo,ZodArray:ir,ZodObject:Mt,ZodUnion:fn,ZodDiscriminatedUnion:Nc,ZodIntersection:mn,ZodTuple:Ri,ZodRecord:Dc,ZodMap:Ro,ZodSet:ko,ZodFunction:Fc,ZodLazy:gn,ZodLiteral:vn,ZodEnum:yn,ZodNativeEnum:bn,ZodPromise:Ar,ZodEffects:jt,ZodTransformer:jt,ZodOptional:ri,ZodNullable:ki,ZodDefault:_n,ZodCatch:En,ZodNaN:No,BRAND:wL,ZodBranded:oa,ZodPipeline:sa,ZodReadonly:wn,custom:gb,Schema:ue,ZodSchema:ue,late:xL,get ZodFirstPartyTypeKind(){return ee},coerce:nM,any:LL,array:NL,bigint:AL,boolean:bb,date:PL,discriminatedUnion:BL,effect:cb,enum:ZL,function:VL,instanceof:TL,intersection:WL,lazy:jL,literal:qL,map:zL,nan:SL,nativeEnum:JL,never:RL,null:IL,nullable:XL,number:yb,object:DL,oboolean:rM,onumber:iM,optional:KL,ostring:tM,pipeline:eM,preprocess:QL,promise:YL,record:HL,set:GL,strictObject:FL,string:vb,symbol:OL,transformer:cb,tuple:UL,undefined:CL,union:$L,unknown:ML,void:kL,NEVER:oM,ZodIssueCode:$,quotelessJson:nL,ZodError:Vt});var xH=Ni.object({name:Ni.string(),user:Ni.object({id:Ni.string(),name:Ni.string()}),maxConnections:Ni.union([Ni.number(),Ni.literal("unlimited"),Ni.undefined()])});f();var qp=(I=>(I[I.turquoise=0]="turquoise",I[I.orange=1]="orange",I[I.blue=2]="blue",I[I.pink=3]="pink",I[I.purple=4]="purple",I[I.green=5]="green",I[I.red=6]="red",I[I.bluedark=7]="bluedark",I[I.pinklight=8]="pinklight",I[I.purplelight=9]="purplelight",I[I.greenlight=10]="greenlight",I[I.orangelight=11]="orangelight",I[I.bluelight=12]="bluelight",I[I.redlight=13]="redlight",I[I.brown=14]="brown",I[I.yellow=15]="yellow",I[I.gray=16]="gray",I))(qp||{}),Fo=[1,3,4,6,7,14,16],$o=(r=>(r[r["#31E0B0"]=0]="#31E0B0",r[r["#FF5E10"]=1]="#FF5E10",r[r["#00ABF7"]=2]="#00ABF7",r[r["#FF00BB"]=3]="#FF00BB",r[r["#9C29FF"]=4]="#9C29FF",r[r["#6FDD00"]=5]="#6FDD00",r[r["#E30000"]=6]="#E30000",r[r["#304AFF"]=7]="#304AFF",r[r["#FF89C4"]=8]="#FF89C4",r[r["#D597FF"]=9]="#D597FF",r[r["#C6EC5C"]=10]="#C6EC5C",r[r["#FFA115"]=11]="#FFA115",r[r["#75DEFE"]=12]="#75DEFE",r[r["#FAA291"]=13]="#FAA291",r[r["#BB813F"]=14]="#BB813F",r[r["#FFEF33"]=15]="#FFEF33",r[r["#878291"]=16]="#878291",r))($o||{});f();var Di=fi(_b()),la=class{constructor(){this.browser=Di.default.getParser(navigator.userAgent)}get clientStats(){return this.browser.getResult()}get isFirefox(){return this.browser.isBrowser(Di.default.BROWSER_MAP.firefox)}get isSafari(){return this.browser.isBrowser(Di.default.BROWSER_MAP.safari)}get isChrome(){return this.browser.isBrowser(Di.default.BROWSER_MAP.chrome)}get isIE(){return this.browser.isBrowser(Di.default.BROWSER_MAP.ie)}get isEdge(){return this.browser.isBrowser(Di.default.BROWSER_MAP.edge)}get isMobileDevice(){return(this.browser.is(Di.default.PLATFORMS_MAP.mobile)||this.browser.is(Di.default.PLATFORMS_MAP.tablet))&&!navigator.userAgent.match(/iPad/i)}get isTabletDevice(){return this.browser.is(Di.default.PLATFORMS_MAP.tablet)}get isAndroid(){return this.isMobileDevice&&!!navigator.userAgent.match(/Android/i)}get isIpad(){return!!navigator.userAgent.match(/iPad/i)}get isIphone(){return this.isMobileDevice&&!!navigator.userAgent.match(/iPhone/i)}get isAppleMobileDevice(){return this.isIpad||this.isIphone}};f();var $c=class{constructor(){this.updateMeetingConnectionStatus=t=>{this.oldConnectionStatus=this.connectionStatus,this.connectionStatus=t,this.connectionStatusObserver.publish(t),this.logger.log("CONNECTION STATUS CHANGE",t)};this.onUpdateBrowserOnlineStatus=t=>{let{type:e}=t;if(e==="online"){this.updateMeetingConnectionStatus(1);return}this.updateMeetingConnectionStatus(4)};this.logger=new he("@superviz/sdk/connection-service"),this.connectionStatus=0,this.connectionStatusObserver=new xe({logger:this.logger})}addListeners(){window.addEventListener("online",this.onUpdateBrowserOnlineStatus),window.addEventListener("offline",this.onUpdateBrowserOnlineStatus)}removeListeners(){window.removeEventListener("online",this.onUpdateBrowserOnlineStatus),window.removeEventListener("offline",this.onUpdateBrowserOnlineStatus)}};f();f();var Bc=class{constructor(t,e,i){this.myParticipant={};this.localRoomProperties=null;this.drawingData=null;this.state=0;this.MESSAGE_SIZE_LIMIT=6e4;this.useStore=Ze.bind(this);this.join=()=>{this.room.presence.on("presence.leave",this.onParticipantLeave),this.room.presence.on("presence.joined-room",this.onPresenceEnter),this.enableSync&&(this.room.on("update",this.updateLocalRoomState),this.drawingRoom.presence.on("presence.update",this.updateDrawing))};this.updateMyProperties=t=>{let e=t!=null?t:{};this.isMessageTooBig(e)||this.left||!this.enableSync||this.isSyncFrozen||(e.avatar===void 0&&delete e.avatar,this.myParticipant=w(w({},this.myParticipant),e),this.room.presence.update(this.myParticipant),this.logger.log("REALTIME","updating my properties",this.myParticipant))};this.isMessageTooBig=(t,e=this.MESSAGE_SIZE_LIMIT)=>{let i=JSON.stringify(t);return new TextEncoder().encode(i).length>e?(this.logger.log("Message too long, the message limit size is 60kb."),!0):!1};this.updateRoomProperties=t=>{if(this.isMessageTooBig(t)||this.isSyncFrozen||this.left)return;let e=w(w({},this.localRoomProperties),t);this.localRoomProperties=e,this.room.emit("update",e)};this.updateDrawingProperties=t=>{this.isMessageTooBig(t)||this.isSyncFrozen||this.left||(this.drawingData=w(w({},this.drawingData),t),this.drawingRoom.presence.update(this.drawingData))};this.setHost=t=>{this.updateRoomProperties({hostClientId:t})};this.setKickParticipant=t=>{if(!t)return;let{participants:e}=Ze("global-store"),i=e.value[t];this.updateRoomProperties({kickParticipant:i})};this.initializeRoomProperties=()=>{let t={isGridModeEnabled:!1,hostClientId:null,followParticipantId:null,gather:!1,transcript:"transcript.stop",kickParticipant:null};this.localRoomProperties=t,this.updateRoomProperties(t)};this.onParticipantLeave=t=>{var i;t.id===this.myParticipant.id&&(this.left=!0),t.id===((i=this.localRoomProperties)==null?void 0:i.followParticipantId)&&this.setFollowParticipant()};this.start=()=>q(this,null,function*(){this.started||(this.started=!0,this.room.isJoined||(this.logger.log("room state service - not joined room yet"),setTimeout(()=>{this.logger.log("room state service - retrying"),this.start()},2e3)),this.localRoomProperties=yield this.fetchRoomProperties(),this.localRoomProperties?this.updateLocalRoomState({data:this.localRoomProperties}):this.initializeRoomProperties(),this.publishStateUpdate(4),this.logger.log("REALTIME","Joined realtime room"))});this.onPresenceEnter=()=>{this.updateMyProperties()};this.updateLocalRoomState=e=>q(this,[e],function*({data:t}){this.logger.log("REALTIME","Room update received",t),this.localRoomProperties=Object.assign({},this.localRoomProperties,t);let{followParticipantId:i,gather:n,hostId:s,isGridModeEnabled:c,transcript:l}=this.useStore("video-store");i.publish(t.followParticipantId),n.publish(t.gather),s.publish(t.hostClientId),c.publish(t.isGridModeEnabled),l.publish(t.transcript),t.kickParticipant&&t.kickParticipant.id===this.myParticipant.id&&(this.updateRoomProperties({kickParticipant:null}),this.kickParticipantObserver.publish(this.myParticipant.id))});this.updateDrawing=t=>{if(t.id===this.myParticipant.id)return;let{drawing:e}=this.useStore("video-store");e.publish(t.data)};this.freezeSync=t=>{if(this.isSyncFrozen=t,t){this.destroy();return}this.join()};this.room=t,this.drawingRoom=e,this.logger=i,this.kickParticipantObserver=new xe({logger:this.logger});let{localParticipant:n,participants:s}=this.useStore("global-store");n.subscribe(c=>{this.enableSync=c.type!=="audience",this.myParticipant=w(w({},this.myParticipant),c)}),s.subscribe(),this.join()}setGridMode(t){this.updateRoomProperties({isGridModeEnabled:t})}setDrawing(t){this.updateDrawingProperties(t)}setTranscript(t){this.updateRoomProperties({transcript:t})}fetchRoomProperties(){return q(this,null,function*(){if((yield new Promise(s=>{this.room.presence.get(c=>{c||s(0),s(c.length)})}))<=1)return null;let e=yield new Promise((s,c)=>{this.room.history(l=>{l||c(l),l.events.length||s(null);let d=l.events.pop();s(d)})}),i=1e3*60*60,n=(e==null?void 0:e.timestamp)<Date.now()-i;return!(e!=null&&e.data)||n?null:e.data})}publishStateUpdate(t){if(this.state===t)return;this.state=t,this.logger.log("REALTIME",`Realtime state did change. New state: ${_c[this.state]}`);let{meetingState:e}=this.useStore("video-store");e.publish(this.state)}setFollowParticipant(t){this.updateRoomProperties({followParticipantId:t})}setGather(t){this.updateRoomProperties({gather:t})}destroy(){this.room.presence.off("presence.leave"),this.room.presence.off("presence.joined-room"),this.room.off("update",this.updateLocalRoomState)}};f();f();var Wc=class{build(t,e,i,n={},s={}){let c=document.querySelector(`#${t}`),l=new URL(e);if(this.wrapperId||this.element)throw new Error("Tried to initialize two frames with the same FrameBricklayer instance");this.element=document.createElement("iframe"),Object.entries(n).forEach(([d,p])=>{l.searchParams.set(d,p)}),Object.entries(s).forEach(([d,p])=>{this.element.setAttribute(d,p)}),this.element.src=l.toString(),this.element.id=i,c.appendChild(this.element),this.wrapperId=t}destroy(){if(!this.wrapperId)throw new Error("Tried to destroy a frame before it was initialized");let t=document.querySelector(`#${this.wrapperId}`);t&&t.querySelector(`#${this.element.id}`)&&t.removeChild(this.element),this.wrapperId=null,this.element=null}};f();var Uc=class{constructor(t){this.observers={};this.sourceBlockList=["vue-devtools-proxy","vue-devtools-backend"];this.originBlockList=["https://sketchfab.com"];this.publish=(t,e={})=>{this.logger.log("MessageBridge","Posting message to frame",t,e),this.contentWindow.postMessage({type:t,data:e},this.allowedOrigins)};this.listen=(t,e)=>{this.observers[t]||(this.observers[t]=new xe({logger:this.logger})),this.observers[t].subscribe(e)};this.onReceiveMessage=t=>{let{type:e,data:i,source:n}=t.data;if(this.sourceBlockList.includes(n)||this.originBlockList.includes(t.origin))return;let s=!!e,c=!this.domains.length||this.domains.includes(t.origin),l=this.observers.hasOwnProperty(e);if(this.logger.log("MessageBridge",`Message received -
        TYPE: ${t.type}
        ORIGIN: ${t.origin}
        DATA: ${JSON.stringify(t.data)} `),!s||!c||!l){this.logger.log("MessageBridge","Message discarded");return}this.observers[e].publish(i)};let{contentWindow:e,domains:i=[],allowedOrigins:n="*",sourceBlockList:s=[],logger:c}=t;if(this.logger=c,this.domains=i,this.allowedOrigins=n,this.sourceBlockList.push(...s),typeof window=="undefined")throw new Error("MessageBridge: window is undefined");this.contentWindow=e,window.addEventListener("message",this.onReceiveMessage)}destroy(){Object.entries(this.observers).forEach(([t,e])=>{e.reset(),delete this.observers[t]}),window.removeEventListener("message",this.onReceiveMessage),delete this.logger,delete this.allowedOrigins,delete this.contentWindow,delete this.domains,delete this.observers,delete this.sourceBlockList}};f();var ca=(i=>(i.RIGHT="right",i.CENTER="center",i.LEFT="left",i))(ca||{}),Hc=(e=>(e.GRID="grid",e.LIST="list",e))(Hc||{}),zc=(n=>(n.RIGHT="right",n.LEFT="left",n.TOP="top",n.BOTTOM="bottom",n))(zc||{});var Eb="sv-video-frame",ua=class{constructor(t){this.logger=new he("@superviz/sdk/video-conference-manager");this.frameStateObserver=new xe({logger:this.logger});this.frameSizeObserver=new xe({logger:this.logger});this.waitingForHostObserver=new xe({logger:this.logger});this.realtimeEventsObserver=new xe({logger:this.logger});this.sameAccountErrorObserver=new xe({logger:this.logger});this.devicesObserver=new xe({logger:this.logger});this.meetingStateObserver=new xe({logger:this.logger});this.meetingConnectionObserver=new xe({logger:this.logger});this.participantJoinedObserver=new xe({logger:this.logger});this.participantLeftObserver=new xe({logger:this.logger});this.participantListObserver=new xe({logger:this.logger});this.frameState=0;this.layoutModalsAndCamerasConfig=(t,e)=>{let i=t,n=e,s=["left","right","bottom","top"].includes(n),c=["left","right","center"].includes(i);return s||(n="right"),c||(i="right"),this.browserService.isMobileDevice?(n="bottom",{layoutPosition:i,camerasPosition:n}):(i==="left"&&n==="right"&&(i="right"),i==="right"&&n==="left"&&(i="left"),{layoutPosition:i,camerasPosition:n})};this.onFrameLoad=()=>{this.messageBridge=new Uc({logger:this.logger,contentWindow:this.bricklayer.element.contentWindow}),this.addMessagesListeners(),this.updateFrameState(2),this.updateFrameLocale(),this.updateMeetingAvatars(),this.onWindowResize(),this.setCustomColors(),this.setCallbacks()};this.setFrameOffset=t=>{let e=t!=null?t:{};["top","bottom","left","right"].forEach(i=>{Object.keys(e).includes(i)||(e[i]=0)}),this.frameOffset=e};this.setCustomColors=()=>{this.customColors&&this.messageBridge.publish("frame.color-list-update",this.customColors),this.styles&&this.messageBridge.publish("frame.styles-update",this.styles)};this.setCallbacks=()=>{if(!this.callbacks)return;let t={onToggleMicrophone:!!this.callbacks.onToggleMicrophone,onToggleCam:!!this.callbacks.onToggleCam,onToggleRecording:!!this.callbacks.onToggleRecording,onToggleChat:!!this.callbacks.onToggleChat,onToggleScreenShare:!!this.callbacks.onToggleScreenShare,onClickHangup:!!this.callbacks.onClickHangup,onToggleMeetingSetup:!!this.callbacks.onToggleMeetingSetup};this.messageBridge.listen("callback-called",e=>{var i,n;(n=(i=this.callbacks)[e])==null||n.call(i)}),this.messageBridge.publish("frame.callbacks-update",JSON.stringify(t))};this.setFrameStyle=t=>{let e=document.createElement("style"),{bottom:i,left:n,right:s,top:c}=this.frameOffset;if(e.innerHTML=`
      :root {
        --superviz-offset-top: ${c}px;
        --superviz-offset-right: ${s}px;
        --superviz-offset-left: ${n}px;
        --superviz-offset-bottom: ${i}px;
      }     
    `,document.head.appendChild(e),this.browserService.isMobileDevice){this.bricklayer.element.classList.add("sv-video-frame--bottom");return}this.bricklayer.element.classList.add(`sv-video-frame--${t}`)};this.onFrameDimensionsUpdate=({width:t,height:e})=>{let i=document.getElementById(Eb),{bottom:n,right:s,left:c,top:l}=this.frameOffset,d=this.isWaterMarkEnabled?40:0,p=`${t}px`,m=`${e+d}px`;(t>=window.innerWidth||this.isHorizontalCameraEnabled)&&(p=`calc(100% - ${s}px - ${c}px)`),e>=window.innerHeight&&(m=`calc(100% - ${l}px - ${n}px)`),i.style.width=p,i.style.height=m,this.frameSizeObserver.publish({width:i.offsetWidth,height:i.offsetHeight})};this.onWindowResize=()=>{let{top:t,bottom:e,right:i,left:n}=this.frameOffset,{innerHeight:s,innerWidth:c}=window,l=s-t-e,d=c-i-n;this.messageBridge&&this.messageBridge.publish("frame.parent-window-size-update",{height:l,width:d})};this.updateFrameLocale=()=>{var s,c;if(!this.frameLocale||!((s=this.frameLocale)!=null&&s.language)&&((c=this.frameLocale)!=null&&c.locales))return;let{language:t,locales:e}=this.frameLocale,n=["en",...e.map(l=>l==null?void 0:l.language)];if(t&&!n.includes(t))throw new Error("The default language is not available in the language listing.");this.messageBridge.publish("frame.locales-update",this.frameLocale)};this.updateMeetingAvatars=()=>{this.messageBridge.publish("frame.avatar-list-update",this.meetingAvatars)};this.onParticipantJoined=t=>{this.participantJoinedObserver.publish(t)};this.onParticipantLeft=t=>{this.participantLeftObserver.publish(t)};this.onMeetingHostChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.host-change",data:t})};this.onMeetingKickParticipant=t=>{this.realtimeEventsObserver.publish({event:"meeting.kick-participant",data:t})};this.onFollowParticipantDidChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.follow-participant",data:t})};this.onGoToDidChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.go-to-participant",data:t})};this.onGather=()=>{this.realtimeEventsObserver.publish({event:"realtime.gather",data:!0})};this.onGridModeChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.grid-mode-change",data:t})};this.onDrawingChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.drawing-change",data:t})};this.onTranscriptChange=t=>{this.realtimeEventsObserver.publish({event:"realtime.transcript-change",data:t})};this.onSameAccountError=t=>{this.sameAccountErrorObserver.publish(t)};this.onDevicesChange=t=>{this.devicesObserver.publish(t)};this.meetingStateUpdate=t=>{this.meetingStateObserver.publish(t)};this.onConnectionStatusChange=t=>{this.meetingConnectionObserver.publish(t)};this.onWaitingForHostDidChange=t=>{this.waitingForHostObserver.publish(t)};this.onParticipantListUpdate=t=>{this.participantListObserver.publish(t)};var Br,Wr,kt,St;let{language:e,canUseCams:i,canUseChat:n,canUseScreenshare:s,canUseDefaultAvatars:c,canUseFollow:l,canUseGoTo:d,canUseGather:p,canShowAudienceList:m,canUseDefaultToolbar:y,canUseRecording:E,browserService:x,offset:P,locales:k,avatars:B,customColors:I,styles:ne,waterMark:ve,layoutPosition:ke,camerasPosition:Ie,skipMeetingSettings:G,devices:Se,layoutMode:Xe,collaborationMode:We,callbacks:pt}=t;this.browserService=x;let Si=this.layoutModalsAndCamerasConfig(ke,Ie),Ai=document.createElement("div");this.frameConfig={apiKey:Z.get("apiKey"),apiUrl:Z.get("apiUrl"),ablyKey:Z.get("ablyKey"),debug:Z.get("debug"),roomId:Z.get("roomId"),limits:Z.get("limits"),collaborationMode:We,canUseFollow:l,canUseGoTo:d,canUseCams:i,canUseChat:n,canUseGather:p,canUseScreenshare:s,canUseDefaultAvatars:c,canUseRecording:E,canShowAudienceList:m,camerasPosition:(Br=Si.camerasPosition)!=null?Br:"right",canUseDefaultToolbar:y,devices:{audioInput:(Wr=Se==null?void 0:Se.audioInput)!=null?Wr:!0,audioOutput:(kt=Se==null?void 0:Se.audioOutput)!=null?kt:!0,videoInput:(St=Se==null?void 0:Se.videoInput)!=null?St:!0},waterMark:ve,layoutMode:Xe,skipMeetingSettings:G,layoutPosition:Si.layoutPosition,transcriptLangs:Z.get("features.transcriptLangs")},this.customColors=I,this.callbacks=pt,this.styles=ne,Ai.classList.add("sv_video_wrapper"),Ai.id="sv-video-wrapper",document.body.appendChild(Ai),this.updateFrameState(1),this.bricklayer=new Wc,this.bricklayer.build(Ai.id,Z.get("conferenceLayerUrl"),Eb,void 0,{allow:"camera *;microphone *; display-capture *;"}),this.setFrameOffset(P),this.setFrameStyle(Si.camerasPosition),this.bricklayer.element.addEventListener("load",this.onFrameLoad),this.frameLocale={language:e,locales:k},this.meetingAvatars=B,window.addEventListener("resize",this.onWindowResize),window.addEventListener("orientationchange",this.onWindowResize)}get isWaterMarkEnabled(){return this.browserService.isMobileDevice?!1:this.frameConfig.waterMark}get isHorizontalCameraEnabled(){return this.browserService.isMobileDevice?!1:["top","bottom"].includes(this.frameConfig.camerasPosition)}addMessagesListeners(){this.messageBridge.listen("meeting.waiting-for-host",this.onWaitingForHostDidChange),this.messageBridge.listen("meeting.participant-joined",this.onParticipantJoined),this.messageBridge.listen("meeting.participant-list-update",this.onParticipantListUpdate),this.messageBridge.listen("meeting.participant-left",this.onParticipantLeft),this.messageBridge.listen("meeting.host-change",this.onMeetingHostChange),this.messageBridge.listen("meeting.kick-participant",this.onMeetingKickParticipant),this.messageBridge.listen("meeting.same-participant-error",this.onSameAccountError),this.messageBridge.listen("meeting.state-update",this.meetingStateUpdate),this.messageBridge.listen("meeting.connection-status-change",this.onConnectionStatusChange),this.messageBridge.listen("meeting.devices-change",this.onDevicesChange),this.messageBridge.listen("realtime.grid-mode-change",this.onGridModeChange),this.messageBridge.listen("realtime.drawing-change",this.onDrawingChange),this.messageBridge.listen("realtime.transcript-change",this.onTranscriptChange),this.messageBridge.listen("frame.dimensions-update",this.onFrameDimensionsUpdate),this.messageBridge.listen("realtime.follow-participant",this.onFollowParticipantDidChange),this.messageBridge.listen("realtime.go-to-participant",this.onGoToDidChange),this.messageBridge.listen("realtime.gather",this.onGather)}updateFrameState(t){t!==this.frameState&&(this.frameState=t,this.frameStateObserver.publish(this.frameState));let e={1:6,2:7,0:8};this.meetingStateUpdate(e[t])}start(t){this.messageBridge.publish("meeting.start",N(w({},t),{config:this.frameConfig}))}leave(){this.messageBridge.publish("meeting.leave"),this.destroy()}destroy(){var t,e,i,n,s,c,l,d,p,m;(t=this.messageBridge)==null||t.destroy(),(e=this.bricklayer)==null||e.destroy(),(i=this.frameSizeObserver)==null||i.destroy(),(n=this.realtimeEventsObserver)==null||n.destroy(),(s=this.sameAccountErrorObserver)==null||s.destroy(),(c=this.devicesObserver)==null||c.destroy(),(l=this.meetingStateObserver)==null||l.destroy(),(d=this.meetingConnectionObserver)==null||d.destroy(),(p=this.participantJoinedObserver)==null||p.destroy(),(m=this.participantLeftObserver)==null||m.destroy(),this.bricklayer=null,this.frameState=null,window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("orientationchange",this.onWindowResize)}publishMessageToFrame(t,e){this.messageBridge&&this.messageBridge.publish(t,e)}};var aM=1e3*60,Pr=null,da=class extends gt{constructor(e){var i,n;super();this.participantsOnMeeting=[];this.kickParticipantsOnHostLeave=!1;this.startVideo=()=>{var e,i,n,s,c,l,d,p,m,y,E,x,P,k,B,I,ne,ve,ke,Ie,G,Se,Xe,We,pt,Si,Ai,Br,Wr,kt,St,nl,Ur,Nt,ol,sl,al;this.videoConfig={language:(e=this.params)==null?void 0:e.language,canUseRecording:!!((i=this.params)!=null&&i.enableRecording),canShowAudienceList:(s=(n=this.params)==null?void 0:n.showAudienceList)!=null?s:!0,canUseChat:!((c=this.params)!=null&&c.chatOff),canUseCams:!((l=this.params)!=null&&l.camsOff),canUseScreenshare:!((d=this.params)!=null&&d.screenshareOff),canUseDefaultAvatars:!!((p=this.params)!=null&&p.defaultAvatars)&&!((y=(m=this.localParticipant)==null?void 0:m.avatar)!=null&&y.model3DUrl),canUseGather:!!((E=this.params)!=null&&E.enableGather),canUseFollow:!!((x=this.params)!=null&&x.enableFollow),canUseGoTo:!!((P=this.params)!=null&&P.enableGoTo),canUseDefaultToolbar:(B=(k=this.params)==null?void 0:k.defaultToolbar)!=null?B:!0,camerasPosition:(ne=(I=this.params)==null?void 0:I.collaborationMode)==null?void 0:ne.position,devices:(ve=this.params)==null?void 0:ve.devices,skipMeetingSettings:(ke=this.params)==null?void 0:ke.skipMeetingSettings,browserService:this.browserService,offset:(Ie=this.params)==null?void 0:Ie.offset,locales:(Se=(G=this.params)==null?void 0:G.locales)!=null?Se:[],avatars:(We=(Xe=this.params)==null?void 0:Xe.avatars)!=null?We:[],customColors:Z.get("colors"),waterMark:Z.get("waterMark"),styles:(pt=this.params)==null?void 0:pt.styles,collaborationMode:(Br=(Ai=(Si=this.params)==null?void 0:Si.collaborationMode)==null?void 0:Ai.enabled)!=null?Br:!0,layoutPosition:((kt=(Wr=this.params)==null?void 0:Wr.collaborationMode)==null?void 0:kt.enabled)===!1?"center":(Ur=(nl=(St=this.params)==null?void 0:St.collaborationMode)==null?void 0:nl.modalPosition)!=null?Ur:"center",layoutMode:(sl=(ol=(Nt=this.params)==null?void 0:Nt.collaborationMode)==null?void 0:ol.initialView)!=null?sl:"list",callbacks:(al=this.params)==null?void 0:al.callbacks},this.logger.log("video conference @ start video",this.videoConfig),this.videoManager=new ua(this.videoConfig),this.subscribeToVideoEvents()};this.subscribeToVideoEvents=()=>{this.logger.log("video conference @ subscribe to video events"),this.videoManager.meetingConnectionObserver.subscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.subscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.subscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.subscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.subscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.subscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.subscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.subscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.subscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.subscribe(this.onSameAccountError),this.videoManager.devicesObserver.subscribe(this.onDevicesChange)};this.unsubscribeFromVideoEvents=()=>{this.videoManager&&(this.logger.log("video conference @ unsubscribe from video events"),this.videoManager.meetingConnectionObserver.unsubscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.unsubscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.unsubscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.unsubscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.unsubscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.unsubscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.unsubscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.unsubscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.unsubscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.unsubscribe(this.onSameAccountError),this.videoManager.devicesObserver.unsubscribe(this.onDevicesChange))};this.suscribeToRealtimeEvents=()=>{this.logger.log("video conference @ subscribe to realtime events"),this.room.presence.on("presence.update",this.onParticipantUpdateOnRealtime),this.room.presence.on("presence.joined-room",this.onParticipantJoinedOnRealtime),this.room.presence.on("presence.leave",this.onParticipantLeftOnRealtime)};this.unsubscribeFromRealtimeEvents=()=>{var e;this.logger.log("video conference @ unsubscribe from realtime events"),this.room.presence.off("presence.update"),this.room.presence.off("presence.leave"),this.room.presence.off("presence.joined-room"),(e=this.roomState)==null||e.kickParticipantObserver.unsubscribe(this.onKickLocalParticipant)};this.subscribeToStoreUpdates=()=>{let{localParticipant:e,group:i,participants:n}=this.useStore("global-store");n.subscribe(y=>{let E=Object.values(y);this.onRealtimeParticipantsDidChange(E)});let{drawing:s,hostId:c,isGridModeEnabled:l,transcript:d,followParticipantId:p,gather:m}=this.useStore("video-store");e.subscribe(y=>{this.localParticipant=y}),s.subscribe(this.setDrawing),c.subscribe(this.setHost),l.subscribe(this.setGridMode),d.subscribe(this.setTranscript),p.subscribe(this.setFollowParticipant),m.subscribe(this.setGather),i.subscribe()};this.createParticipantFromPresence=e=>{var i;return{id:e.id,color:((i=e.data.slot)==null?void 0:i.color)||$o[16],avatar:e.data.avatar,type:e.data.type,name:e.data.name,isHost:e.data.isHost}};this.onFrameSizeDidChange=e=>{this.publish("frame.dimensions-update",e)};this.onWaitingForHost=e=>{this.publish("meeting.waiting-for-host",e)};this.onConnectionStatusChange=e=>{this.logger.log("video conference @ on connection status change",e);let i=[2,4,3,6];i.includes(e)&&this.roomState.freezeSync(!0),i.includes(this.connectionService.oldConnectionStatus)&&!i.includes(e)&&this.roomState.freezeSync(!1),this.publish("meeting.connection-status-change",e)};this.onMeetingStateChange=e=>{this.logger.log("video conference @ on meeting state change",e),this.publish("meeting.state-update",e);let{localParticipant:i}=this.useStore("global-store");i.publish(i.value)};this.onSameAccountError=e=>{this.publish("meeting.same-participant-error",e),this.detach()};this.onDevicesChange=e=>{this.publish("meeting.devices-change",e)};this.onFrameStateChange=e=>{this.logger.log("video conference @ on frame state change",e),e===2&&(this.roomState=new Bc(this.room,this.drawingRoom,this.logger),this.roomState.kickParticipantObserver.subscribe(this.onKickLocalParticipant),this.roomState.start(),this.params.userType!=="guest"&&(this.localParticipant=Object.assign(this.localParticipant,{type:this.params.userType}),this.roomState.updateMyProperties(w({},this.localParticipant))),this.videoManager.start({group:this.group,participant:this.localParticipant,roomId:Z.get("roomId")}),this.publish("meeting.start"))};this.onRealtimeEventFromFrame=({event:e,data:i})=>{this.logger.log("video conference @ on realtime event from frame",e,i);let n={"realtime.host-change":s=>this.roomState.setHost(s),"realtime.gather":s=>this.roomState.setGather(s),"realtime.grid-mode-change":s=>this.roomState.setGridMode(s),"realtime.drawing-change":s=>{this.roomState.setDrawing(s)},"realtime.follow-participant":s=>{this.roomState.setFollowParticipant(s)},"meeting.kick-participant":s=>{this.roomState.setKickParticipant(s)},"realtime.transcript-change":s=>{this.roomState.setTranscript(s)},"realtime.go-to-participant":s=>{this.eventBus.publish("realtime.go-to-participant",s)}}[e](i);this.publish(e,i)};this.onParticipantJoined=e=>{var i;if(this.logger.log("video conference @ on participant joined",e),this.publish("meeting.participant-joined",e),this.publish("my-participant.joined",e),this.kickParticipantsOnHostLeave=!((i=this.params)!=null&&i.allowGuests),this.videoConfig.canUseDefaultAvatars){this.roomState.updateMyProperties({avatar:e.avatar,name:e.name,type:e.type});return}this.roomState.updateMyProperties({name:e.name,type:e.type})};this.onParticipantLeft=e=>{var s,c;this.logger.log("video conference @ on participant left",this.localParticipant);let{localParticipant:i,participants:n}=this.useStore("global-store");i.publish(N(w({},i.value),{activeComponents:(s=i.value.activeComponents)==null?void 0:s.filter(l=>l!=="videoConference")})),n.publish(N(w({},n.value),{[this.localParticipant.id]:N(w({},i.value),{activeComponents:(c=i.value.activeComponents)==null?void 0:c.filter(l=>l!=="videoConference")})})),this.connectionService.removeListeners(),this.publish("destroy"),this.publish("my-participant.left",this.localParticipant),this.unsubscribeFromVideoEvents(),this.videoManager.leave(),this.videoManager=void 0,this.connectionService=void 0,this.detach()};this.onParticipantListUpdate=e=>{this.logger.log("video conference @ on participant list update",e);let i=Object.values(e).map(n=>{var s,c;return{id:n.id,color:((s=n.slot)==null?void 0:s.colorName)||"gray",avatar:n.avatar,name:n.name,type:n.type,isHost:(c=n.isHost)!=null?c:!1,slot:n.slot}});this.publish("meeting.participant-list-update",i),this.participantsOnMeeting.length!==i.length&&this.publish("meeting.amount-of-participants-update",i.length),this.participantsOnMeeting=i,this.validateIfInTheRoomHasHost()};this.onKickLocalParticipant=()=>{this.logger.log("video conference @ on kick local participant"),this.publish("meeting.kick-participant",this.localParticipant),this.detach()};this.setDrawing=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.drawing-change",e)};this.setHost=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.host-change",e),this.onHostParticipantDidChange(e)};this.setGridMode=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.grid-mode-change",e)};this.setTranscript=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.transcript-change",e)};this.setFollowParticipant=e=>{var i;(i=this.videoManager)==null||i.publishMessageToFrame("realtime.follow-participant",e),this.eventBus.publish("realtime.follow-participant",e)};this.setGather=e=>{if(!this.videoManager||!e)return;let{hostId:i,gather:n}=this.useStore("video-store");if(n.publish(!1),i.value!==this.localParticipant.id){this.eventBus.publish("realtime.go-to-participant",i.value);return}this.videoManager.publishMessageToFrame("realtime.gather",e)};this.onRealtimeParticipantsDidChange=e=>{var n;this.logger.log("video conference @ on participants did change",e);let i=e.map(s=>{var c,l,d;return{timestamp:s.timestamp,participantId:s.id,color:(l=(c=s.slot)==null?void 0:c.colorName)!=null?l:"gray",name:s.name,isHost:(d=s.isHost)!=null?d:!1,avatar:s.avatar,type:s.type,slot:s.slot}});(n=this.videoManager)==null||n.publishMessageToFrame("realtime.participant-list-update",i)};this.onHostParticipantDidChange=e=>{var c,l;this.logger.log("video conference @ on host participant did change",e),(c=this.videoManager)==null||c.publishMessageToFrame("realtime.host-change",e);let{participants:i}=this.useStore("global-store"),n=Object.values(i.value).find(d=>d.id===e),s=n?{id:n.id,color:((l=n.slot)==null?void 0:l.color)||$o[16],avatar:n.avatar,type:n.type,name:n.name,isHost:n.id===e}:null;Pr&&s&&(this.logger.log("video conference @ on host participant did change - clear kick all participants timeout"),clearTimeout(Pr),Pr=null),this.publish("meeting.host-change",s)};this.onHostAvailabilityChange=e=>{if(this.logger.log("launcher service @ onHostAvailabilityChange"),e){this.publish("meeting.host-available");return}this.publish("meeting.no-host-available")};this.onParticipantJoinedOnRealtime=e=>{this.logger.log("video conference @ on participant joined on realtime",e),this.publish("meeting.participant-joined",this.createParticipantFromPresence(e)),e.id===this.localParticipant.id&&this.room.presence.update(this.localParticipant)};this.onParticipantLeftOnRealtime=e=>{this.logger.log("video conference @ on participant left on realtime",e),this.publish("meeting.participant-left",this.createParticipantFromPresence(e))};this.onParticipantUpdateOnRealtime=e=>{this.logger.log("video conference @ on participant update on realtime",e);let{localParticipant:i,participants:n}=this.useStore("global-store");e.data.id===this.localParticipant.id&&(this.publish("my-participant.update",this.createParticipantFromPresence(e)),i.publish(N(w(w({},i.value),e.data),{type:this.params.userType}))),n.publish(N(w({},n.value),{[e.data.id]:w(w({},i.value),e.data)}))};this.validateIfInTheRoomHasHost=()=>{var d,p;if(!this.roomState)return;let{hostId:e}=this.useStore("video-store"),{participants:i}=this.useStore("global-store"),n=Object.values(i.value),s=n.filter(m=>m.type==="host"&&this.participantsOnMeeting.some(y=>y.id===m.id));!s.length&&this.kickParticipantsOnHostLeave&&((d=this.localParticipant)==null?void 0:d.type)!=="host"&&!Pr&&(this.logger.log("video conference @ validate if in the room has host - init kick all participants timeout"),Pr=setTimeout(()=>{this.logger.log("video conference @ validate if in the room has host - kick all participants"),this.onKickLocalParticipant()},aM)),s.length&&Pr&&(this.logger.log("video conference @ validade if in the room has host - clear kick all participants timeout"),clearTimeout(Pr),Pr=null),this.onHostAvailabilityChange(!!s.length);let c=n.find(m=>(m==null?void 0:m.id)===(e==null?void 0:e.value));if(!s.length||c)return;let l=s.reduce((m,y)=>(this.logger.log("video conference @ validate if in the room has host - reducing participants",{previous:m,current:y}),!m||(y==null?void 0:y.id)===e.value?y:(y==null?void 0:y.timestamp)>m.timestamp?m:y),null);this.room.presence.update(N(w({},this.localParticipant),{isHost:l.id===this.localParticipant.id})),!(!l||l.id!==((p=this.localParticipant)==null?void 0:p.id))&&(this.logger.log("video conference @ validate if in the room has host - set host",l),e.publish(l.id),this.roomState.setHost(l.id))};this.params=N(w({},e),{userType:(n=(i=e==null?void 0:e.participantType)!=null?i:e==null?void 0:e.userType)!=null?n:"guest"}),this.name="videoConference",this.logger=new he("@superviz/sdk/videoConference"),this.browserService=new la,this.connectionService=new $c,this.connectionService.addListeners(),this.connectionService.connectionStatusObserver.subscribe(this.onConnectionStatusChange)}toggleMeetingSetup(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-setup")}toggleMicrophone(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-microphone")}toggleCam(){var e;(e=this.videoManager)==null||e.publishMessageToFrame("meeting-controls.toggle-cam")}toggleScreenShare(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-screenshare")}toggleChat(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-chat")}toggleRecording(){var e;return(e=this.videoManager)==null?void 0:e.publishMessageToFrame("meeting-controls.toggle-recording")}hangUp(){var e;(e=this.videoManager)==null||e.publishMessageToFrame("hang-up")}start(){this.logger.log("video conference @ start"),this.drawingRoom=this.ioc.createRoom("drawing"),this.subscribeToStoreUpdates(),this.suscribeToRealtimeEvents(),this.startVideo()}destroy(){var i,n,s;this.logger.log("video conference @ destroy");let{destroy:e}=this.useStore("video-store");e(),(i=this.roomState)==null||i.destroy(),this.kickParticipantsOnHostLeave=!1,this.publish("destroy"),this.unsubscribeFromRealtimeEvents(),this.unsubscribeFromVideoEvents(),(n=this.videoManager)==null||n.leave(),(s=this.connectionService)==null||s.removeListeners()}};f();f();var wb=fi(Xr());var Gc=class extends gt{constructor(e,i){var s;super();this.camera={x:0,y:0,screen:{width:0,height:0},scale:1};this.subscribeToRealtimeEvents=()=>{this.logger.log("presence-mouse component @ subscribe to realtime events"),this.room.presence.on("presence.joined-room",this.onPresenceJoinedRoom),this.room.presence.on("presence.leave",this.onPresenceLeftRoom),this.room.presence.on("presence.update",this.onPresenceUpdate)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("presence-mouse component @ unsubscribe from realtime events"),this.room.presence.off("presence.joined-room"),this.room.presence.off("presence.leave"),this.room.presence.off("presence.update")};this.setParticipantPrivate=e=>{this.isPrivate=e,this.room.presence.update({visible:!e})};this.onPresenceJoinedRoom=e=>{e.id===this.localParticipant.id&&this.room.presence.update(this.localParticipant)};this.onPresenceLeftRoom=e=>{this.removePresenceMouseParticipant(e.id)};this.onPresenceUpdate=e=>{if(this.following&&this.presences.get(this.following)&&this.goToMouse(this.following),e.id===this.localParticipant.id)return;let i=e.data;if(this.following&&i.id!==this.following&&this.presences.has(i.id)){this.removePresenceMouseParticipant(i.id);return}this.presences.set(i.id,i)};this.animate=()=>{this.getCamera(),this.renderDivWrapper(),this.updateParticipantsMouses(),requestAnimationFrame(this.animate)};this.goToMouse=e=>{let i=this.presences.get(e);if(!(i!=null&&i.camera))return;let n=i.camera.x,s=i.camera.y,c=this.divWrapper.clientHeight/i.camera.screen.height,l=Math.min(c,1),d=this.divWrapper.clientWidth/i.camera.screen.width,p=Math.min(d,1);this.goToMouseCallback&&this.goToMouseCallback({x:n,y:s,scaleX:l,scaleY:p})};this.onMyParticipantMouseMove=(0,wb.throttle)(e=>{let i=this.canvas.getContext("2d"),n=this.canvas.getBoundingClientRect(),s=e.x-n.left,c=e.y-n.top,d=(i==null?void 0:i.getTransform()).inverse(),p=new DOMPoint(s,c).matrixTransform(d),m={x:p.x,y:p.y};this.room.presence.update(N(w(w({},this.localParticipant),m),{visible:!this.isPrivate,camera:this.camera}))},30);this.onMyParticipantMouseOut=e=>{let{x:i,y:n,width:s,height:c}=this.canvas.getBoundingClientRect();e.x>0&&e.y>0&&e.x<i+s&&e.y<n+c||this.room.presence.update({visible:!1})};this.updateParticipantsMouses=()=>{this.presences.forEach(e=>{if(!(e!=null&&e.visible)||this.following&&this.following!==e.id){this.removePresenceMouseParticipant(e.id);return}this.renderPresenceMouses(e)})};this.getCamera=()=>{var l;let e=(l=this.canvas)==null?void 0:l.getContext("2d"),i=e==null?void 0:e.getTransform(),n=i==null?void 0:i.e,s=i==null?void 0:i.f,c=i==null?void 0:i.a;this.camera={screen:{width:this.divWrapper.clientHeight,height:this.divWrapper.clientWidth},x:n,y:s,scale:c}};this.renderPresenceMouses=e=>{let n=document.getElementById(`mouse-${e.id}`);n||(n=this.createMouseElement(e));let s=document.getElementById(`mouse-${e.id}`),c=document.getElementById(`mouse-${e.id}`);if(!s||!c)return;let l=s.getElementsByClassName("mouse-user-name")[0],d=c.getElementsByClassName("pointer-mouse")[0];d&&(d.style.backgroundImage=`url(https://production.cdn.superviz.com/static/pointers-v2/${e.slot.index}.svg)`),l&&(l.style.color=e.slot.textColor,l.style.backgroundColor=e.slot.color,l.innerHTML=e.name);let{x:p,y:m}=e,y=this.canvas.getContext("2d"),E=y==null?void 0:y.getTransform(),x=E==null?void 0:E.e,P=E==null?void 0:E.f,k=E.a,B=E.d,I=p*k+x,ne=m*B+P,ve=this.divWrapper.clientWidth>I&&this.divWrapper.clientHeight>ne&&e.visible;n.style.opacity=ve?"1":"0",n.style.left=`${I}px`,n.style.top=`${ne}px`};this.followMouse=e=>{this.following=e,this.goToMouse(e)};if(this.name="presence",this.logger=new he("@superviz/sdk/presence"),this.canvas=document.getElementById(e),this.presences=new Map,!this.canvas){let c=`Canvas with id ${e} not found`;throw this.logger.log(c),new Error(c)}this.divWrapper=this.renderDivWrapper(),this.animateFrame=requestAnimationFrame(this.animate),this.goToMouseCallback=(s=i==null?void 0:i.callbacks)==null?void 0:s.onGoToPresence;let{localParticipant:n}=this.useStore("global-store");n.subscribe(),this.getCamera()}start(){this.logger.log("presence-mouse component @ start"),this.canvas.addEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.addEventListener("mouseout",this.onMyParticipantMouseOut),this.eventBus.subscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.subscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.subscribe("realtime.private-mode",this.setParticipantPrivate),this.subscribeToRealtimeEvents()}destroy(){this.logger.log("presence-mouse component @ destroy"),this.eventBus.unsubscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.unsubscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.unsubscribe("realtime.private-mode",this.setParticipantPrivate),this.unsubscribeFromRealtimeEvents(),cancelAnimationFrame(this.animateFrame),this.canvas.removeEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.removeEventListener("mouseout",this.onMyParticipantMouseOut),this.divWrapper.remove()}renderDivWrapper(){let e=this.canvas.getBoundingClientRect(),i=document.getElementById("superviz-presence-mouse-wrapper");return i||(i=document.createElement("div"),i.id="superviz-presence-mouse-wrapper",this.canvas.parentElement.style.position="relative",this.canvas.parentElement.appendChild(i)),i.style.position="fixed",i.style.top=`${e.top}px`,i.style.left=`${e.left}px`,i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.pointerEvents="none",i.style.overflow="hidden",i.style.zIndex="2",i}removePresenceMouseParticipant(e){let i=document.getElementById(`mouse-${e}`);i&&(i.remove(),this.presences.delete(e))}createMouseElement(e){let i=document.createElement("div");i.setAttribute("id",`mouse-${e.id}`),i.setAttribute("class","mouse-follower");let n=document.createElement("div");n.setAttribute("class","pointer-mouse");let s=document.createElement("div");return s.setAttribute("class","mouse-user-name"),s.innerHTML=e.name,i.appendChild(n),i.appendChild(s),i.style.left="0px",i.style.top="0px",this.divWrapper.appendChild(i),i}transform(e){console.warn("[SuperViz] - transform method not available when container is a canvas element.")}};f();var xb=fi(Xr());f();var Vc=(P=>(P.AREA="area",P.BASE="base",P.BR="br",P.COL="col",P.EMBED="embed",P.HR="hr",P.IMG="img",P.INPUT="input",P.LINK="link",P.META="meta",P.PARAM="param",P.SOURCE="source",P.TRACK="track",P.WBR="wbr",P))(Vc||{}),jc=(i=>(i.RECT="rect",i.ELLIPSE="ellipse",i.SVG="svg",i))(jc||{});var qc=class extends gt{constructor(e,i){var s;super();this.presences=new Map;this.mouses=new Map;this.transformation={translate:{x:0,y:0},scale:1};this.onMyParticipantMouseMove=e=>{if(this.isPrivate)return;let i=e.currentTarget,{left:n,top:s}=i.getBoundingClientRect(),c=(e.x-n-this.transformation.translate.x)/this.transformation.scale,l=(e.y-s-this.transformation.translate.y)/this.transformation.scale;this.room.presence.update(N(w({},this.localParticipant),{x:c,y:l,visible:!0,camera:this.camera}))};this.onMyParticipantMouseLeave=e=>{let{left:i,top:n,right:s,bottom:c}=this.container.getBoundingClientRect(),l=e.x>i&&e.y>n&&e.x<s&&e.y<c,d=e.x>0&&e.y>0&&e.x<window.innerWidth&&e.y<window.innerHeight;l&&d||this.room.presence.update({visible:!1})};this.goToMouse=e=>{let i=this.mouses.get(e),n=this.presences.get(e);if(n){if(this.goToPresenceCallback){let s=this.camera.screen.width/n.camera.screen.width,c=this.camera.screen.height/n.camera.screen.height,l=n.camera.x*s,d=n.camera.y*c,p=n.camera.scale*s,m=n.camera.scale*c;this.goToPresenceCallback({x:l,y:d,scaleX:p,scaleY:m});return}i&&i.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}};this.followMouse=e=>{this.userBeingFollowedId=e,this.goToMouse(e)};this.setParticipantPrivate=e=>{this.isPrivate=e,this.room.presence.update({visible:!e})};this.onPresenceJoinedRoom=e=>{e.id===this.localParticipant.id&&this.room.presence.update(this.localParticipant)};this.onPresenceLeftRoom=e=>{this.removePresenceMouseParticipant(e.id)};this.onPresenceUpdate=e=>{if(e.id===this.localParticipant.id)return;let i=e.data;if(this.userBeingFollowedId&&i.id!==this.userBeingFollowedId&&this.presences.has(i.id)){this.removePresenceMouseParticipant(i.id);return}this.presences.set(i.id,i),this.animate(),this.updateParticipantsMouses()};this.animate=()=>{Vc[this.containerTagname]&&this.updateVoidElementWrapper(),jc[this.containerTagname]&&this.updateSVGElementWrapper(),this.animationFrame=requestAnimationFrame(this.animate)};this.updateParticipantsMouses=e=>{if(this.presences.forEach(n=>{if(n.id!==this.localParticipant.id){if(!(n!=null&&n.visible)){this.removePresenceMouseParticipant(n.id);return}this.renderPresenceMouses(n)}}),e)return;this.presences.has(this.userBeingFollowedId)&&this.goToMouse(this.userBeingFollowedId)};this.renderPresenceMouses=e=>{if(e.id===this.localParticipant.id)return;let i=document.getElementById(`mouse-${e.id}`);if(i||(i=this.createMouseElement(e)),!i)return;let n=i.getElementsByClassName("mouse-user-name")[0],s=i.getElementsByClassName("pointer-mouse")[0];s&&(s.style.backgroundImage=`url(https://production.cdn.superviz.com/static/pointers-v2/${e.slot.index}.svg)`),n&&(n.style.color=e.slot.textColor,n.style.backgroundColor=e.slot.color,n.innerHTML=e.name);let{x:c,y:l}=e,{translate:{x:d,y:p},scale:m}=this.transformation;i.style.left=`${d+c*m}px`,i.style.top=`${p+l*m}px`};this.renderVoidElementWrapper=()=>{let e=document.createElement("div"),{width:i,height:n,left:s,top:c}=this.container.getBoundingClientRect();e.style.position="absolute",e.style.width=`${i}px`,e.style.height=`${n}px`,e.style.top=`${c}px`,e.style.left=`${s}px`,e.style.overflow="visible",e.style.pointerEvents="none",this.container.parentElement.appendChild(e),this.wrapper=e};this.renderSVGElementWrapper=()=>{let e=this.containerTagname.toLowerCase();if(e==="svg"){this.createSVGWrapper();return}if(e==="rect"){this.createRectWrapper();return}e==="ellipse"&&this.createEllipseWrapper()};if(this.container=document.getElementById(e),this.logger=new he("@superviz/sdk/presence"),!this.container){let c=`Element with id ${e} not found`;throw this.logger.log(c),new Error(c)}this.camera={x:0,y:0,scale:1,screen:{width:this.container.clientWidth,height:this.container.clientHeight}},this.name="presence";let{localParticipant:n}=this.useStore("global-store");n.subscribe(),this.containerTagname=this.container.tagName.toUpperCase(),this.goToPresenceCallback=(s=i==null?void 0:i.callbacks)==null?void 0:s.onGoToPresence}start(){this.logger.log("presence-mouse component @ start"),this.renderWrapper(),this.addListeners(),this.subscribeToRealtimeEvents(),this.eventBus.subscribe("realtime.private-mode",this.setParticipantPrivate),this.animationFrame=requestAnimationFrame(this.animate),this.eventBus.subscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.subscribe("realtime.local-follow-participant",this.followMouse)}destroy(){cancelAnimationFrame(this.animationFrame),this.logger.log("presence-mouse component @ destroy"),this.removeListeners(),this.wrapper.remove(),this.presences.clear(),this.presences=void 0,this.container=void 0,this.wrapper=void 0,this.unsubscribeFromRealtimeEvents(),this.eventBus.unsubscribe("realtime.private-mode",this.setParticipantPrivate),this.eventBus.unsubscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.unsubscribe("realtime.local-follow-participant",this.followMouse),this.logger=void 0}subscribeToRealtimeEvents(){this.logger.log("presence-mouse component @ subscribe to realtime events"),this.room.presence.on("presence.joined-room",this.onPresenceJoinedRoom),this.room.presence.on("presence.leave",this.onPresenceLeftRoom),this.room.presence.on("presence.update",this.onPresenceUpdate)}unsubscribeFromRealtimeEvents(){this.logger.log("presence-mouse component @ unsubscribe from realtime events"),this.room.presence.off("presence.joined-room"),this.room.presence.off("presence.leave"),this.room.presence.off("presence.update")}addListeners(){this.pointerMoveObserver=Ds(this.container,"pointermove").pipe(Ep(30)).subscribe(this.onMyParticipantMouseMove),this.container.addEventListener("pointerleave",this.onMyParticipantMouseLeave)}removeListeners(){var e;(e=this.pointerMoveObserver)==null||e.unsubscribe(),this.container.removeEventListener("pointerleave",this.onMyParticipantMouseLeave)}setPositionNotStatic(){let{position:e}=window.getComputedStyle(this.container);e==="static"&&this.container.style.setProperty("position","relative")}createMouseElement(e){if(!this.wrapper)return;let i=document.createElement("div");i.setAttribute("id",`mouse-${e.id}`),i.setAttribute("class","mouse-follower");let n=document.createElement("div");n.setAttribute("class","pointer-mouse");let s=document.createElement("div");return s.setAttribute("class","mouse-user-name"),s.innerHTML=e.name,i.appendChild(n),i.appendChild(s),i.style.left="0px",i.style.top="0px",this.wrapper.appendChild(i),this.mouses.set(e.id,i),i}updateSVGPosition(){let e=this.container.parentElement.getBoundingClientRect(),i=this.container.getBoundingClientRect(),n=i.left-e.left,s=i.top-e.top,{width:c,height:l}=this.container.getBoundingClientRect();this.wrapper.style.setProperty("width",`${c}px`),this.wrapper.style.setProperty("height",`${l}px`),this.wrapper.style.setProperty("top",`${s}px`),this.wrapper.style.setProperty("left",`${n}px`)}createSVGWrapper(){let e=document.createElement("div"),i=this.container.parentElement.getBoundingClientRect(),n=this.container.getBoundingClientRect(),s=n.left-i.left,c=n.top-i.top,{width:l,height:d}=this.container.getBoundingClientRect();e.style.position="fixed",e.style.width=`${l}px`,e.style.height=`${d}px`,e.style.top=`${c}px`,e.style.left=`${s}px`,e.style.overflow="visible",e.style.pointerEvents="none",e.id="superviz-svg-wrapper",this.container.parentElement.appendChild(e),this.wrapper=e}createRectWrapper(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=document.createElement("div"),s=this.container.getAttribute("width"),c=this.container.getAttribute("height"),l=this.container.getAttribute("rx"),d=this.container.getAttribute("ry");i.setAttribute("fill","transparent"),i.setAttribute("stroke","transparent"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("rx",l),i.setAttribute("ry",d),i.setAttribute("height",c),i.setAttribute("width",s),e.setAttribute("height",c),e.setAttribute("width",s),e.appendChild(i),n.appendChild(e);let p=this.container.getBoundingClientRect();n.style.position="fixed",n.style.top=`${p.top}px`,n.style.left=`${p.left}px`,n.style.width=`${p.width}px`,n.style.height=`${p.height}px`,n.style.overflow="visible",n.style.pointerEvents="none",n.id="superviz-rect-wrapper";let m=this.container.viewportElement;for(;m.viewportElement;)m=m.viewportElement;m.parentElement.appendChild(n),this.wrapper=n}createEllipseWrapper(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),n=document.createElement("div"),s=this.container.getAttribute("cx"),c=this.container.getAttribute("cy"),l=this.container.getAttribute("rx"),d=this.container.getAttribute("ry"),p=Number(s)-Number(l),m=Number(c)-Number(d),y=String(2*Number(s)),E=String(2*Number(c));i.setAttribute("fill","transparent"),i.setAttribute("stroke","transparent"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("rx",l),i.setAttribute("ry",d),i.setAttribute("cx",`${Number(s)-p}`),i.setAttribute("cy",`${Number(c)-m}`),i.setAttribute("height",E),i.setAttribute("width",y),e.setAttribute("height",E),e.setAttribute("width",y),e.appendChild(i),n.appendChild(e);let x=this.container.getBoundingClientRect();n.style.position="fixed",n.style.top=`${x.top}px`,n.style.left=`${x.left}px`,n.style.width=`${x.width}px`,n.style.height=`${x.height}px`,n.style.overflow="visible",n.style.pointerEvents="none",n.id="superviz-ellipse-wrapper";let P=this.container.viewportElement;for(;P.viewportElement;)P=P.viewportElement;P.parentElement.appendChild(n),this.wrapper=n}transform(e){var i,n;this.transformation=e,this.camera={x:e.translate.x,y:e.translate.y,scale:e.scale,screen:{width:((i=this.wrapper)==null?void 0:i.clientWidth)||1,height:((n=this.wrapper)==null?void 0:n.clientHeight)||1}},this.updateParticipantsMouses(!0)}updateVoidElementWrapper(){let e=this.container.getBoundingClientRect(),i=this.wrapper.getBoundingClientRect(),n=this.container;if((0,xb.isEqual)(e,i))return;let s=n.offsetLeft,c=n.offsetTop;this.wrapper.style.setProperty("width",`${e.width}px`),this.wrapper.style.setProperty("height",`${e.height}px`),this.wrapper.style.setProperty("top",`${c}px`),this.wrapper.style.setProperty("left",`${s}px`),this.wrapper.id="superviz-void-wrapper"}updateSVGElementWrapper(){let{left:e,top:i,width:n,height:s}=this.container.getBoundingClientRect(),{left:c,top:l,width:d,height:p}=this.wrapper.getBoundingClientRect();if(!(e===c&&i===l&&n===d&&s===p)){if(this.containerTagname.toLowerCase()==="svg"){this.updateSVGPosition();return}this.wrapper.style.setProperty("width",`${n}px`),this.wrapper.style.setProperty("height",`${s}px`),this.wrapper.style.setProperty("top",`${i}px`),this.wrapper.style.setProperty("left",`${e}px`)}}renderWrapper(){if(!this.wrapper){if(Vc[this.containerTagname]){this.renderVoidElementWrapper();return}if(jc[this.containerTagname]){this.renderSVGElementWrapper();return}this.renderElementWrapper()}}removePresenceMouseParticipant(e){let i=document.getElementById(`mouse-${e}`);i&&(i.remove(),this.presences.delete(e),this.mouses.delete(e))}renderElementWrapper(){let e=document.createElement("div");e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.overflow="visible",e.style.pointerEvents="none",this.setPositionNotStatic(),this.container.appendChild(e),this.wrapper=e}};var pa=class{constructor(t,e){let i=document.getElementById(t);if(!i)throw new Error(`[Superviz] Container with id ${t} not found`);return i.tagName.toLowerCase()==="canvas"?new Gc(t,e):new qc(t,e)}transform(t){}};f();f();var Tb=fi(cp());f();var Zc=(e=>(e.STARTED="STARTED",e.STOPPED="STOPPED",e))(Zc||{});var Jc=(t=>(t.REALTIME_STATE_CHANGED="realtime-component.state-changed",t))(Jc||{});var ha=class extends Ji{constructor(e,i,n){super();this.state="DISCONNECTED";this.callbacksToSubscribeWhenJoined=[];this.publish=(0,Tb.default)((e,i)=>{if(Object.values(vo).includes(e)){this.publishEventToClient(e,i);return}if(this.state!=="CONNECTED"){let n=`Realtime channel ${this.name} is not started yet. You can't publish event ${e} before start`;this.logger.log(n),console.warn(`[SuperViz] ${n}`);return}this.channel.emit(`message:${this.name}`,{name:e,payload:i})},30);this.subscribe=(e,i)=>{if(this.state!=="CONNECTED"){this.callbacksToSubscribeWhenJoined.push({event:e,callback:i});return}this.observers[e]||(this.observers[e]=new xe),this.observers[e].subscribe(i)};this.unsubscribe=(e,i)=>{this.observers[e]&&this.observers[e].unsubscribe(i)};this.fetchHistory=e=>q(this,null,function*(){if(this.state!=="CONNECTED"){let n="Realtime component is not started yet. You can't retrieve history before start";return this.logger.log(n),console.warn(`[SuperViz] ${n}`),null}return yield new Promise((n,s)=>{let c=l=>{var p;(p=l.events)!=null&&p.length||n(null);let d=l.events.reduce((m,y)=>{var E;return m[y.data.name]||(m[y.data.name]=[]),m[y.data.name].push({data:y.data.payload,connectionId:y.connectionId,name:y.data.name,participantId:(E=y.presence)==null?void 0:E.id,timestamp:y.timestamp}),m},{});e&&!d[e]&&s(new Error(`Event ${e} not found in the history`)),e&&n(d[e]),n(d)};this.channel.history(c)})});this.publishEventToClient=(e,i)=>{this.logger.log("realtime channel @ publishEventToClient",{event:e,data:i}),this.observers[e]&&this.observers[e].publish(i)};this.name=e,this.ioc=i,this.logger=new he("@superviz/sdk/realtime-channel"),this.channel=this.ioc.createRoom(`realtime:${this.name}`),this.localParticipant=n,this.subscribeToRealtimeEvents(),this.logger.log("started")}disconnect(){return q(this,null,function*(){if(this.state==="DISCONNECTED"){this.logger.log("Realtime channel is already disconnected");return}this.logger.log("destroyed"),this.changeState("DISCONNECTED"),this.channel.disconnect()})}changeState(e){this.logger.log("realtime component @ changeState - state changed",e),this.state=e,this.publishEventToClient("realtime-channel.state-changed",this.state)}subscribeToRealtimeEvents(){this.channel.presence.on("presence.joined-room",e=>{e.id===this.localParticipant.id&&(this.changeState("CONNECTED"),this.callbacksToSubscribeWhenJoined.forEach(({event:i,callback:n})=>{this.subscribe(i,n)}),this.logger.log("joined room"),this.changeState("CONNECTED"))}),this.channel.on(`message:${this.name}`,e=>{var i;this.logger.log("message received",e),this.publishEventToClient(e.data.name,{data:e.data.payload,participantId:((i=e==null?void 0:e.presence)==null?void 0:i.id)||null,name:e.data.name,timestamp:e.timestamp,connectionId:e.connectionId})})}};var fa=class extends gt{constructor(){super();this.state="STOPPED";this.channels=new Map;this.callbacksToSubscribeWhenJoined=[];this.subscribe=(e,i)=>{var n;if(!this.channel){this.callbacksToSubscribeWhenJoined.push({event:e,callback:i});return}(n=this.channel)==null||n.subscribe(e,i)};this.publish=(e,i)=>{var n;(n=this.channel)==null||n.publish(e,i)};this.unsubscribe=(e,i)=>{var n;(n=this.channel)==null||n.unsubscribe(e,i)};this.name="realtime",this.logger=new he("@superviz/sdk/realtime-component");let{localParticipant:e}=this.useStore("global-store");e.subscribe()}connect(e){if(this.state!=="STARTED"){let n="[SuperViz] Realtime component is not started yet. You can't connect to a channel before start";this.logger.log(n),console.warn(n);return}let i=this.channels.get(e);return i||(i=new ha(e,this.ioc,this.localParticipant),this.channels.set(e,i),i)}start(){this.logger.log("started"),this.channel=new ha("default",this.ioc,this.localParticipant),this.channel.subscribe("realtime-channel.state-changed",e=>{e==="CONNECTED"&&(this.callbacksToSubscribeWhenJoined.forEach(({event:i,callback:n})=>{this.channel.subscribe(i,n)}),this.changeState("STARTED"),this.callbacksToSubscribeWhenJoined=[],this.channel.unsubscribe("realtime-channel.state-changed"),this.channels.set("default",this.channel))})}destroy(){this.logger.log("destroyed"),this.changeState("STOPPED"),this.disconnectFromAllChannels()}disconnectFromAllChannels(){this.channels.forEach(e=>e.disconnect())}changeState(e){var i;this.logger.log("realtime component @ changeState - state changed",e),this.state=e,(i=this.channel)==null||i.publishEventToClient("realtime-component.state-changed",this.state)}};f();f();var Jp=(n=>(n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n))(Jp||{});var ma=class extends gt{constructor(e){var m;super();this.onParticipantListUpdate=e=>{if(this.localParticipantId===void 0||this.localParticipantId==="")return;if(!this.initialized){this.initialized=!0,this.initializeList();return}let i=N(w({},e.data),{tooltip:this.getTooltipData(e.data),controls:this.getControls(e.data)}),{participants:n,extras:s}=this.useStore("who-is-online-store");if(n.value.some(({id:p})=>p===e.data.id)){this.updateParticipant(i);return}if(s.value.some(({id:p})=>p===e.data.id)){this.updateExtra(i);return}if(n.value.length<4){n.publish([...n.value,i]);return}s.publish([...s.value,i])};this.onParticipantLeave=e=>{let{participants:i,extras:n}=this.useStore("who-is-online-store");if(i.value.findIndex(l=>l.id===e.id)===-1){let l=n.value.filter(d=>d.id!==e.id);n.publish(l);return}let c=i.value.filter(l=>l.id!==e.id);if(n.value.length){c.push(n.value[0]);let l=n.value.slice(1);n.publish(l)}i.publish(c)};this.updateParticipant=e=>{let{participants:i,extras:n}=this.useStore("who-is-online-store");if(e.isPrivate&&e.id!==this.localParticipantId){let c=i.value.filter(({id:d})=>d!==e.id),l=n.value.splice(0,1);i.publish([...c,...l]),n.publish([...n.value]);return}let s=i.value.map(c=>c.id===e.id?e:c);i.publish(s)};this.updateExtra=e=>{let{extras:i}=this.useStore("who-is-online-store");if(e.isPrivate&&e.id!==this.localParticipantId){let s=i.value.filter(({id:c})=>c!==e.id);i.publish(s);return}let n=i.value.map(s=>s.id===e.id?e:s);i.publish(n)};this.subscribeToLocalParticipantUpdates=e=>{if(!e.slot)return;this.localParticipantId=e.id;let{privateMode:i,joinedPresence:n}=this.useStore("who-is-online-store"),s=this.isInPresence(e.activeComponents);n.publish(s);let c=this.getParticipant(e);this.room.presence.update(N(w({},c),{isPrivate:i.value}))};this.goToMousePointer=e=>{var n,s,c;let i=(c=(n=e.presence)==null?void 0:n.id)!=null?c:(s=e.detail)==null?void 0:s.id;i!==this.localParticipantId&&(this.eventBus.publish("realtime.go-to-participant",i),this.publish("who-is-online.go-to-participant",i))};this.followMousePointer=({detail:e})=>{this.eventBus.publish("realtime.local-follow-participant",e.id),this.following&&this.publish("who-is-online.start-following-participant",this.following),this.following||this.publish("who-is-online.stop-following-participant"),e.source==="extras"&&this.highlightParticipantBeingFollowed(),this.updateParticipantsControls(e.id)};this.setPrivate=({detail:{isPrivate:e,id:i}})=>{let{privateMode:n,participants:s}=this.useStore("who-is-online-store"),c=s.value.find(l=>l.id===i);n.publish(e),this.eventBus.publish("realtime.private-mode",e),this.room.presence.update(N(w({},c),{isPrivate:e})),e&&this.publish("who-is-online.enter-private-mode"),e||this.publish("who-is-online.leave-private-mode")};this.setFollow=e=>{let{id:i}=e.presence;if(i===this.localParticipantId)return;let{data:n}=e,{following:s}=this.useStore("who-is-online-store");s.publish(n),this.followMousePointer({detail:{id:n}})};this.follow=({detail:e})=>{let{everyoneFollowsMe:i}=this.useStore("who-is-online-store");i.publish(!!(e!=null&&e.id)),this.room.emit("who-is-online.start-follow-me",e==null?void 0:e.id),this.following&&this.publish("who-is-online.start-follow-me",this.following),this.following||this.publish("who-is-online.stop-follow-me"),this.updateParticipantsControls(e==null?void 0:e.id)};this.stopFollowing=e=>{var n;if(e.id!==((n=this.following)==null?void 0:n.id))return;let{following:i}=this.useStore("who-is-online-store");i.publish(void 0),this.eventBus.publish("realtime.local-follow-participant",void 0),this.publish("who-is-online.stop-following-participant")};this.gather=e=>{this.room.emit("who-is-online.gather-all",e.detail.id),this.publish("who-is-online.gather-all",e.detail.id)};this.onJoinedRoom=e=>{if(e.id!==this.localParticipantId)return;let{localParticipant:i}=this.useStore("global-store");i.subscribe(this.subscribeToLocalParticipantUpdates)};this.name="whoIsOnline",this.logger=new he("@superviz/sdk/who-is-online-component");let{disablePresenceControls:i,disableGoToParticipant:n,disableFollowParticipant:s,disablePrivateMode:c,disableGatherAll:l,disableFollowMe:d,following:p}=this.useStore("who-is-online-store");if(p.subscribe(),typeof e!="object"){this.position=e!=null?e:"top-right";return}typeof e=="object"&&(this.position=(m=e.position)!=null?m:"top-right",this.setStyles(e.styles),i.publish(e.disablePresenceControls),n.publish(e.disableGoToParticipant),s.publish(e.disableFollowParticipant),c.publish(e.disablePrivateMode),l.publish(e.disableGatherAll),d.publish(e.disableFollowMe))}start(){let{localParticipant:e}=this.useStore("global-store");this.localParticipantId=e.value.id,this.subscribeToRealtimeEvents(),this.positionWhoIsOnline(),this.addListeners()}destroy(){this.unsubscribeFromRealtimeEvents(),this.removeListeners(),this.element.remove(),this.element=null;let{destroy:e}=this.useStore("who-is-online-store");e()}addListeners(){this.element.addEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.addEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.addEventListener("realtime.private-mode",this.setPrivate),this.element.addEventListener("realtime.follow-participant",this.follow),this.element.addEventListener("realtime.gather",this.gather)}removeListeners(){this.element.removeEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.removeEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.removeEventListener("realtime.private-mode",this.setPrivate),this.element.removeEventListener("realtime.follow-participant",this.follow),this.element.removeEventListener("realtime.gather",this.gather)}subscribeToRealtimeEvents(){this.room.presence.on("presence.update",this.onParticipantListUpdate),this.room.presence.on("presence.leave",this.onParticipantLeave),this.room.presence.on("presence.leave",this.stopFollowing),this.room.presence.on("presence.joined-room",this.onJoinedRoom),this.room.on("who-is-online.gather-all",this.goToMousePointer),this.room.on("who-is-online.start-follow-me",this.setFollow)}unsubscribeFromRealtimeEvents(){this.room.presence.off("presence.update"),this.room.presence.off("presence.leave"),this.room.presence.off("presence.joined-room"),this.room.off("who-is-online.gather-all",this.goToMousePointer),this.room.off("who-is-online.start-follow-me",this.setFollow)}initializeList(){let{participants:e,extras:i}=this.useStore("who-is-online-store");this.room.presence.get(n=>{let s=n.filter(p=>p.data.id&&p.data.avatar).map(({data:p})=>{let m=this.getTooltipData(p),y=this.getControls(p);return N(w({},p),{tooltip:m,controls:y,isLocalParticipant:p.id===this.localParticipantId})});if(!s.length)return;let c=s.findIndex(p=>p.id===this.localParticipantId),l=s.splice(c,1)[0],d=s.splice(0,3);e.publish([l,...d]),i.publish(s)})}setStyles(e=""){if(!e)return;let i=document.createElement("style");i.textContent=e,i.id="superviz-who-is-online-styles",document.head.appendChild(i)}positionWhoIsOnline(){if(this.element=document.createElement("superviz-who-is-online"),Object.values(Jp).includes(this.position.toLowerCase())){document.body.appendChild(this.element);let[n,s]=this.position.split("-");this.element.position=`${n}: 20px; ${s}: 40px;`;return}let i=document.getElementById(this.position);if(!i){this.element.position="top: 20px; right: 40px;",document.body.appendChild(this.element);return}i.appendChild(this.element),this.element.position="position: relative;"}getParticipant(e){let{avatar:i,activeComponents:n,id:s,name:c,slot:{index:l,color:d}}=e,p=this.shouldDisableDropdown({activeComponents:n,participantId:s}),m=this.getAvatar({avatar:i,color:d,name:c,slotIndex:l});return{id:s,name:c,avatar:m,disableDropdown:p,activeComponents:n,isPrivate:!1}}shouldDisableDropdown({activeComponents:e,participantId:i}){let{joinedPresence:{value:n},disablePresenceControls:{value:s},disableFollowMe:{value:c},disableFollowParticipant:{value:l},disableGoToParticipant:{value:d},disableGatherAll:{value:p},disablePrivateMode:{value:m}}=this.useStore("who-is-online-store");return n===!1||s===!0||i===this.localParticipantId&&c&&m&&p||i!==this.localParticipantId&&l&&d?!0:!(e!=null&&e.some(y=>y.toLowerCase().includes("presence")))}getTooltipData(e){let{name:i,disableDropdown:n,id:s}=e,c=s===this.localParticipantId,l={name:i};return c&&(l.name+=" (You)"),!n&&!c&&(l.info="Click to follow"),l}getAvatar({avatar:e,color:i,name:n,slotIndex:s}){var d,p;let c=e==null?void 0:e.imageUrl,l=(p=(d=n==null?void 0:n.at(0))==null?void 0:d.toUpperCase())!=null?p:"A";return{imageUrl:c,firstLetter:l,color:i,slotIndex:s}}getControls(e){let{disablePresenceControls:i}=this.useStore("who-is-online-store"),{disableDropdown:n,id:s}=e;return i.value||n?[]:s===this.localParticipantId?this.getLocalParticipantControls():this.getOtherParticipantsControls(s)}getOtherParticipantsControls(e){var l;let{disableGoToParticipant:i,disableFollowParticipant:n,following:s}=this.useStore("who-is-online-store"),c=[];if(i.value||c.push({label:"go to",icon:"place"}),!n.value){let d=((l=s.value)==null?void 0:l.id)===e,p=d?"unfollow":"follow",m=d?"send-off":"send";c.push({label:p,icon:m})}return c}getLocalParticipantControls(){let{disableFollowMe:{value:e},disableGatherAll:{value:i},disablePrivateMode:{value:n},everyoneFollowsMe:{value:s},privateMode:{value:c}}=this.useStore("who-is-online-store"),l=[];if(i||l.push({label:"gather all",icon:"gather"}),!e){let d=s?"send-off":"send",p=s?"stop followers":"everyone follows me";l.push({label:p,icon:d})}if(!n){let d=c?"eye_inative":"eye",p=c?"leave private mode":"private mode";l.push({label:p,icon:d})}return l}updateParticipantsControls(e){let{participants:i}=this.useStore("who-is-online-store"),n=i.value.map(s=>{if(e&&s.id!==e)return s;let{id:c}=s,l=this.getControls(s);return N(w({},s),{controls:l})});i.publish(n)}highlightParticipantBeingFollowed(){let{extras:e,participants:i,following:{value:n}}=this.useStore("who-is-online-store"),s=i.value[0],c=e.value.findIndex(p=>p.id===n.id),l=e.value.splice(c,1)[0];i.value.unshift(s),i.value[1]=l;let d=i.value.pop();e.value.push(d),e.publish(e.value),i.publish(i.value)}isInPresence(e){return e==null?void 0:e.some(i=>i.includes("presence"))}};f();f();var Yp=(n=>(n.BLUR="field.blur",n.FOCUS="field.focus",n.CONTENT_CHANGE="field.content-change",n.INTERACTION="field.interaction",n))(Yp||{});var ga=class extends gt{constructor(e={}){super();this.fields={};this.fieldsOriginalOutline={};this.focusList={};this.enabledOutlineFields={};this.enabledRealtimeSyncFields={};this.flags={};this.allowedTagNames=["input","textarea"];this.allowedInputTypes=["text","email","date","color","datetime-local","month","number","password","range","search","tel","time","url","week","checkbox","radio"];this.throwError={onInvalidFieldsProp:e=>{throw new Error(`"Fields" property must be either a string or an array of strings. Received type: ${e}`)},onFieldNotFound:e=>{throw new Error(`You must pass the id of an existing element. Element with id ${e} not found`)},onInvalidTagName:e=>{throw new Error(`You can't register an element with tag ${e}. Only the tags "${this.allowedTagNames.join(", ")}" are allowed`)},onInvalidInputType:e=>{throw new Error(`You can't register an input element of type ${e}. Only the types "${this.allowedInputTypes.join(", ")}" are allowed`)},onDeregisterInvalidField:e=>{throw new Error(`You can't deregister field of id ${e}. No field was registered with id ${e} `)}};this.sync=e=>{var l,d;let i=this.fields[e],n=this.hasCheckedProperty(i),c={value:n?i.checked:i.value,color:this.localParticipant.slot.color,fieldId:e,showOutline:this.canUpdateColor(e),syncContent:this.canSyncContent(e),attribute:n?"checked":"value"};(l=this.room)==null||l.emit("field.content-change"+e,c),(d=this.room)==null||d.emit("field.interaction"+e,c)};this.handleInput=e=>{var c,l,d,p;let i=e.target;(l=this.room)==null||l.emit("field.interaction"+i.id,{fieldId:i.id,color:(c=this.localParticipant.slot)==null?void 0:c.color});let n=this.canSyncContent(i.id);if(!n)return;let s={value:i.value,color:(d=this.localParticipant.slot)==null?void 0:d.color,fieldId:i.id,showOutline:this.canUpdateColor(i.id),syncContent:n,attribute:"value"};(p=this.room)==null||p.emit("field.content-change"+i.id,s)};this.handleChange=e=>{var c;let i=e.target;if(!this.canSyncContent(i.id))return;let s={fieldId:i.id,value:i.checked,color:this.localParticipant.slot.color,showOutline:this.canUpdateColor(i.id),syncContent:this.canSyncContent(i.id),attribute:"checked"};(c=this.room)==null||c.emit("field.content-change"+i.id,s)};this.handleFocus=e=>{var s;let i=e.target,n={color:this.localParticipant.slot.color,fieldId:i.id};(s=this.room)==null||s.emit("field.focus"+i.id,n)};this.handleBlur=e=>{var s;let i=e.target,n={fieldId:i.id};(s=this.room)==null||s.emit("field.blur"+i.id,n)};this.removeFieldColor=({presence:e,data:{fieldId:i}})=>{var n,s;((n=this.focusList[i])==null?void 0:n.id)!==e.id||!this.fields[i]||(this.fields[i].style.outline=(s=this.fieldsOriginalOutline[i])!=null?s:"",delete this.fieldsOriginalOutline[i],delete this.focusList[i])};this.updateFieldColor=({presence:e,data:{color:i,fieldId:n},timestamp:s})=>{var P;let c=(P=this.focusList[n])!=null?P:{},l=!c.id,d=e.id===this.localParticipant.id;if(l&&d){this.focusList[n]={id:e.id,color:i,firstInteraction:s,lastInteraction:s};return}if(c.id===e.id){this.focusList[n].lastInteraction=s;return}let m=s-c.lastInteraction>=3e3,y=s-c.firstInteraction>=1e4;if(!(m||y||l))return;this.focusList[n]={id:e.id,color:i,firstInteraction:s,lastInteraction:s};let x=d?this.fieldsOriginalOutline[n]:`1px solid ${i}`;this.fields[n].style.outline=x};this.updateFieldContent=y=>{var E=y,{presence:e,data:{value:i,fieldId:n,color:s,showOutline:c,syncContent:l,attribute:d},timestamp:p}=E,m=go(E,["presence","data","timestamp"]);this.publish("field.content-change",{value:i,fieldId:n,attribute:d,userId:e.id,userName:e.name,timestamp:p}),l&&this.canSyncContent(n)&&e.id!==this.localParticipant.id&&(this.fields[n][d]=i),c&&this.canUpdateColor(n)&&this.updateFieldColor(w({presence:e,data:{color:s,fieldId:n},timestamp:p},m))};this.publishTypedEvent=({presence:e,data:{fieldId:i,color:n}})=>{this.publish("field.interaction",{fieldId:i,userId:e.id,userName:e.name,color:n})};this.canSyncContent=e=>!this.flags.disableRealtimeSync&&this.enabledRealtimeSyncFields[e]!==!1||!!this.enabledRealtimeSyncFields[e];this.name="formElements",this.logger=new he("@superviz/sdk/presence-input-component");let s=e,{fields:i}=s,n=go(s,["fields"]);if(this.flags=n!=null?n:{},typeof i=="string"){this.validateField(i),this.fields[i]=null;return}if(Array.isArray(i)){i.forEach(c=>{this.validateField(c),this.fields[c]=null});return}i!==void 0&&this.throwError.onInvalidFieldsProp(typeof i)}enableOutline(e){let i=this.fields[e];i&&(this.enabledOutlineFields[e]=!0,this.fieldsOriginalOutline[e]=i.style.outline,i.addEventListener("focus",this.handleFocus),i.addEventListener("blur",this.handleBlur),this.room.on("field.focus"+e,this.updateFieldColor),this.room.on("field.blur"+e,this.removeFieldColor))}disableOutline(e){var n,s;let i=this.fields[e];i&&(this.enabledOutlineFields[e]=!1,i.style.outline=(n=this.fieldsOriginalOutline[e])!=null?n:"",i.removeEventListener("focus",this.handleFocus),i.removeEventListener("blur",this.handleBlur),this.room.off("field.focus"+e,this.updateFieldColor),this.room.off("field.blur"+e,this.removeFieldColor),(s=this.room)==null||s.emit("field.blur"+e,{fieldId:e}))}enableRealtimeSync(e){this.enabledRealtimeSyncFields[e]=!0}disableRealtimeSync(e){this.enabledRealtimeSyncFields[e]=!1}registerField(e){this.validateField(e);let i=document.getElementById(e);this.fields[e]=i,this.addListenersToField(i),this.addRealtimeListenersToField(e),this.fieldsOriginalOutline[e]=i.style.outline}deregisterField(e){var i;this.fields[e]||this.throwError.onDeregisterInvalidField(e),this.removeListenersFromField(this.fields[e]),this.removeRealtimeListenersFromField(e),this.fields[e].style.outline=this.fieldsOriginalOutline[e],this.fields[e]=void 0,delete this.enabledOutlineFields[e],delete this.enabledRealtimeSyncFields[e],delete this.fieldsOriginalOutline[e],delete this.focusList[e],(i=this.room)==null||i.emit("field.blur"+e,{fieldId:e})}start(){let{localParticipant:e}=this.useStore("global-store");e.subscribe(),Object.entries(this.fields).forEach(([i])=>{this.registerField(i)})}destroy(){this.restoreOutlines(),this.deregisterAllFields(),this.fieldsOriginalOutline=void 0,this.focusList=void 0}addListenersToField(e){let{type:i}=e;this.hasCheckedProperty(e)?e.addEventListener("change",this.handleChange):e.addEventListener("input",this.handleInput),!this.flags.disableOutline&&(e.addEventListener("focus",this.handleFocus),e.addEventListener("blur",this.handleBlur))}addRealtimeListenersToField(e){this.room&&(this.room.on("field.content-change"+e,this.updateFieldContent),this.room.on("field.interaction"+e,this.publishTypedEvent),!this.flags.disableOutline&&(this.room.on("field.focus"+e,this.updateFieldColor),this.room.on("field.blur"+e,this.removeFieldColor)))}removeListenersFromField(e){this.hasCheckedProperty(e)?e.removeEventListener("change",this.handleChange):e.removeEventListener("input",this.handleInput),!this.flags.disableOutline&&(e.removeEventListener("focus",this.handleFocus),e.removeEventListener("blur",this.handleBlur))}removeRealtimeListenersFromField(e){this.room&&(this.room.off("field.content-change"+e,this.updateFieldContent),this.room.off("field.interaction"+e,this.publishTypedEvent),!this.flags.disableOutline&&(this.room.off("field.focus"+e,this.updateFieldColor),this.room.off("field.blur"+e,this.removeFieldColor)))}deregisterAllFields(){Object.keys(this.fields).forEach(e=>{this.deregisterField(e)}),this.fields=void 0}validateField(e){this.validateFieldId(e);let i=document.getElementById(e);this.validateFieldTagName(i),this.validateFieldType(i)}validateFieldTagName(e){let i=e.tagName.toLowerCase();this.allowedTagNames.includes(i)||(this.logger.log("invalid element tagname"),this.throwError.onInvalidTagName(i))}validateFieldType(e){if(e.tagName.toLowerCase()!=="input")return;let i=e.getAttribute("type"),n=this.allowedInputTypes.includes(i);i&&!n&&(this.logger.log("invalid input type"),this.throwError.onInvalidInputType(i))}validateFieldId(e){document.getElementById(e)||this.throwError.onFieldNotFound(e)}restoreOutlines(){Object.entries(this.fields).forEach(([e])=>{this.fields[e].style.outline=this.fieldsOriginalOutline[e]})}hasCheckedProperty(e){let i=e.tagName.toLowerCase(),n=e.getAttribute("type");return i==="input"&&(n==="radio"||n==="checkbox")}canUpdateColor(e){return!this.flags.disableOutline&&this.enabledOutlineFields[e]!==!1||this.enabledOutlineFields[e]}};f();var eh=fi(op());f();var Kp=(I=>(I.svPrimary="sv-primary",I.svPrimary900="sv-primary-900",I.svPrimary200="sv-primary-200",I.svSecondary="sv-secondary",I.svGray="sv-gray",I.svSuccess="sv-success",I.svDanger="sv-danger",I.svBlack="sv-black",I.svWhite="sv-white",I.svGray100="sv-gray-100",I.svGray200="sv-gray-200",I.svGray300="sv-gray-300",I.svGray400="sv-gray-400",I.svGray500="sv-gray-500",I.svGray600="sv-gray-600",I.svGray700="sv-gray-700",I.svGray800="sv-gray-800",I))(Kp||{});f();f();function dM(r,t){return q(this,null,function*(){try{return(yield ze.validateApiKey(r,t))===!0}catch(e){if(e.status===404)return!1;throw new Error("Unable to validate API key")}})}var Sb=dM;f();var xn=class{static getRemoteConfig(){return q(this,arguments,function*(t="prod"){let{version:e}=yield import("./chunks/.version-GZKURMTS.js");if(t==="local")return(yield import("./chunks/.remote-config-BELNDJ4E.js")).default.remoteConfig;let i={version:e,environment:t},n=this.createUrl(i);return et(n,"GET",null)})}static getFeatures(t){return q(this,null,function*(){return et(`${this.REMOTE_CONFIG_BASE_URL}/features/${t}`,"GET",void 0)})}static createUrl({version:t,environment:e}){return`${this.REMOTE_CONFIG_BASE_URL}/sdk/${t}?env=${e}`}};xn.REMOTE_CONFIG_BASE_URL="https://remote-config.superviz.com";f();var Xp=fi(Xr());f();var va=class{constructor(){this.observers=new Map;this.subscribe=(t,e)=>{this.logger.log("event bus service @ subscribe",{event:t,callback:e}),this.observers.has(t)||this.observers.set(t,new xe),this.observers.get(t).subscribe(e)};this.unsubscribe=(t,e)=>{this.logger.log("event bus service @ unsubscribe",{event:t,callback:e}),this.observers.has(t)&&(this.observers.get(t).reset(),this.observers.delete(t))};this.publish=(t,e)=>{this.logger.log("event bus service @ publish",{event:t,data:e}),this.observers.has(t)&&this.observers.get(t).publish(e)};this.destroy=()=>{this.logger.log("event bus service @ destroy"),this.observers.forEach(t=>{t.reset(),t.destroy()}),this.observers.clear()};this.logger=new he("@superviz/sdk/event-bus"),this.logger.log("event bus created")}};f();f();var Yc=class{constructor(t){this.participant=t;this.stateSubject=new Ke;this.handleConnectionState=t=>{if(["DISCONNECTED","RECONNECT_ERROR"].includes(t.state)&&!["io client disconnect","Unauthorized connection"].includes(t.reason)&&this.forceReconnect(),t.reason==="Unauthorized connection"){console.error("[Superviz] Unauthorized connection. Please check your API key and if your domain is white listed."),this.state={state:"DISCONNECTED",reason:"Unauthorized connection"},this.stateSubject.next("AUTH_ERROR");return}this.state=t,this.stateSubject.next(t.state)};this.createClient()}destroy(){this.client.destroy()}subscribeToDefaultEvents(){this.client.connection.on(this.handleConnectionState)}forceReconnect(){var t;(t=this.client)==null||t.destroy(),this.client=null,this.createClient()}createClient(){let t=Z.get("environment");t=["dev","prod"].includes(t)?t:"dev",this.client=new ea(Z.get("apiKey"),t,{id:this.participant.id,name:this.participant.name}),this.subscribeToDefaultEvents()}createRoom(t){let e=Z.get("roomId");return this.client.connect(`${e}:${t}`)}};f();var ya=class{static checkComponentLimit(t){var n,s;let e=(n=Pp[t])!=null?n:t,i=Z.get("limits");return(s=i==null?void 0:i[e])!=null?s:!1}};f();var Ab=fi(Xr());f();var fM=1e3,ba=class{constructor(t,e){this.participants3DObservers=[];this.initializeParticipantsList=()=>{this.room.presence.get(t=>{t.forEach(e=>{this.unthrottledUpdatePresence3D(e.data)})})};this.onLocalParticipantJoined=t=>{if(!t.slot){setTimeout(()=>{this.onLocalParticipantJoined(this.localParticipant)},2e3);return}if(!this.room.isJoined){setTimeout(()=>{this.onLocalParticipantJoined(t)},2e3);return}let{hasJoined3D:e}=this.useStore("presence-3d-store");e.publish(!0),this.room.emit("participant-joined",t),this.room.presence.update(t),this.initializeParticipantsList()};this.subscribeToRoomEvents=()=>{this.room.on("participant-joined",this.onJoinedRoom),this.room.presence.on("presence.leave",this.onLeaveRoom),this.room.presence.on("presence.update",this.onParticipantUpdate),this.room.presence.on("presence.joined-room",this.onJoinedPresence)};this.unsubscribeFromRoomEvents=()=>{this.room.off("participant-joined",this.onJoinedRoom),this.room.presence.off("presence.leave"),this.room.presence.off("presence.update"),this.room.presence.off("presence.joined-room")};this.onJoinedRoom=t=>{let{participants:e}=this.useStore("presence-3d-store"),i=e.value.find(n=>n.id===t.data.id);e.publish([...e.value.filter(n=>n.id!==t.data.id),w(w({},i),t.data)])};this.onLeaveRoom=t=>{if(t.id===this.localParticipant.id){this.unsubscribeFromRoomEvents(),this.useStore("presence-3d-store").destroy();return}let{participants:e}=this.useStore("presence-3d-store"),i=e.value.filter(n=>n.id!==t.id);e.publish(i)};this.unthrottledUpdatePresence3D=t=>{if(!t||!t.id)return;let{participants:e,hasJoined3D:i}=this.useStore("presence-3d-store"),n=w(w({},e.value.find(s=>s.id===t.id)),t);e.publish([...e.value.filter(s=>s.id!==t.id),n]),!(!i.value||n.id!==this.localParticipant.id)&&this.room.presence.update(n)};this.onJoinedPresence=t=>{t.id===this.localParticipant.id&&(this.logger.log("participant joined 3D room",t.id),this.onLocalParticipantJoined(this.localParticipant))};this.updatePresence3D=(0,Ab.throttle)(t=>{this.unthrottledUpdatePresence3D(t)},fM);this.onParticipantUpdate=t=>{if(t.id===this.localParticipant.id)return;let{participants:e}=this.useStore("presence-3d-store"),i=w(w({},e.value.filter(s=>s.id===t.id)[0]),t.data),n=e.value.map(s=>s.id===t.id?i:s);e.publish(n),this.participants3DObservers[t.id]&&this.participants3DObservers[t.id].publish(i)};this.setParticipantData=t=>{this.updatePresence3D(t)};this.room=t,this.logger=new he("@superviz/sdk/presence3D-manager"),this.useStore=e,this.subscribeToRoomEvents();let{localParticipant:i}=this.useStore("global-store");i.subscribe(n=>{var s,c;this.localParticipant&&(this.localParticipant.name!==n.name||((s=this.localParticipant.avatar)==null?void 0:s.model3DUrl)!==((c=n.avatar)==null?void 0:c.model3DUrl))&&this.unthrottledUpdatePresence3D(w({},n)),this.localParticipant=n})}subscribeToUpdates(t,e){this.participants3DObservers[t]||(this.participants3DObservers[t]=new xe({logger:this.logger})),this.participants3DObservers[t].subscribe(e)}unsubscribeFromUpdates(t,e){this.participants3DObservers[t]&&this.participants3DObservers[t].unsubscribe(e)}get getParticipants(){return this.useStore("presence-3d-store").participants.value}};f();var Kc=class{constructor(t){this.onPresenceUpdate=t=>q(this,null,function*(){var n,s;let{localParticipant:e,participants:i}=Ze("global-store");if(!(!t.data.slot||!((n=e.value)!=null&&n.slot))){if(t.id===e.value.id){e.publish(N(w({},e.value),{slot:t.data.slot})),this.slotIndex=t.data.slot.index;return}if(((s=t.data.slot)==null?void 0:s.index)===this.slotIndex){this.slotIndex=null,e.publish(N(w({},e.value),{slot:null}));let c=yield this.assignSlot();console.debug(`[SuperViz] - Slot reassigned to ${e.value.id}, slot: ${c.colorName}`)}}});this.room=t,this.room.presence.on("presence.update",this.onPresenceUpdate)}assignSlot(){return q(this,null,function*(){let t=Array.from({length:16},(s,c)=>c),e=Math.floor(Math.random()*16),{localParticipant:i,participants:n}=Ze("global-store");try{yield new Promise((l,d)=>{this.room.presence.get(p=>{if((!p||!p.length)&&l(!0),p.length>=17){t=[],d(new Error("[SuperViz] - No more slots available"));return}p.forEach(m=>{m.id!==i.value.id&&(t=t.filter(y=>{var E,x;return y!==((x=(E=m.data)==null?void 0:E.slot)==null?void 0:x.index)}))}),l(!0)})}),!t.includes(e)&&(e=t.shift());let c={index:e,color:$o[e],textColor:Fo.includes(e)?"#fff":"#000",colorName:qp[e],timestamp:Date.now()};return this.slotIndex=e,i.publish(N(w({},i.value),{slot:c})),n.publish(N(w({},n.value),{[i.value.id]:N(w({},n.value[i.value.id]),{slot:c})})),this.room.presence.update({slot:c}),c}catch(s){return console.error(s),null}})}};f();var Qp=class extends Ji{constructor({participant:e,group:i}){super();this.isDestroyed=!1;this.activeComponents=[];this.componentsToAttachAfterJoin=[];this.activeComponentsInstances=[];this.eventBus=new va;this.timestamp=0;this.useStore=Ze.bind(this);this.addComponent=e=>{if(!this.canAddComponent(e))return;let{hasJoinedRoom:i,localParticipant:n,group:s}=Ze("global-store");if(!i.value){this.logger.log("launcher service @ addComponent - not joined yet"),this.componentsToAttachAfterJoin.push(e);return}e.attach({ioc:this.ioc,config:Z.configuration,eventBus:this.eventBus,useStore:Ze,Presence3DManagerService:ba}),this.activeComponents.push(e.name),this.activeComponentsInstances.push(e),n.publish(N(w({},n.value),{activeComponents:this.activeComponents})),ze.sendActivity(n.value.id,s.value.id,s.value.name,e.name)};this.attachComponentsAfterJoin=()=>{this.logger.log("launcher service @ attachComponentsAfterJoin"),this.componentsToAttachAfterJoin.forEach(e=>{this.logger.log("launcher service @ attachComponentsAfterJoin - attaching component",e.name),this.addComponent(e)}),this.componentsToAttachAfterJoin=[]};this.removeComponent=e=>{if(!this.activeComponents.includes(e.name)){let n=`Component ${e.name} is not initialized yet.`;this.logger.log(n),console.error(n);return}e.detach(),this.activeComponentsInstances=this.activeComponentsInstances.filter(n=>n.name!==e.name);let{localParticipant:i}=this.useStore("global-store");this.activeComponents.splice(this.activeComponents.indexOf(e.name),1),i.publish(N(w({},i.value),{activeComponents:this.activeComponents}))};this.destroy=()=>{var e,i,n,s;this.logger.log("launcher service @ destroy"),this.activeComponentsInstances.forEach(c=>{this.logger.log("launcher service @ destroy - removing component",c.name),this.removeComponent(c)}),this.activeComponents=[],this.activeComponentsInstances=[],Fs().destroy(),this.eventBus.destroy(),this.eventBus=void 0,(e=this.room)==null||e.presence.off("presence.joined-room"),(i=this.room)==null||i.presence.off("presence.leave"),(n=this.room)==null||n.presence.off("presence.update"),(s=this.ioc)==null||s.destroy(),this.isDestroyed=!0,window.SUPERVIZ=void 0};this.canAddComponent=e=>{var l;let i=Z.get(`features.${e.name}`),n=ya.checkComponentLimit(e.name),s=(l=this.activeComponents)==null?void 0:l.includes(e.name),c=[{isValid:i,message:`Component ${e.name} is not enabled in the room`},{isValid:!this.isDestroyed,message:"Component can not be added because the superviz room is destroyed. Initialize a new room to add and use components."},{isValid:!s,message:`Component ${e.name} is already active. Please remove it first`},{isValid:n,message:`You reached the limit usage of ${e.name}`}];for(let d=0;d<c.length;d++){let{isValid:p,message:m}=c[d];if(!p)return this.logger.log(m),console.error(m),!1}return!0};this.onAuthentication=e=>{e||(this.destroy(),console.error("Room can't be initialized because this website's domain is not whitelisted. If you are the developer, please add your domain in https://dashboard.superviz.com/developer"))};this.onLocalParticipantUpdate=e=>{this.activeComponents=e.activeComponents||[],this.activeComponents.length&&(this.activeComponentsInstances=this.activeComponentsInstances.filter(i=>this.activeComponents.includes(i.name)))};this.onParticipantListUpdate=e=>{this.logger.log("launcher service @ onParticipantListUpdate",e);let{localParticipant:i}=Ze("global-store"),n=Object.values(e).filter(s=>s.id===i.value.id).map(s=>{var c;return N(w({},s),{color:(c=s.slot)==null?void 0:c.color})})[0];!n||(0,Xp.isEqual)(i.value,n)||(i.publish(w(w({},i.value),n)),this.activeComponentsInstances=this.activeComponentsInstances.filter(s=>n.activeComponents?this.activeComponents.includes(s.name):!0))};this.onParticipantJoined=e=>{let{localParticipant:i}=Ze("global-store");e.id===i.value.id&&(this.logger.log("launcher service @ onParticipantJoined - local participant joined"),this.attachComponentsAfterJoin())};this.onSameAccount=()=>{this.publish("participant.same-account-error"),this.destroy()};this.startIOC=()=>{this.logger.log("launcher service @ startIOC");let{participants:e,localParticipant:i}=Ze("global-store");this.ioc.stateSubject.subscribe(s=>{s==="AUTH_ERROR"&&this.onAuthentication(!1)}),this.room.presence.get(s=>{let c={};s.forEach(l=>{c[l.id]=N(w({},l.data),{name:l.name,id:l.id,timestamp:l.timestamp})}),c[i.value.id]=w(w({},c[i.value.id]),i.value),e.publish(c)}),this.room.presence.on("presence.joined-room",this.onParticipantJoinedIOC),this.room.presence.on("presence.leave",this.onParticipantLeaveIOC),this.room.presence.on("presence.update",this.onParticipantUpdatedIOC);let{hasJoinedRoom:n}=Ze("global-store");n.publish(!0)};this.onParticipantJoinedIOC=e=>q(this,null,function*(){let{localParticipant:i}=Ze("global-store");if(e.id!==i.value.id)return;yield new Kc(this.room).assignSlot(),this.timestamp=e.timestamp,this.room.presence.update(i.value),this.logger.log("launcher service @ onParticipantJoined - local participant joined"),this.onParticipantJoined(e),this.publish("participant.local-joined",i.value),this.publish("participant.joined",i.value)});this.onParticipantLeaveIOC=e=>{let{participants:i,localParticipant:n}=Ze("global-store"),s=w({},i.value);delete s[e.id],i.publish(s),e.id===n.value.id&&(this.logger.log("launcher service @ onParticipantLeave - local participant left"),this.publish("participant.local-left",e.data)),this.logger.log("launcher service @ onParticipantLeave - participant left",e.data),this.publish("participant.left",e.data)};this.onParticipantUpdatedIOC=e=>{let{localParticipant:i}=Ze("global-store");if(i.value&&e.id===i.value.id&&!(0,Xp.isEqual)(i.value,e.data)){if(e.data.timestamp===this.timestamp){this.timestamp=0;return}i.publish(N(w(w({},e.data),i.value),{timestamp:e.timestamp})),this.timestamp=e.timestamp,this.room.presence.update(i.value),this.publish("participant.updated",e.data),this.logger.log("Publishing ParticipantEvent.UPDATED",e.data)}let{participants:n}=Ze("global-store");n.value[e.id]||this.publish("participant.joined",e.data);let s=w({},n.value);s[e.id]=N(w(w({},e.data),n.value[e.id]),{timestamp:e.timestamp}),n.publish(s);let c=Object.values(n.value);this.logger.log("Publishing ParticipantEvent.LIST_UPDATED",n.value),this.publish("participant.list-updated",c)};this.logger=new he("@superviz/sdk/launcher");let{localParticipant:n,participants:s,group:c,isDomainWhitelisted:l}=this.useStore("global-store");n.publish(w({},e)),s.subscribe(this.onParticipantListUpdate),l.subscribe(this.onAuthentication),n.subscribe(this.onLocalParticipantUpdate),c.publish(i),this.ioc=new Yc(n.value),this.room=this.ioc.createRoom("launcher"),this.eventBus=new va,this.logger.log("launcher created"),this.startIOC()}},Pb=r=>{if(window.SUPERVIZ)return console.warn("[SUPERVIZ] Room already initialized"),{destroy:window.SUPERVIZ.destroy,subscribe:window.SUPERVIZ.subscribe,unsubscribe:window.SUPERVIZ.unsubscribe,addComponent:window.SUPERVIZ.addComponent,removeComponent:window.SUPERVIZ.removeComponent};let t=new Qp(r);return window.SUPERVIZ=t,{destroy:t.destroy,subscribe:t.subscribe,unsubscribe:t.unsubscribe,addComponent:t.addComponent,removeComponent:t.removeComponent}};var mM=({group:r,participant:t,roomId:e,customColors:i})=>{if(i&&gM(i),!r||!r.name||!r.id)throw new Error("Group fields is required");if(!t||!t.id||!t.name)throw new Error("Participant name and id is required");if(!e)throw new Error("Room id is required")},gM=r=>{Object.entries(r).forEach(([t,e])=>{if(!Object.values(Kp).includes(t))throw new Error(`Color ${t} is not a valid color variable name. Please check the documentation for more information.`);if(!/^(\d{1,3}\s){2}\d{1,3}$/.test(e))throw new Error(`Color ${t} is not a valid color variable value. Please check the documentation for more information.`)})},vM=r=>{r&&Object.entries(r).forEach(([t,e])=>{let i=e.replace(/\s/g,", ");document.documentElement.style.setProperty(`--${t}`,i)})},yM=(r,t)=>q(void 0,null,function*(){var P,k;if(!(r&&r.trim()))throw new Error("API key is required");if(!t)throw new Error("Options is required");mM(t),t.debug?eh.debug.enable("*"):eh.debug.disable();let[{apiUrl:i,conferenceLayerUrl:n},s]=yield Promise.all([xn.getRemoteConfig(t.environment),xn.getFeatures(r)]);if(!(yield Sb(i,r)))throw new Error("Failed to validate API key");let[l,d,p]=yield Promise.all([ze.fetchConfig(i,r),ze.fetchLimits(i,r),ze.fetchWaterMark(i,r)]).catch(()=>{throw new Error("Failed to load configuration from server")});if(!l||!l.ablyKey)throw new Error("Failed to load configuration from server");let{ablyKey:m}=l,{participant:y,roomId:E,customColors:x}=t;return Z.setConfig({apiUrl:i,ablyKey:m,apiKey:r,conferenceLayerUrl:n,environment:(P=t.environment)!=null?P:"prod",roomId:E,debug:t.debug,limits:d,waterMark:p,colors:t.customColors,features:s}),vM(t.customColors),ze.createOrUpdateParticipant({name:y.name,participantId:y.id,avatar:(k=y.avatar)==null?void 0:k.imageUrl}),Pb(t)}),th=yM;f();f();f();f();f();var Xc=globalThis,eu=Xc.ShadowRoot&&(Xc.ShadyCSS===void 0||Xc.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Cb=Symbol(),Ob=new WeakMap,Qc=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==Cb)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(eu&&t===void 0){let i=e!==void 0&&e.length===1;i&&(t=Ob.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&Ob.set(e,t))}return t}toString(){return this.cssText}},Ib=r=>new Qc(typeof r=="string"?r:r+"",void 0,Cb);var ih=(r,t)=>{if(eu)r.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let e of t){let i=document.createElement("style"),n=Xc.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=e.cssText,r.appendChild(i)}},tu=eu?r=>r:r=>r instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return Ib(e)})(r):r;var{is:bM,defineProperty:_M,getOwnPropertyDescriptor:EM,getOwnPropertyNames:wM,getOwnPropertySymbols:xM,getPrototypeOf:TM}=Object,Or=globalThis,Lb=Or.trustedTypes,SM=Lb?Lb.emptyScript:"",rh=Or.reactiveElementPolyfillSupport,_a=(r,t)=>r,iu={toAttribute(r,t){switch(t){case Boolean:r=r?SM:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,t){let e=r;switch(t){case Boolean:e=r!==null;break;case Number:e=r===null?null:Number(r);break;case Object:case Array:try{e=JSON.parse(r)}catch(i){e=null}}return e}},nh=(r,t)=>!bM(r,t),Mb={attribute:!0,type:String,converter:iu,reflect:!1,hasChanged:nh},Rb,kb;(Rb=Symbol.metadata)!=null||(Symbol.metadata=Symbol("metadata")),(kb=Or.litPropertyMetadata)!=null||(Or.litPropertyMetadata=new WeakMap);var Tn=class extends HTMLElement{static addInitializer(t){var e;this._$Ei(),((e=this.l)!=null?e:this.l=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=Mb){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){let i=Symbol(),n=this.getPropertyDescriptor(t,i,e);n!==void 0&&_M(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){var c;let{get:n,set:s}=(c=EM(this.prototype,t))!=null?c:{get(){return this[e]},set(l){this[e]=l}};return{get(){return n==null?void 0:n.call(this)},set(l){let d=n==null?void 0:n.call(this);s.call(this,l),this.requestUpdate(t,d,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){var e;return(e=this.elementProperties.get(t))!=null?e:Mb}static _$Ei(){if(this.hasOwnProperty(_a("elementProperties")))return;let t=TM(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(_a("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(_a("properties"))){let e=this.properties,i=[...wM(e),...xM(e)];for(let n of i)this.createProperty(n,e[n])}let t=this[Symbol.metadata];if(t!==null){let e=litPropertyMetadata.get(t);if(e!==void 0)for(let[i,n]of e)this.elementProperties.set(i,n)}this._$Eh=new Map;for(let[e,i]of this.elementProperties){let n=this._$Eu(e,i);n!==void 0&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t)){let i=new Set(t.flat(1/0).reverse());for(let n of i)e.unshift(tu(n))}else t!==void 0&&e.push(tu(t));return e}static _$Eu(t,e){let i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(e=>e(this))}addController(t){var e,i;((e=this._$EO)!=null?e:this._$EO=new Set).add(t),this.renderRoot!==void 0&&this.isConnected&&((i=t.hostConnected)==null||i.call(t))}removeController(t){var e;(e=this._$EO)==null||e.delete(t)}_$E_(){let t=new Map,e=this.constructor.elementProperties;for(let i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){var e;let t=(e=this.shadowRoot)!=null?e:this.attachShadow(this.constructor.shadowRootOptions);return ih(t,this.constructor.elementStyles),t}connectedCallback(){var t,e;(t=this.renderRoot)!=null||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(i=>{var n;return(n=i.hostConnected)==null?void 0:n.call(i)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(e=>{var i;return(i=e.hostDisconnected)==null?void 0:i.call(e)})}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){var s;let i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(n!==void 0&&i.reflect===!0){let c=(((s=i.converter)==null?void 0:s.toAttribute)!==void 0?i.converter:iu).toAttribute(e,i.type);this._$Em=t,c==null?this.removeAttribute(n):this.setAttribute(n,c),this._$Em=null}}_$AK(t,e){var s;let i=this.constructor,n=i._$Eh.get(t);if(n!==void 0&&this._$Em!==n){let c=i.getPropertyOptions(n),l=typeof c.converter=="function"?{fromAttribute:c.converter}:((s=c.converter)==null?void 0:s.fromAttribute)!==void 0?c.converter:iu;this._$Em=n,this[n]=l.fromAttribute(e,c.type),this._$Em=null}}requestUpdate(t,e,i){var n;if(t!==void 0){if(i!=null||(i=this.constructor.getPropertyOptions(t)),!((n=i.hasChanged)!=null?n:nh)(this[t],e))return;this.P(t,e,i)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,e,i){var n;this._$AL.has(t)||this._$AL.set(t,e),i.reflect===!0&&this._$Em!==t&&((n=this._$Ej)!=null?n:this._$Ej=new Set).add(t)}_$ET(){return q(this,null,function*(){this.isUpdatePending=!0;try{yield this._$ES}catch(e){Promise.reject(e)}let t=this.scheduleUpdate();return t!=null&&(yield t),!this.isUpdatePending})}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i,n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if((i=this.renderRoot)!=null||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(let[c,l]of this._$Ep)this[c]=l;this._$Ep=void 0}let s=this.constructor.elementProperties;if(s.size>0)for(let[c,l]of s)l.wrapped!==!0||this._$AL.has(c)||this[c]===void 0||this.P(c,this[c],l)}let t=!1,e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),(n=this._$EO)==null||n.forEach(s=>{var c;return(c=s.hostUpdate)==null?void 0:c.call(s)}),this.update(e)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(e)}willUpdate(t){}_$AE(t){var e;(e=this._$EO)==null||e.forEach(i=>{var n;return(n=i.hostUpdated)==null?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(e=>this._$EC(e,this[e]))),this._$EU()}updated(t){}firstUpdated(t){}},Nb;Tn.elementStyles=[],Tn.shadowRootOptions={mode:"open"},Tn[_a("elementProperties")]=new Map,Tn[_a("finalized")]=new Map,rh==null||rh({ReactiveElement:Tn}),((Nb=Or.reactiveElementVersions)!=null?Nb:Or.reactiveElementVersions=[]).push("2.0.4");f();var wa=globalThis,ru=wa.trustedTypes,Db=ru?ru.createPolicy("lit-html",{createHTML:r=>r}):void 0,ah="$lit$",rr=`lit$${Math.random().toFixed(9).slice(2)}$`,lh="?"+rr,AM=`<${lh}>`,Pn=document,xa=()=>Pn.createComment(""),Ta=r=>r===null||typeof r!="object"&&typeof r!="function",zb=Array.isArray,Gb=r=>zb(r)||typeof(r==null?void 0:r[Symbol.iterator])=="function",oh=`[ 	
\f\r]`,Ea=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Fb=/-->/g,$b=/>/g,Sn=RegExp(`>|${oh}(?:([^\\s"'>=/]+)(${oh}*=${oh}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Bb=/'/g,Wb=/"/g,Vb=/^(?:script|style|textarea|title)$/i,jb=r=>(t,...e)=>({_$litType$:r,strings:t,values:e}),F=jb(1),N4=jb(2),bi=Symbol.for("lit-noChange"),lt=Symbol.for("lit-nothing"),Ub=new WeakMap,An=Pn.createTreeWalker(Pn,129);function qb(r,t){if(!Array.isArray(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return Db!==void 0?Db.createHTML(t):t}var Zb=(r,t)=>{let e=r.length-1,i=[],n,s=t===2?"<svg>":"",c=Ea;for(let l=0;l<e;l++){let d=r[l],p,m,y=-1,E=0;for(;E<d.length&&(c.lastIndex=E,m=c.exec(d),m!==null);)E=c.lastIndex,c===Ea?m[1]==="!--"?c=Fb:m[1]!==void 0?c=$b:m[2]!==void 0?(Vb.test(m[2])&&(n=RegExp("</"+m[2],"g")),c=Sn):m[3]!==void 0&&(c=Sn):c===Sn?m[0]===">"?(c=n!=null?n:Ea,y=-1):m[1]===void 0?y=-2:(y=c.lastIndex-m[2].length,p=m[1],c=m[3]===void 0?Sn:m[3]==='"'?Wb:Bb):c===Wb||c===Bb?c=Sn:c===Fb||c===$b?c=Ea:(c=Sn,n=void 0);let x=c===Sn&&r[l+1].startsWith("/>")?" ":"";s+=c===Ea?d+AM:y>=0?(i.push(p),d.slice(0,y)+ah+d.slice(y)+rr+x):d+rr+(y===-2?l:x)}return[qb(r,s+(r[e]||"<?>")+(t===2?"</svg>":"")),i]},Sa=class r{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let s=0,c=0,l=t.length-1,d=this.parts,[p,m]=Zb(t,e);if(this.el=r.createElement(p,i),An.currentNode=this.el.content,e===2){let y=this.el.content.firstChild;y.replaceWith(...y.childNodes)}for(;(n=An.nextNode())!==null&&d.length<l;){if(n.nodeType===1){if(n.hasAttributes())for(let y of n.getAttributeNames())if(y.endsWith(ah)){let E=m[c++],x=n.getAttribute(y).split(rr),P=/([.?@])?(.*)/.exec(E);d.push({type:1,index:s,name:P[2],strings:x,ctor:P[1]==="."?ou:P[1]==="?"?su:P[1]==="@"?au:Cn}),n.removeAttribute(y)}else y.startsWith(rr)&&(d.push({type:6,index:s}),n.removeAttribute(y));if(Vb.test(n.tagName)){let y=n.textContent.split(rr),E=y.length-1;if(E>0){n.textContent=ru?ru.emptyScript:"";for(let x=0;x<E;x++)n.append(y[x],xa()),An.nextNode(),d.push({type:2,index:++s});n.append(y[E],xa())}}}else if(n.nodeType===8)if(n.data===lh)d.push({type:2,index:s});else{let y=-1;for(;(y=n.data.indexOf(rr,y+1))!==-1;)d.push({type:7,index:s}),y+=rr.length-1}s++}}static createElement(t,e){let i=Pn.createElement("template");return i.innerHTML=t,i}};function On(r,t,e=r,i){var c,l,d;if(t===bi)return t;let n=i!==void 0?(c=e._$Co)==null?void 0:c[i]:e._$Cl,s=Ta(t)?void 0:t._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((l=n==null?void 0:n._$AO)==null||l.call(n,!1),s===void 0?n=void 0:(n=new s(r),n._$AT(r,e,i)),i!==void 0?((d=e._$Co)!=null?d:e._$Co=[])[i]=n:e._$Cl=n),n!==void 0&&(t=On(r,n._$AS(r,t.values),n,i)),t}var nu=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var p;let{el:{content:e},parts:i}=this._$AD,n=((p=t==null?void 0:t.creationScope)!=null?p:Pn).importNode(e,!0);An.currentNode=n;let s=An.nextNode(),c=0,l=0,d=i[0];for(;d!==void 0;){if(c===d.index){let m;d.type===2?m=new Bo(s,s.nextSibling,this,t):d.type===1?m=new d.ctor(s,d.name,d.strings,this,t):d.type===6&&(m=new lu(s,this,t)),this._$AV.push(m),d=i[++l]}c!==(d==null?void 0:d.index)&&(s=An.nextNode(),c++)}return An.currentNode=Pn,n}p(t){let e=0;for(let i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}},Bo=class r{get _$AU(){var t,e;return(e=(t=this._$AM)==null?void 0:t._$AU)!=null?e:this._$Cv}constructor(t,e,i,n){var s;this.type=2,this._$AH=lt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cv=(s=n==null?void 0:n.isConnected)!=null?s:!0}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return e!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=On(this,t,e),Ta(t)?t===lt||t==null||t===""?(this._$AH!==lt&&this._$AR(),this._$AH=lt):t!==this._$AH&&t!==bi&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):Gb(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==lt&&Ta(this._$AH)?this._$AA.nextSibling.data=t:this.T(Pn.createTextNode(t)),this._$AH=t}$(t){var s;let{values:e,_$litType$:i}=t,n=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=Sa.createElement(qb(i.h,i.h[0]),this.options)),i);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(e);else{let c=new nu(n,this),l=c.u(this.options);c.p(e),this.T(l),this._$AH=c}}_$AC(t){let e=Ub.get(t.strings);return e===void 0&&Ub.set(t.strings,e=new Sa(t)),e}k(t){zb(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,i,n=0;for(let s of t)n===e.length?e.push(i=new r(this.S(xa()),this.S(xa()),this,this.options)):i=e[n],i._$AI(s),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,e);t&&t!==this._$AB;){let n=t.nextSibling;t.remove(),t=n}}setConnected(t){var e;this._$AM===void 0&&(this._$Cv=t,(e=this._$AP)==null||e.call(this,t))}},Cn=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,n,s){this.type=1,this._$AH=lt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=lt}_$AI(t,e=this,i,n){let s=this.strings,c=!1;if(s===void 0)t=On(this,t,e,0),c=!Ta(t)||t!==this._$AH&&t!==bi,c&&(this._$AH=t);else{let l=t,d,p;for(t=s[0],d=0;d<s.length-1;d++)p=On(this,l[i+d],e,d),p===bi&&(p=this._$AH[d]),c||(c=!Ta(p)||p!==this._$AH[d]),p===lt?t=lt:t!==lt&&(t+=(p!=null?p:"")+s[d+1]),this._$AH[d]=p}c&&!n&&this.j(t)}j(t){t===lt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}},ou=class extends Cn{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===lt?void 0:t}},su=class extends Cn{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==lt)}},au=class extends Cn{constructor(t,e,i,n,s){super(t,e,i,n,s),this.type=5}_$AI(t,e=this){var c;if((t=(c=On(this,t,e,0))!=null?c:lt)===bi)return;let i=this._$AH,n=t===lt&&i!==lt||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==lt&&(i===lt||n);n&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;typeof this._$AH=="function"?this._$AH.call((i=(e=this.options)==null?void 0:e.host)!=null?i:this.element,t):this._$AH.handleEvent(t)}},lu=class{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){On(this,t)}},Jb={P:ah,A:rr,C:lh,M:1,L:Zb,R:nu,D:Gb,V:On,I:Bo,H:Cn,N:su,U:au,B:ou,F:lu},sh=wa.litHtmlPolyfillSupport,Hb;sh==null||sh(Sa,Bo),((Hb=wa.litHtmlVersions)!=null?Hb:wa.litHtmlVersions=[]).push("3.1.4");var Yb=(r,t,e)=>{var s,c;let i=(s=e==null?void 0:e.renderBefore)!=null?s:t,n=i._$litPart$;if(n===void 0){let l=(c=e==null?void 0:e.renderBefore)!=null?c:null;i._$litPart$=n=new Bo(t.insertBefore(xa(),l),l,void 0,e!=null?e:{})}return n._$AI(r),n};f();f();f();var cu=globalThis,uu=cu.ShadowRoot&&(cu.ShadyCSS===void 0||cu.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ch=Symbol(),Kb=new WeakMap,Aa=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==ch)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(uu&&t===void 0){let i=e!==void 0&&e.length===1;i&&(t=Kb.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&Kb.set(e,t))}return t}toString(){return this.cssText}},Xb=r=>new Aa(typeof r=="string"?r:r+"",void 0,ch),te=(r,...t)=>{let e=r.length===1?r[0]:t.reduce((i,n,s)=>i+(c=>{if(c._$cssResult$===!0)return c.cssText;if(typeof c=="number")return c;throw Error("Value passed to 'css' function must be a 'css' function result: "+c+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+r[s+1],r[0]);return new Aa(e,r,ch)},uh=(r,t)=>{if(uu)r.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let e of t){let i=document.createElement("style"),n=cu.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=e.cssText,r.appendChild(i)}},du=uu?r=>r:r=>r instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return Xb(e)})(r):r;var{is:PM,defineProperty:OM,getOwnPropertyDescriptor:CM,getOwnPropertyNames:IM,getOwnPropertySymbols:LM,getPrototypeOf:MM}=Object,Cr=globalThis,Qb=Cr.trustedTypes,RM=Qb?Qb.emptyScript:"",dh=Cr.reactiveElementPolyfillSupport,Pa=(r,t)=>r,ph={toAttribute(r,t){switch(t){case Boolean:r=r?RM:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,t){let e=r;switch(t){case Boolean:e=r!==null;break;case Number:e=r===null?null:Number(r);break;case Object:case Array:try{e=JSON.parse(r)}catch(i){e=null}}return e}},n_=(r,t)=>!PM(r,t),e_={attribute:!0,type:String,converter:ph,reflect:!1,hasChanged:n_},t_,i_;(t_=Symbol.metadata)!=null||(Symbol.metadata=Symbol("metadata")),(i_=Cr.litPropertyMetadata)!=null||(Cr.litPropertyMetadata=new WeakMap);var nr=class extends HTMLElement{static addInitializer(t){var e;this._$Ei(),((e=this.l)!=null?e:this.l=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=e_){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){let i=Symbol(),n=this.getPropertyDescriptor(t,i,e);n!==void 0&&OM(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){var c;let{get:n,set:s}=(c=CM(this.prototype,t))!=null?c:{get(){return this[e]},set(l){this[e]=l}};return{get(){return n==null?void 0:n.call(this)},set(l){let d=n==null?void 0:n.call(this);s.call(this,l),this.requestUpdate(t,d,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){var e;return(e=this.elementProperties.get(t))!=null?e:e_}static _$Ei(){if(this.hasOwnProperty(Pa("elementProperties")))return;let t=MM(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(Pa("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Pa("properties"))){let e=this.properties,i=[...IM(e),...LM(e)];for(let n of i)this.createProperty(n,e[n])}let t=this[Symbol.metadata];if(t!==null){let e=litPropertyMetadata.get(t);if(e!==void 0)for(let[i,n]of e)this.elementProperties.set(i,n)}this._$Eh=new Map;for(let[e,i]of this.elementProperties){let n=this._$Eu(e,i);n!==void 0&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t)){let i=new Set(t.flat(1/0).reverse());for(let n of i)e.unshift(du(n))}else t!==void 0&&e.push(du(t));return e}static _$Eu(t,e){let i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(e=>e(this))}addController(t){var e,i;((e=this._$EO)!=null?e:this._$EO=new Set).add(t),this.renderRoot!==void 0&&this.isConnected&&((i=t.hostConnected)==null||i.call(t))}removeController(t){var e;(e=this._$EO)==null||e.delete(t)}_$E_(){let t=new Map,e=this.constructor.elementProperties;for(let i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){var e;let t=(e=this.shadowRoot)!=null?e:this.attachShadow(this.constructor.shadowRootOptions);return uh(t,this.constructor.elementStyles),t}connectedCallback(){var t,e;(t=this.renderRoot)!=null||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(i=>{var n;return(n=i.hostConnected)==null?void 0:n.call(i)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(e=>{var i;return(i=e.hostDisconnected)==null?void 0:i.call(e)})}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){var s;let i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(n!==void 0&&i.reflect===!0){let c=(((s=i.converter)==null?void 0:s.toAttribute)!==void 0?i.converter:ph).toAttribute(e,i.type);this._$Em=t,c==null?this.removeAttribute(n):this.setAttribute(n,c),this._$Em=null}}_$AK(t,e){var s;let i=this.constructor,n=i._$Eh.get(t);if(n!==void 0&&this._$Em!==n){let c=i.getPropertyOptions(n),l=typeof c.converter=="function"?{fromAttribute:c.converter}:((s=c.converter)==null?void 0:s.fromAttribute)!==void 0?c.converter:ph;this._$Em=n,this[n]=l.fromAttribute(e,c.type),this._$Em=null}}requestUpdate(t,e,i){var n;if(t!==void 0){if(i!=null||(i=this.constructor.getPropertyOptions(t)),!((n=i.hasChanged)!=null?n:n_)(this[t],e))return;this.P(t,e,i)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,e,i){var n;this._$AL.has(t)||this._$AL.set(t,e),i.reflect===!0&&this._$Em!==t&&((n=this._$Ej)!=null?n:this._$Ej=new Set).add(t)}_$ET(){return q(this,null,function*(){this.isUpdatePending=!0;try{yield this._$ES}catch(e){Promise.reject(e)}let t=this.scheduleUpdate();return t!=null&&(yield t),!this.isUpdatePending})}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i,n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if((i=this.renderRoot)!=null||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(let[c,l]of this._$Ep)this[c]=l;this._$Ep=void 0}let s=this.constructor.elementProperties;if(s.size>0)for(let[c,l]of s)l.wrapped!==!0||this._$AL.has(c)||this[c]===void 0||this.P(c,this[c],l)}let t=!1,e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),(n=this._$EO)==null||n.forEach(s=>{var c;return(c=s.hostUpdate)==null?void 0:c.call(s)}),this.update(e)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(e)}willUpdate(t){}_$AE(t){var e;(e=this._$EO)==null||e.forEach(i=>{var n;return(n=i.hostUpdated)==null?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(e=>this._$EC(e,this[e]))),this._$EU()}updated(t){}firstUpdated(t){}},r_;nr.elementStyles=[],nr.shadowRootOptions={mode:"open"},nr[Pa("elementProperties")]=new Map,nr[Pa("finalized")]=new Map,dh==null||dh({ReactiveElement:nr}),((r_=Cr.reactiveElementVersions)!=null?r_:Cr.reactiveElementVersions=[]).push("2.0.4");var ie=class extends nr{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,i;let t=super.createRenderRoot();return(i=(e=this.renderOptions).renderBefore)!=null||(e.renderBefore=t.firstChild),t}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Yb(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return bi}},o_;ie._$litElement$=!0,ie.finalized=!0,(o_=globalThis.litElementHydrateSupport)==null||o_.call(globalThis,{LitElement:ie});var hh=globalThis.litElementPolyfillSupport;hh==null||hh({LitElement:ie});var s_;((s_=globalThis.litElementVersions)!=null?s_:globalThis.litElementVersions=[]).push("4.0.6");f();f();f();var de=r=>(t,e)=>{e!==void 0?e.addInitializer(()=>{customElements.define(r,t)}):customElements.define(r,t)};f();f();f();f();f();f();f();f();f();var In=class extends ie{render(){return F` <div>Hello from SuperViz, ${this.name}</div> `}};In.properties={name:{type:String}},In.styles=te`
    div {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: black;
      color: white;
    }
  `,In=le([de("superviz-hello-world")],In);f();f();f();f();var fh=te`
  * {
    --sv-primary: 98, 16, 204;
    --sv-primary-900: 56, 7, 136;
    --sv-primary-200: 193, 161, 234;
    --sv-secondary: 193, 251, 223;
    --sv-gray: 126, 122, 136;
    --sv-success: 12, 185, 71;
    --sv-danger: 229, 65, 30;
    --sv-black: 19, 18, 21;
    --sv-white: 255, 255, 255;
    --sv-gray-100: 250, 250, 252;
    --sv-gray-200: 233, 229, 239;
    --sv-gray-300: 201, 196, 209;
    --sv-gray-400: 174, 169, 184;
    --sv-gray-500: 126, 122, 136;
    --sv-gray-600: 87, 83, 95;
    --sv-gray-700: 57, 54, 62;
    --sv-gray-800: 38, 36, 42;
  }

  .sv-gray-200 {
    color: rgb(var(--sv-gray-200));
  }

  .sv-gray-400 {
    color: rgb(var(--sv-gray-400));
  }

  .sv-gray-500 {
    color: rgb(var(--sv-gray-500));
  }

  .sv-gray-600 {
    color: rgb(var(--sv-gray-600));
  }

  .sv-gray-700 {
    color: rgb(var(--sv-gray-700));
  }
`;f();var mh=te`
  .text {
    font-family: Roboto;
    font-size: 12px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px;
  }

  .text-bold {
    font-weight: 700;
  }

  .text-big {
    font-size: 14px;
  }

  .text-small {
    font-size: 10px;
  }
`;f();var gh=te`
  .sv-hr {
    width: 100%;
    height: 1px;
    background: rgb(var(--sv-gray-200));
    padding: 0px;
    margin: 0px;
    position: relative;
  }
`;f();var vh=te`
  .icon-button {
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(0, 0, 0, 0);
    border: 0px;
    width: 32px;
    height: 32px;
  }

  .icon-button > superviz-icon {
    display: flex !important;
  }

  .icon-button--xsmall {
    width: 18px;
    height: 18px;
  }

  .icon-button--small {
    width: 24px;
    height: 24px;
  }

  .icon-button--medium {
    width: 32px;
    height: 32px;
  }

  .icon-button--large {
    width: 40px;
    height: 40px;
  }

  .icon-button--clickable {
    cursor: pointer;
    border-radius: 100%;
  }

  .icon-button--clickable:hover:not(.icon-button--no-hover) {
    background: rgb(var(--sv-gray-300));
    transition: 0.25s background-color ease-in;
  }
  
  .icon-button--clickable:focus:not(.icon-button--no-hover) {
    transition: 0.25s background-color ease-in;
    background: rgb(var(--sv-gray-300));
  }
`;var fe=r=>{var e;class t extends r{constructor(){super(...arguments);this.unsubscribeFrom=[];this.useStore=Ze.bind(this)}connectedCallback(){setTimeout(()=>{var d,p;let s=document.getElementById("superviz-style"),c=this.createCustomColors(),l=document.createElement("style");l.innerHTML=(s==null?void 0:s.innerHTML)||"",(d=this.shadowRoot)==null||d.appendChild(l),c&&((p=this.shadowRoot)==null||p.appendChild(c))}),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribeFrom.forEach(s=>s(this))}createCustomColors(){if(!Z.get("colors"))return;let s=document.createElement("style"),c=Object.entries(Z.get("colors")).map(([l,d])=>`--${l}: ${d} !important;`).join(" ");return s.innerHTML=`
      * {
        ${c}
      }
    `,s}emitEvent(s,c,l={composed:!0,bubbles:!0}){let d=new CustomEvent(s,w({detail:c},l));this.dispatchEvent(d)}}return t.styles=[fh,mh,gh,vh,(e=r.styles)!=null?e:[]],t};f();var yh=(s=>(s[s.xs=14]="xs",s[s.sm=18]="sm",s[s.md=24]="md",s[s.lg=36]="lg",s[s.xl=44]="xl",s))(yh||{});var a_=fe(ie),kM=[a_.styles],Ln=class extends a_{constructor(){super(),this.name="",this.size="md"}get iconSize(){return yh[this.size]}render(){var t;return this.color||(this.color="black"),F`
      <i
        class="sv-icon sv-icon-${this.name}_${(t=this.suffix)!=null?t:this.size} ${this.color}"
        style="font-size: ${this.iconSize}px"
      ></i>
    `}};Ln.properties={name:{type:String},size:{type:String},color:{type:String},suffix:{type:String}},Ln.styles=[kM,te`
      div {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: black;
        color: white;
      }

      i,
      i.black {
        color: rgba(var(--sv-gray-600));
      }

      i.white {
        color: white;
      }
    `],Ln=le([de("superviz-icon")],Ln);f();f();f();f();var hu={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},fu=r=>(...t)=>({_$litDirective$:r,values:t}),Wo=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};var oe=fu(class extends Wo{constructor(r){var t;if(super(r),r.type!==hu.ATTRIBUTE||r.name!=="class"||((t=r.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(r){return" "+Object.keys(r).filter(t=>r[t]).join(" ")+" "}update(r,[t]){var i,n;if(this.st===void 0){this.st=new Set,r.strings!==void 0&&(this.nt=new Set(r.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(let s in t)t[s]&&!((i=this.nt)!=null&&i.has(s))&&this.st.add(s);return this.render(t)}let e=r.element.classList;for(let s of this.st)s in t||(e.remove(s),this.st.delete(s));for(let s in t){let c=!!t[s];c===this.st.has(s)||(n=this.nt)!=null&&n.has(s)||(c?(e.add(s),this.st.add(s)):(e.remove(s),this.st.delete(s)))}return bi}});f();function De(r){let t=document.getElementById(`superviz-${r}-styles`);if(!t)return;let e=new CSSStyleSheet;e.replaceSync(t.textContent),this.shadowRoot.adoptedStyleSheets=[...this.shadowRoot.adoptedStyleSheets,e]}f();var l_=te`
  .dropdown {
    position: relative;
    z-index: 100;
  }

  .dropdown-content {
    display: flex;
  }

  .select-clicked {
    border: 2px #26489a solid;
  }

  .dropdown-list {
    position: relative;
    z-index: 101;
  }

  .header {
    display: grid;
    grid-template-rows: 1fr 1px;
    align-items: center;
    padding: 0 10px;
    min-height: 42px;
    font-size: 16px;
    color: rgb(var(--sv-gray-600));
  }

  .menu {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    opacity: 0;
    display: none;
    background: #fff;
    padding: 0;
    z-index: 1;
    transition: 0.2s;
    border-radius: 3px;
  }

  .items {
    list-style: none;
    padding: 0;
    color: #9fa5b5;
    margin: 0;
  }

  .text.username {
    font-size: 14px;
    text-align: left;

    display: inline-block;
    vertical-align: middle;
    line-height: normal;
    padding: 8px 0;
  }

  .items li {
    color: rgb(var(--sv-gray-600));
    text-transform: uppercase;
    padding: 0 10px;
    cursor: pointer;
    min-width: 103px;
    min-height: 32px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 5px;
    height: 42px;
  }

  .sv-icon {
    width: 40px;
    height: 40px;
    background-color: red;
  }

  .active {
    background: rgb(var(--sv-gray-200));
  }

  .items li:hover {
    background: rgb(var(--sv-gray-200));
  }

  .menu-open {
    display: block;
    opacity: 1;
    position: fixed;
  }

  .sv-hr {
    width: 100%;
    height: 1px;
    background: rgb(var(--sv-gray-300));
    padding: 0px;
    margin: 0px;
    justify-self: flex-end;
  }

  .option-label {
    white-space: nowrap;
    line-height: 1;
  }

  .who-is-online__controls__item__icon {
    line-height: 1;
  }

  .who-is-online__controls__item {
    align-items: center;
  }

  @media (max-width: 780px) {
    .menu--top-left,
    .menu--top-center,
    .menu--top-right {
      bottom: 36px;
    }
  }
`;var c_=fe(ie),NM=[c_.styles,l_],Mn=class extends c_{constructor(){super();this.menu=void 0;this.onClickOutDropdown=e=>{if(e.stopPropagation(),!this.open)return;let i=e.composedPath(),n=this.shadowRoot.querySelector(".dropdown-content"),s=this.shadowRoot.querySelector(".dropdown-list"),l=this.shadowRoot.querySelector('slot[name="dropdown"]').assignedElements()[0],d=i.includes(n),p=i.includes(s),m=i.includes(l);d||p||m||this.close()};this.close=()=>{this.open=!1,this.emitEvent("close",{bubbles:!1,composed:!1})};this.callbackSelected=({label:e})=>{this.open=!1,this.emitEvent("selected",N(w({},this.returnData),{label:e}),{bubbles:!1,composed:!0})};this.adjustPosition=()=>{if(!this.open){cancelAnimationFrame(this.animationFrame);return}this.setHorizontalPosition(),this.setPositionVertical(),this.animationFrame=requestAnimationFrame(this.adjustPosition)};this.tooltip=()=>{if(!this.canShowTooltip)return"";let e=this.lastParticipant?"tooltip-top":"tooltip-bottom";return F` <superviz-tooltip
      tooltipData=${JSON.stringify(this.tooltipData)}
      ?shiftTooltipLeft=${this.shiftTooltipLeft}
      tooltipVerticalPosition=${e}
      classesPrefix="${this.tooltipPrefix}__tooltip"
      parentComponent=${this.parentComponent}
    ></superviz-tooltip>`};this.showTooltip=!1,this.returnData={}}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{this.menu=this.shadowRoot.querySelector(".menu"),De.call(this,[this.parentComponent])})}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this.onClickOutDropdown);let e=this.shadowRoot.querySelector(".dropdown");e==null||e.removeEventListener("mouseenter",()=>{this.showTooltip=!0}),e==null||e.removeEventListener("mouseleave",()=>{this.showTooltip=!1})}updated(e){if(e.has("open")){if(this.emitEvent("toggle-dropdown-state",{open:this.open,font:this.name},{bubbles:!1,composed:!1}),this.open){document.addEventListener("click",this.onClickOutDropdown),this.animationFrame=requestAnimationFrame(this.adjustPosition);return}document.removeEventListener("click",this.onClickOutDropdown)}}setHorizontalPosition(){let e=this.shadowRoot.querySelector('slot[name="dropdown"]'),{left:i,right:n,width:s}=e.parentElement.getBoundingClientRect(),{width:c}=this.menu.getBoundingClientRect(),l=i-(c-s)/2<0,d=n+(c-s)/2>window.innerWidth;if(this.shiftTooltipLeft){this.menu.style.left=`${i+8}px`,this.menu.style.right="",this.menu.style.transform="translate(0, 0)";return}if(!l&&!d){this.menu.style.left=`${i}px`,this.menu.style.right="",this.menu.style.transform=`translate(calc(-50% + ${s/2}px), 0)`;return}if(!l){this.menu.style.left="",this.menu.style.right=`${window.innerWidth-n}px`,this.menu.style.transform="translate(0, 0)";return}d||(this.menu.style.right="",this.menu.style.left=`${n-s}px`,this.menu.style.transform="translate(0, 0)")}setPositionVertical(){let e=this.shadowRoot.querySelector('slot[name="dropdown"]'),{top:i,bottom:n}=e.parentElement.getBoundingClientRect(),{height:s}=this.menu.getBoundingClientRect(),c=this.shiftTooltipLeft?-2:8;if(!(n+s+c>window.innerHeight)){this.menu.style.bottom="",this.menu.style.top=`${n+c}px`;return}this.menu.style.top="auto",this.menu.style.bottom=`${window.innerHeight-i+c}px`}get renderHeader(){return this.name?F` <div class="header ${this.getClass("header")}">
      <span class="text username ${this.getClass("title")}">${this.name}</span>
      <span class="sv-hr ${this.getClass("divisor")}"></span>
    </div>`:F``}toggle(){this.disabled||(this.open=!this.open,this.emitEvent("open",{open:this.open}))}getIcon(e){if(e)return F`
      <span class=${this.getClass("item__icon")}>
        <superviz-icon name="${e}" size="sm"></superviz-icon>
      </span>
    `}getLabel(e){return F`<span class="option-label ${this.getClass("item__label")}">${e}</span>`}get listOptions(){return this.options.map(({label:e,icon:i,active:n})=>{let s={text:!0,[this.getClass("item")]:!0,"text-bold":!0,active:n};return F`<li @click=${()=>this.callbackSelected({label:e})} class=${oe(s)}>
        ${this.getIcon(i)} ${this.getLabel(e)}
      </li>`})}getClass(e){return`${this.classesPrefix}__${e}`}render(){let e={menu:!0,"menu-open":this.open,"menu-left":this.align==="left","menu-right":this.align==="right","who-is-online-dropdown":this.name};return F`
      <div class="dropdown">
        <div class="dropdown-content" @click=${this.toggle}>
          <slot name="dropdown"></slot>
        </div>
        ${this.tooltip()}
      </div>
      <div class="dropdown-list">
        <div class=${oe(e)}>
          ${this.renderHeader}
          <ul class="${this.getClass("items")} items">
            ${this.listOptions}
          </ul>
        </div>
      </div>
    `}};Mn.styles=NM,Mn.properties={open:{type:Boolean},disabled:{type:Boolean},align:{type:String},options:{type:Array},icons:{type:Array},name:{type:String},tooltipData:{type:Object},showTooltip:{type:Boolean},dropdown:{type:Object},canShowTooltip:{type:Boolean},drodpdownSizes:{type:Object},shiftTooltipLeft:{type:Boolean},lastParticipant:{type:Boolean},classesPrefix:{type:String},parentComponent:{type:String},tooltipPrefix:{type:String},returnData:{type:Object}},Mn=le([de("superviz-dropdown")],Mn);f();f();var u_=te`
  .superviz-who-is-online__tooltip {
    --host-height: 0px;
    --host-width: 0px;
    --vertical-offset: 12px;

    background-color: rgb(var(--sv-gray-600));
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-items: center;
    position: fixed;
    opacity: 0;
    border-radius: 2px;
    cursor: default;
    visibility: hidden;
    transition: opacity 0.2s ease-in-out display 0s;
    z-index: 100;
    overflow-x: clip;
  }

  .superviz-who-is-online__tooltip-arrow {
    width: 13px;
    height: 13px;
    position: absolute;
    background-color: rgb(var(--sv-gray-600));
    transform: rotate(45deg);
    border-top-left-radius: 1px;
    border-bottom-right-radius: 1px;
  }

  .show-tooltip {
    opacity: 1;
    visibility: visible;
  }

  .tooltip-name,
  .tooltip-action {
    margin: 0;
    font-family: roboto;
    white-space: nowrap;
    text-align: center;
    line-height: 1.2;
  }

  .tooltip-name {
    color: white;
    font-size: 14px;
  }

  .tooltip-action {
    color: rgb(var(--sv-gray-400));
    font-size: 12px;
  }

  .tooltip-top {
    bottom: calc(var(--host-height) + var(--vertical-offset));
  }

  .tooltip-bottom {
    bottom: auto;
  }

  .tooltip-center {
    right: auto;
  }

  .tooltip-bottom .superviz-who-is-online__tooltip-arrow {
    top: -6.5px;
  }

  .tooltip-top .superviz-who-is-online__tooltip-arrow {
    bottom: -6.5px;
  }

  .tooltip-center .superviz-who-is-online__tooltip-arrow {
    left: 0;
    margin-left: 50%;
    translate: -50% 0;
  }

  .tooltip-left .superviz-who-is-online__tooltip-arrow {
    translate: 50% 0;
    border-radius: 0;
    right: 0;
  }

  .tooltip-right .superviz-who-is-online__tooltip-arrow {
    translate: -50% 0;
    border-radius: 0;
    left: 0;
  }

  .shift-left {
    --vertical-offset: 2px;
  }
`;f();var d_=fe(ie),DM=[d_.styles,u_],Rn=class extends d_{constructor(){super();this.positionFixedTooltip=()=>{var k,B,I,ne,ve;if(!this.canAnimate||!this.parentElement){this.hide();return}this.adjustTooltipPosition();let{bottom:e,left:i,width:n,right:s,top:c}=this.parentElement.getBoundingClientRect(),{width:l}=this.tooltip.getBoundingClientRect(),d="auto",p="auto",m="auto",y="auto",E="",x=window.innerWidth>780,P=x?14:12;this.tooltipHorizontalPosition.includes("right")&&(m=`${i+n/2}px`),this.tooltipHorizontalPosition.includes("left")&&(y=`${window.innerWidth-(s-n/2)}px`),this.tooltipHorizontalPosition.includes("center")&&(m=`${i}px`,E=`translateX(-${(l-n)/2}px)`),this.tooltipVerticalPosition.includes("bottom")&&(d=`${e+P}px`,P=-10),this.tooltipVerticalPosition.includes("top")&&(p=`${window.innerHeight-(c-P)}px`,P=10),this.shiftTooltipLeft&&(E=`translate(-${(l-(x?18:10)-42)/2}px, ${P}px)`),(k=this.tooltip)==null||k.style.setProperty("top",d),(B=this.tooltip)==null||B.style.setProperty("left",m),(I=this.tooltip)==null||I.style.setProperty("right",y),(ne=this.tooltip)==null||ne.style.setProperty("bottom",p),(ve=this.tooltip)==null||ve.style.setProperty("transform",E),this.animationFrame=window.requestAnimationFrame(this.positionFixedTooltip)};this.hide=()=>{this.canAnimate=!1,this.showTooltip=!1,window.cancelAnimationFrame(this.animationFrame)};this.show=()=>{this.canAnimate=!0,this.showTooltip=!0,this.positionFixedTooltip()};this.adjustTooltipVerticalPosition=()=>{let{bottom:e,top:i,width:n}=this.tooltip.getBoundingClientRect(),s=window.innerHeight;if(this.tooltipVerticalPosition.includes("top")&&i<0){this.tooltipVerticalPosition=this.tooltipVerticalPosition.replace("top","bottom");return}this.tooltipVerticalPosition.includes("bottom")&&e>s&&(this.tooltipVerticalPosition=this.tooltipVerticalPosition.replace("bottom","top"))};this.adjustTooltipHorizontalPosition=()=>{let{left:e,right:i,width:n}=this.tooltip.getBoundingClientRect(),s=window.innerWidth,{left:c,width:l,right:d}=this.parentElement.getBoundingClientRect(),p=c+l/2-n/2>0,m=n/2+d-l/2<s;if(p&&m){this.tooltipHorizontalPosition=this.tooltipHorizontalPosition.replace(/left|right/,"center");return}if(e<0){this.tooltipHorizontalPosition=this.tooltipHorizontalPosition.replace("center","right");return}i>s&&(this.tooltipHorizontalPosition=this.tooltipHorizontalPosition.replace("center","left"))};this.adjustTooltipPosition=()=>{if(!this.parentElement){this.hide();return}this.tooltip||(this.tooltip=this.shadowRoot.querySelector(".superviz-who-is-online__tooltip")),this.adjustTooltipVerticalPosition(),this.adjustTooltipHorizontalPosition()};this.tooltipVerticalPosition="tooltip-bottom",this.tooltipHorizontalPosition="tooltip-center",this.showTooltip=!1,this.parentSizes={height:0,width:0}}firstUpdated(e){let{parentElement:i}=this;i==null||i.addEventListener("mouseenter",this.show),i==null||i.addEventListener("mouseleave",this.hide),this.adjustTooltipPosition(),De.call(this,this.parentComponent)}disconnectedCallback(){super.disconnectedCallback();let{parentElement:e}=this;e==null||e.removeEventListener("mouseenter",this.show),e==null||e.removeEventListener("mouseleave",this.hide)}updated(e){if(e.has("showTooltip")&&this.showTooltip){let{parentElement:i}=this;if(!i)return;let{height:n,width:s}=i.getBoundingClientRect();(this.parentSizes.height!==n||this.parentSizes.width!==s)&&(this.parentSizes={height:n,width:s})}}getClass(e){return e?`${this.classesPrefix}__${e}`:this.classesPrefix}renderTooltip(){var s,c,l,d,p;let e=this.tooltipVerticalPosition,i=this.tooltipHorizontalPosition,n={"superviz-who-is-online__tooltip":!0,[this.getClass("")]:!0,[e]:!0,[i]:!0,"tooltip-extras":this.tooltipOnLeft,"show-tooltip":this.showTooltip,"shift-left":this.shiftTooltipLeft};return F`<div
      class=${oe(n)}
      style="--host-height: ${(s=this.parentSizes)==null?void 0:s.height}px; --host-width: ${(c=this.parentSizes)==null?void 0:c.width}px;"
    >
      <p class="tooltip-name ${this.getClass("title")}">${(l=this.tooltipData)==null?void 0:l.name}</p>
      ${(d=this.tooltipData)!=null&&d.info?F`<p class="tooltip-action ${this.getClass("action")}">${(p=this.tooltipData)==null?void 0:p.info}</p>`:""}
      <div class="superviz-who-is-online__tooltip-arrow ${this.getClass("")}"></div>
    </div>`}render(){return F`${this.renderTooltip()}`}};Rn.styles=DM,Rn.properties={tooltipData:{type:Object},tooltipOnLeft:{type:Boolean},showTooltip:{type:Boolean},tooltip:{type:Object},tooltipVerticalPosition:{type:String},tooltipHorizontalPosition:{type:String},parentSizes:{type:Object},shiftTooltipLeft:{type:Boolean},classesPrefix:{type:String},parentComponent:{type:String}},Rn=le([de("superviz-tooltip")],Rn);f();f();f();var mu=te`
  .modal--overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(var(--sv-gray-400), 0.8);

    z-index: 999;
  }

  .modal--container {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: transparent;

    z-index: 1000;
  }

  .modal--container > .modal {
    background: #fff;
    min-width: 370px;
    min-height: 150px;
    border-radius: 6px;
  }

  .modal--container > .modal > .modal--header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 16px;
    background: rgb(var(--sv-gray-200));
    border-radius: 6px 6px 0 0;
  }

  .modal--container > .modal > .modal--header > .text {
    display: flex;
    align-items: center;
  }

  .modal--container > .modal > .modal--header > .close {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: rgb(var(--sv-gray-600));
    cursor: pointer;
  }

  .modal--container > .modal > .modal--body {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px 24px 0 24px;
  }

  .modal--container > .modal > .modal--body > .modal--body-content {
    padding: 8px 0;
    text-align: center;
  }

  .modal--container > .modal > .modal--footer {
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 24px;
    padding: 24px;
  }

  .btn {
    width: 150px;
    height: 40px;
    text-transform: uppercase;
  }

  .btn--confirm {
    background: rgb(var(--sv-primary));
    border-radius: 4px;
    border: 1px solid rgb(var(--sv-primary));
    color: #fff;
    cursor: pointer;
  }

  .btn--cancel {
    background: transparent;
    border-radius: 4px;
    border: 1px solid rgb(var(--sv-gray-400));
    color: rgb(var(--sv-gray-400));
    cursor: pointer;
  }
`;var p_=fe(ie),FM=[p_.styles,mu],Uo=class extends p_{constructor(){super(...arguments);this.getContainer=()=>window.document.querySelector("superviz-modal-container");this.createContainer=e=>{this.modal=document.createElement("superviz-modal-container"),this.modal.setOptions(e)};this.createModal=({detail:e})=>{this.createContainer(e),window.document.body.appendChild(this.modal)};this.destroyModal=()=>{var e;this.modal=void 0,(e=this.getContainer())==null||e.remove()}}firstUpdated(){window.document.body.addEventListener("superviz-modal--open",this.createModal),window.document.body.addEventListener("superviz-modal--close",this.destroyModal)}disconnectedCallback(){this.destroyModal(),window.document.body.removeEventListener("superviz-modal--open",this.createModal),window.document.body.removeEventListener("superviz-modal--close",this.destroyModal)}};Uo.styles=FM,Uo=le([de("superviz-modal")],Uo);f();var h_=fe(ie),$M=[h_.styles,mu],Ho=class extends h_{constructor(){super(...arguments);this.closeModal=()=>{window.document.body.dispatchEvent(new CustomEvent("superviz-modal--close",{bubbles:!0,composed:!0}))};this.confirmModal=()=>{window.document.body.dispatchEvent(new CustomEvent("superviz-modal--confirm",{bubbles:!0,composed:!0}))}}setOptions(e){this.options=e}render(){let e=()=>F`
        <div class="modal--header">
          <span class="text text-bold sv-gray-600">${this.options.title}</span>
          <div class="close" @click=${this.closeModal}>
            <superviz-icon name="close" size="md"></superviz-icon>
          </div>
        </div>
      `,i=()=>F`
        <div class="modal--body">
          <div class="modal--body-content">${this.options.body}</div>
        </div>
      `,n=()=>{if(this.options.footer)return F` <div class="modal--footer">${this.options.footer}</div> `;let s=this.options.confirmLabel||"OK",c=this.options.cancelLabel||"Cancel";return this.options.confirm&&this.options.cancel?F`
          <div class="modal--footer">
            <button class="text text-bold btn btn--cancel" @click=${this.closeModal}>
              ${c}
            </button>
            <button class="text text-bold btn btn--confirm" @click=${this.confirmModal}>
              ${s}
            </button>
          </div>
        `:F`
        <div class="modal--footer">
          <button class="text text-bold btn btn--confirm" @click=${this.confirmModal}>
            ${s}
          </button>
        </div>
      `};return F`
      <div class="modal--overlay"></div>
      <div class="modal--container">
        <div class="modal">${e()} ${i()} ${n()}</div>
      </div>
    `}};Ho.styles=$M,Ho=le([de("superviz-modal-container")],Ho);f();f();f();f();var bh=te`
  .superviz-comments {
    --offset-left: 10px;
    --offset-right: 10px;
    --offset-top: 10px;
    --offset-bottom: 10px;

    display: flex;
    flex-direction: column;
    width: 320px;
    position: fixed;
    color: rgb(var(--sv-gray-700));
    background: rgb(var(--sv-white));
    top: 0px;
    bottom: 0;
    box-shadow: -2px 0 4px 0 rgba(0, 0, 0, 0.1);
    z-index: 100;
    overflow: hidden;
    transition: right 0.3s ease-out;
  }

  .header {
    width: 100%;
  }

  .content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
  }

  .toggle {
    display: flex;
    position: fixed;
    width: 100px;
    color: rgb(var(--sv-gray-700));
    background: rgb(var(--sv-white));
    top: 0;
    right: 0;
    bottom: 0;
  }

  .threads-on-left-side {
    left: var(--offset-left);
    top: var(--offset-top);
    bottom: var(--offset-bottom);
    border-radius: 8px;
  }

  .threads-on-right-side {
    right: var(--offset-right);
    top: var(--offset-top);
    bottom: var(--offset-bottom);
    border-radius: 8px;
  }

  #superviz-comments.threads-on-right-side.hide-at-right {
    right: -330px;
  }

  #superviz-comments.threads-on-left-side.hide-at-left {
    left: -330px;
  }

  .hide-at-right,
  .hide-at-left {
    animation: keep-opacity 0.3s ease-out;
    opacity: 0;
    visibility: hidden;
  }

  @keyframes keep-opacity {
    0%,
    99% {
      visibility: visible;
      opacity: 1;
    }

    100% {
      visibility: hidden;
      opacity: 0;
    }
  }
`;f();var _h=te`
  .comments__topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: rgb(var(--sv-gray-200));
    height: 50px;
  }

  .comments__topbar__title {
    margin: 0 16px;
    color: rgb(var(--sv-gray-600));
  }

  .comments__topbar__close-threads {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: 0.15s;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    box-sizing: border-box;
    margin-right: 8px;
    padding-right: 2px;
  }

  .comments__topbar__close-threads:hover {
    background: rgb(var(--sv-gray-300));
  }
`;f();var Eh=te`
  .reply {
    padding-left: 24px !important;
  }

  .comments__comment-item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    padding: 8px;
    gap: 4px;
  }

  .comments__comment-item__header {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    width: 100%;
    align-items: center;
    color: rgb(var(--sv-gray-500));
  }

  .comments__comment-item__actions {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .comments__comment-item__actions superviz-dropdown,
  .comments__comment-item__icons {
    width: 25px;
    height: 25px;
    border-radius: 50%;
  }

  .comments__comment-item__metadata {
    display: flex;
    width: 100%;
    gap: 8px;
    align-items: center;
  }

  .comments__comment-item__avatar-container {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    overflow: hidden;
    background-color: rgb(var(--sv-gray-300));
    border: 1px solid rgb(var(--sv-gray-500));
    color: #fff;

    display: flex;
    align-items: center;
    justify-content: center;
  }

  .comments__comment-item__avatar-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 50%;
  }

  .comments__comment-item__content {
    width: 100%;
    word-wrap: break-word;
  }

  .line-clamp {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .comments__comment-item__content__body {
    color: rgb(var(--sv-gray-700));
    position: relative;
    display: grid;
    grid-template-rows: 0px auto;
  }

  .comments__comment-item__content__body.editing-annotation {
    grid-template-rows: auto 0px;
  }

  .hidden {
    display: none;
  }

  .mentioned {
    display: inline-block;
  }

  .annotation-content {
    transition: opacity 0ms;
    opacity: 1;
    overflow: hidden;
  }

  .editing {
    transition: opacity 400ms;
    overflow: hidden;
    opacity: 0;
    pointer-events: none;
  }

  .comments__input--editable {
    transform: translateY(0);
    opacity: 1;
    overflow: hidden;
  }

  .hide-edit-input {
    transition: opacity 500ms, transform 0 linear 300ms;
    opacity: 0;
    pointer-events: none;
    width: 100%;
  }
`;f();var wh=te`
  .comments {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 288px;
  }

  .hidden {
    display: none;
  }
`;f();var xh=te`
  .comments__input {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    background: rgb(var(--sv-white));
    border-radius: 4px;
    border: 1px solid rgb(var(--sv-gray-300));
    position: relative;
    min-height: 40px;
    box-sizing: border-box;
  }

  .comments__input:focus-within {
    border: 1px solid rgb(var(--sv-gray-500));
  }

  .comments__input__textarea {
    border: 0px;
    text-align: left;
    border-radius: 4px;
    outline: none;
    font-size: 14px;
    color: rgb(var(--sv-gray-700));
    font-family: Roboto;
    white-space: pre-wrap;
    word-wrap: break-word;
    resize: none;
    line-height: 1.15rem;
    max-height: 5rem;
    appearance: none;
    height: 40px;
    width: 100%;
    box-sizing: border-box;

    padding-top: 7px;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
    border-right: 11px solid transparent;
    border-left: 11px solid transparent;
  }

  .fixed-width {
    width: 288px;
  }

  .comments__input__textarea:invalid {
    border-top: 15px solid transparent;
  }

  .comments__input__textarea::placeholder {
    color: rgb(var(--sv-gray-400));
    font-size: 14px;
    line-height: 14px;
  }

  .comments__input__options {
    display: flex;
    justify-content: space-between;
    box-sizing: border-box;
    overflow: hidden;
    height: 0;
    transition: 0.25s;
    border-radius: 0 0 4px 4px;
  }

  .active-textarea {
    height: 40px;
    padding: 4px 8px;
  }

  .sv-hr {
    border: none;
    width: 100%;
    opacity: 0;
    transition: 0.25s opacity linear, 0.25s visibility;
    visibility: hidden;
    height: 0;
    position: absolute;
  }

  .comments__input__divisor {
    border-top: 1px solid rgb(var(--sv-gray-300));
    opacity: 1;
    position: relative;
    visibility: visible;
  }

  .comment-actions {
    position: absolute;
    left: 8px;
    bottom: 3px;
    opacity: 0;
    transition: 0.25s opacity linear, 0.25s visibility;
    visibility: hidden;
  }

  .active-textarea > .comment-actions {
    opacity: 1;
    visibility: visible;
  }

  .mention:hover {
    background-color: rgb(var(--sv-gray-200));
  }

  .comments__input__button {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 100%;
    width: 32px;
    height: 32px;
    border: 0px;
  }

  .comments__input__send-button {
    background: rgb(var(--sv-primary));
    color: rgba(var(--sv-white), 1);
  }

  .align-send-btn > superviz-icon {
    cursor: pointer;
  }

  .comments__input__button:disabled {
    background: rgb(var(--sv-gray-200));
    color: rgb(var(--sv-gray-600));
  }

  .comment-input-options {
    display: flex;
    gap: 4px;
    position: absolute;
    right: 8px;
    bottom: 4px;
  }

  .comments__input__textarea:focus,
  .comments__input__textarea.active-textarea {
    border-radius: 4px 4px 0 0;
  }

  .comments__input__textarea:focus::placeholder {
    color: transparent;
  }
`;f();var Th=te`
  .comments__thread:hover:not(.comments__thread--selected) {
    background-color: rgba(var(--sv-gray-200), 0.3);
  }

  .avatars-comments {
    display: flex;
    position: absolute;
    bottom: 8px;
    padding: 0 8px;
    opacity: 1;
    transition: opacity 0.3s linear;
  }

  .avatars-comments.invisible {
    opacity: 0;
  }

  .avatar-container {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
  }

  .avatar {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    overflow: hidden;
    background-color: rgb(var(--sv-gray-300));
    border: 1px solid rgb(var(--sv-gray-500));
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .avatar img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 50%;
  }

  .avatar:not(:first-child) {
    margin-left: -6px;
  }

  .comments__thread--selected div:last-child {
    margin-inline: 8px;
  }

  .comments-container {
    display: flex;
    overflow: hidden;
    flex-direction: column;
  }

  .comments-container-wrapper {
    display: grid;
    grid-template-rows: 0fr;
    opacity: 0;
    overflow: hidden;
    transition: grid-template-rows 0.3s linear, opacity 0.3s linear;
  }

  .comments-container-wrapper.show {
    grid-template-rows: 1fr;
    opacity: 1;
  }

  .comments--expand {
    display: flex;
  }

  .comment-avatar--expand {
    display: block;
  }

  .hidden {
    overflow: hidden;
    opacity: 0;
  }

  .comments__thread {
    grid-row: 1 / span 2;
    padding: 8px;
    position: relative;
    cursor: pointer;
    transition: padding-bottom 0.3s linear, opacity 0.3s linear;
  }

  .extra-space-bottom {
    padding-bottom: 35px;
  }

  .comments__thread--selected {
    background-color: rgba(var(--sv-gray-200), 0.5);
    padding-bottom: 16px;
  }

  .hide-input {
    display: none;
  }

  .wrapper {
    margin-inline: 0;
    display: grid;
    grid-template-rows: 0fr;
    opacity: 0;
    width: 100%;
    transition: grid-template-rows 0.3s linear, opacity 0.3s linear;
  }

  .show-wrapper {
    grid-template-rows: 1fr;
    opacity: 1;
  }

  .comments__complete-annotation {
    position: relative;
    width: 100%;
  }

  .comments__hide-complete-annotation {
    min-height: 0;
    opacity: 0;
    animation: hide-annotation 10s linear;
  }

  @keyframes hide-annotation {
    0%,
    95% {
      min-height: 43px;
      opacity: 1;
    }

    100% {
      opacity: 0;
      min-height: 0;
    }
  }

  .comments__resolved-annotation-message {
    position: absolute;
    width: 100%;
    top: 0;
  }
`;f();var Sh=te`
  .comments__annotation-resolved {
    background: rgba(var(--sv-gray-200), 0.5);
    height: 26px;
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid rgb(var(--sv-gray-200));
  }
`;f();var Ah=te`
  .preload {
    animation-duration: 0s !important;
  }

  .comments__annotation-pin,
  .comments__annotation-pin__avatar {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    pointer-events: auto;
    z-index: 10;
    transform-origin: bottom left;
  }

  .comments__annotation-pin:hover {
    transform: scale(1.2);
    animation: growing-spring 0.3s linear;
  }

  .comments__annotation-pin:not(:hover) {
    animation: shrinking-spring 0.3s linear;
  }

  .comments__annotation-pin--add {
    transform: scale(1) !important;
    animation: none !important;
  }

  .comments__annotation-pin {
    position: absolute;

    width: 32px;
    height: 32px;

    background-color: rgb(var(--sv-white));
    border-radius: 50%;
    border-bottom-left-radius: 2px;

    border: 2px solid rgb(var(--sv-white));
    box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.35);
    transition: border-color 0.2s ease-in-out opacity 0.2s ease-in-out;
    padding: 2px;
    box-sizing: border-box;
    cursor: pointer;
  }

  .comments__annotation-pin:hover,
  .comments__annotation-pin:focus,
  .comments__annotation-pin--active {
    border-color: rgb(var(--sv-primary));
  }

  .comments__cursor-pointer,
  .comments__cursor-pointer .comments__annotation-pin__avatar {
    pointer-events: none;
  }

  .comments__annotation-pin__avatar {
    width: 100%;
    height: 100%;

    background-color: rgb(var(--sv-gray-400));
    border-radius: 50%;

    color: rgb(var(--sv-white));
  }

  .comments__annotation-pin__avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: contain;
  }

  .comments__annotation-pin__avatar--add {
    color: rgb(var(--sv-gray-700));
    background-color: rgb(var(--sv-white));
  }

  .floating-input {
    position: absolute;
    top: -2px;
    opacity: 0;
  }

  .left .floating-input {
    right: auto;
    left: 0;
    transform: translateX(calc(-100% - 7px));
    opacity: 1;
  }

  .right .floating-input {
    left: auto;
    right: 0;
    transform: translateX(calc(100% + 7px));
    opacity: 1;
  }

  .comments__annotation-pin-wrapper {
    transform-origin: center;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    position: absolute;
  }

  .comments__annotation-pin-wrapper--new {
    animation: bounce 0.5s linear !important;
  }

  .comments__annotation-pin-wrapper--new .comments__annotation-pin__avatar {
    transform-origin: center;
    animation: avatar-bounce 0.5s linear !important;
  }

  @keyframes avatar-bounce {
    0%,
    40% {
      transform: scale(1);
    }

    48% {
      transform: scale(0.8);
    }

    55%,
    92% {
      transform: scale(1);
    }

    96% {
      transform: scale(0.9);
    }

    100% {
      transform: scale(1);
    }
  }
  @keyframes bounce {
    0% {
      transform: scale(1);
    }

    20% {
      transform: scale(1.3);
    }

    40%,
    55% {
      transform: scale(1);
    }

    75% {
      transform: scale(1.15);
    }

    92%,
    100% {
      transform: scale(1);
    }
  }

  @keyframes growing-spring {
    0% {
      transform: scale(1);
    }

    25% {
      transform: scale(1.3);
    }

    50% {
      transform: scale(1.2);
    }

    75% {
      transform: scale(1.25);
    }

    100% {
      transform: scale(1.2);
    }
  }

  @keyframes shrinking-spring {
    0% {
      transform: scale(1.2);
    }

    33% {
      transform: scale(1);
    }

    66% {
      transform: scale(1.1);
    }

    100% {
      transform: scale(1);
    }
  }
`;f();var Ph=te`
  .comments__filter-container {
    display: flex;
    width: 100%;
    justify-content: flex-start;
    align-items: center;
  }

  .comments__filter {
    white-space: nowrap;
    padding: 12px;
    cursor: pointer;
    color: rgb(var(--sv-gray-500));
  }

  .content {
    display: flex;
    justify-content: space-between;
    flex-direction: row;
    align-items: center;
    gap: 6px;
  }

  .comments__filter__toggle-button {
    display: flex;
    flex-direction: row;
    gap: 4px;
  }

  .comments__filter__icon {
    margin-top: -2px;
  }
`;f();var Oh=te`
  .comments__floating-button {
    position: fixed;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    display: flex;
    align-items: center;
    gap: 4px;
    border: none;
    background-color: rgba(var(--sv-white));
    box-shadow: 2px 2px 15px 0px rgba(0, 0, 0, 0.2);
    color: rgb(var(--sv-gray-600));
    cursor: pointer;
    overflow: hidden;
    padding-left: 10px;
    z-index: 99;
    transition: width 300ms linear, border-radius 300ms linear;
  }

  .comments__floating-button:hover,
  .comments__floating-button.is-active {
    background-color: rgb(var(--sv-gray-400));
    color: rgba(var(--sv-white));
  }

  .comments-floating-button-hovered {
    transition: width 300ms linear 300ms, border-radius 300ms linear 300ms;
  }

  .comments__floating-button__text {
    text-align: left;
    overflow: hidden;
    position: relative;
    margin: 0;
    line-height: 1;
    right: 0px;
  }

  .not-hovered {
    animation-duration: 0s !important;
    transition-duration: 0s !important;
  }

  .hide-button {
    display: none !important;
  }

  .is-inactive:hover {
    width: 110px;
    border-radius: 30px;
  }

  .is-active:hover {
    width: 92px;
    border-radius: 30px;
    animation: decrease-width 600ms linear;
  }

  .textInactive.cancel {
    position: absolute;
    bottom: -30px;
    animation: drop-cancel-text 600ms linear;
    right: auto;
  }

  .textInactive.comment {
    position: absolute;
    top: 0;
    animation: drop-comment-text 600ms linear;
  }

  .textActive.comment {
    position: absolute;
    top: -30px;
    animation: rise-comment-text 600ms linear;
    right: auto;
  }

  .textActive.cancel {
    position: absolute;
    bottom: 0;
    animation: rise-cancel-text 600ms linear;
  }

  .comments__floating-button .comments__floating-button-text-box {
    width: 0;
  }

  .comments__floating-button.is-inactive:hover .comments__floating-button-text-box {
    width: 61.45px;
  }

  .comments__floating-button.is-active:hover .comments__floating-button-text-box {
    width: 43.0833px;
  }

  .comments__floating-button-text-box {
    position: relative;
    height: 14px;
    overflow-x: clip;
    transition: width 300ms linear;
  }

  .comments__floating-button__icon {
    position: relative;
  }

  .cross {
    position: absolute;
    top: 9px;
    left: 5.3px;
    transform: translateY(-50%);
    transform-origin: center;
    transition: transform 300ms linear 300ms;
  }

  rect {
    fill: rgba(var(--sv-gray-600));
  }

  .comments__floating-button:hover rect,
  .is-active rect {
    fill: rgba(var(--sv-white));
  }

  .cross-bar-1 {
    transform-origin: center;
    transform: rotate(0deg);
  }

  .cross-bar-2 {
    transform-origin: center;
    transform: rotate(90deg);
  }

  .is-active .cross {
    transform: translateY(-50%) rotate(45deg);
  }

  @keyframes rise-cancel-text {
    0%,
    50% {
      opacity: 0;
      bottom: -35px;
    }

    75% {
      opacity: 0;
    }

    100% {
      opacity: 1;
      bottom: 0px;
    }
  }

  @keyframes rise-comment-text {
    0% {
      opacity: 1;
      top: 0px;
    }

    35% {
      opacity: 0;
    }

    50%,
    100% {
      opacity: 0;
      top: -35px;
    }
  }

  @keyframes drop-cancel-text {
    0% {
      opacity: 1;
      bottom: 0px;
    }

    35% {
      opacity: 0;
    }

    50%,
    100% {
      opacity: 0;
      bottom: -30px;
    }
  }

  @keyframes drop-comment-text {
    0%,
    50% {
      opacity: 0;
      top: -30px;
    }

    75% {
      opacity: 0;
    }

    100% {
      opacity: 1;
      top: 0px;
    }
  }
`;f();var Ch=te`
.footer {
  bottom: 5px;
  position: absolute;
  right: 5px;
  font-family: Roboto,sans-serif;
  font-size: 10px;
  line-height: 15px;
  letter-spacing: normal;
}

.link {
  text-decoration: none;
  color: rgb(var(--sv-gray-500));
}

.powered-by {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  width: 140px;
  &--vertical {
    justify-content: flex-end;
  }
  &--horizontal {
    justify-content: center;
  }
}
`;f();var Ih=te`
  #mention-list {
    position: fixed;
    z-index: 1;
    max-height: 200px;
    overflow-y: auto;
    overflow-x: hidden;
    background-color: white;
    display: none;
    width: 216px;
    text-align: -webkit-center;
    border-radius: 2px;
    box-shadow: 2px 2px 8px 0px rgba(0, 0, 0, 0.3);
    padding-top: 4px;
    padding-bottom: 4px;
    /* Stiling scroll WebKit (Firefox) */
    scrollbar-width: 6px; /* Firefox */
    scrollbar-color: #888; /* Firefox */
    /* Style scroll WebKit (Chrome, Safari, Edge) */
    &::-webkit-scrollbar {
      width: 6px;
    }
    &::-webkit-scrollbar-thumb {
      background-color: #888;
    }
  }

  .mention-item {
    cursor: pointer;
    align-items: center;
    display: flex;
    height: 48px;
    width: 208px;
    margin-left: 4px;
    margin-right: 4px;
  }

  .mention-item:hover {
    background: rgb(var(--sv-gray-200));
  }

  .avatar {
    width: 32px;
    height: 32px;
    object-fit: contain;
    border-radius: 32%;
    margin-right: 14px;
    margin-left: 12px;
  }

  .default-avatar {
    width: 32px;
    height: 32px;
    margin-right: 14px;
    margin-left: 12px;
    border-radius: 50%;
    overflow: hidden;
    background-color: rgb(var(--sv-gray-300));
    border: 1px solid rgb(var(--sv-gray-500));
    color: #fff;

    display: flex;
    align-items: center;
    justify-content: center;
  }

  .avatar-type {
    font-family: Roboto;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px;
    color: rgb(var(--sv-gray-600));
  }
`;f();var Lh;function Mh(r){let t=r.querySelector("#superviz-comments");if(t&&!Lh){let e={childList:!0,attributes:!0,characterData:!0,subtree:!0};Lh=new MutationObserver(i=>{i.forEach(n=>{n.removedNodes.length&&n.removedNodes.forEach(s=>{s.id==="poweredby-footer"&&BM(r)})})}),Lh.observe(t,e)}}function BM(r){let t=document.createElement("div");t.id="poweredby-footer",t.className="footer";let e=document.createElement("div");e.className="powered-by powered-by--horizontal";let i=document.createElement("a");i.href="https://superviz.com/",i.target="_blank",i.className="link";let n=document.createElement("div");n.textContent="Powered by";let s=document.createElement("img");s.width=48,s.height=8.86,s.src="https://production.cdn.superviz.com/static/superviz-gray-logo.svg",e.appendChild(i),i.appendChild(n),n.appendChild(s),t.appendChild(e);let c=r.getElementById("superviz-comments");c&&c.appendChild(t),Mh(r)}var f_=fe(ie),WM=[f_.styles,bh,Ch],kn=class extends f_{constructor(){super(),this.annotations=[],this.annotationFilter="All comments",this.waterMarkState=!1,this.participantsList=[],this.side="left"}firstUpdated(t){super.firstUpdated(t),this.updateComplete.then(()=>{De.call(this,["comments"])})}updated(t){super.updated(t),this.updateComplete.then(()=>{this.waterMarkState&&Mh(this.shadowRoot),t.has("offset")&&this.applyOffset()})}participantsListed(t){this.participantsList=t}updateAnnotations(t){this.annotations=t}close(){this.emitEvent("close-threads",{})}waterMarkStatus(t){this.waterMarkState=t}setFilter({detail:t}){let{filter:{label:e}}=t;this.annotationFilter=e}getOffset(t){return t==null||t<0?"10px":`${t}px`}applyOffset(){let t=this.shadowRoot.querySelector(".superviz-comments");if(!t)return;let{left:e,right:i,top:n,bottom:s}=this.offset;t.style.setProperty("--offset-top",this.getOffset(n)),t.style.setProperty("--offset-bottom",this.getOffset(s)),t.style.setProperty("--offset-right",this.getOffset(i)),t.style.setProperty("--offset-left",this.getOffset(e))}get poweredBy(){return this.waterMarkState?F` <div id="poweredby-footer" class="footer">
      <div class="powered-by powered-by--horizontal">
        <a href="https://superviz.com/" target="_blank" class="link">
          <div class="">
            Powered by
            <img
              width="48px"
              height="8.86px"
              src="https://production.cdn.superviz.com/static/superviz-gray-logo.svg"
            />
          </div>
        </a>
      </div>
    </div>`:F``}render(){let t={"superviz-comments":!0,"threads-on-left-side":this.side==="left","threads-on-right-side":this.side==="right","hide-at-right":this.side==="right"&&!this.open,"hide-at-left":this.side==="left"&&!this.open};return F`
      <div id="superviz-comments" class=${oe(t)}>
        <div class="header">
          <superviz-comments-topbar
            @close-threads=${this.close}
            side=${this.side.split(":")[0]}
          ></superviz-comments-topbar>
        </div>
        <superviz-comments-annotation-filter
          filter=${this.annotationFilter}
          @select=${this.setFilter}
        >
        </superviz-comments-annotation-filter>
        <superviz-comments-content
          annotations=${JSON.stringify(this.annotations)}
          annotationFilter=${this.annotationFilter}
          participantsList=${JSON.stringify(this.participantsList)}
          class="content"
        ></superviz-comments-content>
        ${this.poweredBy}
      </div>
    `}};kn.styles=WM,kn.properties={open:{type:Boolean},annotations:{type:Object},annotationFilter:{type:String},waterMarkState:{type:Boolean},side:{type:String},participantsList:{type:Object},offset:{type:Object}},kn=le([de("superviz-comments")],kn);f();f();var UM=fe(ie),HM=[UM.styles,_h],Nn=class extends fe(ie){firstUpdated(t){super.firstUpdated(t),this.updateComplete.then(()=>{De.call(this,["comments"])})}close(){this.dispatchEvent(new CustomEvent("close-threads"))}render(){return F`
      <div class="comments__topbar">
        <span class="text text-bold comments__topbar__title">COMMENTS</span>
        <span @click=${this.close} class="comments__topbar__close-threads">
          <superviz-icon name=${this.side}></superviz-icon>
        </span>
      </div>
    `}};Nn.styles=HM,Nn.properties={side:{type:String}},Nn=le([de("superviz-comments-topbar")],Nn);f();f();f();f();var{I:zM}=Jb;var m_=()=>document.createComment(""),zo=(r,t,e)=>{var s;let i=r._$AA.parentNode,n=t===void 0?r._$AB:t._$AA;if(e===void 0){let c=i.insertBefore(m_(),n),l=i.insertBefore(m_(),n);e=new zM(c,l,r,r.options)}else{let c=e._$AB.nextSibling,l=e._$AM,d=l!==r;if(d){let p;(s=e._$AQ)==null||s.call(e,r),e._$AM=r,e._$AP!==void 0&&(p=r._$AU)!==l._$AU&&e._$AP(p)}if(c!==n||d){let p=e._$AA;for(;p!==c;){let m=p.nextSibling;i.insertBefore(p,n),p=m}}}return e},Ir=(r,t,e=r)=>(r._$AI(t,e),r),GM={},g_=(r,t=GM)=>r._$AH=t,v_=r=>r._$AH,vu=r=>{var i;(i=r._$AP)==null||i.call(r,!1,!0);let t=r._$AA,e=r._$AB.nextSibling;for(;t!==e;){let n=t.nextSibling;t.remove(),t=n}};var y_=(r,t,e)=>{let i=new Map;for(let n=t;n<=e;n++)i.set(r[n],n);return i},Lr=fu(class extends Wo{constructor(r){if(super(r),r.type!==hu.CHILD)throw Error("repeat() can only be used in text expressions")}dt(r,t,e){let i;e===void 0?e=t:t!==void 0&&(i=t);let n=[],s=[],c=0;for(let l of r)n[c]=i?i(l,c):c,s[c]=e(l,c),c++;return{values:s,keys:n}}render(r,t,e){return this.dt(r,t,e).values}update(r,[t,e,i]){var k;let n=v_(r),{values:s,keys:c}=this.dt(t,e,i);if(!Array.isArray(n))return this.ut=c,s;let l=(k=this.ut)!=null?k:this.ut=[],d=[],p,m,y=0,E=n.length-1,x=0,P=s.length-1;for(;y<=E&&x<=P;)if(n[y]===null)y++;else if(n[E]===null)E--;else if(l[y]===c[x])d[x]=Ir(n[y],s[x]),y++,x++;else if(l[E]===c[P])d[P]=Ir(n[E],s[P]),E--,P--;else if(l[y]===c[P])d[P]=Ir(n[y],s[P]),zo(r,d[P+1],n[y]),y++,P--;else if(l[E]===c[x])d[x]=Ir(n[E],s[x]),zo(r,n[y],n[E]),E--,x++;else if(p===void 0&&(p=y_(c,x,P),m=y_(l,y,E)),p.has(l[y]))if(p.has(l[E])){let B=m.get(c[x]),I=B!==void 0?n[B]:null;if(I===null){let ne=zo(r,n[y]);Ir(ne,s[x]),d[x]=ne}else d[x]=Ir(I,s[x]),zo(r,n[y],I),n[B]=null;x++}else vu(n[E]),E--;else vu(n[y]),y++;for(;x<=P;){let B=zo(r,d[P+1]);Ir(B,s[x]),d[x++]=B}for(;y<=E;){let B=n[y++];B!==null&&vu(B)}return this.ut=c,g_(r,d),bi}});var b_=fe(ie),VM=[b_.styles,wh],Dn=class extends b_{constructor(){super();this.unselectAnnotation=()=>{this.selectedAnnotation=null};this.unselectAnnotationEsc=e=>{e&&(e==null?void 0:e.key)!=="Escape"||(this.selectedAnnotation=null)};this.selectAnnotation=({detail:e})=>{let{uuid:i}=e;if(this.selectedAnnotation===i){this.selectedAnnotation=null;return}this.selectedAnnotation=i};this.checkLastAnnotation=e=>{var s,c;let i=this.annotations.filter(l=>l.resolved),n=this.annotations.filter(l=>!l.resolved);return this.annotationFilter==="All comments"?e===((s=i[i.length-1])==null?void 0:s.uuid):e===((c=n[n.length-1])==null?void 0:c.uuid)};this.annotations=[],this.participantsList=[]}updated(e){super.updated(e),this.updateComplete.then(()=>{let i=this.shadowRoot.querySelector(`[uuid='${this.selectedAnnotation}']`);if(!i)return;let n=this.lastCommentId===this.selectedAnnotation,s=n?0:-150,c=i.getClientRects()[0];c&&(this.scrollBy(0,c.y+s),n&&setTimeout(()=>{this.scrollBy(0,c.y+s)},200))})}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("select-annotation",this.selectAnnotation),window.document.body.addEventListener("keyup",this.unselectAnnotationEsc),window.document.body.addEventListener("unselect-annotation",this.unselectAnnotation)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("select-annotation",this.selectAnnotation),window.document.body.removeEventListener("keyup",this.unselectAnnotationEsc),window.document.body.removeEventListener("unselect-annotation",this.unselectAnnotation)}render(){return F` ${Lr(this.annotations.filter(e=>{var i;return(i=e.comments)==null?void 0:i.length}),e=>e.uuid,e=>F`
        <superviz-comments-annotation-item
          annotation=${JSON.stringify(e)}
          selected="${this.selectedAnnotation}"
          annotationFilter=${this.annotationFilter}
          uuid=${e.uuid}
          ?resolved=${e.resolved}
          isLastComment=${this.checkLastAnnotation(e.uuid)}
          participantsList=${JSON.stringify(this.participantsList)}
        >
        </superviz-comments-annotation-item>
      `)}`}};Dn.styles=VM,Dn.properties={annotations:{type:Object},selectedAnnotation:{type:String},annotationFilter:{type:String},participantsList:{type:Object}},Dn=le([de("superviz-comments-content")],Dn);f();f();f();f();f();var or=class extends Error{},yu=class extends or{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}},bu=class extends or{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}},_u=class extends or{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}},_i=class extends or{},Go=class extends or{constructor(t){super(`Invalid unit ${t}`)}},tt=class extends or{},Ei=class extends or{constructor(){super("Zone is an abstract class")}};f();f();f();var U="numeric",wi="short",qt="long",Mr={year:U,month:U,day:U},Oa={year:U,month:wi,day:U},Rh={year:U,month:wi,day:U,weekday:wi},Ca={year:U,month:qt,day:U},Ia={year:U,month:qt,day:U,weekday:qt},La={hour:U,minute:U},Ma={hour:U,minute:U,second:U},Ra={hour:U,minute:U,second:U,timeZoneName:wi},ka={hour:U,minute:U,second:U,timeZoneName:qt},Na={hour:U,minute:U,hourCycle:"h23"},Da={hour:U,minute:U,second:U,hourCycle:"h23"},Fa={hour:U,minute:U,second:U,hourCycle:"h23",timeZoneName:wi},$a={hour:U,minute:U,second:U,hourCycle:"h23",timeZoneName:qt},Ba={year:U,month:U,day:U,hour:U,minute:U},Wa={year:U,month:U,day:U,hour:U,minute:U,second:U},Ua={year:U,month:wi,day:U,hour:U,minute:U},Ha={year:U,month:wi,day:U,hour:U,minute:U,second:U},kh={year:U,month:wi,day:U,weekday:wi,hour:U,minute:U},za={year:U,month:qt,day:U,hour:U,minute:U,timeZoneName:wi},Ga={year:U,month:qt,day:U,hour:U,minute:U,second:U,timeZoneName:wi},Va={year:U,month:qt,day:U,weekday:qt,hour:U,minute:U,timeZoneName:qt},ja={year:U,month:qt,day:U,weekday:qt,hour:U,minute:U,second:U,timeZoneName:qt};f();f();f();f();var Rt=class{get type(){throw new Ei}get name(){throw new Ei}get ianaName(){return this.name}get isUniversal(){throw new Ei}offsetName(t,e){throw new Ei}formatOffset(t,e){throw new Ei}offset(t){throw new Ei}equals(t){throw new Ei}get isValid(){throw new Ei}};var Nh=null,Rr=class r extends Rt{static get instance(){return Nh===null&&(Nh=new r),Nh}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:e,locale:i}){return wu(t,e,i)}formatOffset(t,e){return kr(this.offset(t),e)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}};f();var Tu={};function jM(r){return Tu[r]||(Tu[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Tu[r]}var qM={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function ZM(r,t){let e=r.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(e),[,n,s,c,l,d,p,m]=i;return[c,n,s,l,d,p,m]}function JM(r,t){let e=r.formatToParts(t),i=[];for(let n=0;n<e.length;n++){let{type:s,value:c}=e[n],l=qM[s];s==="era"?i[l]=c:K(l)||(i[l]=parseInt(c,10))}return i}var xu={},bt=class r extends Rt{static create(t){return xu[t]||(xu[t]=new r(t)),xu[t]}static resetCache(){xu={},Tu={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch(e){return!1}}constructor(t){super(),this.zoneName=t,this.valid=r.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:e,locale:i}){return wu(t,e,i,this.name)}formatOffset(t,e){return kr(this.offset(t),e)}offset(t){let e=new Date(t);if(isNaN(e))return NaN;let i=jM(this.name),[n,s,c,l,d,p,m]=i.formatToParts?JM(i,e):ZM(i,e);l==="BC"&&(n=-Math.abs(n)+1);let E=Vo({year:n,month:s,day:c,hour:d===24?0:d,minute:p,second:m,millisecond:0}),x=+e,P=x%1e3;return x-=P>=0?P:1e3+P,(E-x)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}};f();var __={};function YM(r,t={}){let e=JSON.stringify([r,t]),i=__[e];return i||(i=new Intl.ListFormat(r,t),__[e]=i),i}var Dh={};function Fh(r,t={}){let e=JSON.stringify([r,t]),i=Dh[e];return i||(i=new Intl.DateTimeFormat(r,t),Dh[e]=i),i}var $h={};function KM(r,t={}){let e=JSON.stringify([r,t]),i=$h[e];return i||(i=new Intl.NumberFormat(r,t),$h[e]=i),i}var Bh={};function XM(r,t={}){let c=t,{base:e}=c,i=go(c,["base"]),n=JSON.stringify([r,i]),s=Bh[n];return s||(s=new Intl.RelativeTimeFormat(r,t),Bh[n]=s),s}var qa=null;function QM(){return qa||(qa=new Intl.DateTimeFormat().resolvedOptions().locale,qa)}var E_={};function eR(r){let t=E_[r];if(!t){let e=new Intl.Locale(r);t="getWeekInfo"in e?e.getWeekInfo():e.weekInfo,E_[r]=t}return t}function tR(r){let t=r.indexOf("-x-");t!==-1&&(r=r.substring(0,t));let e=r.indexOf("-u-");if(e===-1)return[r];{let i,n;try{i=Fh(r).resolvedOptions(),n=r}catch(l){let d=r.substring(0,e);i=Fh(d).resolvedOptions(),n=d}let{numberingSystem:s,calendar:c}=i;return[n,s,c]}}function iR(r,t,e){return(e||t)&&(r.includes("-u-")||(r+="-u"),e&&(r+=`-ca-${e}`),t&&(r+=`-nu-${t}`)),r}function rR(r){let t=[];for(let e=1;e<=12;e++){let i=Me.utc(2009,e,1);t.push(r(i))}return t}function nR(r){let t=[];for(let e=1;e<=7;e++){let i=Me.utc(2016,11,13+e);t.push(r(i))}return t}function Su(r,t,e,i){let n=r.listingMode();return n==="error"?null:n==="en"?e(t):i(t)}function oR(r){return r.numberingSystem&&r.numberingSystem!=="latn"?!1:r.numberingSystem==="latn"||!r.locale||r.locale.startsWith("en")||new Intl.DateTimeFormat(r.intl).resolvedOptions().numberingSystem==="latn"}var Wh=class{constructor(t,e,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;let l=i,{padTo:n,floor:s}=l,c=go(l,["padTo","floor"]);if(!e||Object.keys(c).length>0){let d=w({useGrouping:!1},i);i.padTo>0&&(d.minimumIntegerDigits=i.padTo),this.inf=KM(t,d)}}format(t){if(this.inf){let e=this.floor?Math.floor(t):t;return this.inf.format(e)}else{let e=this.floor?Math.floor(t):jo(t,3);return Ve(e,this.padTo)}}},Uh=class{constructor(t,e,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){let c=-1*(t.offset/60),l=c>=0?`Etc/GMT+${c}`:`Etc/GMT${c}`;t.offset!==0&&bt.create(l).valid?(n=l,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);let s=w({},this.opts);s.timeZone=s.timeZone||n,this.dtf=Fh(e,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(e=>{if(e.type==="timeZoneName"){let i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return N(w({},e),{value:i})}else return e}):t}resolvedOptions(){return this.dtf.resolvedOptions()}},Hh=class{constructor(t,e,i){this.opts=w({style:"long"},i),!e&&Au()&&(this.rtf=XM(t,i))}format(t,e){return this.rtf?this.rtf.format(t,e):w_(e,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]}},sR={firstDay:1,minimalDays:4,weekend:[6,7]},Re=class r{static fromOpts(t){return r.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,e,i,n,s=!1){let c=t||Oe.defaultLocale,l=c||(s?"en-US":QM()),d=e||Oe.defaultNumberingSystem,p=i||Oe.defaultOutputCalendar,m=Za(n)||Oe.defaultWeekSettings;return new r(l,d,p,m,c)}static resetCache(){qa=null,Dh={},$h={},Bh={}}static fromObject({locale:t,numberingSystem:e,outputCalendar:i,weekSettings:n}={}){return r.create(t,e,i,n)}constructor(t,e,i,n,s){let[c,l,d]=tR(t);this.locale=c,this.numberingSystem=e||l||null,this.outputCalendar=i||d||null,this.weekSettings=n,this.intl=iR(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=oR(this)),this.fastNumbersCached}listingMode(){let t=this.isEnglish(),e=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&e?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:r.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Za(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone(N(w({},t),{defaultToEN:!0}))}redefaultToSystem(t={}){return this.clone(N(w({},t),{defaultToEN:!1}))}months(t,e=!1){return Su(this,t,zh,()=>{let i=e?{month:t,day:"numeric"}:{month:t},n=e?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=rR(s=>this.extract(s,i,"month"))),this.monthsCache[n][t]})}weekdays(t,e=!1){return Su(this,t,Gh,()=>{let i=e?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=e?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=nR(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return Su(this,void 0,()=>Vh,()=>{if(!this.meridiemCache){let t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Me.utc(2016,11,13,9),Me.utc(2016,11,13,19)].map(e=>this.extract(e,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Su(this,t,jh,()=>{let e={era:t};return this.eraCache[t]||(this.eraCache[t]=[Me.utc(-40,1,1),Me.utc(2017,1,1)].map(i=>this.extract(i,e,"era"))),this.eraCache[t]})}extract(t,e,i){let n=this.dtFormatter(t,e),s=n.formatToParts(),c=s.find(l=>l.type.toLowerCase()===i);return c?c.value:null}numberFormatter(t={}){return new Wh(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,e={}){return new Uh(t,this.intl,e)}relFormatter(t={}){return new Hh(this.intl,this.isEnglish(),t)}listFormatter(t={}){return YM(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Pu()?eR(this.locale):sR}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}};f();f();var Zh=null,ct=class r extends Rt{static get utcInstance(){return Zh===null&&(Zh=new r(0)),Zh}static instance(t){return t===0?r.utcInstance:new r(t)}static parseSpecifier(t){if(t){let e=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new r(Fn(e[1],e[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${kr(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${kr(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,e){return kr(this.fixed,e)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}};f();var qo=class extends Rt{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function xi(r,t){let e;if(K(r)||r===null)return t;if(r instanceof Rt)return r;if(x_(r)){let i=r.toLowerCase();return i==="default"?t:i==="local"||i==="system"?Rr.instance:i==="utc"||i==="gmt"?ct.utcInstance:ct.parseSpecifier(i)||bt.create(r)}else return Fi(r)?ct.instance(r):typeof r=="object"&&"offset"in r&&typeof r.offset=="function"?r:new qo(r)}var T_=()=>Date.now(),S_="system",A_=null,P_=null,O_=null,C_=60,I_,L_=null,Oe=class{static get now(){return T_}static set now(t){T_=t}static set defaultZone(t){S_=t}static get defaultZone(){return xi(S_,Rr.instance)}static get defaultLocale(){return A_}static set defaultLocale(t){A_=t}static get defaultNumberingSystem(){return P_}static set defaultNumberingSystem(t){P_=t}static get defaultOutputCalendar(){return O_}static set defaultOutputCalendar(t){O_=t}static get defaultWeekSettings(){return L_}static set defaultWeekSettings(t){L_=Za(t)}static get twoDigitCutoffYear(){return C_}static set twoDigitCutoffYear(t){C_=t%100}static get throwOnInvalid(){return I_}static set throwOnInvalid(t){I_=t}static resetCaches(){Re.resetCache(),bt.resetCache()}};f();f();var ut=class{constructor(t,e){this.reason=t,this.explanation=e}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var M_=[0,31,59,90,120,151,181,212,243,273,304,334],R_=[0,31,60,91,121,152,182,213,244,274,305,335];function oi(r,t){return new ut("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${r}, which is invalid`)}function Ou(r,t,e){let i=new Date(Date.UTC(r,t-1,e));r<100&&r>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);let n=i.getUTCDay();return n===0?7:n}function k_(r,t,e){return e+(Bn(r)?R_:M_)[t-1]}function N_(r,t){let e=Bn(r)?R_:M_,i=e.findIndex(s=>s<t),n=t-e[i];return{month:i+1,day:n}}function Cu(r,t){return(r-t+7)%7+1}function Ja(r,t=4,e=1){let{year:i,month:n,day:s}=r,c=k_(i,n,s),l=Cu(Ou(i,n,s),e),d=Math.floor((c-l+14-t)/7),p;return d<1?(p=i-1,d=$n(p,t,e)):d>$n(i,t,e)?(p=i+1,d=1):p=i,w({weekYear:p,weekNumber:d,weekday:l},Ka(r))}function Jh(r,t=4,e=1){let{weekYear:i,weekNumber:n,weekday:s}=r,c=Cu(Ou(i,1,t),e),l=Nr(i),d=n*7+s-c-7+t,p;d<1?(p=i-1,d+=Nr(p)):d>l?(p=i+1,d-=Nr(i)):p=i;let{month:m,day:y}=N_(p,d);return w({year:p,month:m,day:y},Ka(r))}function Iu(r){let{year:t,month:e,day:i}=r,n=k_(t,e,i);return w({year:t,ordinal:n},Ka(r))}function Yh(r){let{year:t,ordinal:e}=r,{month:i,day:n}=N_(t,e);return w({year:t,month:i,day:n},Ka(r))}function Kh(r,t){if(!K(r.localWeekday)||!K(r.localWeekNumber)||!K(r.localWeekYear)){if(!K(r.weekday)||!K(r.weekNumber)||!K(r.weekYear))throw new _i("Cannot mix locale-based week fields with ISO-based week fields");return K(r.localWeekday)||(r.weekday=r.localWeekday),K(r.localWeekNumber)||(r.weekNumber=r.localWeekNumber),K(r.localWeekYear)||(r.weekYear=r.localWeekYear),delete r.localWeekday,delete r.localWeekNumber,delete r.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function D_(r,t=4,e=1){let i=Ya(r.weekYear),n=Zt(r.weekNumber,1,$n(r.weekYear,t,e)),s=Zt(r.weekday,1,7);return i?n?s?!1:oi("weekday",r.weekday):oi("week",r.weekNumber):oi("weekYear",r.weekYear)}function F_(r){let t=Ya(r.year),e=Zt(r.ordinal,1,Nr(r.year));return t?e?!1:oi("ordinal",r.ordinal):oi("year",r.year)}function Xh(r){let t=Ya(r.year),e=Zt(r.month,1,12),i=Zt(r.day,1,Zo(r.year,r.month));return t?e?i?!1:oi("day",r.day):oi("month",r.month):oi("year",r.year)}function Qh(r){let{hour:t,minute:e,second:i,millisecond:n}=r,s=Zt(t,0,23)||t===24&&e===0&&i===0&&n===0,c=Zt(e,0,59),l=Zt(i,0,59),d=Zt(n,0,999);return s?c?l?d?!1:oi("millisecond",n):oi("second",i):oi("minute",e):oi("hour",t)}function K(r){return typeof r=="undefined"}function Fi(r){return typeof r=="number"}function Ya(r){return typeof r=="number"&&r%1===0}function x_(r){return typeof r=="string"}function B_(r){return Object.prototype.toString.call(r)==="[object Date]"}function Au(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(r){return!1}}function Pu(){try{return typeof Intl!="undefined"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(r){return!1}}function W_(r){return Array.isArray(r)?r:[r]}function ef(r,t,e){if(r.length!==0)return r.reduce((i,n)=>{let s=[t(n),n];return i&&e(i[0],s[0])===i[0]?i:s},null)[1]}function U_(r,t){return t.reduce((e,i)=>(e[i]=r[i],e),{})}function Dr(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function Za(r){if(r==null)return null;if(typeof r!="object")throw new tt("Week settings must be an object");if(!Zt(r.firstDay,1,7)||!Zt(r.minimalDays,1,7)||!Array.isArray(r.weekend)||r.weekend.some(t=>!Zt(t,1,7)))throw new tt("Invalid week settings");return{firstDay:r.firstDay,minimalDays:r.minimalDays,weekend:Array.from(r.weekend)}}function Zt(r,t,e){return Ya(r)&&r>=t&&r<=e}function aR(r,t){return r-t*Math.floor(r/t)}function Ve(r,t=2){let e=r<0,i;return e?i="-"+(""+-r).padStart(t,"0"):i=(""+r).padStart(t,"0"),i}function sr(r){if(!(K(r)||r===null||r===""))return parseInt(r,10)}function Fr(r){if(!(K(r)||r===null||r===""))return parseFloat(r)}function Xa(r){if(!(K(r)||r===null||r==="")){let t=parseFloat("0."+r)*1e3;return Math.floor(t)}}function jo(r,t,e=!1){let i=Qg(10,t);return(e?Math.trunc:Math.round)(r*i)/i}function Bn(r){return r%4===0&&(r%100!==0||r%400===0)}function Nr(r){return Bn(r)?366:365}function Zo(r,t){let e=aR(t-1,12)+1,i=r+(t-e)/12;return e===2?Bn(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][e-1]}function Vo(r){let t=Date.UTC(r.year,r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond);return r.year<100&&r.year>=0&&(t=new Date(t),t.setUTCFullYear(r.year,r.month-1,r.day)),+t}function $_(r,t,e){return-Cu(Ou(r,1,t),e)+t-1}function $n(r,t=4,e=1){let i=$_(r,t,e),n=$_(r+1,t,e);return(Nr(r)-i+n)/7}function Qa(r){return r>99?r:r>Oe.twoDigitCutoffYear?1900+r:2e3+r}function wu(r,t,e,i=null){let n=new Date(r),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);let c=w({timeZoneName:t},s),l=new Intl.DateTimeFormat(e,c).formatToParts(n).find(d=>d.type.toLowerCase()==="timezonename");return l?l.value:null}function Fn(r,t){let e=parseInt(r,10);Number.isNaN(e)&&(e=0);let i=parseInt(t,10)||0,n=e<0||Object.is(e,-0)?-i:i;return e*60+n}function tf(r){let t=Number(r);if(typeof r=="boolean"||r===""||Number.isNaN(t))throw new tt(`Invalid unit value ${r}`);return t}function Jo(r,t){let e={};for(let i in r)if(Dr(r,i)){let n=r[i];if(n==null)continue;e[t(i)]=tf(n)}return e}function kr(r,t){let e=Math.trunc(Math.abs(r/60)),i=Math.trunc(Math.abs(r%60)),n=r>=0?"+":"-";switch(t){case"short":return`${n}${Ve(e,2)}:${Ve(i,2)}`;case"narrow":return`${n}${e}${i>0?`:${i}`:""}`;case"techie":return`${n}${Ve(e,2)}${Ve(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Ka(r){return U_(r,["hour","minute","second","millisecond"])}var lR=["January","February","March","April","May","June","July","August","September","October","November","December"],rf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],cR=["J","F","M","A","M","J","J","A","S","O","N","D"];function zh(r){switch(r){case"narrow":return[...cR];case"short":return[...rf];case"long":return[...lR];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var nf=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],of=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],uR=["M","T","W","T","F","S","S"];function Gh(r){switch(r){case"narrow":return[...uR];case"short":return[...of];case"long":return[...nf];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Vh=["AM","PM"],dR=["Before Christ","Anno Domini"],pR=["BC","AD"],hR=["B","A"];function jh(r){switch(r){case"narrow":return[...hR];case"short":return[...pR];case"long":return[...dR];default:return null}}function H_(r){return Vh[r.hour<12?0:1]}function z_(r,t){return Gh(t)[r.weekday-1]}function G_(r,t){return zh(t)[r.month-1]}function V_(r,t){return jh(t)[r.year<0?0:1]}function w_(r,t,e="always",i=!1){let n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(r)===-1;if(e==="auto"&&s){let y=r==="days";switch(t){case 1:return y?"tomorrow":`next ${n[r][0]}`;case-1:return y?"yesterday":`last ${n[r][0]}`;case 0:return y?"today":`this ${n[r][0]}`;default:}}let c=Object.is(t,-0)||t<0,l=Math.abs(t),d=l===1,p=n[r],m=i?d?p[1]:p[2]||p[1]:d?n[r][0]:r;return c?`${l} ${m} ago`:`in ${l} ${m}`}function j_(r,t){let e="";for(let i of r)i.literal?e+=i.val:e+=t(i.val);return e}var fR={D:Mr,DD:Oa,DDD:Ca,DDDD:Ia,t:La,tt:Ma,ttt:Ra,tttt:ka,T:Na,TT:Da,TTT:Fa,TTTT:$a,f:Ba,ff:Ua,fff:za,ffff:Va,F:Wa,FF:Ha,FFF:Ga,FFFF:ja},dt=class r{static create(t,e={}){return new r(t,e)}static parseFormat(t){let e=null,i="",n=!1,s=[];for(let c=0;c<t.length;c++){let l=t.charAt(c);l==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),e=null,i="",n=!n):n||l===e?i+=l:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=l,e=l)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return fR[t]}constructor(t,e){this.opts=e,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,e){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,w(w({},this.opts),e)).format()}dtFormatter(t,e={}){return this.loc.dtFormatter(t,w(w({},this.opts),e))}formatDateTime(t,e){return this.dtFormatter(t,e).format()}formatDateTimeParts(t,e){return this.dtFormatter(t,e).formatToParts()}formatInterval(t,e){return this.dtFormatter(t.start,e).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,e){return this.dtFormatter(t,e).resolvedOptions()}num(t,e=0){if(this.opts.forceSimple)return Ve(t,e);let i=w({},this.opts);return e>0&&(i.padTo=e),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,e){let i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,P)=>this.loc.extract(t,x,P),c=x=>t.isOffsetFixed&&t.offset===0&&x.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,x.format):"",l=()=>i?H_(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(x,P)=>i?G_(t,x):s(P?{month:x}:{month:x,day:"numeric"},"month"),p=(x,P)=>i?z_(t,x):s(P?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),m=x=>{let P=r.macroTokenToFormatOpts(x);return P?this.formatWithSystemDefault(t,P):x},y=x=>i?V_(t,x):s({era:x},"era"),E=x=>{switch(x){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return c({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return c({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return c({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return l();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return p("short",!0);case"cccc":return p("long",!0);case"ccccc":return p("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return p("short",!1);case"EEEE":return p("long",!1);case"EEEEE":return p("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return y("short");case"GG":return y("long");case"GGGGG":return y("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return m(x)}};return j_(r.parseFormat(e),E)}formatDurationFromString(t,e){let i=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=d=>p=>{let m=i(p);return m?this.num(d.get(m),p.length):p},s=r.parseFormat(e),c=s.reduce((d,{literal:p,val:m})=>p?d:d.concat(m),[]),l=t.shiftTo(...c.map(i).filter(d=>d));return j_(s,n(l))}};f();var Z_=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ko(...r){let t=r.reduce((e,i)=>e+i.source,"");return RegExp(`^${t}$`)}function Xo(...r){return t=>r.reduce(([e,i,n],s)=>{let[c,l,d]=s(t,n);return[w(w({},e),c),l||i,d]},[{},null,1]).slice(0,2)}function Qo(r,...t){if(r==null)return[null,null];for(let[e,i]of t){let n=e.exec(r);if(n)return i(n)}return[null,null]}function J_(...r){return(t,e)=>{let i={},n;for(n=0;n<r.length;n++)i[r[n]]=sr(t[e+n]);return[i,null,e+n]}}var Y_=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,mR=`(?:${Y_.source}?(?:\\[(${Z_.source})\\])?)?`,sf=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,K_=RegExp(`${sf.source}${mR}`),af=RegExp(`(?:T${K_.source})?`),gR=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,vR=/(\d{4})-?W(\d\d)(?:-?(\d))?/,yR=/(\d{4})-?(\d{3})/,bR=J_("weekYear","weekNumber","weekDay"),_R=J_("year","ordinal"),ER=/(\d{4})-(\d\d)-(\d\d)/,X_=RegExp(`${sf.source} ?(?:${Y_.source}|(${Z_.source}))?`),wR=RegExp(`(?: ${X_.source})?`);function Yo(r,t,e){let i=r[t];return K(i)?e:sr(i)}function xR(r,t){return[{year:Yo(r,t),month:Yo(r,t+1,1),day:Yo(r,t+2,1)},null,t+3]}function es(r,t){return[{hours:Yo(r,t,0),minutes:Yo(r,t+1,0),seconds:Yo(r,t+2,0),milliseconds:Xa(r[t+3])},null,t+4]}function el(r,t){let e=!r[t]&&!r[t+1],i=Fn(r[t+1],r[t+2]),n=e?null:ct.instance(i);return[{},n,t+3]}function tl(r,t){let e=r[t]?bt.create(r[t]):null;return[{},e,t+1]}var TR=RegExp(`^T?${sf.source}$`),SR=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function AR(r){let[t,e,i,n,s,c,l,d,p]=r,m=t[0]==="-",y=d&&d[0]==="-",E=(x,P=!1)=>x!==void 0&&(P||x&&m)?-x:x;return[{years:E(Fr(e)),months:E(Fr(i)),weeks:E(Fr(n)),days:E(Fr(s)),hours:E(Fr(c)),minutes:E(Fr(l)),seconds:E(Fr(d),d==="-0"),milliseconds:E(Xa(p),y)}]}var PR={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function lf(r,t,e,i,n,s,c){let l={year:t.length===2?Qa(sr(t)):sr(t),month:rf.indexOf(e)+1,day:sr(i),hour:sr(n),minute:sr(s)};return c&&(l.second=sr(c)),r&&(l.weekday=r.length>3?nf.indexOf(r)+1:of.indexOf(r)+1),l}var OR=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function CR(r){let[,t,e,i,n,s,c,l,d,p,m,y]=r,E=lf(t,n,i,e,s,c,l),x;return d?x=PR[d]:p?x=0:x=Fn(m,y),[E,new ct(x)]}function IR(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var LR=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,MR=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,RR=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function q_(r){let[,t,e,i,n,s,c,l]=r;return[lf(t,n,i,e,s,c,l),ct.utcInstance]}function kR(r){let[,t,e,i,n,s,c,l]=r;return[lf(t,l,e,i,n,s,c),ct.utcInstance]}var NR=Ko(gR,af),DR=Ko(vR,af),FR=Ko(yR,af),$R=Ko(K_),Q_=Xo(xR,es,el,tl),BR=Xo(bR,es,el,tl),WR=Xo(_R,es,el,tl),UR=Xo(es,el,tl);function eE(r){return Qo(r,[NR,Q_],[DR,BR],[FR,WR],[$R,UR])}function tE(r){return Qo(IR(r),[OR,CR])}function iE(r){return Qo(r,[LR,q_],[MR,q_],[RR,kR])}function rE(r){return Qo(r,[SR,AR])}var HR=Xo(es);function nE(r){return Qo(r,[TR,HR])}var zR=Ko(ER,wR),GR=Ko(X_),VR=Xo(es,el,tl);function oE(r){return Qo(r,[zR,Q_],[GR,VR])}var sE="Invalid Duration",lE={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},jR=w({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},lE),si=146097/400,ts=146097/4800,qR=w({years:{quarters:4,months:12,weeks:si/7,days:si,hours:si*24,minutes:si*24*60,seconds:si*24*60*60,milliseconds:si*24*60*60*1e3},quarters:{months:3,weeks:si/28,days:si/4,hours:si*24/4,minutes:si*24*60/4,seconds:si*24*60*60/4,milliseconds:si*24*60*60*1e3/4},months:{weeks:ts/7,days:ts,hours:ts*24,minutes:ts*24*60,seconds:ts*24*60*60,milliseconds:ts*24*60*60*1e3}},lE),Wn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ZR=Wn.slice(0).reverse();function $r(r,t,e=!1){let i={values:e?t.values:w(w({},r.values),t.values||{}),loc:r.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||r.conversionAccuracy,matrix:t.matrix||r.matrix};return new je(i)}function cE(r,t){var i;let e=(i=t.milliseconds)!=null?i:0;for(let n of ZR.slice(1))t[n]&&(e+=t[n]*r[n].milliseconds);return e}function aE(r,t){let e=cE(r,t)<0?-1:1;Wn.reduceRight((i,n)=>{if(K(t[n]))return i;if(i){let s=t[i]*e,c=r[n][i],l=Math.floor(s/c);t[n]+=l*e,t[i]-=l*c*e}return n},null),Wn.reduce((i,n)=>{if(K(t[n]))return i;if(i){let s=t[i]%1;t[i]-=s,t[n]+=s*r[i][n]}return n},null)}function JR(r){let t={};for(let[e,i]of Object.entries(r))i!==0&&(t[e]=i);return t}var je=class r{constructor(t){let e=t.conversionAccuracy==="longterm"||!1,i=e?qR:jR;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||Re.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,e){return r.fromObject({milliseconds:t},e)}static fromObject(t,e={}){if(t==null||typeof t!="object")throw new tt(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new r({values:Jo(t,r.normalizeUnit),loc:Re.fromObject(e),conversionAccuracy:e.conversionAccuracy,matrix:e.matrix})}static fromDurationLike(t){if(Fi(t))return r.fromMillis(t);if(r.isDuration(t))return t;if(typeof t=="object")return r.fromObject(t);throw new tt(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,e){let[i]=rE(t);return i?r.fromObject(i,e):r.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,e){let[i]=nE(t);return i?r.fromObject(i,e):r.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,e=null){if(!t)throw new tt("need to specify a reason the Duration is invalid");let i=t instanceof ut?t:new ut(t,e);if(Oe.throwOnInvalid)throw new _u(i);return new r({invalid:i})}static normalizeUnit(t){let e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!e)throw new Go(t);return e}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,e={}){let i=N(w({},e),{floor:e.round!==!1&&e.floor!==!1});return this.isValid?dt.create(this.loc,i).formatDurationFromString(this,t):sE}toHuman(t={}){if(!this.isValid)return sE;let e=Wn.map(i=>{let n=this.values[i];return K(n)?null:this.loc.numberFormatter(N(w({style:"unit",unitDisplay:"long"},t),{unit:i.slice(0,-1)})).format(n)}).filter(i=>i);return this.loc.listFormatter(w({type:"conjunction",style:t.listStyle||"narrow"},t)).format(e)}toObject(){return this.isValid?w({},this.values):{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=jo(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;let e=this.toMillis();return e<0||e>=864e5?null:(t=N(w({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},t),{includeOffset:!1}),Me.fromMillis(e,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?cE(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;let e=r.fromDurationLike(t),i={};for(let n of Wn)(Dr(e.values,n)||Dr(this.values,n))&&(i[n]=e.get(n)+this.get(n));return $r(this,{values:i},!0)}minus(t){if(!this.isValid)return this;let e=r.fromDurationLike(t);return this.plus(e.negate())}mapUnits(t){if(!this.isValid)return this;let e={};for(let i of Object.keys(this.values))e[i]=tf(t(this.values[i],i));return $r(this,{values:e},!0)}get(t){return this[r.normalizeUnit(t)]}set(t){if(!this.isValid)return this;let e=w(w({},this.values),Jo(t,r.normalizeUnit));return $r(this,{values:e})}reconfigure({locale:t,numberingSystem:e,conversionAccuracy:i,matrix:n}={}){let c={loc:this.loc.clone({locale:t,numberingSystem:e}),matrix:n,conversionAccuracy:i};return $r(this,c)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;let t=this.toObject();return aE(this.matrix,t),$r(this,{values:t},!0)}rescale(){if(!this.isValid)return this;let t=JR(this.normalize().shiftToAll().toObject());return $r(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(c=>r.normalizeUnit(c));let e={},i={},n=this.toObject(),s;for(let c of Wn)if(t.indexOf(c)>=0){s=c;let l=0;for(let p in i)l+=this.matrix[p][c]*i[p],i[p]=0;Fi(n[c])&&(l+=n[c]);let d=Math.trunc(l);e[c]=d,i[c]=(l*1e3-d*1e3)/1e3}else Fi(n[c])&&(i[c]=n[c]);for(let c in i)i[c]!==0&&(e[s]+=c===s?i[c]:i[c]/this.matrix[s][c]);return aE(this.matrix,e),$r(this,{values:e},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let t={};for(let e of Object.keys(this.values))t[e]=this.values[e]===0?0:-this.values[e];return $r(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function e(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(let i of Wn)if(!e(this.values[i],t.values[i]))return!1;return!0}};f();var is="Invalid Interval";function YR(r,t){return!r||!r.isValid?ar.invalid("missing or invalid start"):!t||!t.isValid?ar.invalid("missing or invalid end"):t<r?ar.invalid("end before start",`The end of an interval must be after its start, but you had start=${r.toISO()} and end=${t.toISO()}`):null}var ar=class r{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,e=null){if(!t)throw new tt("need to specify a reason the Interval is invalid");let i=t instanceof ut?t:new ut(t,e);if(Oe.throwOnInvalid)throw new bu(i);return new r({invalid:i})}static fromDateTimes(t,e){let i=rs(t),n=rs(e),s=YR(i,n);return s==null?new r({start:i,end:n}):s}static after(t,e){let i=je.fromDurationLike(e),n=rs(t);return r.fromDateTimes(n,n.plus(i))}static before(t,e){let i=je.fromDurationLike(e),n=rs(t);return r.fromDateTimes(n.minus(i),n)}static fromISO(t,e){let[i,n]=(t||"").split("/",2);if(i&&n){let s,c;try{s=Me.fromISO(i,e),c=s.isValid}catch(p){c=!1}let l,d;try{l=Me.fromISO(n,e),d=l.isValid}catch(p){d=!1}if(c&&d)return r.fromDateTimes(s,l);if(c){let p=je.fromISO(n,e);if(p.isValid)return r.after(s,p)}else if(d){let p=je.fromISO(i,e);if(p.isValid)return r.before(l,p)}}return r.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",e){if(!this.isValid)return NaN;let i=this.start.startOf(t,e),n;return e!=null&&e.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(t,e),Math.floor(n.diff(i,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:e}={}){return this.isValid?r.fromDateTimes(t||this.s,e||this.e):this}splitAt(...t){if(!this.isValid)return[];let e=t.map(rs).filter(c=>this.contains(c)).sort((c,l)=>c.toMillis()-l.toMillis()),i=[],{s:n}=this,s=0;for(;n<this.e;){let c=e[s]||this.e,l=+c>+this.e?this.e:c;i.push(r.fromDateTimes(n,l)),n=l,s+=1}return i}splitBy(t){let e=je.fromDurationLike(t);if(!this.isValid||!e.isValid||e.as("milliseconds")===0)return[];let{s:i}=this,n=1,s,c=[];for(;i<this.e;){let l=this.start.plus(e.mapUnits(d=>d*n));s=+l>+this.e?this.e:l,c.push(r.fromDateTimes(i,s)),i=s,n+=1}return c}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;let e=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return e>=i?null:r.fromDateTimes(e,i)}union(t){if(!this.isValid)return this;let e=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return r.fromDateTimes(e,i)}static merge(t){let[e,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],c)=>s?s.overlaps(c)||s.abutsStart(c)?[n,s.union(c)]:[n.concat([s]),c]:[n,c],[[],null]);return i&&e.push(i),e}static xor(t){let e=null,i=0,n=[],s=t.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),c=Array.prototype.concat(...s),l=c.sort((d,p)=>d.time-p.time);for(let d of l)i+=d.type==="s"?1:-1,i===1?e=d.time:(e&&+e!=+d.time&&n.push(r.fromDateTimes(e,d.time)),e=null);return r.merge(n)}difference(...t){return r.xor([this].concat(t)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:is}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Mr,e={}){return this.isValid?dt.create(this.s.loc.clone(e),t).formatInterval(this):is}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:is}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:is}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:is}toFormat(t,{separator:e=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${e}${this.e.toFormat(t)}`:is}toDuration(t,e){return this.isValid?this.e.diff(this.s,t,e):je.invalid(this.invalidReason)}mapEndpoints(t){return r.fromDateTimes(t(this.s),t(this.e))}};f();var lr=class{static hasDST(t=Oe.defaultZone){let e=Me.now().setZone(t).set({month:12});return!t.isUniversal&&e.offset!==e.set({month:6}).offset}static isValidIANAZone(t){return bt.isValidZone(t)}static normalizeZone(t){return xi(t,Oe.defaultZone)}static getStartOfWeek({locale:t=null,locObj:e=null}={}){return(e||Re.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:e=null}={}){return(e||Re.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:e=null}={}){return(e||Re.create(t)).getWeekendDays().slice()}static months(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Re.create(e,i,s)).months(t)}static monthsFormat(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Re.create(e,i,s)).months(t,!0)}static weekdays(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Re.create(e,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:e=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Re.create(e,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Re.create(t).meridiems()}static eras(t="short",{locale:e=null}={}){return Re.create(e,null,"gregory").eras(t)}static features(){return{relative:Au(),localeWeek:Pu()}}};f();function uE(r,t){let e=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=e(t)-e(r);return Math.floor(je.fromMillis(i).as("days"))}function KR(r,t,e){let i=[["years",(d,p)=>p.year-d.year],["quarters",(d,p)=>p.quarter-d.quarter+(p.year-d.year)*4],["months",(d,p)=>p.month-d.month+(p.year-d.year)*12],["weeks",(d,p)=>{let m=uE(d,p);return(m-m%7)/7}],["days",uE]],n={},s=r,c,l;for(let[d,p]of i)e.indexOf(d)>=0&&(c=d,n[d]=p(r,t),l=s.plus(n),l>t?(n[d]--,r=s.plus(n),r>t&&(l=r,n[d]--,r=s.plus(n))):r=l);return[r,n,l,c]}function dE(r,t,e,i){let[n,s,c,l]=KR(r,t,e),d=t-n,p=e.filter(y=>["hours","minutes","seconds","milliseconds"].indexOf(y)>=0);p.length===0&&(c<t&&(c=n.plus({[l]:1})),c!==n&&(s[l]=(s[l]||0)+d/(c-n)));let m=je.fromObject(s,i);return p.length>0?je.fromMillis(d,i).shiftTo(...p).plus(m):m}f();f();var cf={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},pE={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},XR=cf.hanidec.replace(/[\[|\]]/g,"").split("");function hE(r){let t=parseInt(r,10);if(isNaN(t)){t="";for(let e=0;e<r.length;e++){let i=r.charCodeAt(e);if(r[e].search(cf.hanidec)!==-1)t+=XR.indexOf(r[e]);else for(let n in pE){let[s,c]=pE[n];i>=s&&i<=c&&(t+=i-s)}}return parseInt(t,10)}else return t}function ai({numberingSystem:r},t=""){return new RegExp(`${cf[r||"latn"]}${t}`)}var QR="missing Intl.DateTimeFormat.formatToParts support";function Ce(r,t=e=>e){return{regex:r,deser:([e])=>t(hE(e))}}var ek="\xA0",gE=`[ ${ek}]`,vE=new RegExp(gE,"g");function tk(r){return r.replace(/\./g,"\\.?").replace(vE,gE)}function fE(r){return r.replace(/\./g,"").replace(vE," ").toLowerCase()}function Ti(r,t){return r===null?null:{regex:RegExp(r.map(tk).join("|")),deser:([e])=>r.findIndex(i=>fE(e)===fE(i))+t}}function mE(r,t){return{regex:r,deser:([,e,i])=>Fn(e,i),groups:t}}function Lu(r){return{regex:r,deser:([t])=>t}}function ik(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function rk(r,t){let e=ai(t),i=ai(t,"{2}"),n=ai(t,"{3}"),s=ai(t,"{4}"),c=ai(t,"{6}"),l=ai(t,"{1,2}"),d=ai(t,"{1,3}"),p=ai(t,"{1,6}"),m=ai(t,"{1,9}"),y=ai(t,"{2,4}"),E=ai(t,"{4,6}"),x=B=>({regex:RegExp(ik(B.val)),deser:([I])=>I,literal:!0}),k=(B=>{if(r.literal)return x(B);switch(B.val){case"G":return Ti(t.eras("short"),0);case"GG":return Ti(t.eras("long"),0);case"y":return Ce(p);case"yy":return Ce(y,Qa);case"yyyy":return Ce(s);case"yyyyy":return Ce(E);case"yyyyyy":return Ce(c);case"M":return Ce(l);case"MM":return Ce(i);case"MMM":return Ti(t.months("short",!0),1);case"MMMM":return Ti(t.months("long",!0),1);case"L":return Ce(l);case"LL":return Ce(i);case"LLL":return Ti(t.months("short",!1),1);case"LLLL":return Ti(t.months("long",!1),1);case"d":return Ce(l);case"dd":return Ce(i);case"o":return Ce(d);case"ooo":return Ce(n);case"HH":return Ce(i);case"H":return Ce(l);case"hh":return Ce(i);case"h":return Ce(l);case"mm":return Ce(i);case"m":return Ce(l);case"q":return Ce(l);case"qq":return Ce(i);case"s":return Ce(l);case"ss":return Ce(i);case"S":return Ce(d);case"SSS":return Ce(n);case"u":return Lu(m);case"uu":return Lu(l);case"uuu":return Ce(e);case"a":return Ti(t.meridiems(),0);case"kkkk":return Ce(s);case"kk":return Ce(y,Qa);case"W":return Ce(l);case"WW":return Ce(i);case"E":case"c":return Ce(e);case"EEE":return Ti(t.weekdays("short",!1),1);case"EEEE":return Ti(t.weekdays("long",!1),1);case"ccc":return Ti(t.weekdays("short",!0),1);case"cccc":return Ti(t.weekdays("long",!0),1);case"Z":case"ZZ":return mE(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return mE(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return Lu(/[a-z_+-/]{1,256}?/i);case" ":return Lu(/[^\S\n\r]/);default:return x(B)}})(r)||{invalidReason:QR};return k.token=r,k}var nk={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function ok(r,t,e){let{type:i,value:n}=r;if(i==="literal"){let d=/^\s+$/.test(n);return{literal:!d,val:d?" ":n}}let s=t[i],c=i;i==="hour"&&(t.hour12!=null?c=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?c="hour12":c="hour24":c=e.hour12?"hour12":"hour24");let l=nk[c];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function sk(r){return[`^${r.map(e=>e.regex).reduce((e,i)=>`${e}(${i.source})`,"")}$`,r]}function ak(r,t,e){let i=r.match(t);if(i){let n={},s=1;for(let c in e)if(Dr(e,c)){let l=e[c],d=l.groups?l.groups+1:1;!l.literal&&l.token&&(n[l.token.val[0]]=l.deser(i.slice(s,s+d))),s+=d}return[i,n]}else return[i,{}]}function lk(r){let t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},e=null,i;return K(r.z)||(e=bt.create(r.z)),K(r.Z)||(e||(e=new ct(r.Z)),i=r.Z),K(r.q)||(r.M=(r.q-1)*3+1),K(r.h)||(r.h<12&&r.a===1?r.h+=12:r.h===12&&r.a===0&&(r.h=0)),r.G===0&&r.y&&(r.y=-r.y),K(r.u)||(r.S=Xa(r.u)),[Object.keys(r).reduce((s,c)=>{let l=t(c);return l&&(s[l]=r[c]),s},{}),e,i]}var uf=null;function ck(){return uf||(uf=Me.fromMillis(1555555555555)),uf}function uk(r,t){if(r.literal)return r;let e=dt.macroTokenToFormatOpts(r.val),i=hf(e,t);return i==null||i.includes(void 0)?r:i}function df(r,t){return Array.prototype.concat(...r.map(e=>uk(e,t)))}function pf(r,t,e){let i=df(dt.parseFormat(e),r),n=i.map(c=>rk(c,r)),s=n.find(c=>c.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{let[c,l]=sk(n),d=RegExp(c,"i"),[p,m]=ak(t,d,l),[y,E,x]=m?lk(m):[null,null,void 0];if(Dr(m,"a")&&Dr(m,"H"))throw new _i("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:d,rawMatches:p,matches:m,result:y,zone:E,specificOffset:x}}}function yE(r,t,e){let{result:i,zone:n,specificOffset:s,invalidReason:c}=pf(r,t,e);return[i,n,s,c]}function hf(r,t){if(!r)return null;let i=dt.create(t,r).dtFormatter(ck()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(c=>ok(c,r,s))}var ff="Invalid DateTime",bE=864e13;function Mu(r){return new ut("unsupported zone",`the zone "${r.name}" is not supported`)}function mf(r){return r.weekData===null&&(r.weekData=Ja(r.c)),r.weekData}function gf(r){return r.localWeekData===null&&(r.localWeekData=Ja(r.c,r.loc.getMinDaysInFirstWeek(),r.loc.getStartOfWeek())),r.localWeekData}function Un(r,t){let e={ts:r.ts,zone:r.zone,c:r.c,o:r.o,loc:r.loc,invalid:r.invalid};return new Me(N(w(w({},e),t),{old:e}))}function AE(r,t,e){let i=r-t*60*1e3,n=e.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;let s=e.offset(i);return n===s?[i,n]:[r-Math.min(n,s)*60*1e3,Math.max(n,s)]}function Ru(r,t){r+=t*60*1e3;let e=new Date(r);return{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds(),millisecond:e.getUTCMilliseconds()}}function Nu(r,t,e){return AE(Vo(r),t,e)}function _E(r,t){let e=r.o,i=r.c.year+Math.trunc(t.years),n=r.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s=N(w({},r.c),{year:i,month:n,day:Math.min(r.c.day,Zo(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7}),c=je.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),l=Vo(s),[d,p]=AE(l,e,r.zone);return c!==0&&(d+=c,p=r.zone.offset(d)),{ts:d,o:p}}function il(r,t,e,i,n,s){let{setZone:c,zone:l}=e;if(r&&Object.keys(r).length!==0||t){let d=t||l,p=Me.fromObject(r,N(w({},e),{zone:d,specificOffset:s}));return c?p:p.setZone(l)}else return Me.invalid(new ut("unparsable",`the input "${n}" can't be parsed as ${i}`))}function ku(r,t,e=!0){return r.isValid?dt.create(Re.create("en-US"),{allowZ:e,forceSimple:!0}).formatDateTimeFromString(r,t):null}function vf(r,t){let e=r.c.year>9999||r.c.year<0,i="";return e&&r.c.year>=0&&(i+="+"),i+=Ve(r.c.year,e?6:4),t?(i+="-",i+=Ve(r.c.month),i+="-",i+=Ve(r.c.day)):(i+=Ve(r.c.month),i+=Ve(r.c.day)),i}function EE(r,t,e,i,n,s){let c=Ve(r.c.hour);return t?(c+=":",c+=Ve(r.c.minute),(r.c.millisecond!==0||r.c.second!==0||!e)&&(c+=":")):c+=Ve(r.c.minute),(r.c.millisecond!==0||r.c.second!==0||!e)&&(c+=Ve(r.c.second),(r.c.millisecond!==0||!i)&&(c+=".",c+=Ve(r.c.millisecond,3))),n&&(r.isOffsetFixed&&r.offset===0&&!s?c+="Z":r.o<0?(c+="-",c+=Ve(Math.trunc(-r.o/60)),c+=":",c+=Ve(Math.trunc(-r.o%60))):(c+="+",c+=Ve(Math.trunc(r.o/60)),c+=":",c+=Ve(Math.trunc(r.o%60)))),s&&(c+="["+r.zone.ianaName+"]"),c}var PE={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},dk={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},pk={ordinal:1,hour:0,minute:0,second:0,millisecond:0},OE=["year","month","day","hour","minute","second","millisecond"],hk=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],fk=["year","ordinal","hour","minute","second","millisecond"];function mk(r){let t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[r.toLowerCase()];if(!t)throw new Go(r);return t}function wE(r){switch(r.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return mk(r)}}function xE(r,t){let e=xi(t.zone,Oe.defaultZone),i=Re.fromObject(t),n=Oe.now(),s,c;if(K(r.year))s=n;else{for(let p of OE)K(r[p])&&(r[p]=PE[p]);let l=Xh(r)||Qh(r);if(l)return Me.invalid(l);let d=e.offset(n);[s,c]=Nu(r,d,e)}return new Me({ts:s,zone:e,loc:i,o:c})}function TE(r,t,e){let i=K(e.round)?!0:e.round,n=(c,l)=>(c=jo(c,i||e.calendary?0:2,!0),t.loc.clone(e).relFormatter(e).format(c,l)),s=c=>e.calendary?t.hasSame(r,c)?0:t.startOf(c).diff(r.startOf(c),c).get(c):t.diff(r,c).get(c);if(e.unit)return n(s(e.unit),e.unit);for(let c of e.units){let l=s(c);if(Math.abs(l)>=1)return n(l,c)}return n(r>t?-0:0,e.units[e.units.length-1])}function SE(r){let t={},e;return r.length>0&&typeof r[r.length-1]=="object"?(t=r[r.length-1],e=Array.from(r).slice(0,r.length-1)):e=Array.from(r),[t,e]}var Me=class r{constructor(t){let e=t.zone||Oe.defaultZone,i=t.invalid||(Number.isNaN(t.ts)?new ut("invalid input"):null)||(e.isValid?null:Mu(e));this.ts=K(t.ts)?Oe.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e))[n,s]=[t.old.c,t.old.o];else{let l=e.offset(this.ts);n=Ru(this.ts,l),i=Number.isNaN(n.year)?new ut("invalid input"):null,n=i?null:n,s=i?null:l}this._zone=e,this.loc=t.loc||Re.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new r({})}static local(){let[t,e]=SE(arguments),[i,n,s,c,l,d,p]=e;return xE({year:i,month:n,day:s,hour:c,minute:l,second:d,millisecond:p},t)}static utc(){let[t,e]=SE(arguments),[i,n,s,c,l,d,p]=e;return t.zone=ct.utcInstance,xE({year:i,month:n,day:s,hour:c,minute:l,second:d,millisecond:p},t)}static fromJSDate(t,e={}){let i=B_(t)?t.valueOf():NaN;if(Number.isNaN(i))return r.invalid("invalid input");let n=xi(e.zone,Oe.defaultZone);return n.isValid?new r({ts:i,zone:n,loc:Re.fromObject(e)}):r.invalid(Mu(n))}static fromMillis(t,e={}){if(Fi(t))return t<-bE||t>bE?r.invalid("Timestamp out of range"):new r({ts:t,zone:xi(e.zone,Oe.defaultZone),loc:Re.fromObject(e)});throw new tt(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,e={}){if(Fi(t))return new r({ts:t*1e3,zone:xi(e.zone,Oe.defaultZone),loc:Re.fromObject(e)});throw new tt("fromSeconds requires a numerical input")}static fromObject(t,e={}){t=t||{};let i=xi(e.zone,Oe.defaultZone);if(!i.isValid)return r.invalid(Mu(i));let n=Re.fromObject(e),s=Jo(t,wE),{minDaysInFirstWeek:c,startOfWeek:l}=Kh(s,n),d=Oe.now(),p=K(e.specificOffset)?i.offset(d):e.specificOffset,m=!K(s.ordinal),y=!K(s.year),E=!K(s.month)||!K(s.day),x=y||E,P=s.weekYear||s.weekNumber;if((x||m)&&P)throw new _i("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(E&&m)throw new _i("Can't mix ordinal dates with month/day");let k=P||s.weekday&&!x,B,I,ne=Ru(d,p);k?(B=hk,I=dk,ne=Ja(ne,c,l)):m?(B=fk,I=pk,ne=Iu(ne)):(B=OE,I=PE);let ve=!1;for(let pt of B){let Si=s[pt];K(Si)?ve?s[pt]=I[pt]:s[pt]=ne[pt]:ve=!0}let ke=k?D_(s,c,l):m?F_(s):Xh(s),Ie=ke||Qh(s);if(Ie)return r.invalid(Ie);let G=k?Jh(s,c,l):m?Yh(s):s,[Se,Xe]=Nu(G,p,i),We=new r({ts:Se,zone:i,o:Xe,loc:n});return s.weekday&&x&&t.weekday!==We.weekday?r.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${We.toISO()}`):We}static fromISO(t,e={}){let[i,n]=eE(t);return il(i,n,e,"ISO 8601",t)}static fromRFC2822(t,e={}){let[i,n]=tE(t);return il(i,n,e,"RFC 2822",t)}static fromHTTP(t,e={}){let[i,n]=iE(t);return il(i,n,e,"HTTP",e)}static fromFormat(t,e,i={}){if(K(t)||K(e))throw new tt("fromFormat requires an input string and a format");let{locale:n=null,numberingSystem:s=null}=i,c=Re.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[l,d,p,m]=yE(c,t,e);return m?r.invalid(m):il(l,d,i,`format ${e}`,t,p)}static fromString(t,e,i={}){return r.fromFormat(t,e,i)}static fromSQL(t,e={}){let[i,n]=oE(t);return il(i,n,e,"SQL",t)}static invalid(t,e=null){if(!t)throw new tt("need to specify a reason the DateTime is invalid");let i=t instanceof ut?t:new ut(t,e);if(Oe.throwOnInvalid)throw new yu(i);return new r({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,e={}){let i=hf(t,Re.fromObject(e));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(t,e={}){return df(dt.parseFormat(t),Re.fromObject(e)).map(n=>n.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?mf(this).weekYear:NaN}get weekNumber(){return this.isValid?mf(this).weekNumber:NaN}get weekday(){return this.isValid?mf(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?gf(this).weekday:NaN}get localWeekNumber(){return this.isValid?gf(this).weekNumber:NaN}get localWeekYear(){return this.isValid?gf(this).weekYear:NaN}get ordinal(){return this.isValid?Iu(this.c).ordinal:NaN}get monthShort(){return this.isValid?lr.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lr.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let t=864e5,e=6e4,i=Vo(this.c),n=this.zone.offset(i-t),s=this.zone.offset(i+t),c=this.zone.offset(i-n*e),l=this.zone.offset(i-s*e);if(c===l)return[this];let d=i-c*e,p=i-l*e,m=Ru(d,c),y=Ru(p,l);return m.hour===y.hour&&m.minute===y.minute&&m.second===y.second&&m.millisecond===y.millisecond?[Un(this,{ts:d}),Un(this,{ts:p})]:[this]}get isInLeapYear(){return Bn(this.year)}get daysInMonth(){return Zo(this.year,this.month)}get daysInYear(){return this.isValid?Nr(this.year):NaN}get weeksInWeekYear(){return this.isValid?$n(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?$n(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){let{locale:e,numberingSystem:i,calendar:n}=dt.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:e,numberingSystem:i,outputCalendar:n}}toUTC(t=0,e={}){return this.setZone(ct.instance(t),e)}toLocal(){return this.setZone(Oe.defaultZone)}setZone(t,{keepLocalTime:e=!1,keepCalendarTime:i=!1}={}){if(t=xi(t,Oe.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(e||i){let s=t.offset(this.ts),c=this.toObject();[n]=Nu(c,s,t)}return Un(this,{ts:n,zone:t})}else return r.invalid(Mu(t))}reconfigure({locale:t,numberingSystem:e,outputCalendar:i}={}){let n=this.loc.clone({locale:t,numberingSystem:e,outputCalendar:i});return Un(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;let e=Jo(t,wE),{minDaysInFirstWeek:i,startOfWeek:n}=Kh(e,this.loc),s=!K(e.weekYear)||!K(e.weekNumber)||!K(e.weekday),c=!K(e.ordinal),l=!K(e.year),d=!K(e.month)||!K(e.day),p=l||d,m=e.weekYear||e.weekNumber;if((p||c)&&m)throw new _i("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&c)throw new _i("Can't mix ordinal dates with month/day");let y;s?y=Jh(w(w({},Ja(this.c,i,n)),e),i,n):K(e.ordinal)?(y=w(w({},this.toObject()),e),K(e.day)&&(y.day=Math.min(Zo(y.year,y.month),y.day))):y=Yh(w(w({},Iu(this.c)),e));let[E,x]=Nu(y,this.o,this.zone);return Un(this,{ts:E,o:x})}plus(t){if(!this.isValid)return this;let e=je.fromDurationLike(t);return Un(this,_E(this,e))}minus(t){if(!this.isValid)return this;let e=je.fromDurationLike(t).negate();return Un(this,_E(this,e))}startOf(t,{useLocaleWeeks:e=!1}={}){if(!this.isValid)return this;let i={},n=je.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break;case"milliseconds":break}if(n==="weeks")if(e){let s=this.loc.getStartOfWeek(),{weekday:c}=this;c<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){let s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t,e){return this.isValid?this.plus({[t]:1}).startOf(t,e).minus(1):this}toFormat(t,e={}){return this.isValid?dt.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):ff}toLocaleString(t=Mr,e={}){return this.isValid?dt.create(this.loc.clone(e),t).formatDateTime(this):ff}toLocaleParts(t={}){return this.isValid?dt.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:e=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let c=t==="extended",l=vf(this,c);return l+="T",l+=EE(this,c,e,i,n,s),l}toISODate({format:t="extended"}={}){return this.isValid?vf(this,t==="extended"):null}toISOWeekDate(){return ku(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:e=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:c="extended"}={}){return this.isValid?(n?"T":"")+EE(this,c==="extended",e,t,i,s):null}toRFC2822(){return ku(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ku(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?vf(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:e=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(e||t)&&(i&&(n+=" "),e?n+="z":t&&(n+="ZZ")),ku(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():ff}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};let e=w({},this.c);return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,e="milliseconds",i={}){if(!this.isValid||!t.isValid)return je.invalid("created by diffing an invalid DateTime");let n=w({locale:this.locale,numberingSystem:this.numberingSystem},i),s=W_(e).map(je.normalizeUnit),c=t.valueOf()>this.valueOf(),l=c?this:t,d=c?t:this,p=dE(l,d,s,n);return c?p.negate():p}diffNow(t="milliseconds",e={}){return this.diff(r.now(),t,e)}until(t){return this.isValid?ar.fromDateTimes(this,t):this}hasSame(t,e,i){if(!this.isValid)return!1;let n=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(e,i)<=n&&n<=s.endOf(e,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;let e=t.base||r.fromObject({},{zone:this.zone}),i=t.padding?this<e?-t.padding:t.padding:0,n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),TE(e,this.plus(i),N(w({},t),{numeric:"always",units:n,unit:s}))}toRelativeCalendar(t={}){return this.isValid?TE(t.base||r.fromObject({},{zone:this.zone}),this,N(w({},t),{numeric:"auto",units:["years","months","days"],calendary:!0})):null}static min(...t){if(!t.every(r.isDateTime))throw new tt("min requires all arguments be DateTimes");return ef(t,e=>e.valueOf(),Math.min)}static max(...t){if(!t.every(r.isDateTime))throw new tt("max requires all arguments be DateTimes");return ef(t,e=>e.valueOf(),Math.max)}static fromFormatExplain(t,e,i={}){let{locale:n=null,numberingSystem:s=null}=i,c=Re.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return pf(c,t,e)}static fromStringExplain(t,e,i={}){return r.fromFormatExplain(t,e,i)}static get DATE_SHORT(){return Mr}static get DATE_MED(){return Oa}static get DATE_MED_WITH_WEEKDAY(){return Rh}static get DATE_FULL(){return Ca}static get DATE_HUGE(){return Ia}static get TIME_SIMPLE(){return La}static get TIME_WITH_SECONDS(){return Ma}static get TIME_WITH_SHORT_OFFSET(){return Ra}static get TIME_WITH_LONG_OFFSET(){return ka}static get TIME_24_SIMPLE(){return Na}static get TIME_24_WITH_SECONDS(){return Da}static get TIME_24_WITH_SHORT_OFFSET(){return Fa}static get TIME_24_WITH_LONG_OFFSET(){return $a}static get DATETIME_SHORT(){return Ba}static get DATETIME_SHORT_WITH_SECONDS(){return Wa}static get DATETIME_MED(){return Ua}static get DATETIME_MED_WITH_SECONDS(){return Ha}static get DATETIME_MED_WITH_WEEKDAY(){return kh}static get DATETIME_FULL(){return za}static get DATETIME_FULL_WITH_SECONDS(){return Ga}static get DATETIME_HUGE(){return Va}static get DATETIME_HUGE_WITH_SECONDS(){return ja}};function rs(r){if(Me.isDateTime(r))return r;if(r&&r.valueOf&&Fi(r.valueOf()))return Me.fromJSDate(r);if(r&&typeof r=="object")return Me.fromObject(r);throw new tt(`Unknown datetime argument: ${r}, of type ${typeof r}`)}var CE=fe(ie),vk=[CE.styles,Eh],Hn=class extends CE{constructor(){super();this.unselectAnnotationEsc=e=>{e.key==="Escape"&&(this.isSelected=!1)};this.unselectAnnotation=()=>{this.isSelected=!1};this.selectAnnotation=({detail:e})=>{let{uuid:i}=e;if(this.isSelected){this.isSelected=!1;return}this.isSelected=i===this.annotationId};this.updateComment=({detail:e})=>{let{text:i,mentions:n}=e;this.text=i,this.closeEditMode(),this.emitEvent("update-comment",{uuid:this.uuid,mentions:n,text:i})};this.resolveAnnotation=e=>{e.stopPropagation(),this.emitEvent("resolve-annotation",{type:"resolve-annotation",resolved:!this.resolved},{composed:!1,bubbles:!1})};this.confirmDelete=()=>{if(this.deleteCommentModalOpen=!1,this.primaryComment)return this.emitEvent("delete-annotation",{uuid:this.annotationId});this.emitEvent("delete-comment",{annotationId:this.annotationId,uuid:this.uuid})};this.closeEditMode=()=>{this.mode="readonly",this.emitEvent("edit-comment",{editing:!1})};this.resolved=!1}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{De.call(this,["comments"])}),document.body.addEventListener("select-annotation",this.selectAnnotation)}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("select-annotation",this.selectAnnotation),window.document.body.addEventListener("keyup",this.unselectAnnotationEsc),window.document.body.addEventListener("unselect-annotation",this.unselectAnnotation)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("select-annotation",this.selectAnnotation),window.document.body.removeEventListener("keyup",this.unselectAnnotationEsc),window.document.body.removeEventListener("unselect-annotation",this.unselectAnnotation)}getAvatar(){var e;return this.avatar?F` <div class=${this.getClasses("avatar-container")}>
        <img src=${this.avatar} class=${this.getClasses("avatar-image")} />
      </div>`:F`<div class=${this.getClasses("avatar-container")}>
      <p class="text text-bold ${this.getClasses("avatar-letter")}">
        ${((e=this.username[0])==null?void 0:e.toUpperCase())||"A"}
      </p>
    </div>`}getClasses(e){return`comments__comment-item__${e} ${this.class}__${e}`}render(){let e=this.annotationFilter==="All comments"?"resolve":"undo",i=E=>Me.fromISO(E).toFormat("yyyy-dd-MM"),n=this.resolvable?"comments__comment-item__resolve":"hidden",s=[{label:"EDIT"},{label:"DELETE"}],c=({detail:{label:E}})=>{E==="EDIT"&&(this.mode="editable",this.emitEvent("edit-comment",{editing:!0})),E==="DELETE"&&(this.deleteCommentModalOpen=!0)},l=()=>{let E={"comments__comment-item--editable":!0,"hide-edit-input":this.mode!=="editable"};return F`
        <superviz-comments-comment-input
          class="${oe(E)}"
          editable
          mode=${this.mode}
          @click=${x=>x.stopPropagation()}
          text=${this.text}
          eventType="update-comment"
          participantsList=${JSON.stringify(this.participantsList)}
          mentions=${JSON.stringify(this.mentions)}
          @update-comment=${this.updateComment}
          @close-edit-mode=${this.closeEditMode}
        ></superviz-comments-comment-input>
      `},d=()=>{let E={text:!0,"text-big":!0,"sv-gray-700":!0,"annotation-content":!0,[this.getClasses("content")]:!0,editing:this.mode==="editable","line-clamp":!this.isSelected&&this.text.length>120};return F` <p id="comment-text" class="${oe(E)}">${this.text}</p> `},p=()=>{this.deleteCommentModalOpen=!1},m={[this.class]:!0,"comments__comment-item":!0,reply:!this.primaryComment},y={"comments__comment-item__content__body":!0,"editing-annotation":this.mode==="editable"};return F`
      <div class=${oe(m)}>
        <div class=${this.getClasses("header")}>
          <div class=${this.getClasses("metadata")}>
            ${this.getAvatar()}
            <span class="text text-big text-bold sv-gray-700 ${this.getClasses("username")}">
              ${this.username}
            </span>
            <span class="text text-small sv-gray-500 ${this.getClasses("date")}">
              ${i(this.createdAt)}
            </span>
          </div>
          <div class=${this.getClasses("actions")}>
            <button
              @click=${this.resolveAnnotation}
              class="${this.getClasses("icons")} ${this.getClasses("resolve-icon")} icon-button icon-button--clickable icon-button--xsmall ${n}"
            >
              <!-- TODO: Add undo icon in sm format -->
              <superviz-icon name=${e} size="sm"></superviz-icon>
            </button>
            <superviz-dropdown
              options=${JSON.stringify(s)}
              position="bottom-left"
              @selected=${c}
              @click=${E=>{E.stopPropagation()}}
              classesPrefix="comments__dropdown"
              parentComponent="comments"
            >
              <button
                slot="dropdown"
                class="${this.getClasses("icons")} ${this.getClasses("options-icon")} icon-button icon-button--clickable icon-button--small"
              >
                <superviz-icon name="more" size="sm"></superviz-icon>
              </button>
            </superviz-dropdown>
          </div>
        </div>

        <div class="comments__comment-item__content">
          <div class="${oe(y)}">${l()} ${d()}</div>
        </div>
      </div>
      <superviz-comments-delete-comments-modal
        ?open=${this.deleteCommentModalOpen}
        @close=${p}
        @confirm=${this.confirmDelete}
      >
      </superviz-comments-delete-comments-modal>
    `}};Hn.styles=vk,Hn.properties={uuid:{type:String},annotationId:{type:String},avatar:{type:String},username:{type:String},text:{type:String},resolved:{type:Boolean},resolvable:{type:Boolean},createdAt:{type:String},mode:{type:String},deleteCommentModalOpen:{type:Boolean},primaryComment:{type:Boolean},isSelected:{type:Boolean},annotationFilter:{type:String},participantsList:{type:Object},mentions:{type:Array},class:{type:String}},Hn=le([de("superviz-comments-comment-item")],Hn);f();f();var Du=class{constructor(){this.keys=["@"];this.input=null,this.mentions=[]}setInput(t){this.event=t,this.input=t.target,this.key=t.data}getMentions(t,e=[]){return e.length>0&&(this.mentions=e),this.mentions.filter(i=>((s,c)=>c.includes(s.name))(i,t))}setMentions(t){this.mentions=t}addMention(t){this.mentions.some(i=>i.userId===t.userId)||this.mentions.push(t)}clearMentions(){this.mentions=[]}getSelectionPosition(){var n;let t=this.getSelectionStart(),e=this.getLastKeyBeforeCaret(t);return{start:((n=e==null?void 0:e.keyIndex)!=null?n:-1)+1,end:t}}getSelectionStart(){var t;return(t=this.input)==null?void 0:t.selectionStart}setCaretPosition(t){this.input.selectionEnd=t}getValue(){var t;return(t=this.input)==null?void 0:t.value}setValue(t){this.input.value=t}getLastKeyBeforeCaret(t){let[e]=this.keys.map(i=>({key:i,keyIndex:this.getValue().lastIndexOf(i,t-1)})).sort((i,n)=>n.keyIndex-i.keyIndex);return e}searchMention(t,e){return e!==-1?this.getValue().substring(e+1,t):null}isDeletion(){return this.event.inputType==="deleteContentBackward"||this.event.inputType==="deleteContentForward"||this.event.inputType==="deleteWordBackward"}insertMention(t,e,i){if(this.isDeletion())return;let{id:n,name:s}=i,c=`${this.getValue().slice(0,t)+s} ${this.getValue().slice(e,this.getValue().length)}`;this.setValue(c),this.input.focus(),this.addMention({userId:n,name:s}),this.setCaretPosition(t+s.length+1)}};f();var yf={SHOW:"show",HIDE:"hide"},yk={action:yf.HIDE,mentions:[],findDigitParticipant:!1},bk=(r,t,e)=>{var s,c;let i=[];if(i=e==null?void 0:e.filter(l=>l==null?void 0:l.email),r.length>0&&(i=i.filter(l=>(l==null?void 0:l.name.toLowerCase().search(r.toLowerCase()))!==-1),r===((c=(s=i[0])==null?void 0:s.name)==null?void 0:c.toLowerCase()))){let l=IE(i,t);return{action:yf.HIDE,mentions:l,findDigitParticipant:!0}}if(!((i==null?void 0:i.length)>0))return yk;let n=IE(i,t);return{action:yf.SHOW,mentions:n,findDigitParticipant:!1}},IE=(r,t)=>r.map(e=>({id:e.id,name:e.name,avatar:e.avatar,email:e.email,position:t})),LE={matchParticipant:(r,t,e)=>bk(r,t,e)};var ME=fe(ie),_k=[ME.styles,xh],zn=class extends ME{constructor(){super();this.pinCoordinates=null;this.autoCompleteHandler=new Du;this.addAtSymbolInCaretPosition=()=>{let e=this.shadowRoot.querySelector(".comments__input__textarea"),i=new InputEvent("input",{bubbles:!0,cancelable:!0});Object.defineProperty(i,"data",{value:"@",writable:!0}),e.dispatchEvent(i)};this.getCommentInput=()=>this.shadowRoot.querySelector(".comments__input__textarea");this.userMentionedByTextInput=e=>{this.mentionList=[];let i={detail:w({},e[0])};this.insertMention(i)};this.buttonAtSymbol=()=>{var d;let e=this.autoCompleteHandler.getSelectionStart(),i=this.autoCompleteHandler.getValue();this.autoCompleteHandler.setValue(`${i.slice(0,e)}@${i.slice(e,i.length)}`),e+=1;let n=this.autoCompleteHandler.getLastKeyBeforeCaret(e),s=(d=n==null?void 0:n.keyIndex)!=null?d:-1,c=this.autoCompleteHandler.searchMention(e,s),l={start:s+1,end:e};return{searchText:c,position:l}};this.focusInput=()=>{this.getCommentInput().focus()};this.handleInput=e=>{var x,P;((x=this.commentInput)==null?void 0:x.value.length)===0?this.btnActive=!1:this.btnActive=!0,this.autoCompleteHandler.setInput(e);let i=this.autoCompleteHandler.getSelectionStart(),n=this.autoCompleteHandler.getLastKeyBeforeCaret(i),s=(P=n==null?void 0:n.keyIndex)!=null?P:-1;if(i===-1)return;let c=this.autoCompleteHandler.searchMention(i,s),l=this.autoCompleteHandler.getSelectionPosition(),d=e.data==="@"&&s===-1,p=e.data==="@"&&i-1!==s;if(d||p){let k=this.buttonAtSymbol();c=k.searchText,l=k.position}if(c===null){this.mentionList=[];return}let{action:m,mentions:y,findDigitParticipant:E}=LE.matchParticipant(c,l,this.participantsList);if(E){this.userMentionedByTextInput(y);return}m==="show"&&(this.mentionList=y),m==="hide"&&(this.mentionList=[])};this.insertMention=e=>{let{id:i,name:n,avatar:s,email:c,position:l}=e.detail;this.autoCompleteHandler.insertMention(l.start,l.end,{id:i,name:n,avatar:s,email:c}),this.mentionList=[],this.updateHeight()};this.sendEnter=e=>{var c;if(e.key!=="Escape"&&e.stopImmediatePropagation(),e.key==="Enter"&&!e.shiftKey&&e.preventDefault(),e.key!=="Enter"||e.shiftKey||((c=this.mentionList)==null?void 0:c.length)>0)return;let i=this.commentInput,n=i.value.trim();if(!n)return;let s=this.autoCompleteHandler.getMentions(n);this.emitEvent(this.eventType,{text:n,mentions:s,position:this.pinCoordinates},{composed:!1,bubbles:!1}),i.value="",this.sendBtn.disabled=!0,this.updateHeight()};this.closeEditMode=()=>{this.emitEvent("close-edit-mode",{},{composed:!1,bubbles:!1}),this.hideInput=!0};this.onTextareaFocus=()=>{let e=this.optionsContainer,i=this.horizontalRule,n=this.commentInput;e.classList.add("active-textarea"),i.classList.add("comments__input__divisor"),n.classList.add("active-textarea")};this.onTextareaLoseFocus=e=>{var d,p;let i=(p=(d=e.explicitOriginalTarget)==null?void 0:d.parentNode)==null?void 0:p.host,n=this.mentionButton;if(n===e.explicitOriginalTarget||n===e.relatedTarget)return;if(this.closeButton.contains(i)||this.closeButton.contains(e.explicitOriginalTarget)||this.closeButton.contains(e.relatedTarget)){this.cancelComment();return}if(!this.shadowRoot.contains(e.target))return;let s=this.optionsContainer,c=this.horizontalRule,l=this.commentInput;l.value.length||(s.classList.remove("active-textarea"),c.classList.remove("comments__input__divisor"),l.classList.remove("active-textarea"))};this.cancelComment=()=>{document.body.dispatchEvent(new KeyboardEvent("keyup",{key:"Escape"}))};this.commentInputEditableOptions=()=>{var e;if(this.editable)return F`
      <button
        id="close"
        @click=${this.closeEditMode}
        class="icon-button icon-button--medium icon-button--clickable comments__input__button comments__input__close-button"
      >
        <superviz-icon name="close" size="sm"></superviz-icon>
      </button>
      <button
        id="confirm"
        class="icon-button icon-button--medium icon-button--clickable icon-button--no-hover comments__input__button comments__input__send-button"
        disabled
        @click=${this.send}
      >
        <superviz-icon
          color=${(e=this.sendBtn)!=null&&e.disabled||!this.sendBtn?"black":"white"}
          name="check"
          size="sm"
        ></superviz-icon>
      </button>
    `};this.commentInputOptions=()=>{var e;if(!this.editable)return F`
      <button
        class="icon-button icon-button--medium icon-button--clickable comments__input__button comments__input__close-button align-send-btn"
        @click=${this.cancelComment}
      >
        <superviz-icon name="close" size="sm"></superviz-icon>
      </button>
      <button
        class="comments__input__button comments__input__send-button align-send-btn"
        disabled
        @click=${this.send}
      >
        <superviz-icon
          color=${(e=this.sendBtn)!=null&&e.disabled||!this.sendBtn?"black":"white"}
          name="line-arrow-right"
          size="sm"
        ></superviz-icon>
      </button>
    `};this.btnActive=!1,this.text="",this.mentionList=[],this.mentions=[],this.mode="readonly"}get commentInput(){return this.shadowRoot.querySelector(".comments__input__textarea")}get mentionButton(){return this.shadowRoot.querySelector(".mention-button")}get sendBtn(){return this.shadowRoot.querySelector(".comments__input__send-button")}get optionsContainer(){return this.shadowRoot.querySelector(".comments__input__options")}get horizontalRule(){return this.shadowRoot.querySelector(".sv-hr")}get closeButton(){return this.shadowRoot.querySelector(".comments__input__close-button")}connectedCallback(){super.connectedCallback(),["create-annotation","create-comment"].includes(this.eventType)&&this.addEventListener("keyup",this.sendEnter)}disconnectedCallback(){if(super.disconnectedCallback(),!["create-annotation","create-comment"].includes(this.eventType))return;let e=this.getCommentInput();this.removeEventListener("keyup",this.sendEnter),e.removeEventListener("keydown",this.sendEnter),e.removeEventListener("click",this.focusInput),e.addEventListener("input",this.handleInput)}firstUpdated(e){this.updateComplete.then(()=>{this.emitEvent("comment-input-ready",{},{composed:!1,bubbles:!1});let i=this.getCommentInput();if(i&&(i.addEventListener("input",this.handleInput),i.addEventListener("click",this.focusInput),i.addEventListener("keydown",this.sendEnter)),this.text.length>0){let n=this.participantsList.map(({id:s,name:c})=>({userId:s,name:c}));this.mentions=this.autoCompleteHandler.getMentions(this.text,n),this.autoCompleteHandler.setMentions(this.mentions)}this.editable&&this.focusInput(),De.call(this,["comments"])})}updated(e){if(e.has("mode")&&this.mode==="editable"&&(this.focusInput(),this.updateHeight(),this.sendBtn.disabled=!1,this.btnActive=!0),e.has("text")&&this.text.length>0){let i=this.commentInput;i.value=this.text,this.updateHeight()}e.has("btnActive")&&(this.sendBtn.disabled=!this.btnActive)}updateHeight(){let e=this.commentInput;e.style.height="40px";let i=e.scrollHeight+14;i===47&&(i=40),e.style.height=`${i}px`,this.sendBtn.disabled=!(e.value.length>0)}send(e){var c;if(e.preventDefault(),((c=this.mentionList)==null?void 0:c.length)>0)return;let i=this.commentInput,n=i.value,s=this.autoCompleteHandler.getMentions(n);this.emitEvent(this.eventType,{text:n,mentions:s,position:this.pinCoordinates},{composed:!1,bubbles:!1}),i.value="",this.sendBtn.disabled=!0,this.updateHeight()}render(){var n;let e={comments__input__textarea:!0,"fixed-width":this.eventType==="create-annotation"},i={comments__input:!0,"comments__input--editable":this.editable,"hide-input":this.hideInput};return F`
      <div class="${oe(i)}">
        <textarea
          id="comments__input__textarea"
          class=${oe(e)}
          placeholder=${(n=this.placeholder)!=null?n:"Add comment..."}
          @input=${this.updateHeight}
          @focus=${this.onTextareaFocus}
          @blur=${this.onTextareaLoseFocus}
          spellcheck="false"
        ></textarea>
        <superviz-comments-mention-list
          .participants=${this.mentionList}
          @participant-selected=${this.insertMention}
        ></superviz-comments-mention-list>
        <div class="sv-hr"></div>
        <div class="comments__input__options">
          <button
            @click=${this.addAtSymbolInCaretPosition}
            class="mention-button icon-button icon-button--medium icon-button--clickable"
          >
            <superviz-icon name="mention" size="sm"></superviz-icon>
          </button>
          <div class="comment-input-options">
            ${this.commentInputOptions()} ${this.commentInputEditableOptions()}
          </div>
        </div>
      </div>
    `}};zn.styles=_k,zn.properties={eventType:{type:String},text:{type:String},btnActive:{type:Boolean},editable:{type:Boolean},placeholder:{type:String},mentions:{type:Array},mentionList:{type:Object},participantsList:{type:Object},hideInput:{type:Boolean},mode:{type:String}},zn=le([de("superviz-comments-comment-input")],zn);f();var RE=fe(ie),Ek=[RE.styles,Ah],Gn=class extends RE{constructor(){super();this.focusInput=()=>{var e,i;this.inputElement||(this.inputElement=(i=(e=this.shadowRoot)==null?void 0:e.querySelector("superviz-comments-comment-input"))==null?void 0:i.shadowRoot.querySelector("textarea")),this.inputElement.focus()};this.setInputSide=()=>{let s=this.commentsSide==="right"?320:0,c=this.annotationSides.right+293,l=this.containerSides.right-s;if(c<l){this.horizontalSide="right";return}s=this.commentsSide==="left"?320:0;let d=this.annotationSides.left-293,p=this.containerSides.left+s;if(d>p){this.horizontalSide="left";return}this.horizontalSide=p-d>c-l?"right":"left"};this.createComment=({detail:e})=>{this.annotationSent=!0,document.body.dispatchEvent(new CustomEvent("create-annotation",{detail:N(w({},e),{position:N(w({},this.originalPosition),{type:"canvas"})})})),this.annotation=null};this.cancelTemporaryAnnotation=()=>{this.annotation=null};this.cancelTemporaryAnnotationEsc=e=>{this.annotation=null};this.avatar=()=>{if(this.type==="add"&&!this.showInput)return F`<div
        class="comments__annotation-pin__avatar comments__annotation-pin__avatar--add"
      >
        <superviz-icon name="add"></superviz-icon>
      </div>`;let e=this.userAvatar;return e?F`<div class="comments__annotation-pin__avatar">
        <img src=${e} />
      </div>`:F`<div class="comments__annotation-pin__avatar">
      <p class="text text-bold text-big">${this.userInitial}</p>
    </div>`};this.input=()=>{if(!(!this.showInput||this.annotationSent))return F`<div class="floating-input">
      <superviz-comments-comment-input
        @create-annotation=${this.createComment}
        eventType="create-annotation"
        @comment-input-ready=${this.focusInput}
        participantsList=${JSON.stringify(this.participantsList)}
      >
      </superviz-comments-comment-input>
    </div>`};this.position={x:0,y:0},setTimeout(()=>{this.firstLoad=!1},800)}updated(e){super.updated(e),!(!e.has("movedPosition")||!this.annotationSides)&&(this.annotationSides=this.pinAnnotation.getBoundingClientRect(),this.setInputSide(),this.inputElement&&this.focusInput())}firstUpdated(e){var i;super.firstUpdated(e),De.call(this,["comments"]),this.showInput&&(this.originalPosition=w({},this.position),this.pinAnnotation=(i=this.shadowRoot)==null?void 0:i.querySelector(".comments__annotation-pin"),this.annotationSides=this.pinAnnotation.getBoundingClientRect(),this.setInputSide())}connectedCallback(){if(super.connectedCallback(),this.type!=="add")return;let{localParticipant:e}=this.useStore("global-store");e.subscribe(i=>{var n;this.localAvatar=(n=i==null?void 0:i.avatar)==null?void 0:n.imageUrl,this.localName=i==null?void 0:i.name}),window.document.body.addEventListener("close-temporary-annotation",this.cancelTemporaryAnnotation),window.document.body.addEventListener("keyup",i=>{i.key==="Escape"&&this.cancelTemporaryAnnotationEsc(i)})}disconnectedCallback(){super.disconnectedCallback(),this.type==="add"&&(window.document.body.removeEventListener("close-temporary-annotation",this.cancelTemporaryAnnotation),window.document.body.removeEventListener("keyup",e=>{e.key==="Escape"&&this.cancelTemporaryAnnotationEsc(e)}))}get userAvatar(){var e,i,n,s;return((s=(n=(i=(e=this.annotation)==null?void 0:e.comments)==null?void 0:i.at(0))==null?void 0:n.participant)==null?void 0:s.avatar)||this.localAvatar}get userInitial(){var i,n,s,c,l;return(((l=(c=(s=(n=(i=this.annotation)==null?void 0:i.comments)==null?void 0:n.at(0))==null?void 0:s.participant)==null?void 0:c.name)!=null?l:this.localName)||"Anonymous")[0].toUpperCase()}emitClick(){var e;document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:(e=this.annotation)==null?void 0:e.uuid}}))}render(){let e={"comments__annotation-pin":!0,preload:this.firstLoad===void 0,"comments__annotation-pin--active":this.active,"comments__cursor-pointer":this.type==="add"&&!this.showInput,"comments__annotation-pin--add":this.type==="add"&&this.showInput,[this.horizontalSide]:!0},i={"comments__annotation-pin-wrapper":!0,"comments__annotation-pin-wrapper--new":this.newPin},n=this.keepPositionRatio?"%":"px",s=`top: ${this.position.y}${n}; left: ${this.position.x}${n};`;return this.type==="add"?F`
        <div class=${oe(e)} style=${s}>${this.avatar()} ${this.input()}</div>
      `:F`<div class=${oe(i)} style=${s}>
      <div @click=${this.emitClick} class=${oe(e)}>${this.avatar()}</div>
    </div> `}};Gn.styles=Ek,Gn.properties={type:{type:String},annotation:{type:Object},position:{type:Object},active:{type:Boolean},showInput:{type:Boolean},containerSides:{type:Object},horizontalSide:{type:String},commentsSide:{type:String},movedPosition:{type:String},pinAnnotation:{type:Object},localAvatar:{type:String},annotationSent:{type:Boolean},localName:{type:String},keepPositionRatio:{type:Boolean},participantsList:{type:Object},firstLoad:{type:Boolean},newPin:{type:Boolean}},Gn=le([de("superviz-comments-annotation-pin")],Gn);f();var kE=fe(ie),wk=[kE.styles,Th],Vn=class extends kE{constructor(){super(...arguments);this.selectAnnotation=e=>{let{uuid:i}=this.annotation;document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:i}}))};this.resolveAnnotation=({detail:e})=>{let{uuid:i}=this.annotation,{resolved:n,type:s}=e,c=s==="resolve-annotation"&&this.annotationFilter==="All comments";this.emitEvent("resolve-annotation",{uuid:i,resolved:n}),c&&(this.shouldShowUndoResolved=!0)};this.hideUndoResolved=()=>{this.shouldShowUndoResolved=!1};this.generateExpandedCommentsTemplate=(e,i)=>{var n,s,c,l;return i===0?F``:F`
      <superviz-comments-comment-item
        uuid=${e.uuid}
        avatar=${(l=(c=(s=(n=this.annotation)==null?void 0:n.comments)==null?void 0:s.at(i))==null?void 0:c.participant)==null?void 0:l.avatar}
        username=${e.participant.name||"Anonymous"}
        text=${e.text}
        createdAt=${e.createdAt}
        annotationId=${this.annotation.uuid}
        participantsList=${JSON.stringify(this.participantsList)}
        mentions=${JSON.stringify(e.mentions)}
        class="comments__replies"
      ></superviz-comments-comment-item>
    `};this.updateEditMode=({detail:{editing:e}})=>{this.hideInput=e}}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{De.call(this,["comments"])})}get filterIsAll(){return this.annotationFilter==="All comments"}get filterIsResolved(){return this.annotationFilter==="Resolved comments"}get shouldHideAnnotation(){return{hidden:this.resolved&&this.filterIsAll||!this.resolved&&this.filterIsResolved}}get replies(){return[...this.annotation.comments].splice(1).length}get repliesSize(){return this.replies>=5?5:this.replies}get replyText(){return this.replies!==1?"replies":"reply"}get isSelected(){return this.selected===this.annotation.uuid}get annotationClasses(){return{comments__thread:!0,"comments__thread--selected":this.isSelected,"extra-space-bottom":this.replies}}get mainAnnotationClasses(){return{"comments__main-annotation":!0,"comments__main-annotation--selected":this.isSelected}}get hrClasses(){return{"sv-hr":!0,hidden:this.isLastAnnotation}}get avatarCommentsClasses(){return{"avatars-comments":!0,"comment-avatar--expand":!this.expandComments&&this.replies>1,invisible:!(!this.expandComments&&this.replies>=1)}}get containerWrapperClasses(){return{"comments-container-wrapper":!0,show:this.isSelected&&this.expandComments}}get commentsClasses(){return{"comments-container":!0,"comment-item--expand":this.isSelected&&this.expandComments,show:this.isSelected&&this.expandComments}}updated(e){if(e.has("selected")){let i=this.selected===this.annotation.uuid;this.expandComments=i}}createComment({detail:e}){let{text:i,mentions:n}=e;this.emitEvent("create-comment",{uuid:this.annotation.uuid,mentions:n,text:i})}generateAvatarCommentsTemplate(){var i,n,s,c,l,d;let e=[];for(let p=1;p<=this.repliesSize;p++)(n=(i=this.annotation.comments[p])==null?void 0:i.participant)!=null&&n.avatar?e.push(F`
          <div class="avatar">
            <img src=${(c=(s=this.annotation.comments[p])==null?void 0:s.participant)==null?void 0:c.avatar} />
          </div>
        `):e.push(F`
          <div class="avatar">
            <p class="text text-bold">
              ${((d=(l=this.annotation.comments[p])==null?void 0:l.participant.name[0])==null?void 0:d.toUpperCase())||"A"}
            </p>
          </div>
        `);return F`
      ${e}
      <div class="text text-big sv-gray-500">${this.replies} ${this.replyText}</div>
    `}annotationResolvedTemplate(){return this.shouldShowUndoResolved?F`
      <superviz-comments-annotation-resolved
        @undo-resolve=${this.resolveAnnotation}
        @hide=${this.hideUndoResolved}
        class=${oe({hidden:this.filterIsResolved,"comments__resolved-annotation-message":!0})}
      >
      </superviz-comments-annotation-resolved>
    `:F``}get inputClasses(){return{"hide-input":this.hideInput}}get wrapperClasses(){return{wrapper:!0,"show-wrapper":!this.resolved&&this.filterIsAll||this.resolved&&this.filterIsResolved}}render(){var i,n,s,c,l,d,p,m,y,E,x;let e={"comments__complete-annotation":!0,"comments__hide-complete-annotation":this.shouldShowUndoResolved};return F`
      <div class="${oe(e)}">
        ${this.annotationResolvedTemplate()}

        <div class=${oe(this.wrapperClasses)}>
          <div class=${oe(this.shouldHideAnnotation)}>
            <div class=${oe(this.annotationClasses)} @click=${this.selectAnnotation}>
              <div class=${oe(this.mainAnnotationClasses)}>
                <superviz-comments-comment-item
                  uuid=${(i=this.annotation.comments)==null?void 0:i[0].uuid}
                  annotationId=${this.annotation.uuid}
                  username=${((s=(n=this.annotation.comments)==null?void 0:n[0].participant)==null?void 0:s.name)||"Anonymous"}
                  text=${(c=this.annotation.comments)==null?void 0:c[0].text}
                  createdAt=${(l=this.annotation.comments)==null?void 0:l[0].createdAt}
                  participantsList=${JSON.stringify(this.participantsList)}
                  primaryComment
                  avatar=${(y=(m=(p=(d=this.annotation)==null?void 0:d.comments)==null?void 0:p.at(0))==null?void 0:m.participant)==null?void 0:y.avatar}
                  resolvable
                  ?resolved=${this.resolved}
                  annotationFilter=${this.annotationFilter}
                  @resolve-annotation=${this.resolveAnnotation}
                  mentions=${JSON.stringify((E=this.annotation.comments)==null?void 0:E[0].mentions)}
                  class="comments__annotation"
                  @edit-comment=${this.updateEditMode}
                ></superviz-comments-comment-item>
              </div>

              <div class=${oe(this.containerWrapperClasses)}>
                <div class=${oe(this.commentsClasses)}>
                  ${(x=this.annotation.comments)==null?void 0:x.map(this.generateExpandedCommentsTemplate)}
                  <span class=${oe(this.inputClasses)}>
                    <superviz-comments-comment-input
                      @create-comment=${this.createComment}
                      eventType="create-comment"
                      @click=${P=>P.stopPropagation()}
                      placeholder="Reply"
                      participantsList=${JSON.stringify(this.participantsList)}
                    ></superviz-comments-comment-input>
                  </span>
                </div>
              </div>
              <div class=${oe(this.avatarCommentsClasses)}>
                <div class="avatar-container">${this.generateAvatarCommentsTemplate()}</div>
              </div>
            </div>
            <div class=${oe(this.hrClasses)}></div>
          </div>
        </div>
      </div>
    `}};Vn.styles=wk,Vn.properties={annotation:{type:Object},expandComments:{type:Boolean},selected:{type:String,reflect:!0},resolved:{type:Boolean},shouldShowUndoResolved:{type:Boolean},isLastAnnotation:{type:Boolean},annotationFilter:{type:String},participantsList:{type:Object},hideInput:{type:Boolean}},Vn=le([de("superviz-comments-annotation-item")],Vn);f();var NE=fe(ie),xk=[NE.styles],jn=class extends NE{constructor(){super(...arguments);this.emitEventOpenModal=()=>{window.document.body.dispatchEvent(new CustomEvent("superviz-modal--open",{detail:{title:"DELETE COMMENT",body:F`<span class="text text-big sv-gray-600"
            >Are you sure you want to delete this comment? <br />
            This action cannot be undone</span
          >`,confirmLabel:"DELETE",confirm:!0,cancel:!0},bubbles:!0,composed:!0}))};this.toggle=()=>{this.open=!this.open}}firstUpdated(){window.document.body.addEventListener("superviz-modal--close",()=>{this.open&&this.emitEvent("close",{},{bubbles:!1,composed:!1})}),window.document.body.addEventListener("superviz-modal--confirm",()=>{this.open&&(this.emitEvent("confirm",{},{bubbles:!1,composed:!1}),this.emitEventCloseModal())})}updated(e){e.has("open")&&(this.open&&setTimeout(()=>this.emitEventOpenModal()),this.open||setTimeout(()=>this.emitEventCloseModal()))}emitEventCloseModal(){this.open&&(window.document.body.dispatchEvent(new CustomEvent("superviz-modal--close",{detail:{open:!0},bubbles:!0,composed:!0})),this.emitEvent("close",{},{bubbles:!1,composed:!1}))}render(){let e=()=>{if(this.useSlot)return F`<slot name="modal-handler" @click=${this.toggle}></slot>`},i=()=>{if(this.open)return F` <superviz-modal></superviz-modal> `};return F` ${e()} ${i()} `}};jn.styles=xk,jn.properties={open:{type:Boolean},useSlot:{type:Boolean}},jn=le([de("superviz-comments-delete-comments-modal")],jn);f();var DE=fe(ie),Tk=[DE.styles,Sh],Sk=10*1e3,qn=class extends DE{constructor(){super();this.setTimer=()=>{clearTimeout(this.timeout),this.isCanceled=!1,this.timeout=setTimeout(()=>{this.isCanceled||(this.timeToHide=0,this.isCanceled=!1,this.hide())},this.timeToHide)};this.timeToHide=Sk,this.isCanceled=!1}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{De.call(this,["comments"]),this.setTimer()})}hide(){this.emitEvent("hide",{},{bubbles:!1,composed:!1})}undone(){this.isCanceled=!0,this.hide(),this.emitEvent("undo-resolve",{type:"undo-resolve",resolved:!1},{bubbles:!1,composed:!1}),clearTimeout(this.timeout)}render(){return this.timeToHide===0?F``:this.isCanceled?F``:F`
      <div class="comments__annotation-resolved">
        <span class="text text-big sv-gray-700 comments__annotation-resolved__text"
          >You resolved this comment</span
        >
        <button
          id="undone"
          @click=${this.undone}
          class="icon-button icon-button--clickable icon-button--medium comments__annotation-resolved__unresolve_button"
        >
          <superviz-icon name="undo" size="md"></superviz-icon>
        </button>
      </div>
    `}};qn.styles=Tk,qn.properties={timeToHide:{type:Number},isCanceled:{type:Boolean}},qn=le([de("superviz-comments-annotation-resolved")],qn);f();var FE=fe(ie),Ak=[FE.styles,Ph],rl=[{label:"All comments"},{label:"Resolved comments"}],Zn=class extends FE{constructor(){super();this.selectClick=()=>{this.caret=this.caret==="down"?"up":"down"};this.dropdownOptionsHandler=({detail:e})=>{this.emitEvent("select",{filter:e}),this.selectClick()};this.caret="down"}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{De.call(this,["comments"])})}render(){let e=this.filter==="All comments"?rl[0].label:rl[1].label;rl[0].active=this.filter==="All comments",rl[1].active=this.filter==="Resolved comments";let i={text:!0,"text-bold":!0,"select-content":!0,"comments__filter__selected-label":!0,"sv-gray-500":this.caret==="down","sv-gray-700":this.caret==="up"};return F`
      <div class="comments__filter-container">
        <div class="comments__filter">
          <superviz-dropdown
            options=${JSON.stringify(rl)}
            position="bottom-left"
            right-offset="100px"
            @click=${this.selectClick}
            @selected=${this.dropdownOptionsHandler}
            @close=${this.selectClick}
            classesPrefix="comments__dropdown"
            parentComponent="comments"
          >
            <div class="comments__filter__toggle-button" slot="dropdown">
              <span class=${oe(i)}>${e}</span>
              <div class="comments__filter__icon">
                <superviz-icon name=${this.caret} size="xs"></superviz-icon>
              </div>
            </div>
          </superviz-dropdown>
        </div>
      </div>
    `}};Zn.styles=Ak,Zn.properties={filter:{type:String},caret:{type:String}},Zn=le([de("superviz-comments-annotation-filter")],Zn);f();var $E=fe(ie),Pk=[$E.styles,Oh],Jn=class extends $E{constructor(){super();this.onTogglePinActive=({detail:{isActive:e}})=>{this.isActive=e};this.isHidden=!0,this.positionStyles="top: 20px; left: 20px;",this.shouldHide=!1,this.commentsPosition="left"}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{De.call(this,["comments"])}),this.mouseHovering=!1;let i=this.shadowRoot.querySelector(".comments__floating-button");i.addEventListener("mouseenter",()=>{setTimeout(()=>i.classList.add("comments-floating-button-hovered"),300),this.mouseHovering=!0}),i.addEventListener("mouseleave",()=>{i.classList.remove("comments-floating-button-hovered"),this.mouseHovering=!1})}toggle(){this.emitEvent("toggle",{})}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("toggle-annotation-sidebar",()=>{this.isHidden=!this.isHidden}),window.document.body.addEventListener("toggle-pin-active",this.onTogglePinActive)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("toggle-annotation-sidebar",()=>{this.isHidden=!this.isHidden}),window.document.body.removeEventListener("toggle-pin-active",this.onTogglePinActive)}updated(e){super.updated(e),this.updateComplete.then(()=>{let i=this.shadowRoot.querySelector(".comments__floating-button");i&&i.setAttribute("style",this.positionStyles)})}calculateIfShouldHide(){var B;let e=(B=document.getElementsByTagName("superviz-comments")[0])==null?void 0:B.shadowRoot.querySelector(".superviz-comments"),i=this.shadowRoot.querySelector(".comments__floating-button");if(!e||!i)return;let{left:n,right:s,top:c,bottom:l}=e.getBoundingClientRect(),{left:d,right:p,top:m,bottom:y}=i.getBoundingClientRect(),E=l>m&&y>c,x=c<y&&m<l,P=s>d&&p>n,k=n<p&&d<s;this.shouldHide=(x||E)&&(P||k)}render(){this.calculateIfShouldHide();let e={"comments__floating-button":!0,"hide-button":!this.isHidden&&this.shouldHide,"is-active":this.isActive,"is-inactive":!this.isActive},i={"comments__floating-button-text-box":!0,"comments__floating-button-text-box--hovered":this.mouseHovering},n={text:!0,"text-big":!0,"text-bold":!0,"not-hovered":!this.mouseHovering,"comments__floating-button__text":!0,textActive:this.isActive,textInactive:!this.isActive};return F` <button @click=${this.toggle} class="${oe(e)}">
      <div class="comments__floating-button__icon">
        <superviz-icon
          size="sm"
          name="comment"
          color=${this.mouseHovering||this.isActive?"white":"black"}
        ></superviz-icon>
        <svg class="cross" width="8px" height="8px" viewBox="0 0 8 8">
          <rect class="cross-bar-1" x="0" y="3" width="8px" height="2px" />
          <rect class="cross-bar-2" x="0" y="3" width="8px" height="2px" />
        </svg>
      </div>
      <div class=${oe(i)}>
        <p class="${oe(n)} comment">Comment</p>
        <p class="${oe(n)} cancel">Cancel</p>
      </div>
    </button>`}};Jn.styles=Pk,Jn.properties={positionStyles:{type:String},isHidden:{type:Boolean},commentsPosition:{type:String},isActive:{type:Boolean},mouseHovering:{type:Boolean}},Jn=le([de("superviz-comments-button")],Jn);f();var BE=fe(ie),Ok=[BE.styles,Ih],Yn=class extends BE{constructor(){super();this.showMentionList=()=>{var i;let e=(i=this.shadowRoot)==null?void 0:i.getElementById("mention-list");e==null||e.style.setProperty("display","block"),e==null||e.style.setProperty("margin-top","1px"),e.addEventListener("wheel",this.stopHandleZoom)};this.hideMentionList=()=>{var i;let e=(i=this.shadowRoot)==null?void 0:i.getElementById("mention-list");e.removeEventListener("wheel",this.stopHandleZoom),e==null||e.style.setProperty("display","none")};this.selectParticipant=e=>{this.emitEvent("participant-selected",e,{bubbles:!1,composed:!1}),this.hideMentionList()};this.stopHandleZoom=e=>{var n;let i=(n=this.shadowRoot)==null?void 0:n.getElementById("mention-list");i.scrollTop+=e.deltaY,e.preventDefault()};this.participants=[]}updated(e){if(e.has("participants")&&this.participants.length>0){this.showMentionList();return}this.hideMentionList()}getAvatar(e){var i;return e.avatar?F`<img class="avatar" src=${e.avatar} />`:F`<div class="default-avatar">
      <p class="text text-bold">${((i=e.name[0])==null?void 0:i.toUpperCase())||"A"}</p>
    </div>`}render(){let e=i=>F`
      <div class="mention-item" @click=${()=>this.selectParticipant(i)}>
        ${this.getAvatar(i)}
        <div class="avatar-type">${i.name}</div>
      </div>
    `;return F`
      <div id="mention-list">
        ${Lr(this.participants,i=>i.id,i=>F` ${e(i)} `)}
      </div>
    `}};Yn.styles=Ok,Yn.properties={participants:{type:Object}},Yn=le([de("superviz-comments-mention-list")],Yn);f();f();f();f();var bf=te`
  .who-is-online__participant-list {
    display: flex;
    align-items: center;
    gap: 4px;
    position: relative;
  }

  .who-is-online {
    display: flex;
    flex-direction: column;
    position: fixed;
    z-index: 99;
  }

  .who-is-online__presence-control-message__text {
    margin: 0;
  }

  .who-is-online__participant {
    border-radius: 50%;
    box-sizing: border-box;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    cursor: pointer;
    transition: opacity 0.3s ease-in-out;
    border: 2px solid #878291;
    border-radius: 50%;
    max-width: 40px;
    flex: 1 0 40px;
  }

  .followed {
    border-style: dashed !important;
    animation: rotate 15s linear infinite;
  }

  .followed .who-is-online__participant__avatar {
    animation: nullifyRotate 15s linear infinite;
  }

  .private {
    opacity: 0.3;
  }

  @keyframes rotate {
    100% {
      transform: rotate(1turn);
    }
  }

  @keyframes nullifyRotate {
    100% {
      transform: rotate(-1turn);
    }
  }

  .who-is-online__participant.disable-dropdown {
    cursor: default;
  }

  .who-is-online__participant__avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Open Sans';
    font-size: 14px;
    line-height: 14px;
    line-height: 14px;
    font-weight: bold;
    color: #26242a;
    object-fit: contain;
  }

  .superviz-who-is-online__excess {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: Roboto;
    font-size: 14px;
    line-height: 16px;
    text-align: center;
    font-weight: bold;
    cursor: pointer;
    color: #aea9b8;
  }

  .excess_participants:hover,
  .excess_participants--open {
    background-color: #aea9b8 !important;
  }

  .excess_participants:hover > div,
  .excess_participants--open > div {
    color: #fff !important;
  }

  @media (max-width: 780px) {
    .who-is-online__participant {
      width: 32px;
      height: 32px;
    }

    .who-is-online__participant {
      flex: 1 0 32px;
      max-width: 32px;
    }

    .who-is-online__participant__avatar {
      width: 24px;
      height: 24px;
    }

    .who-is-online__participant-list {
      gap: 8px;
    }

    .superviz-who-is-online__excess {
      width: 24px;
      height: 24px;
      font-size: 12px;
      line-height: 12px;
    }
  }
`;f();var _f=te`
  .dropdown {
    position: relative;
  }

  .who-is-online__extra-participant {
    display: flex;
    user-select: none;
    align-items: center;
    justify-items: start;
    gap: 4px;
    width: 100%;
    padding: 10px;
    border-radius: 2px;
    position: relative;
    cursor: pointer;
  }

  .who-is-online__extra-participant.disable-dropdown {
    cursor: default;
  }

  .who-is-online__extra-participant:hover,
  .who-is-online__extra-participant--selected {
    background-color: rgb(var(--sv-gray-200));
  }

  .who-is-online__participant {
    border-radius: 50%;
    box-sizing: border-box;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border: 2px solid #878291;
    border-radius: 50%;
    max-width: 40px;
    flex: 1 0 40px;
  }

  .who-is-online__participant__avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Open Sans';
    font-size: 14px;
    line-height: 14px;
    font-weight: bold;
    color: #26242a;
    object-fit: contain;
  }

  .dropdown-list {
    position: relative;
    display: flex;
    flex-direction: column;
    z-index: 100;
  }

  .dropdown-list > div {
    padding: 4px;
    width: 216px;
    box-sizing: border-box;
  }

  .who-is-online__extras-dropdown {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    opacity: 0;
    display: none;
    background: #fff;
    padding: 0;
    z-index: 1;
    transition: 0.2s;
    border-radius: 3px;
    max-height: 240px;
    overflow: auto;
  }

  .who-is-online__extras-dropdown superviz-dropdown:hover {
    z-index: 999;
    position: relative;
  }

  .who-is-online__extras__arrow-icon {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .menu--bottom {
    top: 4px;
    min-width: 103px;
    position: absolute;
    right: 0;
  }

  .menu--top {
    bottom: 44px;
    min-width: 103px;
    position: absolute;
    right: 0px;
  }

  .menu-open {
    display: block;
    opacity: 1;
  }

  .superviz-who-is-online-dropdown__tooltip {
    background-color: rgb(var(--sv-gray-600));
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-items: center;
    position: absolute;
    top: 52px;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 2px;
    opacity: 0;
    cursor: default;
    display: none;
    transition: opacity 0.2s ease-in-out display 0s;
  }

  .superviz-who-is-online-dropdown__tooltip-arrow {
    width: 13px;
    height: 13px;
    position: absolute;
    top: 0px;
    left: 50%;
    transform: rotate(45deg) translateX(-50%);
    background-color: rgb(var(--sv-gray-600));
    border-top-left-radius: 3px;
  }

  .dropdown-content:hover + .superviz-who-is-online-dropdown__tooltip {
    opacity: 1;
    display: block;
  }

  .tooltip-content {
    margin: 0;
    font-family: roboto;
    white-space: nowrap;
    text-align: center;
    color: white;
    font-size: 14px;
  }

  .who-is-online__extras__username {
    font-size: 14px;
    line-height: 20px;
    font-family: 'Open sans';
    color: rgb(var(--sv-gray-600));
  }

  .icon {
    flex: 1;
    justify-content: flex-end;
    display: flex;
  }

  .hide-icon {
    display: none;
  }

  @media (max-width: 780px) {
    .sv-icon,
    .who-is-online__participant {
      width: 32px;
      height: 32px;
    }

    .who-is-online__participant {
      flex: 1 0 32px;
      max-width: 32px;
    }

    .who-is-online__participant__avatar {
      width: 24px;
      height: 24px;
    }

    .dropdown-list > div {
      width: 192px;
    }

    .menu--top {
      bottom: 36px;
    }

    .superviz-who-is-online-dropdown__tooltip {
      top: 44px;
    }
  }
`;f();var Ef=te`
  .who-is-online__controls-messages {
    position: absolute;
    right: 0;
    display: flex;
    flex-direction: column;
    gap: 5px;
    margin-top: 4px;
  }

  .who-is-online__presence-control-message {
    box-sizing: border-box;
    font-size: 12px;
    padding: 8px 10px;
    font-family: 'Roboto';
    border-radius: 6px;
    background-color: #fff;
    color: rgb(var(--sv-gray-700));
    border: 2px solid #e0e0e0;
    white-space: nowrap;
  }

  .who-is-online__pcm__text {
    margin: 0;
  }

  .who-is-online__presence-control-message span {
    margin-left: 3px;
    text-decoration: underline;
    cursor: pointer;
  }

  .left-side {
    left: 0;
  }

  .right-side {
    right: 0;
  }

  .left-side .who-is-online__presence-control-message {
    align-self: flex-start;
  }

  .right-side .who-is-online__presence-control-message {
    align-self: flex-end;
  }

  .bottom-side {
    bottom: auto;
    top: calc(100% + 5px);
  }

  .top-side {
    top: auto;
    bottom: calc(100% + 5px);
  }
`;var WE=fe(ie),Ck=[WE.styles,bf],Kn=class extends WE{constructor(){super();this.onClickOutDropdown=({detail:e})=>{this.open=e.open};this.toggleShowTooltip=()=>{this.showTooltip=!this.showTooltip};this.dropdownOptionsHandler=({detail:{label:e,participantId:i,source:n}})=>{switch(e){case"go to":this.handleGoTo(i);break;case"follow":this.handleLocalFollow(i,n);break;case"unfollow":this.handleLocalUnfollow();break;case"private mode":this.handlePrivate(i);break;case"leave private mode":this.handleCancelPrivate(i);break;case"everyone follows me":this.handleFollow(i,n);break;case"stop followers":this.handleStopFollow();break;case"gather all":this.handleGatherAll(i);break;default:break}};this.position="top: 20px; right: 40px;",this.showTooltip=!0,this.open=!1;let{localParticipant:e}=this.useStore("global-store"),{participants:i,following:n,extras:s,disablePresenceControls:c}=this.useStore("who-is-online-store");i.subscribe(l=>{this.participants=l}),n.subscribe(),c.subscribe(),s.subscribe(l=>{this.amountOfExtras=l.length}),e.subscribe(l=>{var p,m;let d=(p=l.activeComponents)==null?void 0:p.some(y=>y.toLowerCase().includes("presence"));this.localParticipantData={id:l.id,joinedPresence:(m=l.activeComponents)==null?void 0:m.some(y=>y.toLowerCase().includes("presence"))},this.disableDropdown=!d})}firstUpdated(e){super.firstUpdated(e),De.call(this,"who-is-online")}toggleOpen(){this.open=!this.open}dropdownPosition(e){if(this.participants.length===1)return"bottom-center";if(e===0)return"bottom-right";let i=this.participants.length>4,n=e+1===this.participants.length;return i||!n?"bottom-center":"bottom-left"}renderExtras(){var i;if(!this.amountOfExtras)return;let e={"who-is-online__participant":!0,excess_participants:!0,"excess_participants--open":this.open};return F`
      <superviz-who-is-online-dropdown
        @selected=${this.dropdownOptionsHandler}
        @clickout=${this.onClickOutDropdown}
        ?disableDropdown=${this.disableDropdown}
        ?showSeeMoreTooltip=${this.showTooltip}
        @toggle=${this.toggleOpen}
        @toggle-dropdown-state=${this.toggleShowTooltip}
        ?localParticipantJoinedPresence=${(i=this.localParticipantData)==null?void 0:i.joinedPresence}
        classesPrefix="who-is-online__controls"
        parentComponent="who-is-online"
        tooltipPrefix="who-is-online"
      >
        <div class=${oe(e)} slot="dropdown">
          <div class="superviz-who-is-online__excess who-is-online__extras">
            +${this.amountOfExtras}
          </div>
        </div>
      </superviz-who-is-online-dropdown>
    `}getAvatar({color:e,imageUrl:i,firstLetter:n,slotIndex:s}){if(i)return F` <img
        class="who-is-online__participant__avatar"
        style="background-color: ${e}"
        src=${i}
      />`;let c=Fo.includes(s)?"#FFFFFF":"#26242A";return F`<div
      class="who-is-online__participant__avatar"
      style="background-color: ${e}; color: ${c}"
    >
      ${n}
    </div>`}cancelPrivate(){this.isPrivate=void 0,this.emitEvent("realtime.private-mode",{id:this.localParticipantData.id})}renderParticipants(){return this.participants.length?F`
      ${Lr(this.participants,e=>e.id,(e,i)=>{var P;let{avatar:n,id:s,name:c,tooltip:l,controls:d,disableDropdown:p,isLocalParticipant:m}=e,y=this.dropdownPosition(i),E=((P=this.following)==null?void 0:P.id)===s,x={"who-is-online__participant":!0,"disable-dropdown":p,followed:E||this.everyoneFollowsMe&&m,private:m&&this.isPrivate};return F`
            <superviz-dropdown
              options=${JSON.stringify(d)}
              returnData=${JSON.stringify({participantId:s,source:"participants"})}
              position=${y}
              name=${c}
              tooltipData=${JSON.stringify(l)}
              classesPrefix="who-is-online__controls"
              parentComponent="who-is-online"
              tooltipPrefix="who-is-online"
              ?disabled=${p}
              ?canShowTooltip=${this.showTooltip}
              @selected=${this.dropdownOptionsHandler}
              @toggle-dropdown-state=${this.toggleShowTooltip}
            >
              <div
                slot="dropdown"
                class=${oe(x)}
                style="border-color: ${n.color}"
              >
                ${this.getAvatar(n)}
              </div>
            </superviz-dropdown>
          `})}
    `:F``}handleGoTo(e){this.emitEvent("realtime.go-to-participant",{id:e})}handleLocalFollow(e,i){let{following:n}=this.useStore("who-is-online-store"),s=this.useStore("who-is-online-store")[i].value,{id:c,name:l,avatar:{color:d}}=s.find(({id:p})=>p===e);this.everyoneFollowsMe&&this.handleStopFollow(),n.publish({name:l,id:c,color:d}),this.emitEvent("realtime.local-follow-participant",{id:c,source:i})}handleLocalUnfollow(){let{following:e}=this.useStore("who-is-online-store");e.publish(void 0),this.emitEvent("realtime.local-follow-participant",{id:void 0})}handlePrivate(e){this.everyoneFollowsMe&&this.handleStopFollow(),this.emitEvent("realtime.private-mode",{id:e,isPrivate:!0}),this.isPrivate=!0}handleCancelPrivate(e){this.emitEvent("realtime.private-mode",{id:e,isPrivate:!1}),this.isPrivate=!1}handleFollow(e,i){this.isPrivate&&this.cancelPrivate();let n=this.useStore("who-is-online-store")[i].value,{id:s,name:c,avatar:{color:l,slotIndex:d}}=n.find(({id:m})=>m===e);this.everyoneFollowsMe=!0;let{following:p}=this.useStore("who-is-online-store");p.publish(void 0),this.emitEvent("realtime.follow-participant",{id:s,name:c,color:l,slotIndex:d})}handleStopFollow(){this.everyoneFollowsMe=!1,this.emitEvent("realtime.follow-participant",void 0)}handleGatherAll(e){this.isPrivate&&this.cancelPrivate(),this.emitEvent("realtime.gather",{id:e})}updated(e){super.updated(e),this.updateComplete.then(()=>{let i=this.shadowRoot.querySelector(".who-is-online");if(!i)return;let n=this.position.includes("left")?"flex-start":"flex-end",s=`${this.position} align-items: ${n};`;i.setAttribute("style",s)})}render(){return F`<div class="who-is-online who-is-online">
      <div class="who-is-online__participant-list">
        ${this.renderParticipants()} ${this.renderExtras()}
      </div>
      <superviz-who-is-online-messages
        ?everyoneFollowsMe=${this.everyoneFollowsMe}
        ?isPrivate=${this.isPrivate}
        @stop-following=${this.handleLocalUnfollow}
        @cancel-private=${this.cancelPrivate}
        @stop-everyone-follows-me=${this.handleStopFollow}
      ></superviz-who-is-online-messages>
    </div> `}};Kn.styles=Ck,Kn.properties={position:{type:String},open:{type:Boolean},localParticipantColor:{type:String},isPrivate:{type:Boolean},everyoneFollowsMe:{type:Boolean},showTooltip:{type:Boolean}},Kn=le([de("superviz-who-is-online")],Kn);f();f();f();var UE=fe(ie),Lk=[UE.styles,Ef],Xn=class extends UE{constructor(){super();this.repositionMessages=()=>{let{following:e,everyoneFollowsMe:i,isPrivate:n}=this;if(e||i||n){this.repositionInVerticalDirection(),this.repositionInHorizontalDirection(),this.animationFrame=window.requestAnimationFrame(this.repositionMessages);return}window.cancelAnimationFrame(this.animationFrame)};let{localParticipant:e}=this.useStore("global-store");e.subscribe(n=>{this.participantColor=n.color});let{following:i}=this.useStore("who-is-online-store");i.subscribe()}firstUpdated(e){super.firstUpdated(e),De.call(this,"who-is-online")}updated(e){super.updated(e),["following","everyoneFollowsMe","isPrivate"].some(n=>e.has(n))&&this.repositionMessages()}repositionInVerticalDirection(){let e=window.innerHeight/2,{top:i}=this.parentElement.getBoundingClientRect();if(i<e){this.verticalSide="bottom-side";return}this.verticalSide="top-side"}repositionInHorizontalDirection(){let e=window.innerWidth/2,{left:i}=this.parentElement.getBoundingClientRect();if(i<e){this.horizontalSide="left-side";return}this.horizontalSide="right-side"}stopFollowing(){this.emitEvent("stop-following",{})}cancelPrivate(){this.emitEvent("cancel-private",{})}stopEveryoneFollowsMe(){this.emitEvent("stop-everyone-follows-me",{})}followingMessage(){if(!this.following)return"";let{name:e,color:i}=this.following;return F`<div
      class="who-is-online__following-message who-is-online__presence-control-message who-is-online__pcm"
      style="border-color: ${i}"
    >
      <p class="who-is-online__presence-control-message__text who-is-online__pcm__text">
        Following: ${e}
        <span
          class="who-is-online__presence-control-message__cancel-action-button who-is-online__pcm__cancel-action-button"
          @click=${this.stopFollowing}
          >Stop</span
        >
      </p>
    </div>`}everyoneFollowsMeMessage(){return this.everyoneFollowsMe?F`<div
      class="who-is-online__follow-me-message who-is-online__presence-control-message who-is-online__pcm"
      style="border-color: ${this.participantColor}"
    >
      <p class="who-is-online__presence-control-message__text who-is-online__pcm__text">
        Everyone is following you
        <span
          class="who-is-online__presence-control-message__cancel-action-button who-is-online__pcm__cancel-action-button"
          @click=${this.stopEveryoneFollowsMe}
          >Stop</span
        >
      </p>
    </div>`:""}privateMessage(){return this.isPrivate?F`<div
      class="who-is-online__private-mode-message who-is-online__presence-control-message who-is-online__pcm"
      style="border-color: ${this.participantColor}"
    >
      <p class="who-is-online__presence-control-message__text who-is-online__pcm__text">
        You are in Private Mode
        <span
          class="who-is-online__presence-control-message__cancel-action-button who-is-online__pcm__cancel-action-button"
          @click=${this.cancelPrivate}
          >Cancel</span
        >
      </p>
    </div>`:""}render(){let e={"who-is-online__controls-messages":!0,[this.verticalSide]:!0,[this.horizontalSide]:!0};return F` <div class=${oe(e)}>
      ${this.followingMessage()} ${this.everyoneFollowsMeMessage()} ${this.privateMessage()}
    </div>`}};Xn.styles=Lk,Xn.properties={everyoneFollowsMe:{type:Boolean},isPrivate:{type:Boolean},verticalSide:{type:String},horizontalSide:{type:String}},Xn=le([de("superviz-who-is-online-messages")],Xn);f();var HE=fe(ie),Mk=[HE.styles,_f],Qn=class extends HE{constructor(){super();this.onClickOutDropdown=e=>{if(e.stopPropagation(),!this.open)return;let i=e.composedPath(),n=this.shadowRoot.querySelector(".dropdown-content"),s=this.shadowRoot.querySelector(".dropdown-list"),l=this.shadowRoot.querySelector('slot[name="dropdown"]').assignedElements()[0],d=i.includes(n),p=i.includes(s),m=i.includes(l);d||p||m||this.close()};this.close=()=>{this.open=!1,this.selected="",this.emitEvent("clickout",{bubbles:!1,composed:!1})};this.selectParticipant=(e,i)=>()=>{i||(this.selected=e)};this.toggleShowTooltip=({detail:{open:e}})=>{this.showParticipantTooltip=!this.showParticipantTooltip,e||(this.selected="")};this.tooltip=()=>this.showSeeMoreTooltip?F`<superviz-tooltip
      tooltipData=${JSON.stringify({name:"See more"})}
      classesPrefix="who-is-online__tooltip"
      parentComponent="who-is-online"
    ></superviz-tooltip>`:"";this.repositionDropdown=()=>{if(!this.open||!this.parentElement){window.cancelAnimationFrame(this.animationFrame);return}this.repositionInVerticalDirection(),this.repositionInHorizontalDirection(),this.animationFrame=window.requestAnimationFrame(this.repositionDropdown)};this.repositionInVerticalDirection=()=>{let{bottom:e,top:i,height:n}=this.parentElement.getBoundingClientRect(),s=window.innerHeight/2;if(i+n/2>s){this.dropdownList.style.setProperty("bottom",`${window.innerHeight-i+8}px`),this.dropdownList.style.setProperty("top","");return}this.dropdownList.style.setProperty("top",`${e+8}px`),this.dropdownList.style.setProperty("bottom","")};this.repositionInHorizontalDirection=()=>{let{right:e,left:i}=this.parentElement.getBoundingClientRect();this.dropdownList.style.setProperty("right",`${window.innerWidth-e}px`),this.dropdownList.style.setProperty("left",`${i}px`)};this.selected="",this.showParticipantTooltip=!0;let{extras:e}=this.useStore("who-is-online-store");e.subscribe(i=>{this.participants=i})}firstUpdated(e){this.shadowRoot.querySelector(".who-is-online__extras-dropdown").scrollTop=0,De.call(this,"who-is-online"),this.dropdownList=this.shadowRoot.querySelector(".dropdown-list"),this.dropdownList.style.position="fixed"}updated(e){if(e.has("open")){if(this.emitEvent("toggle-dropdown-state",{open:this.open,font:"toggle"}),this.open){document.addEventListener("click",this.onClickOutDropdown);return}document.removeEventListener("click",this.onClickOutDropdown)}}getAvatar({color:e,imageUrl:i,firstLetter:n,slotIndex:s}){if(i)return F` <img
        class="who-is-online__participant__avatar"
        style="background-color: ${e}"
        src=${i}
      />`;let c=Fo.includes(s)?"#FFFFFF":"#26242A";return F`<div
      class="who-is-online__participant__avatar"
      style="background-color: ${e}; color: ${c}"
    >
      ${n}
    </div>`}renderParticipants(){if(!this.participants)return;let e=this.participants.length-1;return Lr(this.participants,i=>i.id,(i,n)=>{let{disableDropdown:s,id:c,avatar:l,controls:d,tooltip:p,name:m}=i,y={"who-is-online__extra-participant":!0,"who-is-online__extra-participant--selected":this.selected===c,"disable-dropdown":s},E={"who-is-online__extras__arrow-icon":!0,"hide-icon":s},x=n===e;return F`
        <superviz-dropdown
          options=${JSON.stringify(d)}
          returnData=${JSON.stringify({participantId:c,source:"extras"})}
          tooltipData=${JSON.stringify(p)}
          position="bottom-right"
          classesPrefix="who-is-online__controls"
          parentComponent="who-is-online"
          tooltipPrefix="who-is-online"
          ?disabled=${s}
          ?canShowTooltip=${this.showParticipantTooltip}
          ?shiftTooltipLeft=${!0}
          ?lastParticipant=${x}
          @toggle-dropdown-state=${this.toggleShowTooltip}
          @selected=${this.close}
        >
        <div 
          class=${oe(y)} 
          @click=${this.selectParticipant(c,s)} slot="dropdown">
            <div class="who-is-online__participant" style="border-color: 
            ${l.color}">
              ${this.getAvatar(l)}
            </div>
            <span class="who-is-online__extras__username">${m}</span>
            <superviz-icon 
              class=${oe(E)} 
              name="right" 
              color="var(--sv-gray-600)"
              size="sm"
            >
          </superviz-icon>
          </div>
        </div>
      </superviz-dropdown>
      `})}toggle(){this.open=!this.open,this.open&&(this.selected="",this.repositionDropdown())}get menuClasses(){return{"who-is-online__extras-dropdown":!0,"menu--bottom":this.position==="bottom-side","menu--top":this.position==="top-side","menu-open":this.open}}render(){return F`
      <div class="dropdown">
        <div class="dropdown-content" @click=${this.toggle}>
          <slot name="dropdown"></slot>
        </div>
        ${this.tooltip()}
      </div>
      <div class="dropdown-list">
        <div class=${oe(this.menuClasses)}>${this.renderParticipants()}</div>
      </div>
    `}};Qn.styles=Mk,Qn.properties={open:{type:Boolean},align:{type:String},position:{type:String},selected:{type:String},disableDropdown:{type:Boolean},showSeeMoreTooltip:{type:Boolean},showParticipantTooltip:{type:Boolean},localParticipantJoinedPresence:{type:Boolean},dropdownList:{type:Object}},Qn=le([de("superviz-who-is-online-dropdown")],Qn);f();f();function zE(r){if(typeof document!="undefined"){let t=document.createElement("style");t.id="superviz-style";let e=document.createTextNode(r);t.appendChild(e),document.head.appendChild(t)}}var GE=`@import"https://unpkg.com/@superviz/sv-icons@0.8.13/css/style.css";@import"https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap";:root{--sv-primary: 98, 16, 204}html,body{width:100%;height:100%;overflow:hidden}#sv-video-wrapper iframe{position:fixed;border:none;margin:0;padding:0;overflow:hidden;z-index:1000}#sv-video-wrapper iframe.sv-video-frame--right{top:var(--superviz-offset-top);right:var(--superviz-offset-right)}#sv-video-wrapper iframe.sv-video-frame--left{top:var(--superviz-offset-top);left:var(--superviz-offset-left)}#sv-video-wrapper iframe.sv-video-frame--bottom{bottom:var(--superviz-offset-bottom);right:var(--superviz-offset-right);width:100%}#sv-video-wrapper iframe.sv-video-frame--top{top:var(--superviz-offset-top);right:var(--superviz-offset-right);width:100%}#sv-video-wrapper iframe.sv-video-frame--no-overlay{display:none}.pointer-mouse{display:flex;height:17px;width:17px;background-image:url(https://production.cdn.superviz.com/static/pointers/0.svg)}.mouse-user-name{display:block;position:absolute;border-radius:30px;padding:2px 8px;font-weight:700;font-size:14px;font-family:Roboto,sans-serif;line-height:22px;margin-left:10px;margin-top:-6px;background:#ff0;white-space:nowrap}.mouse-follower{position:absolute;display:block;z-index:2;transition:all .15s linear,opacity 100s ease-in}
`;zE(GE);f();f();window&&(window.SuperVizRoom={init:th,CommentEvent:ic,MeetingEvent:As,DeviceEvent:np,RealtimeEvent:Zi,MeetingState:ec,MeetingConnectionStatus:Cs,MeetingControlsEvent:Os,ParticipantEvent:tc,FrameEvent:Ps,LayoutMode:Hc,VideoConference:da,MousePointers:pa,Realtime:fa,Comments:Bs,CanvasPin:Us,HTMLPin:Hs,WhoIsOnline:ma,FormElements:ga,ParticipantType:Is,LayoutPosition:ca,CamerasPosition:zc,RealtimeComponentState:Zc,RealtimeComponentEvent:Jc,ComponentLifeCycleEvent:vo,WhoIsOnlineEvent:rc});var IX=th;export{la as BrowserService,zc as CamerasPosition,Us as CanvasPin,ic as CommentEvent,Bs as Comments,vo as ComponentLifeCycleEvent,np as DeviceEvent,Yp as FieldEvents,ga as FormElements,Ps as FrameEvent,Hs as HTMLPin,Hc as LayoutMode,ca as LayoutPosition,Cs as MeetingConnectionStatus,Os as MeetingControlsEvent,As as MeetingEvent,ec as MeetingState,pa as MousePointers,xe as Observer,tc as ParticipantEvent,Is as ParticipantType,Ws as PinMode,ba as Presence3DManager,fa as Realtime,Jc as RealtimeComponentEvent,Zc as RealtimeComponentState,Zi as RealtimeEvent,nt as StoreType,da as VideoConference,ma as WhoIsOnline,rc as WhoIsOnlineEvent,IX as default};
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-element/lit-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/custom-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/property.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/state.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/event-options.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/base.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-all.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-async.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-nodes.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/repeat.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=index.js.map
